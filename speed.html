<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>RongCloud</title>
  <link rel="icon" type="image/png"
    href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABj1BMVEUAAAAAmf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf8Amf////+DuqFKAAAAg3RSTlMAAA8iKSQUBEfF4+nl0qdgGQEKvPzQYSCNnTgHtviZFQKYEDq0w7XB4Pv+pBEDV3NuSAWz2xwICyFkzP2GFoVdUdzneaLtQbD1egYfJxOupZHxTjLkPfqyadObbQ4w2lxKlD+vSZJah6EMLNjq+a1jcs+VG8SKfd4oTBdrcQmD8lWfztrZ8isAAAABYktHRIRi0FpxAAAAB3RJTUUH4AoRCB8qYHcPiQAAAYpJREFUOMvNkuk/AmEQx3fIESEJoeSWlLTuilKu1plb7uQIOXPf5h83u9vWFnnLvJrPM99n5jcHw/xDA8jKVuTk5gFkiucrCwpVRcUl6h8QKC0FTRkKpi2v0ED650pdVXWNHuNmqDWmJoG6ekRlQ2NTc0urqY0Ic7tFAMCa02HrtBuB7ULs7oHePlbTP+AwIzpdVqDEg0MmLSV0uFnPsNdnFT9Bz4gTcXSMAPW4Waw54ecmpzipKkzP0Nssx7BzkigMzMtEASwsIqoWmKVCxOWVVd8aESu9INccpGbXGRcF2jcANrcQvQo5ANukIshQJcMOkO2SY5f3DaEJSsrs0XuYB/ap8YMfgEMqcRQBOD4hx5+iUiwROkWMnp1fXPJ96GXjl0RyV3wkPopAOJEi0SZct8THQAkxNikRiUEBqG8WKRZ13N7xRe4FQjZqfln3bp/t4RGeDEScPE9FUpYla+tFxy/ZqYqlrTtJRF7fMGnfDoYI1hOLYsaTE7RNv398Zj5acT6WX8/+L+wLZgiKRBfFIE8AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTYtMTAtMTdUMDg6MzE6NDIrMDI6MDCCTwQ1AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE2LTEwLTE3VDA4OjMxOjQyKzAyOjAw8xK8iQAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAABXelRYdFJhdyBwcm9maWxlIHR5cGUgaXB0YwAAeJzj8gwIcVYoKMpPy8xJ5VIAAyMLLmMLEyMTS5MUAxMgRIA0w2QDI7NUIMvY1MjEzMQcxAfLgEigSi4A6hcRdPJCNZUAAAAASUVORK5CYII="
    sizes="32x32" />

  <style>
    html,
    body {
      margin: 0;
      padding: 0;
    }

    ul {
      margin: 0;
      padding: 0;
    }

    li {
      list-style: none;
    }

    .rong-container {
      position: absolute;
      width: 100%;
      top: 0;
      bottom: 0;
      font-size: 2.5rem;
      background: radial-gradient(ellipse at right bottom, #a5cff5 0%, #dae7f8 57%);
    }

    .rong-title {
      text-align: center;
    }

    .rong-source {
      margin-bottom: 1rem;
      padding: 1rem;
    }

    .rong-source:nth-child(odd) {
      border-bottom: 1px solid #CCC;
    }

    .rong-speed {
      line-height: 3rem;
      margin: 3rem 0;
    }

    .rong-speed-name {
      float: left;
      width: 30%;
      text-align: right;
      padding-right: 8%;
      box-sizing: border-box;
    }

    .rong-speed-time {
      display: inline-block;
      text-align: right;
      width: 0;
      max-width: 70%;
      transition: 1.5s;
    }

    .rong-timeout {
      font-size: 12px;
      width: 260px;
      display: inline-block;
      color: red;
    }
    .rong-speed:nth-child(1) .rong-speed-time {
      background-color: #1E88E5;
    }

    .rong-speed:nth-child(2) .rong-speed-time {
      background-color: #f44336;
    }

    .rong-speed:nth-child(3) .rong-speed-time {
      background-color: #FBC02D;
    }

    .rong-spinner {
      width: 150px;
      text-align: center;
    }

    .rong-bounce {
      width: 10px;
      height: 10px;
      background-color: #1E88E5;
      border-radius: 100%;
      display: inline-block;
      animation: bouncedelay 1.4s infinite ease-in-out;
      animation-fill-mode: both;
      position: relative;
    }

    .rong-spinner div:first-child {
      animation-delay: -0.32s;
    }

    .rong-spinner div:nth-child(2) {
      animation-delay: -0.16s;
    }

    @keyframes bouncedelay {

      0%,
      80%,
      100% {
        transform: scale(0.0);
      }

      40% {
        transform: scale(1.0);
      }
    }
  </style>
</head>

<body>
  <!-- <button onclick="start()">开始</button> -->

  <div class="rong-container" id="app">
    <h3 class="rong-title">融云海豹测速工具</h3>
    <ul class="rong-sources">
      <li class="rong-source" v-for="source in sources">
        <h4 class="rong-source-name">{{source.name}}</h4>
        <ul class="rong-speeds">
          <li class="rong-speed" v-for="speed in source.speeds">
            <span class="rong-speed-name">{{speed.name}}:</span>
            <span class="rong-speed-time" v-bind:style="{ width: speed.width + '%'}">
              <i v-if="speed.time > 0">{{speed.time}}s</i>
              <span v-else-if="speed.isTimeout" class="rong-timeout">请求 5s 内未响应，可切换网络后刷新重试</span>
              <div v-else class="rong-spinner">
                <div class="rong-bounce"></div>
                <div class="rong-bounce"></div>
                <div class="rong-bounce"></div>
              </div>
            </span>
          </li>
        </ul>
      </li>
    </ul>
  </div>
  <!-- Vue -->
  <script>
    /*!
    * Vue.js v2.6.11
    * (c) 2014-2019 Evan You
    * Released under the MIT License.
    */
    !function (e, t) { "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : (e = e || self).Vue = t() }(this, function () { "use strict"; var e = Object.freeze({}); function t(e) { return null == e } function n(e) { return null != e } function r(e) { return !0 === e } function i(e) { return "string" == typeof e || "number" == typeof e || "symbol" == typeof e || "boolean" == typeof e } function o(e) { return null !== e && "object" == typeof e } var a = Object.prototype.toString; function s(e) { return "[object Object]" === a.call(e) } function c(e) { var t = parseFloat(String(e)); return t >= 0 && Math.floor(t) === t && isFinite(e) } function u(e) { return n(e) && "function" == typeof e.then && "function" == typeof e.catch } function l(e) { return null == e ? "" : Array.isArray(e) || s(e) && e.toString === a ? JSON.stringify(e, null, 2) : String(e) } function f(e) { var t = parseFloat(e); return isNaN(t) ? e : t } function p(e, t) { for (var n = Object.create(null), r = e.split(","), i = 0; i < r.length; i++)n[r[i]] = !0; return t ? function (e) { return n[e.toLowerCase()] } : function (e) { return n[e] } } var d = p("slot,component", !0), v = p("key,ref,slot,slot-scope,is"); function h(e, t) { if (e.length) { var n = e.indexOf(t); if (n > -1) return e.splice(n, 1) } } var m = Object.prototype.hasOwnProperty; function y(e, t) { return m.call(e, t) } function g(e) { var t = Object.create(null); return function (n) { return t[n] || (t[n] = e(n)) } } var _ = /-(\w)/g, b = g(function (e) { return e.replace(_, function (e, t) { return t ? t.toUpperCase() : "" }) }), $ = g(function (e) { return e.charAt(0).toUpperCase() + e.slice(1) }), w = /\B([A-Z])/g, C = g(function (e) { return e.replace(w, "-$1").toLowerCase() }); var x = Function.prototype.bind ? function (e, t) { return e.bind(t) } : function (e, t) { function n(n) { var r = arguments.length; return r ? r > 1 ? e.apply(t, arguments) : e.call(t, n) : e.call(t) } return n._length = e.length, n }; function k(e, t) { t = t || 0; for (var n = e.length - t, r = new Array(n); n--;)r[n] = e[n + t]; return r } function A(e, t) { for (var n in t) e[n] = t[n]; return e } function O(e) { for (var t = {}, n = 0; n < e.length; n++)e[n] && A(t, e[n]); return t } function S(e, t, n) { } var T = function (e, t, n) { return !1 }, E = function (e) { return e }; function N(e, t) { if (e === t) return !0; var n = o(e), r = o(t); if (!n || !r) return !n && !r && String(e) === String(t); try { var i = Array.isArray(e), a = Array.isArray(t); if (i && a) return e.length === t.length && e.every(function (e, n) { return N(e, t[n]) }); if (e instanceof Date && t instanceof Date) return e.getTime() === t.getTime(); if (i || a) return !1; var s = Object.keys(e), c = Object.keys(t); return s.length === c.length && s.every(function (n) { return N(e[n], t[n]) }) } catch (e) { return !1 } } function j(e, t) { for (var n = 0; n < e.length; n++)if (N(e[n], t)) return n; return -1 } function D(e) { var t = !1; return function () { t || (t = !0, e.apply(this, arguments)) } } var L = "data-server-rendered", M = ["component", "directive", "filter"], I = ["beforeCreate", "created", "beforeMount", "mounted", "beforeUpdate", "updated", "beforeDestroy", "destroyed", "activated", "deactivated", "errorCaptured", "serverPrefetch"], F = { optionMergeStrategies: Object.create(null), silent: !1, productionTip: !1, devtools: !1, performance: !1, errorHandler: null, warnHandler: null, ignoredElements: [], keyCodes: Object.create(null), isReservedTag: T, isReservedAttr: T, isUnknownElement: T, getTagNamespace: S, parsePlatformTagName: E, mustUseProp: T, async: !0, _lifecycleHooks: I }, P = /a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/; function R(e, t, n, r) { Object.defineProperty(e, t, { value: n, enumerable: !!r, writable: !0, configurable: !0 }) } var H = new RegExp("[^" + P.source + ".$_\\d]"); var B, U = "__proto__" in {}, z = "undefined" != typeof window, V = "undefined" != typeof WXEnvironment && !!WXEnvironment.platform, K = V && WXEnvironment.platform.toLowerCase(), J = z && window.navigator.userAgent.toLowerCase(), q = J && /msie|trident/.test(J), W = J && J.indexOf("msie 9.0") > 0, Z = J && J.indexOf("edge/") > 0, G = (J && J.indexOf("android"), J && /iphone|ipad|ipod|ios/.test(J) || "ios" === K), X = (J && /chrome\/\d+/.test(J), J && /phantomjs/.test(J), J && J.match(/firefox\/(\d+)/)), Y = {}.watch, Q = !1; if (z) try { var ee = {}; Object.defineProperty(ee, "passive", { get: function () { Q = !0 } }), window.addEventListener("test-passive", null, ee) } catch (e) { } var te = function () { return void 0 === B && (B = !z && !V && "undefined" != typeof global && (global.process && "server" === global.process.env.VUE_ENV)), B }, ne = z && window.__VUE_DEVTOOLS_GLOBAL_HOOK__; function re(e) { return "function" == typeof e && /native code/.test(e.toString()) } var ie, oe = "undefined" != typeof Symbol && re(Symbol) && "undefined" != typeof Reflect && re(Reflect.ownKeys); ie = "undefined" != typeof Set && re(Set) ? Set : function () { function e() { this.set = Object.create(null) } return e.prototype.has = function (e) { return !0 === this.set[e] }, e.prototype.add = function (e) { this.set[e] = !0 }, e.prototype.clear = function () { this.set = Object.create(null) }, e }(); var ae = S, se = 0, ce = function () { this.id = se++, this.subs = [] }; ce.prototype.addSub = function (e) { this.subs.push(e) }, ce.prototype.removeSub = function (e) { h(this.subs, e) }, ce.prototype.depend = function () { ce.target && ce.target.addDep(this) }, ce.prototype.notify = function () { for (var e = this.subs.slice(), t = 0, n = e.length; t < n; t++)e[t].update() }, ce.target = null; var ue = []; function le(e) { ue.push(e), ce.target = e } function fe() { ue.pop(), ce.target = ue[ue.length - 1] } var pe = function (e, t, n, r, i, o, a, s) { this.tag = e, this.data = t, this.children = n, this.text = r, this.elm = i, this.ns = void 0, this.context = o, this.fnContext = void 0, this.fnOptions = void 0, this.fnScopeId = void 0, this.key = t && t.key, this.componentOptions = a, this.componentInstance = void 0, this.parent = void 0, this.raw = !1, this.isStatic = !1, this.isRootInsert = !0, this.isComment = !1, this.isCloned = !1, this.isOnce = !1, this.asyncFactory = s, this.asyncMeta = void 0, this.isAsyncPlaceholder = !1 }, de = { child: { configurable: !0 } }; de.child.get = function () { return this.componentInstance }, Object.defineProperties(pe.prototype, de); var ve = function (e) { void 0 === e && (e = ""); var t = new pe; return t.text = e, t.isComment = !0, t }; function he(e) { return new pe(void 0, void 0, void 0, String(e)) } function me(e) { var t = new pe(e.tag, e.data, e.children && e.children.slice(), e.text, e.elm, e.context, e.componentOptions, e.asyncFactory); return t.ns = e.ns, t.isStatic = e.isStatic, t.key = e.key, t.isComment = e.isComment, t.fnContext = e.fnContext, t.fnOptions = e.fnOptions, t.fnScopeId = e.fnScopeId, t.asyncMeta = e.asyncMeta, t.isCloned = !0, t } var ye = Array.prototype, ge = Object.create(ye);["push", "pop", "shift", "unshift", "splice", "sort", "reverse"].forEach(function (e) { var t = ye[e]; R(ge, e, function () { for (var n = [], r = arguments.length; r--;)n[r] = arguments[r]; var i, o = t.apply(this, n), a = this.__ob__; switch (e) { case "push": case "unshift": i = n; break; case "splice": i = n.slice(2) }return i && a.observeArray(i), a.dep.notify(), o }) }); var _e = Object.getOwnPropertyNames(ge), be = !0; function $e(e) { be = e } var we = function (e) { var t; this.value = e, this.dep = new ce, this.vmCount = 0, R(e, "__ob__", this), Array.isArray(e) ? (U ? (t = ge, e.__proto__ = t) : function (e, t, n) { for (var r = 0, i = n.length; r < i; r++) { var o = n[r]; R(e, o, t[o]) } }(e, ge, _e), this.observeArray(e)) : this.walk(e) }; function Ce(e, t) { var n; if (o(e) && !(e instanceof pe)) return y(e, "__ob__") && e.__ob__ instanceof we ? n = e.__ob__ : be && !te() && (Array.isArray(e) || s(e)) && Object.isExtensible(e) && !e._isVue && (n = new we(e)), t && n && n.vmCount++, n } function xe(e, t, n, r, i) { var o = new ce, a = Object.getOwnPropertyDescriptor(e, t); if (!a || !1 !== a.configurable) { var s = a && a.get, c = a && a.set; s && !c || 2 !== arguments.length || (n = e[t]); var u = !i && Ce(n); Object.defineProperty(e, t, { enumerable: !0, configurable: !0, get: function () { var t = s ? s.call(e) : n; return ce.target && (o.depend(), u && (u.dep.depend(), Array.isArray(t) && function e(t) { for (var n = void 0, r = 0, i = t.length; r < i; r++)(n = t[r]) && n.__ob__ && n.__ob__.dep.depend(), Array.isArray(n) && e(n) }(t))), t }, set: function (t) { var r = s ? s.call(e) : n; t === r || t != t && r != r || s && !c || (c ? c.call(e, t) : n = t, u = !i && Ce(t), o.notify()) } }) } } function ke(e, t, n) { if (Array.isArray(e) && c(t)) return e.length = Math.max(e.length, t), e.splice(t, 1, n), n; if (t in e && !(t in Object.prototype)) return e[t] = n, n; var r = e.__ob__; return e._isVue || r && r.vmCount ? n : r ? (xe(r.value, t, n), r.dep.notify(), n) : (e[t] = n, n) } function Ae(e, t) { if (Array.isArray(e) && c(t)) e.splice(t, 1); else { var n = e.__ob__; e._isVue || n && n.vmCount || y(e, t) && (delete e[t], n && n.dep.notify()) } } we.prototype.walk = function (e) { for (var t = Object.keys(e), n = 0; n < t.length; n++)xe(e, t[n]) }, we.prototype.observeArray = function (e) { for (var t = 0, n = e.length; t < n; t++)Ce(e[t]) }; var Oe = F.optionMergeStrategies; function Se(e, t) { if (!t) return e; for (var n, r, i, o = oe ? Reflect.ownKeys(t) : Object.keys(t), a = 0; a < o.length; a++)"__ob__" !== (n = o[a]) && (r = e[n], i = t[n], y(e, n) ? r !== i && s(r) && s(i) && Se(r, i) : ke(e, n, i)); return e } function Te(e, t, n) { return n ? function () { var r = "function" == typeof t ? t.call(n, n) : t, i = "function" == typeof e ? e.call(n, n) : e; return r ? Se(r, i) : i } : t ? e ? function () { return Se("function" == typeof t ? t.call(this, this) : t, "function" == typeof e ? e.call(this, this) : e) } : t : e } function Ee(e, t) { var n = t ? e ? e.concat(t) : Array.isArray(t) ? t : [t] : e; return n ? function (e) { for (var t = [], n = 0; n < e.length; n++)-1 === t.indexOf(e[n]) && t.push(e[n]); return t }(n) : n } function Ne(e, t, n, r) { var i = Object.create(e || null); return t ? A(i, t) : i } Oe.data = function (e, t, n) { return n ? Te(e, t, n) : t && "function" != typeof t ? e : Te(e, t) }, I.forEach(function (e) { Oe[e] = Ee }), M.forEach(function (e) { Oe[e + "s"] = Ne }), Oe.watch = function (e, t, n, r) { if (e === Y && (e = void 0), t === Y && (t = void 0), !t) return Object.create(e || null); if (!e) return t; var i = {}; for (var o in A(i, e), t) { var a = i[o], s = t[o]; a && !Array.isArray(a) && (a = [a]), i[o] = a ? a.concat(s) : Array.isArray(s) ? s : [s] } return i }, Oe.props = Oe.methods = Oe.inject = Oe.computed = function (e, t, n, r) { if (!e) return t; var i = Object.create(null); return A(i, e), t && A(i, t), i }, Oe.provide = Te; var je = function (e, t) { return void 0 === t ? e : t }; function De(e, t, n) { if ("function" == typeof t && (t = t.options), function (e, t) { var n = e.props; if (n) { var r, i, o = {}; if (Array.isArray(n)) for (r = n.length; r--;)"string" == typeof (i = n[r]) && (o[b(i)] = { type: null }); else if (s(n)) for (var a in n) i = n[a], o[b(a)] = s(i) ? i : { type: i }; e.props = o } }(t), function (e, t) { var n = e.inject; if (n) { var r = e.inject = {}; if (Array.isArray(n)) for (var i = 0; i < n.length; i++)r[n[i]] = { from: n[i] }; else if (s(n)) for (var o in n) { var a = n[o]; r[o] = s(a) ? A({ from: o }, a) : { from: a } } } }(t), function (e) { var t = e.directives; if (t) for (var n in t) { var r = t[n]; "function" == typeof r && (t[n] = { bind: r, update: r }) } }(t), !t._base && (t.extends && (e = De(e, t.extends, n)), t.mixins)) for (var r = 0, i = t.mixins.length; r < i; r++)e = De(e, t.mixins[r], n); var o, a = {}; for (o in e) c(o); for (o in t) y(e, o) || c(o); function c(r) { var i = Oe[r] || je; a[r] = i(e[r], t[r], n, r) } return a } function Le(e, t, n, r) { if ("string" == typeof n) { var i = e[t]; if (y(i, n)) return i[n]; var o = b(n); if (y(i, o)) return i[o]; var a = $(o); return y(i, a) ? i[a] : i[n] || i[o] || i[a] } } function Me(e, t, n, r) { var i = t[e], o = !y(n, e), a = n[e], s = Pe(Boolean, i.type); if (s > -1) if (o && !y(i, "default")) a = !1; else if ("" === a || a === C(e)) { var c = Pe(String, i.type); (c < 0 || s < c) && (a = !0) } if (void 0 === a) { a = function (e, t, n) { if (!y(t, "default")) return; var r = t.default; if (e && e.$options.propsData && void 0 === e.$options.propsData[n] && void 0 !== e._props[n]) return e._props[n]; return "function" == typeof r && "Function" !== Ie(t.type) ? r.call(e) : r }(r, i, e); var u = be; $e(!0), Ce(a), $e(u) } return a } function Ie(e) { var t = e && e.toString().match(/^\s*function (\w+)/); return t ? t[1] : "" } function Fe(e, t) { return Ie(e) === Ie(t) } function Pe(e, t) { if (!Array.isArray(t)) return Fe(t, e) ? 0 : -1; for (var n = 0, r = t.length; n < r; n++)if (Fe(t[n], e)) return n; return -1 } function Re(e, t, n) { le(); try { if (t) for (var r = t; r = r.$parent;) { var i = r.$options.errorCaptured; if (i) for (var o = 0; o < i.length; o++)try { if (!1 === i[o].call(r, e, t, n)) return } catch (e) { Be(e, r, "errorCaptured hook") } } Be(e, t, n) } finally { fe() } } function He(e, t, n, r, i) { var o; try { (o = n ? e.apply(t, n) : e.call(t)) && !o._isVue && u(o) && !o._handled && (o.catch(function (e) { return Re(e, r, i + " (Promise/async)") }), o._handled = !0) } catch (e) { Re(e, r, i) } return o } function Be(e, t, n) { if (F.errorHandler) try { return F.errorHandler.call(null, e, t, n) } catch (t) { t !== e && Ue(t, null, "config.errorHandler") } Ue(e, t, n) } function Ue(e, t, n) { if (!z && !V || "undefined" == typeof console) throw e; console.error(e) } var ze, Ve = !1, Ke = [], Je = !1; function qe() { Je = !1; var e = Ke.slice(0); Ke.length = 0; for (var t = 0; t < e.length; t++)e[t]() } if ("undefined" != typeof Promise && re(Promise)) { var We = Promise.resolve(); ze = function () { We.then(qe), G && setTimeout(S) }, Ve = !0 } else if (q || "undefined" == typeof MutationObserver || !re(MutationObserver) && "[object MutationObserverConstructor]" !== MutationObserver.toString()) ze = "undefined" != typeof setImmediate && re(setImmediate) ? function () { setImmediate(qe) } : function () { setTimeout(qe, 0) }; else { var Ze = 1, Ge = new MutationObserver(qe), Xe = document.createTextNode(String(Ze)); Ge.observe(Xe, { characterData: !0 }), ze = function () { Ze = (Ze + 1) % 2, Xe.data = String(Ze) }, Ve = !0 } function Ye(e, t) { var n; if (Ke.push(function () { if (e) try { e.call(t) } catch (e) { Re(e, t, "nextTick") } else n && n(t) }), Je || (Je = !0, ze()), !e && "undefined" != typeof Promise) return new Promise(function (e) { n = e }) } var Qe = new ie; function et(e) { !function e(t, n) { var r, i; var a = Array.isArray(t); if (!a && !o(t) || Object.isFrozen(t) || t instanceof pe) return; if (t.__ob__) { var s = t.__ob__.dep.id; if (n.has(s)) return; n.add(s) } if (a) for (r = t.length; r--;)e(t[r], n); else for (i = Object.keys(t), r = i.length; r--;)e(t[i[r]], n) }(e, Qe), Qe.clear() } var tt = g(function (e) { var t = "&" === e.charAt(0), n = "~" === (e = t ? e.slice(1) : e).charAt(0), r = "!" === (e = n ? e.slice(1) : e).charAt(0); return { name: e = r ? e.slice(1) : e, once: n, capture: r, passive: t } }); function nt(e, t) { function n() { var e = arguments, r = n.fns; if (!Array.isArray(r)) return He(r, null, arguments, t, "v-on handler"); for (var i = r.slice(), o = 0; o < i.length; o++)He(i[o], null, e, t, "v-on handler") } return n.fns = e, n } function rt(e, n, i, o, a, s) { var c, u, l, f; for (c in e) u = e[c], l = n[c], f = tt(c), t(u) || (t(l) ? (t(u.fns) && (u = e[c] = nt(u, s)), r(f.once) && (u = e[c] = a(f.name, u, f.capture)), i(f.name, u, f.capture, f.passive, f.params)) : u !== l && (l.fns = u, e[c] = l)); for (c in n) t(e[c]) && o((f = tt(c)).name, n[c], f.capture) } function it(e, i, o) { var a; e instanceof pe && (e = e.data.hook || (e.data.hook = {})); var s = e[i]; function c() { o.apply(this, arguments), h(a.fns, c) } t(s) ? a = nt([c]) : n(s.fns) && r(s.merged) ? (a = s).fns.push(c) : a = nt([s, c]), a.merged = !0, e[i] = a } function ot(e, t, r, i, o) { if (n(t)) { if (y(t, r)) return e[r] = t[r], o || delete t[r], !0; if (y(t, i)) return e[r] = t[i], o || delete t[i], !0 } return !1 } function at(e) { return i(e) ? [he(e)] : Array.isArray(e) ? function e(o, a) { var s = []; var c, u, l, f; for (c = 0; c < o.length; c++)t(u = o[c]) || "boolean" == typeof u || (l = s.length - 1, f = s[l], Array.isArray(u) ? u.length > 0 && (st((u = e(u, (a || "") + "_" + c))[0]) && st(f) && (s[l] = he(f.text + u[0].text), u.shift()), s.push.apply(s, u)) : i(u) ? st(f) ? s[l] = he(f.text + u) : "" !== u && s.push(he(u)) : st(u) && st(f) ? s[l] = he(f.text + u.text) : (r(o._isVList) && n(u.tag) && t(u.key) && n(a) && (u.key = "__vlist" + a + "_" + c + "__"), s.push(u))); return s }(e) : void 0 } function st(e) { return n(e) && n(e.text) && !1 === e.isComment } function ct(e, t) { if (e) { for (var n = Object.create(null), r = oe ? Reflect.ownKeys(e) : Object.keys(e), i = 0; i < r.length; i++) { var o = r[i]; if ("__ob__" !== o) { for (var a = e[o].from, s = t; s;) { if (s._provided && y(s._provided, a)) { n[o] = s._provided[a]; break } s = s.$parent } if (!s && "default" in e[o]) { var c = e[o].default; n[o] = "function" == typeof c ? c.call(t) : c } } } return n } } function ut(e, t) { if (!e || !e.length) return {}; for (var n = {}, r = 0, i = e.length; r < i; r++) { var o = e[r], a = o.data; if (a && a.attrs && a.attrs.slot && delete a.attrs.slot, o.context !== t && o.fnContext !== t || !a || null == a.slot) (n.default || (n.default = [])).push(o); else { var s = a.slot, c = n[s] || (n[s] = []); "template" === o.tag ? c.push.apply(c, o.children || []) : c.push(o) } } for (var u in n) n[u].every(lt) && delete n[u]; return n } function lt(e) { return e.isComment && !e.asyncFactory || " " === e.text } function ft(t, n, r) { var i, o = Object.keys(n).length > 0, a = t ? !!t.$stable : !o, s = t && t.$key; if (t) { if (t._normalized) return t._normalized; if (a && r && r !== e && s === r.$key && !o && !r.$hasNormal) return r; for (var c in i = {}, t) t[c] && "$" !== c[0] && (i[c] = pt(n, c, t[c])) } else i = {}; for (var u in n) u in i || (i[u] = dt(n, u)); return t && Object.isExtensible(t) && (t._normalized = i), R(i, "$stable", a), R(i, "$key", s), R(i, "$hasNormal", o), i } function pt(e, t, n) { var r = function () { var e = arguments.length ? n.apply(null, arguments) : n({}); return (e = e && "object" == typeof e && !Array.isArray(e) ? [e] : at(e)) && (0 === e.length || 1 === e.length && e[0].isComment) ? void 0 : e }; return n.proxy && Object.defineProperty(e, t, { get: r, enumerable: !0, configurable: !0 }), r } function dt(e, t) { return function () { return e[t] } } function vt(e, t) { var r, i, a, s, c; if (Array.isArray(e) || "string" == typeof e) for (r = new Array(e.length), i = 0, a = e.length; i < a; i++)r[i] = t(e[i], i); else if ("number" == typeof e) for (r = new Array(e), i = 0; i < e; i++)r[i] = t(i + 1, i); else if (o(e)) if (oe && e[Symbol.iterator]) { r = []; for (var u = e[Symbol.iterator](), l = u.next(); !l.done;)r.push(t(l.value, r.length)), l = u.next() } else for (s = Object.keys(e), r = new Array(s.length), i = 0, a = s.length; i < a; i++)c = s[i], r[i] = t(e[c], c, i); return n(r) || (r = []), r._isVList = !0, r } function ht(e, t, n, r) { var i, o = this.$scopedSlots[e]; o ? (n = n || {}, r && (n = A(A({}, r), n)), i = o(n) || t) : i = this.$slots[e] || t; var a = n && n.slot; return a ? this.$createElement("template", { slot: a }, i) : i } function mt(e) { return Le(this.$options, "filters", e) || E } function yt(e, t) { return Array.isArray(e) ? -1 === e.indexOf(t) : e !== t } function gt(e, t, n, r, i) { var o = F.keyCodes[t] || n; return i && r && !F.keyCodes[t] ? yt(i, r) : o ? yt(o, e) : r ? C(r) !== t : void 0 } function _t(e, t, n, r, i) { if (n) if (o(n)) { var a; Array.isArray(n) && (n = O(n)); var s = function (o) { if ("class" === o || "style" === o || v(o)) a = e; else { var s = e.attrs && e.attrs.type; a = r || F.mustUseProp(t, s, o) ? e.domProps || (e.domProps = {}) : e.attrs || (e.attrs = {}) } var c = b(o), u = C(o); c in a || u in a || (a[o] = n[o], i && ((e.on || (e.on = {}))["update:" + o] = function (e) { n[o] = e })) }; for (var c in n) s(c) } else; return e } function bt(e, t) { var n = this._staticTrees || (this._staticTrees = []), r = n[e]; return r && !t ? r : (wt(r = n[e] = this.$options.staticRenderFns[e].call(this._renderProxy, null, this), "__static__" + e, !1), r) } function $t(e, t, n) { return wt(e, "__once__" + t + (n ? "_" + n : ""), !0), e } function wt(e, t, n) { if (Array.isArray(e)) for (var r = 0; r < e.length; r++)e[r] && "string" != typeof e[r] && Ct(e[r], t + "_" + r, n); else Ct(e, t, n) } function Ct(e, t, n) { e.isStatic = !0, e.key = t, e.isOnce = n } function xt(e, t) { if (t) if (s(t)) { var n = e.on = e.on ? A({}, e.on) : {}; for (var r in t) { var i = n[r], o = t[r]; n[r] = i ? [].concat(i, o) : o } } else; return e } function kt(e, t, n, r) { t = t || { $stable: !n }; for (var i = 0; i < e.length; i++) { var o = e[i]; Array.isArray(o) ? kt(o, t, n) : o && (o.proxy && (o.fn.proxy = !0), t[o.key] = o.fn) } return r && (t.$key = r), t } function At(e, t) { for (var n = 0; n < t.length; n += 2) { var r = t[n]; "string" == typeof r && r && (e[t[n]] = t[n + 1]) } return e } function Ot(e, t) { return "string" == typeof e ? t + e : e } function St(e) { e._o = $t, e._n = f, e._s = l, e._l = vt, e._t = ht, e._q = N, e._i = j, e._m = bt, e._f = mt, e._k = gt, e._b = _t, e._v = he, e._e = ve, e._u = kt, e._g = xt, e._d = At, e._p = Ot } function Tt(t, n, i, o, a) { var s, c = this, u = a.options; y(o, "_uid") ? (s = Object.create(o))._original = o : (s = o, o = o._original); var l = r(u._compiled), f = !l; this.data = t, this.props = n, this.children = i, this.parent = o, this.listeners = t.on || e, this.injections = ct(u.inject, o), this.slots = function () { return c.$slots || ft(t.scopedSlots, c.$slots = ut(i, o)), c.$slots }, Object.defineProperty(this, "scopedSlots", { enumerable: !0, get: function () { return ft(t.scopedSlots, this.slots()) } }), l && (this.$options = u, this.$slots = this.slots(), this.$scopedSlots = ft(t.scopedSlots, this.$slots)), u._scopeId ? this._c = function (e, t, n, r) { var i = Pt(s, e, t, n, r, f); return i && !Array.isArray(i) && (i.fnScopeId = u._scopeId, i.fnContext = o), i } : this._c = function (e, t, n, r) { return Pt(s, e, t, n, r, f) } } function Et(e, t, n, r, i) { var o = me(e); return o.fnContext = n, o.fnOptions = r, t.slot && ((o.data || (o.data = {})).slot = t.slot), o } function Nt(e, t) { for (var n in t) e[b(n)] = t[n] } St(Tt.prototype); var jt = { init: function (e, t) { if (e.componentInstance && !e.componentInstance._isDestroyed && e.data.keepAlive) { var r = e; jt.prepatch(r, r) } else { (e.componentInstance = function (e, t) { var r = { _isComponent: !0, _parentVnode: e, parent: t }, i = e.data.inlineTemplate; n(i) && (r.render = i.render, r.staticRenderFns = i.staticRenderFns); return new e.componentOptions.Ctor(r) }(e, Wt)).$mount(t ? e.elm : void 0, t) } }, prepatch: function (t, n) { var r = n.componentOptions; !function (t, n, r, i, o) { var a = i.data.scopedSlots, s = t.$scopedSlots, c = !!(a && !a.$stable || s !== e && !s.$stable || a && t.$scopedSlots.$key !== a.$key), u = !!(o || t.$options._renderChildren || c); t.$options._parentVnode = i, t.$vnode = i, t._vnode && (t._vnode.parent = i); if (t.$options._renderChildren = o, t.$attrs = i.data.attrs || e, t.$listeners = r || e, n && t.$options.props) { $e(!1); for (var l = t._props, f = t.$options._propKeys || [], p = 0; p < f.length; p++) { var d = f[p], v = t.$options.props; l[d] = Me(d, v, n, t) } $e(!0), t.$options.propsData = n } r = r || e; var h = t.$options._parentListeners; t.$options._parentListeners = r, qt(t, r, h), u && (t.$slots = ut(o, i.context), t.$forceUpdate()) }(n.componentInstance = t.componentInstance, r.propsData, r.listeners, n, r.children) }, insert: function (e) { var t, n = e.context, r = e.componentInstance; r._isMounted || (r._isMounted = !0, Yt(r, "mounted")), e.data.keepAlive && (n._isMounted ? ((t = r)._inactive = !1, en.push(t)) : Xt(r, !0)) }, destroy: function (e) { var t = e.componentInstance; t._isDestroyed || (e.data.keepAlive ? function e(t, n) { if (n && (t._directInactive = !0, Gt(t))) return; if (!t._inactive) { t._inactive = !0; for (var r = 0; r < t.$children.length; r++)e(t.$children[r]); Yt(t, "deactivated") } }(t, !0) : t.$destroy()) } }, Dt = Object.keys(jt); function Lt(i, a, s, c, l) { if (!t(i)) { var f = s.$options._base; if (o(i) && (i = f.extend(i)), "function" == typeof i) { var p; if (t(i.cid) && void 0 === (i = function (e, i) { if (r(e.error) && n(e.errorComp)) return e.errorComp; if (n(e.resolved)) return e.resolved; var a = Ht; a && n(e.owners) && -1 === e.owners.indexOf(a) && e.owners.push(a); if (r(e.loading) && n(e.loadingComp)) return e.loadingComp; if (a && !n(e.owners)) { var s = e.owners = [a], c = !0, l = null, f = null; a.$on("hook:destroyed", function () { return h(s, a) }); var p = function (e) { for (var t = 0, n = s.length; t < n; t++)s[t].$forceUpdate(); e && (s.length = 0, null !== l && (clearTimeout(l), l = null), null !== f && (clearTimeout(f), f = null)) }, d = D(function (t) { e.resolved = Bt(t, i), c ? s.length = 0 : p(!0) }), v = D(function (t) { n(e.errorComp) && (e.error = !0, p(!0)) }), m = e(d, v); return o(m) && (u(m) ? t(e.resolved) && m.then(d, v) : u(m.component) && (m.component.then(d, v), n(m.error) && (e.errorComp = Bt(m.error, i)), n(m.loading) && (e.loadingComp = Bt(m.loading, i), 0 === m.delay ? e.loading = !0 : l = setTimeout(function () { l = null, t(e.resolved) && t(e.error) && (e.loading = !0, p(!1)) }, m.delay || 200)), n(m.timeout) && (f = setTimeout(function () { f = null, t(e.resolved) && v(null) }, m.timeout)))), c = !1, e.loading ? e.loadingComp : e.resolved } }(p = i, f))) return function (e, t, n, r, i) { var o = ve(); return o.asyncFactory = e, o.asyncMeta = { data: t, context: n, children: r, tag: i }, o }(p, a, s, c, l); a = a || {}, $n(i), n(a.model) && function (e, t) { var r = e.model && e.model.prop || "value", i = e.model && e.model.event || "input"; (t.attrs || (t.attrs = {}))[r] = t.model.value; var o = t.on || (t.on = {}), a = o[i], s = t.model.callback; n(a) ? (Array.isArray(a) ? -1 === a.indexOf(s) : a !== s) && (o[i] = [s].concat(a)) : o[i] = s }(i.options, a); var d = function (e, r, i) { var o = r.options.props; if (!t(o)) { var a = {}, s = e.attrs, c = e.props; if (n(s) || n(c)) for (var u in o) { var l = C(u); ot(a, c, u, l, !0) || ot(a, s, u, l, !1) } return a } }(a, i); if (r(i.options.functional)) return function (t, r, i, o, a) { var s = t.options, c = {}, u = s.props; if (n(u)) for (var l in u) c[l] = Me(l, u, r || e); else n(i.attrs) && Nt(c, i.attrs), n(i.props) && Nt(c, i.props); var f = new Tt(i, c, a, o, t), p = s.render.call(null, f._c, f); if (p instanceof pe) return Et(p, i, f.parent, s); if (Array.isArray(p)) { for (var d = at(p) || [], v = new Array(d.length), h = 0; h < d.length; h++)v[h] = Et(d[h], i, f.parent, s); return v } }(i, d, a, s, c); var v = a.on; if (a.on = a.nativeOn, r(i.options.abstract)) { var m = a.slot; a = {}, m && (a.slot = m) } !function (e) { for (var t = e.hook || (e.hook = {}), n = 0; n < Dt.length; n++) { var r = Dt[n], i = t[r], o = jt[r]; i === o || i && i._merged || (t[r] = i ? Mt(o, i) : o) } }(a); var y = i.options.name || l; return new pe("vue-component-" + i.cid + (y ? "-" + y : ""), a, void 0, void 0, void 0, s, { Ctor: i, propsData: d, listeners: v, tag: l, children: c }, p) } } } function Mt(e, t) { var n = function (n, r) { e(n, r), t(n, r) }; return n._merged = !0, n } var It = 1, Ft = 2; function Pt(e, a, s, c, u, l) { return (Array.isArray(s) || i(s)) && (u = c, c = s, s = void 0), r(l) && (u = Ft), function (e, i, a, s, c) { if (n(a) && n(a.__ob__)) return ve(); n(a) && n(a.is) && (i = a.is); if (!i) return ve(); Array.isArray(s) && "function" == typeof s[0] && ((a = a || {}).scopedSlots = { default: s[0] }, s.length = 0); c === Ft ? s = at(s) : c === It && (s = function (e) { for (var t = 0; t < e.length; t++)if (Array.isArray(e[t])) return Array.prototype.concat.apply([], e); return e }(s)); var u, l; if ("string" == typeof i) { var f; l = e.$vnode && e.$vnode.ns || F.getTagNamespace(i), u = F.isReservedTag(i) ? new pe(F.parsePlatformTagName(i), a, s, void 0, void 0, e) : a && a.pre || !n(f = Le(e.$options, "components", i)) ? new pe(i, a, s, void 0, void 0, e) : Lt(f, a, e, s, i) } else u = Lt(i, a, e, s); return Array.isArray(u) ? u : n(u) ? (n(l) && function e(i, o, a) { i.ns = o; "foreignObject" === i.tag && (o = void 0, a = !0); if (n(i.children)) for (var s = 0, c = i.children.length; s < c; s++) { var u = i.children[s]; n(u.tag) && (t(u.ns) || r(a) && "svg" !== u.tag) && e(u, o, a) } }(u, l), n(a) && function (e) { o(e.style) && et(e.style); o(e.class) && et(e.class) }(a), u) : ve() }(e, a, s, c, u) } var Rt, Ht = null; function Bt(e, t) { return (e.__esModule || oe && "Module" === e[Symbol.toStringTag]) && (e = e.default), o(e) ? t.extend(e) : e } function Ut(e) { return e.isComment && e.asyncFactory } function zt(e) { if (Array.isArray(e)) for (var t = 0; t < e.length; t++) { var r = e[t]; if (n(r) && (n(r.componentOptions) || Ut(r))) return r } } function Vt(e, t) { Rt.$on(e, t) } function Kt(e, t) { Rt.$off(e, t) } function Jt(e, t) { var n = Rt; return function r() { null !== t.apply(null, arguments) && n.$off(e, r) } } function qt(e, t, n) { Rt = e, rt(t, n || {}, Vt, Kt, Jt, e), Rt = void 0 } var Wt = null; function Zt(e) { var t = Wt; return Wt = e, function () { Wt = t } } function Gt(e) { for (; e && (e = e.$parent);)if (e._inactive) return !0; return !1 } function Xt(e, t) { if (t) { if (e._directInactive = !1, Gt(e)) return } else if (e._directInactive) return; if (e._inactive || null === e._inactive) { e._inactive = !1; for (var n = 0; n < e.$children.length; n++)Xt(e.$children[n]); Yt(e, "activated") } } function Yt(e, t) { le(); var n = e.$options[t], r = t + " hook"; if (n) for (var i = 0, o = n.length; i < o; i++)He(n[i], e, null, e, r); e._hasHookEvent && e.$emit("hook:" + t), fe() } var Qt = [], en = [], tn = {}, nn = !1, rn = !1, on = 0; var an = 0, sn = Date.now; if (z && !q) { var cn = window.performance; cn && "function" == typeof cn.now && sn() > document.createEvent("Event").timeStamp && (sn = function () { return cn.now() }) } function un() { var e, t; for (an = sn(), rn = !0, Qt.sort(function (e, t) { return e.id - t.id }), on = 0; on < Qt.length; on++)(e = Qt[on]).before && e.before(), t = e.id, tn[t] = null, e.run(); var n = en.slice(), r = Qt.slice(); on = Qt.length = en.length = 0, tn = {}, nn = rn = !1, function (e) { for (var t = 0; t < e.length; t++)e[t]._inactive = !0, Xt(e[t], !0) }(n), function (e) { var t = e.length; for (; t--;) { var n = e[t], r = n.vm; r._watcher === n && r._isMounted && !r._isDestroyed && Yt(r, "updated") } }(r), ne && F.devtools && ne.emit("flush") } var ln = 0, fn = function (e, t, n, r, i) { this.vm = e, i && (e._watcher = this), e._watchers.push(this), r ? (this.deep = !!r.deep, this.user = !!r.user, this.lazy = !!r.lazy, this.sync = !!r.sync, this.before = r.before) : this.deep = this.user = this.lazy = this.sync = !1, this.cb = n, this.id = ++ln, this.active = !0, this.dirty = this.lazy, this.deps = [], this.newDeps = [], this.depIds = new ie, this.newDepIds = new ie, this.expression = "", "function" == typeof t ? this.getter = t : (this.getter = function (e) { if (!H.test(e)) { var t = e.split("."); return function (e) { for (var n = 0; n < t.length; n++) { if (!e) return; e = e[t[n]] } return e } } }(t), this.getter || (this.getter = S)), this.value = this.lazy ? void 0 : this.get() }; fn.prototype.get = function () { var e; le(this); var t = this.vm; try { e = this.getter.call(t, t) } catch (e) { if (!this.user) throw e; Re(e, t, 'getter for watcher "' + this.expression + '"') } finally { this.deep && et(e), fe(), this.cleanupDeps() } return e }, fn.prototype.addDep = function (e) { var t = e.id; this.newDepIds.has(t) || (this.newDepIds.add(t), this.newDeps.push(e), this.depIds.has(t) || e.addSub(this)) }, fn.prototype.cleanupDeps = function () { for (var e = this.deps.length; e--;) { var t = this.deps[e]; this.newDepIds.has(t.id) || t.removeSub(this) } var n = this.depIds; this.depIds = this.newDepIds, this.newDepIds = n, this.newDepIds.clear(), n = this.deps, this.deps = this.newDeps, this.newDeps = n, this.newDeps.length = 0 }, fn.prototype.update = function () { this.lazy ? this.dirty = !0 : this.sync ? this.run() : function (e) { var t = e.id; if (null == tn[t]) { if (tn[t] = !0, rn) { for (var n = Qt.length - 1; n > on && Qt[n].id > e.id;)n--; Qt.splice(n + 1, 0, e) } else Qt.push(e); nn || (nn = !0, Ye(un)) } }(this) }, fn.prototype.run = function () { if (this.active) { var e = this.get(); if (e !== this.value || o(e) || this.deep) { var t = this.value; if (this.value = e, this.user) try { this.cb.call(this.vm, e, t) } catch (e) { Re(e, this.vm, 'callback for watcher "' + this.expression + '"') } else this.cb.call(this.vm, e, t) } } }, fn.prototype.evaluate = function () { this.value = this.get(), this.dirty = !1 }, fn.prototype.depend = function () { for (var e = this.deps.length; e--;)this.deps[e].depend() }, fn.prototype.teardown = function () { if (this.active) { this.vm._isBeingDestroyed || h(this.vm._watchers, this); for (var e = this.deps.length; e--;)this.deps[e].removeSub(this); this.active = !1 } }; var pn = { enumerable: !0, configurable: !0, get: S, set: S }; function dn(e, t, n) { pn.get = function () { return this[t][n] }, pn.set = function (e) { this[t][n] = e }, Object.defineProperty(e, n, pn) } function vn(e) { e._watchers = []; var t = e.$options; t.props && function (e, t) { var n = e.$options.propsData || {}, r = e._props = {}, i = e.$options._propKeys = []; e.$parent && $e(!1); var o = function (o) { i.push(o); var a = Me(o, t, n, e); xe(r, o, a), o in e || dn(e, "_props", o) }; for (var a in t) o(a); $e(!0) }(e, t.props), t.methods && function (e, t) { e.$options.props; for (var n in t) e[n] = "function" != typeof t[n] ? S : x(t[n], e) }(e, t.methods), t.data ? function (e) { var t = e.$options.data; s(t = e._data = "function" == typeof t ? function (e, t) { le(); try { return e.call(t, t) } catch (e) { return Re(e, t, "data()"), {} } finally { fe() } }(t, e) : t || {}) || (t = {}); var n = Object.keys(t), r = e.$options.props, i = (e.$options.methods, n.length); for (; i--;) { var o = n[i]; r && y(r, o) || (a = void 0, 36 !== (a = (o + "").charCodeAt(0)) && 95 !== a && dn(e, "_data", o)) } var a; Ce(t, !0) }(e) : Ce(e._data = {}, !0), t.computed && function (e, t) { var n = e._computedWatchers = Object.create(null), r = te(); for (var i in t) { var o = t[i], a = "function" == typeof o ? o : o.get; r || (n[i] = new fn(e, a || S, S, hn)), i in e || mn(e, i, o) } }(e, t.computed), t.watch && t.watch !== Y && function (e, t) { for (var n in t) { var r = t[n]; if (Array.isArray(r)) for (var i = 0; i < r.length; i++)_n(e, n, r[i]); else _n(e, n, r) } }(e, t.watch) } var hn = { lazy: !0 }; function mn(e, t, n) { var r = !te(); "function" == typeof n ? (pn.get = r ? yn(t) : gn(n), pn.set = S) : (pn.get = n.get ? r && !1 !== n.cache ? yn(t) : gn(n.get) : S, pn.set = n.set || S), Object.defineProperty(e, t, pn) } function yn(e) { return function () { var t = this._computedWatchers && this._computedWatchers[e]; if (t) return t.dirty && t.evaluate(), ce.target && t.depend(), t.value } } function gn(e) { return function () { return e.call(this, this) } } function _n(e, t, n, r) { return s(n) && (r = n, n = n.handler), "string" == typeof n && (n = e[n]), e.$watch(t, n, r) } var bn = 0; function $n(e) { var t = e.options; if (e.super) { var n = $n(e.super); if (n !== e.superOptions) { e.superOptions = n; var r = function (e) { var t, n = e.options, r = e.sealedOptions; for (var i in n) n[i] !== r[i] && (t || (t = {}), t[i] = n[i]); return t }(e); r && A(e.extendOptions, r), (t = e.options = De(n, e.extendOptions)).name && (t.components[t.name] = e) } } return t } function wn(e) { this._init(e) } function Cn(e) { e.cid = 0; var t = 1; e.extend = function (e) { e = e || {}; var n = this, r = n.cid, i = e._Ctor || (e._Ctor = {}); if (i[r]) return i[r]; var o = e.name || n.options.name, a = function (e) { this._init(e) }; return (a.prototype = Object.create(n.prototype)).constructor = a, a.cid = t++, a.options = De(n.options, e), a.super = n, a.options.props && function (e) { var t = e.options.props; for (var n in t) dn(e.prototype, "_props", n) }(a), a.options.computed && function (e) { var t = e.options.computed; for (var n in t) mn(e.prototype, n, t[n]) }(a), a.extend = n.extend, a.mixin = n.mixin, a.use = n.use, M.forEach(function (e) { a[e] = n[e] }), o && (a.options.components[o] = a), a.superOptions = n.options, a.extendOptions = e, a.sealedOptions = A({}, a.options), i[r] = a, a } } function xn(e) { return e && (e.Ctor.options.name || e.tag) } function kn(e, t) { return Array.isArray(e) ? e.indexOf(t) > -1 : "string" == typeof e ? e.split(",").indexOf(t) > -1 : (n = e, "[object RegExp]" === a.call(n) && e.test(t)); var n } function An(e, t) { var n = e.cache, r = e.keys, i = e._vnode; for (var o in n) { var a = n[o]; if (a) { var s = xn(a.componentOptions); s && !t(s) && On(n, o, r, i) } } } function On(e, t, n, r) { var i = e[t]; !i || r && i.tag === r.tag || i.componentInstance.$destroy(), e[t] = null, h(n, t) } !function (t) { t.prototype._init = function (t) { var n = this; n._uid = bn++, n._isVue = !0, t && t._isComponent ? function (e, t) { var n = e.$options = Object.create(e.constructor.options), r = t._parentVnode; n.parent = t.parent, n._parentVnode = r; var i = r.componentOptions; n.propsData = i.propsData, n._parentListeners = i.listeners, n._renderChildren = i.children, n._componentTag = i.tag, t.render && (n.render = t.render, n.staticRenderFns = t.staticRenderFns) }(n, t) : n.$options = De($n(n.constructor), t || {}, n), n._renderProxy = n, n._self = n, function (e) { var t = e.$options, n = t.parent; if (n && !t.abstract) { for (; n.$options.abstract && n.$parent;)n = n.$parent; n.$children.push(e) } e.$parent = n, e.$root = n ? n.$root : e, e.$children = [], e.$refs = {}, e._watcher = null, e._inactive = null, e._directInactive = !1, e._isMounted = !1, e._isDestroyed = !1, e._isBeingDestroyed = !1 }(n), function (e) { e._events = Object.create(null), e._hasHookEvent = !1; var t = e.$options._parentListeners; t && qt(e, t) }(n), function (t) { t._vnode = null, t._staticTrees = null; var n = t.$options, r = t.$vnode = n._parentVnode, i = r && r.context; t.$slots = ut(n._renderChildren, i), t.$scopedSlots = e, t._c = function (e, n, r, i) { return Pt(t, e, n, r, i, !1) }, t.$createElement = function (e, n, r, i) { return Pt(t, e, n, r, i, !0) }; var o = r && r.data; xe(t, "$attrs", o && o.attrs || e, null, !0), xe(t, "$listeners", n._parentListeners || e, null, !0) }(n), Yt(n, "beforeCreate"), function (e) { var t = ct(e.$options.inject, e); t && ($e(!1), Object.keys(t).forEach(function (n) { xe(e, n, t[n]) }), $e(!0)) }(n), vn(n), function (e) { var t = e.$options.provide; t && (e._provided = "function" == typeof t ? t.call(e) : t) }(n), Yt(n, "created"), n.$options.el && n.$mount(n.$options.el) } }(wn), function (e) { var t = { get: function () { return this._data } }, n = { get: function () { return this._props } }; Object.defineProperty(e.prototype, "$data", t), Object.defineProperty(e.prototype, "$props", n), e.prototype.$set = ke, e.prototype.$delete = Ae, e.prototype.$watch = function (e, t, n) { if (s(t)) return _n(this, e, t, n); (n = n || {}).user = !0; var r = new fn(this, e, t, n); if (n.immediate) try { t.call(this, r.value) } catch (e) { Re(e, this, 'callback for immediate watcher "' + r.expression + '"') } return function () { r.teardown() } } }(wn), function (e) { var t = /^hook:/; e.prototype.$on = function (e, n) { var r = this; if (Array.isArray(e)) for (var i = 0, o = e.length; i < o; i++)r.$on(e[i], n); else (r._events[e] || (r._events[e] = [])).push(n), t.test(e) && (r._hasHookEvent = !0); return r }, e.prototype.$once = function (e, t) { var n = this; function r() { n.$off(e, r), t.apply(n, arguments) } return r.fn = t, n.$on(e, r), n }, e.prototype.$off = function (e, t) { var n = this; if (!arguments.length) return n._events = Object.create(null), n; if (Array.isArray(e)) { for (var r = 0, i = e.length; r < i; r++)n.$off(e[r], t); return n } var o, a = n._events[e]; if (!a) return n; if (!t) return n._events[e] = null, n; for (var s = a.length; s--;)if ((o = a[s]) === t || o.fn === t) { a.splice(s, 1); break } return n }, e.prototype.$emit = function (e) { var t = this._events[e]; if (t) { t = t.length > 1 ? k(t) : t; for (var n = k(arguments, 1), r = 'event handler for "' + e + '"', i = 0, o = t.length; i < o; i++)He(t[i], this, n, this, r) } return this } }(wn), function (e) { e.prototype._update = function (e, t) { var n = this, r = n.$el, i = n._vnode, o = Zt(n); n._vnode = e, n.$el = i ? n.__patch__(i, e) : n.__patch__(n.$el, e, t, !1), o(), r && (r.__vue__ = null), n.$el && (n.$el.__vue__ = n), n.$vnode && n.$parent && n.$vnode === n.$parent._vnode && (n.$parent.$el = n.$el) }, e.prototype.$forceUpdate = function () { this._watcher && this._watcher.update() }, e.prototype.$destroy = function () { var e = this; if (!e._isBeingDestroyed) { Yt(e, "beforeDestroy"), e._isBeingDestroyed = !0; var t = e.$parent; !t || t._isBeingDestroyed || e.$options.abstract || h(t.$children, e), e._watcher && e._watcher.teardown(); for (var n = e._watchers.length; n--;)e._watchers[n].teardown(); e._data.__ob__ && e._data.__ob__.vmCount--, e._isDestroyed = !0, e.__patch__(e._vnode, null), Yt(e, "destroyed"), e.$off(), e.$el && (e.$el.__vue__ = null), e.$vnode && (e.$vnode.parent = null) } } }(wn), function (e) { St(e.prototype), e.prototype.$nextTick = function (e) { return Ye(e, this) }, e.prototype._render = function () { var e, t = this, n = t.$options, r = n.render, i = n._parentVnode; i && (t.$scopedSlots = ft(i.data.scopedSlots, t.$slots, t.$scopedSlots)), t.$vnode = i; try { Ht = t, e = r.call(t._renderProxy, t.$createElement) } catch (n) { Re(n, t, "render"), e = t._vnode } finally { Ht = null } return Array.isArray(e) && 1 === e.length && (e = e[0]), e instanceof pe || (e = ve()), e.parent = i, e } }(wn); var Sn = [String, RegExp, Array], Tn = { KeepAlive: { name: "keep-alive", abstract: !0, props: { include: Sn, exclude: Sn, max: [String, Number] }, created: function () { this.cache = Object.create(null), this.keys = [] }, destroyed: function () { for (var e in this.cache) On(this.cache, e, this.keys) }, mounted: function () { var e = this; this.$watch("include", function (t) { An(e, function (e) { return kn(t, e) }) }), this.$watch("exclude", function (t) { An(e, function (e) { return !kn(t, e) }) }) }, render: function () { var e = this.$slots.default, t = zt(e), n = t && t.componentOptions; if (n) { var r = xn(n), i = this.include, o = this.exclude; if (i && (!r || !kn(i, r)) || o && r && kn(o, r)) return t; var a = this.cache, s = this.keys, c = null == t.key ? n.Ctor.cid + (n.tag ? "::" + n.tag : "") : t.key; a[c] ? (t.componentInstance = a[c].componentInstance, h(s, c), s.push(c)) : (a[c] = t, s.push(c), this.max && s.length > parseInt(this.max) && On(a, s[0], s, this._vnode)), t.data.keepAlive = !0 } return t || e && e[0] } } }; !function (e) { var t = { get: function () { return F } }; Object.defineProperty(e, "config", t), e.util = { warn: ae, extend: A, mergeOptions: De, defineReactive: xe }, e.set = ke, e.delete = Ae, e.nextTick = Ye, e.observable = function (e) { return Ce(e), e }, e.options = Object.create(null), M.forEach(function (t) { e.options[t + "s"] = Object.create(null) }), e.options._base = e, A(e.options.components, Tn), function (e) { e.use = function (e) { var t = this._installedPlugins || (this._installedPlugins = []); if (t.indexOf(e) > -1) return this; var n = k(arguments, 1); return n.unshift(this), "function" == typeof e.install ? e.install.apply(e, n) : "function" == typeof e && e.apply(null, n), t.push(e), this } }(e), function (e) { e.mixin = function (e) { return this.options = De(this.options, e), this } }(e), Cn(e), function (e) { M.forEach(function (t) { e[t] = function (e, n) { return n ? ("component" === t && s(n) && (n.name = n.name || e, n = this.options._base.extend(n)), "directive" === t && "function" == typeof n && (n = { bind: n, update: n }), this.options[t + "s"][e] = n, n) : this.options[t + "s"][e] } }) }(e) }(wn), Object.defineProperty(wn.prototype, "$isServer", { get: te }), Object.defineProperty(wn.prototype, "$ssrContext", { get: function () { return this.$vnode && this.$vnode.ssrContext } }), Object.defineProperty(wn, "FunctionalRenderContext", { value: Tt }), wn.version = "2.6.11"; var En = p("style,class"), Nn = p("input,textarea,option,select,progress"), jn = function (e, t, n) { return "value" === n && Nn(e) && "button" !== t || "selected" === n && "option" === e || "checked" === n && "input" === e || "muted" === n && "video" === e }, Dn = p("contenteditable,draggable,spellcheck"), Ln = p("events,caret,typing,plaintext-only"), Mn = function (e, t) { return Hn(t) || "false" === t ? "false" : "contenteditable" === e && Ln(t) ? t : "true" }, In = p("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"), Fn = "http://www.w3.org/1999/xlink", Pn = function (e) { return ":" === e.charAt(5) && "xlink" === e.slice(0, 5) }, Rn = function (e) { return Pn(e) ? e.slice(6, e.length) : "" }, Hn = function (e) { return null == e || !1 === e }; function Bn(e) { for (var t = e.data, r = e, i = e; n(i.componentInstance);)(i = i.componentInstance._vnode) && i.data && (t = Un(i.data, t)); for (; n(r = r.parent);)r && r.data && (t = Un(t, r.data)); return function (e, t) { if (n(e) || n(t)) return zn(e, Vn(t)); return "" }(t.staticClass, t.class) } function Un(e, t) { return { staticClass: zn(e.staticClass, t.staticClass), class: n(e.class) ? [e.class, t.class] : t.class } } function zn(e, t) { return e ? t ? e + " " + t : e : t || "" } function Vn(e) { return Array.isArray(e) ? function (e) { for (var t, r = "", i = 0, o = e.length; i < o; i++)n(t = Vn(e[i])) && "" !== t && (r && (r += " "), r += t); return r }(e) : o(e) ? function (e) { var t = ""; for (var n in e) e[n] && (t && (t += " "), t += n); return t }(e) : "string" == typeof e ? e : "" } var Kn = { svg: "http://www.w3.org/2000/svg", math: "http://www.w3.org/1998/Math/MathML" }, Jn = p("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"), qn = p("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view", !0), Wn = function (e) { return Jn(e) || qn(e) }; function Zn(e) { return qn(e) ? "svg" : "math" === e ? "math" : void 0 } var Gn = Object.create(null); var Xn = p("text,number,password,search,email,tel,url"); function Yn(e) { if ("string" == typeof e) { var t = document.querySelector(e); return t || document.createElement("div") } return e } var Qn = Object.freeze({ createElement: function (e, t) { var n = document.createElement(e); return "select" !== e ? n : (t.data && t.data.attrs && void 0 !== t.data.attrs.multiple && n.setAttribute("multiple", "multiple"), n) }, createElementNS: function (e, t) { return document.createElementNS(Kn[e], t) }, createTextNode: function (e) { return document.createTextNode(e) }, createComment: function (e) { return document.createComment(e) }, insertBefore: function (e, t, n) { e.insertBefore(t, n) }, removeChild: function (e, t) { e.removeChild(t) }, appendChild: function (e, t) { e.appendChild(t) }, parentNode: function (e) { return e.parentNode }, nextSibling: function (e) { return e.nextSibling }, tagName: function (e) { return e.tagName }, setTextContent: function (e, t) { e.textContent = t }, setStyleScope: function (e, t) { e.setAttribute(t, "") } }), er = { create: function (e, t) { tr(t) }, update: function (e, t) { e.data.ref !== t.data.ref && (tr(e, !0), tr(t)) }, destroy: function (e) { tr(e, !0) } }; function tr(e, t) { var r = e.data.ref; if (n(r)) { var i = e.context, o = e.componentInstance || e.elm, a = i.$refs; t ? Array.isArray(a[r]) ? h(a[r], o) : a[r] === o && (a[r] = void 0) : e.data.refInFor ? Array.isArray(a[r]) ? a[r].indexOf(o) < 0 && a[r].push(o) : a[r] = [o] : a[r] = o } } var nr = new pe("", {}, []), rr = ["create", "activate", "update", "remove", "destroy"]; function ir(e, i) { return e.key === i.key && (e.tag === i.tag && e.isComment === i.isComment && n(e.data) === n(i.data) && function (e, t) { if ("input" !== e.tag) return !0; var r, i = n(r = e.data) && n(r = r.attrs) && r.type, o = n(r = t.data) && n(r = r.attrs) && r.type; return i === o || Xn(i) && Xn(o) }(e, i) || r(e.isAsyncPlaceholder) && e.asyncFactory === i.asyncFactory && t(i.asyncFactory.error)) } function or(e, t, r) { var i, o, a = {}; for (i = t; i <= r; ++i)n(o = e[i].key) && (a[o] = i); return a } var ar = { create: sr, update: sr, destroy: function (e) { sr(e, nr) } }; function sr(e, t) { (e.data.directives || t.data.directives) && function (e, t) { var n, r, i, o = e === nr, a = t === nr, s = ur(e.data.directives, e.context), c = ur(t.data.directives, t.context), u = [], l = []; for (n in c) r = s[n], i = c[n], r ? (i.oldValue = r.value, i.oldArg = r.arg, fr(i, "update", t, e), i.def && i.def.componentUpdated && l.push(i)) : (fr(i, "bind", t, e), i.def && i.def.inserted && u.push(i)); if (u.length) { var f = function () { for (var n = 0; n < u.length; n++)fr(u[n], "inserted", t, e) }; o ? it(t, "insert", f) : f() } l.length && it(t, "postpatch", function () { for (var n = 0; n < l.length; n++)fr(l[n], "componentUpdated", t, e) }); if (!o) for (n in s) c[n] || fr(s[n], "unbind", e, e, a) }(e, t) } var cr = Object.create(null); function ur(e, t) { var n, r, i = Object.create(null); if (!e) return i; for (n = 0; n < e.length; n++)(r = e[n]).modifiers || (r.modifiers = cr), i[lr(r)] = r, r.def = Le(t.$options, "directives", r.name); return i } function lr(e) { return e.rawName || e.name + "." + Object.keys(e.modifiers || {}).join(".") } function fr(e, t, n, r, i) { var o = e.def && e.def[t]; if (o) try { o(n.elm, e, n, r, i) } catch (r) { Re(r, n.context, "directive " + e.name + " " + t + " hook") } } var pr = [er, ar]; function dr(e, r) { var i = r.componentOptions; if (!(n(i) && !1 === i.Ctor.options.inheritAttrs || t(e.data.attrs) && t(r.data.attrs))) { var o, a, s = r.elm, c = e.data.attrs || {}, u = r.data.attrs || {}; for (o in n(u.__ob__) && (u = r.data.attrs = A({}, u)), u) a = u[o], c[o] !== a && vr(s, o, a); for (o in (q || Z) && u.value !== c.value && vr(s, "value", u.value), c) t(u[o]) && (Pn(o) ? s.removeAttributeNS(Fn, Rn(o)) : Dn(o) || s.removeAttribute(o)) } } function vr(e, t, n) { e.tagName.indexOf("-") > -1 ? hr(e, t, n) : In(t) ? Hn(n) ? e.removeAttribute(t) : (n = "allowfullscreen" === t && "EMBED" === e.tagName ? "true" : t, e.setAttribute(t, n)) : Dn(t) ? e.setAttribute(t, Mn(t, n)) : Pn(t) ? Hn(n) ? e.removeAttributeNS(Fn, Rn(t)) : e.setAttributeNS(Fn, t, n) : hr(e, t, n) } function hr(e, t, n) { if (Hn(n)) e.removeAttribute(t); else { if (q && !W && "TEXTAREA" === e.tagName && "placeholder" === t && "" !== n && !e.__ieph) { var r = function (t) { t.stopImmediatePropagation(), e.removeEventListener("input", r) }; e.addEventListener("input", r), e.__ieph = !0 } e.setAttribute(t, n) } } var mr = { create: dr, update: dr }; function yr(e, r) { var i = r.elm, o = r.data, a = e.data; if (!(t(o.staticClass) && t(o.class) && (t(a) || t(a.staticClass) && t(a.class)))) { var s = Bn(r), c = i._transitionClasses; n(c) && (s = zn(s, Vn(c))), s !== i._prevClass && (i.setAttribute("class", s), i._prevClass = s) } } var gr, _r, br, $r, wr, Cr, xr = { create: yr, update: yr }, kr = /[\w).+\-_$\]]/; function Ar(e) { var t, n, r, i, o, a = !1, s = !1, c = !1, u = !1, l = 0, f = 0, p = 0, d = 0; for (r = 0; r < e.length; r++)if (n = t, t = e.charCodeAt(r), a) 39 === t && 92 !== n && (a = !1); else if (s) 34 === t && 92 !== n && (s = !1); else if (c) 96 === t && 92 !== n && (c = !1); else if (u) 47 === t && 92 !== n && (u = !1); else if (124 !== t || 124 === e.charCodeAt(r + 1) || 124 === e.charCodeAt(r - 1) || l || f || p) { switch (t) { case 34: s = !0; break; case 39: a = !0; break; case 96: c = !0; break; case 40: p++; break; case 41: p--; break; case 91: f++; break; case 93: f--; break; case 123: l++; break; case 125: l-- }if (47 === t) { for (var v = r - 1, h = void 0; v >= 0 && " " === (h = e.charAt(v)); v--); h && kr.test(h) || (u = !0) } } else void 0 === i ? (d = r + 1, i = e.slice(0, r).trim()) : m(); function m() { (o || (o = [])).push(e.slice(d, r).trim()), d = r + 1 } if (void 0 === i ? i = e.slice(0, r).trim() : 0 !== d && m(), o) for (r = 0; r < o.length; r++)i = Or(i, o[r]); return i } function Or(e, t) { var n = t.indexOf("("); if (n < 0) return '_f("' + t + '")(' + e + ")"; var r = t.slice(0, n), i = t.slice(n + 1); return '_f("' + r + '")(' + e + (")" !== i ? "," + i : i) } function Sr(e, t) { console.error("[Vue compiler]: " + e) } function Tr(e, t) { return e ? e.map(function (e) { return e[t] }).filter(function (e) { return e }) : [] } function Er(e, t, n, r, i) { (e.props || (e.props = [])).push(Rr({ name: t, value: n, dynamic: i }, r)), e.plain = !1 } function Nr(e, t, n, r, i) { (i ? e.dynamicAttrs || (e.dynamicAttrs = []) : e.attrs || (e.attrs = [])).push(Rr({ name: t, value: n, dynamic: i }, r)), e.plain = !1 } function jr(e, t, n, r) { e.attrsMap[t] = n, e.attrsList.push(Rr({ name: t, value: n }, r)) } function Dr(e, t, n, r, i, o, a, s) { (e.directives || (e.directives = [])).push(Rr({ name: t, rawName: n, value: r, arg: i, isDynamicArg: o, modifiers: a }, s)), e.plain = !1 } function Lr(e, t, n) { return n ? "_p(" + t + ',"' + e + '")' : e + t } function Mr(t, n, r, i, o, a, s, c) { var u; (i = i || e).right ? c ? n = "(" + n + ")==='click'?'contextmenu':(" + n + ")" : "click" === n && (n = "contextmenu", delete i.right) : i.middle && (c ? n = "(" + n + ")==='click'?'mouseup':(" + n + ")" : "click" === n && (n = "mouseup")), i.capture && (delete i.capture, n = Lr("!", n, c)), i.once && (delete i.once, n = Lr("~", n, c)), i.passive && (delete i.passive, n = Lr("&", n, c)), i.native ? (delete i.native, u = t.nativeEvents || (t.nativeEvents = {})) : u = t.events || (t.events = {}); var l = Rr({ value: r.trim(), dynamic: c }, s); i !== e && (l.modifiers = i); var f = u[n]; Array.isArray(f) ? o ? f.unshift(l) : f.push(l) : u[n] = f ? o ? [l, f] : [f, l] : l, t.plain = !1 } function Ir(e, t, n) { var r = Fr(e, ":" + t) || Fr(e, "v-bind:" + t); if (null != r) return Ar(r); if (!1 !== n) { var i = Fr(e, t); if (null != i) return JSON.stringify(i) } } function Fr(e, t, n) { var r; if (null != (r = e.attrsMap[t])) for (var i = e.attrsList, o = 0, a = i.length; o < a; o++)if (i[o].name === t) { i.splice(o, 1); break } return n && delete e.attrsMap[t], r } function Pr(e, t) { for (var n = e.attrsList, r = 0, i = n.length; r < i; r++) { var o = n[r]; if (t.test(o.name)) return n.splice(r, 1), o } } function Rr(e, t) { return t && (null != t.start && (e.start = t.start), null != t.end && (e.end = t.end)), e } function Hr(e, t, n) { var r = n || {}, i = r.number, o = "$$v"; r.trim && (o = "(typeof $$v === 'string'? $$v.trim(): $$v)"), i && (o = "_n(" + o + ")"); var a = Br(t, o); e.model = { value: "(" + t + ")", expression: JSON.stringify(t), callback: "function ($$v) {" + a + "}" } } function Br(e, t) { var n = function (e) { if (e = e.trim(), gr = e.length, e.indexOf("[") < 0 || e.lastIndexOf("]") < gr - 1) return ($r = e.lastIndexOf(".")) > -1 ? { exp: e.slice(0, $r), key: '"' + e.slice($r + 1) + '"' } : { exp: e, key: null }; _r = e, $r = wr = Cr = 0; for (; !zr();)Vr(br = Ur()) ? Jr(br) : 91 === br && Kr(br); return { exp: e.slice(0, wr), key: e.slice(wr + 1, Cr) } }(e); return null === n.key ? e + "=" + t : "$set(" + n.exp + ", " + n.key + ", " + t + ")" } function Ur() { return _r.charCodeAt(++$r) } function zr() { return $r >= gr } function Vr(e) { return 34 === e || 39 === e } function Kr(e) { var t = 1; for (wr = $r; !zr();)if (Vr(e = Ur())) Jr(e); else if (91 === e && t++, 93 === e && t--, 0 === t) { Cr = $r; break } } function Jr(e) { for (var t = e; !zr() && (e = Ur()) !== t;); } var qr, Wr = "__r", Zr = "__c"; function Gr(e, t, n) { var r = qr; return function i() { null !== t.apply(null, arguments) && Qr(e, i, n, r) } } var Xr = Ve && !(X && Number(X[1]) <= 53); function Yr(e, t, n, r) { if (Xr) { var i = an, o = t; t = o._wrapper = function (e) { if (e.target === e.currentTarget || e.timeStamp >= i || e.timeStamp <= 0 || e.target.ownerDocument !== document) return o.apply(this, arguments) } } qr.addEventListener(e, t, Q ? { capture: n, passive: r } : n) } function Qr(e, t, n, r) { (r || qr).removeEventListener(e, t._wrapper || t, n) } function ei(e, r) { if (!t(e.data.on) || !t(r.data.on)) { var i = r.data.on || {}, o = e.data.on || {}; qr = r.elm, function (e) { if (n(e[Wr])) { var t = q ? "change" : "input"; e[t] = [].concat(e[Wr], e[t] || []), delete e[Wr] } n(e[Zr]) && (e.change = [].concat(e[Zr], e.change || []), delete e[Zr]) }(i), rt(i, o, Yr, Qr, Gr, r.context), qr = void 0 } } var ti, ni = { create: ei, update: ei }; function ri(e, r) { if (!t(e.data.domProps) || !t(r.data.domProps)) { var i, o, a = r.elm, s = e.data.domProps || {}, c = r.data.domProps || {}; for (i in n(c.__ob__) && (c = r.data.domProps = A({}, c)), s) i in c || (a[i] = ""); for (i in c) { if (o = c[i], "textContent" === i || "innerHTML" === i) { if (r.children && (r.children.length = 0), o === s[i]) continue; 1 === a.childNodes.length && a.removeChild(a.childNodes[0]) } if ("value" === i && "PROGRESS" !== a.tagName) { a._value = o; var u = t(o) ? "" : String(o); ii(a, u) && (a.value = u) } else if ("innerHTML" === i && qn(a.tagName) && t(a.innerHTML)) { (ti = ti || document.createElement("div")).innerHTML = "<svg>" + o + "</svg>"; for (var l = ti.firstChild; a.firstChild;)a.removeChild(a.firstChild); for (; l.firstChild;)a.appendChild(l.firstChild) } else if (o !== s[i]) try { a[i] = o } catch (e) { } } } } function ii(e, t) { return !e.composing && ("OPTION" === e.tagName || function (e, t) { var n = !0; try { n = document.activeElement !== e } catch (e) { } return n && e.value !== t }(e, t) || function (e, t) { var r = e.value, i = e._vModifiers; if (n(i)) { if (i.number) return f(r) !== f(t); if (i.trim) return r.trim() !== t.trim() } return r !== t }(e, t)) } var oi = { create: ri, update: ri }, ai = g(function (e) { var t = {}, n = /:(.+)/; return e.split(/;(?![^(]*\))/g).forEach(function (e) { if (e) { var r = e.split(n); r.length > 1 && (t[r[0].trim()] = r[1].trim()) } }), t }); function si(e) { var t = ci(e.style); return e.staticStyle ? A(e.staticStyle, t) : t } function ci(e) { return Array.isArray(e) ? O(e) : "string" == typeof e ? ai(e) : e } var ui, li = /^--/, fi = /\s*!important$/, pi = function (e, t, n) { if (li.test(t)) e.style.setProperty(t, n); else if (fi.test(n)) e.style.setProperty(C(t), n.replace(fi, ""), "important"); else { var r = vi(t); if (Array.isArray(n)) for (var i = 0, o = n.length; i < o; i++)e.style[r] = n[i]; else e.style[r] = n } }, di = ["Webkit", "Moz", "ms"], vi = g(function (e) { if (ui = ui || document.createElement("div").style, "filter" !== (e = b(e)) && e in ui) return e; for (var t = e.charAt(0).toUpperCase() + e.slice(1), n = 0; n < di.length; n++) { var r = di[n] + t; if (r in ui) return r } }); function hi(e, r) { var i = r.data, o = e.data; if (!(t(i.staticStyle) && t(i.style) && t(o.staticStyle) && t(o.style))) { var a, s, c = r.elm, u = o.staticStyle, l = o.normalizedStyle || o.style || {}, f = u || l, p = ci(r.data.style) || {}; r.data.normalizedStyle = n(p.__ob__) ? A({}, p) : p; var d = function (e, t) { var n, r = {}; if (t) for (var i = e; i.componentInstance;)(i = i.componentInstance._vnode) && i.data && (n = si(i.data)) && A(r, n); (n = si(e.data)) && A(r, n); for (var o = e; o = o.parent;)o.data && (n = si(o.data)) && A(r, n); return r }(r, !0); for (s in f) t(d[s]) && pi(c, s, ""); for (s in d) (a = d[s]) !== f[s] && pi(c, s, null == a ? "" : a) } } var mi = { create: hi, update: hi }, yi = /\s+/; function gi(e, t) { if (t && (t = t.trim())) if (e.classList) t.indexOf(" ") > -1 ? t.split(yi).forEach(function (t) { return e.classList.add(t) }) : e.classList.add(t); else { var n = " " + (e.getAttribute("class") || "") + " "; n.indexOf(" " + t + " ") < 0 && e.setAttribute("class", (n + t).trim()) } } function _i(e, t) { if (t && (t = t.trim())) if (e.classList) t.indexOf(" ") > -1 ? t.split(yi).forEach(function (t) { return e.classList.remove(t) }) : e.classList.remove(t), e.classList.length || e.removeAttribute("class"); else { for (var n = " " + (e.getAttribute("class") || "") + " ", r = " " + t + " "; n.indexOf(r) >= 0;)n = n.replace(r, " "); (n = n.trim()) ? e.setAttribute("class", n) : e.removeAttribute("class") } } function bi(e) { if (e) { if ("object" == typeof e) { var t = {}; return !1 !== e.css && A(t, $i(e.name || "v")), A(t, e), t } return "string" == typeof e ? $i(e) : void 0 } } var $i = g(function (e) { return { enterClass: e + "-enter", enterToClass: e + "-enter-to", enterActiveClass: e + "-enter-active", leaveClass: e + "-leave", leaveToClass: e + "-leave-to", leaveActiveClass: e + "-leave-active" } }), wi = z && !W, Ci = "transition", xi = "animation", ki = "transition", Ai = "transitionend", Oi = "animation", Si = "animationend"; wi && (void 0 === window.ontransitionend && void 0 !== window.onwebkittransitionend && (ki = "WebkitTransition", Ai = "webkitTransitionEnd"), void 0 === window.onanimationend && void 0 !== window.onwebkitanimationend && (Oi = "WebkitAnimation", Si = "webkitAnimationEnd")); var Ti = z ? window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : setTimeout : function (e) { return e() }; function Ei(e) { Ti(function () { Ti(e) }) } function Ni(e, t) { var n = e._transitionClasses || (e._transitionClasses = []); n.indexOf(t) < 0 && (n.push(t), gi(e, t)) } function ji(e, t) { e._transitionClasses && h(e._transitionClasses, t), _i(e, t) } function Di(e, t, n) { var r = Mi(e, t), i = r.type, o = r.timeout, a = r.propCount; if (!i) return n(); var s = i === Ci ? Ai : Si, c = 0, u = function () { e.removeEventListener(s, l), n() }, l = function (t) { t.target === e && ++c >= a && u() }; setTimeout(function () { c < a && u() }, o + 1), e.addEventListener(s, l) } var Li = /\b(transform|all)(,|$)/; function Mi(e, t) { var n, r = window.getComputedStyle(e), i = (r[ki + "Delay"] || "").split(", "), o = (r[ki + "Duration"] || "").split(", "), a = Ii(i, o), s = (r[Oi + "Delay"] || "").split(", "), c = (r[Oi + "Duration"] || "").split(", "), u = Ii(s, c), l = 0, f = 0; return t === Ci ? a > 0 && (n = Ci, l = a, f = o.length) : t === xi ? u > 0 && (n = xi, l = u, f = c.length) : f = (n = (l = Math.max(a, u)) > 0 ? a > u ? Ci : xi : null) ? n === Ci ? o.length : c.length : 0, { type: n, timeout: l, propCount: f, hasTransform: n === Ci && Li.test(r[ki + "Property"]) } } function Ii(e, t) { for (; e.length < t.length;)e = e.concat(e); return Math.max.apply(null, t.map(function (t, n) { return Fi(t) + Fi(e[n]) })) } function Fi(e) { return 1e3 * Number(e.slice(0, -1).replace(",", ".")) } function Pi(e, r) { var i = e.elm; n(i._leaveCb) && (i._leaveCb.cancelled = !0, i._leaveCb()); var a = bi(e.data.transition); if (!t(a) && !n(i._enterCb) && 1 === i.nodeType) { for (var s = a.css, c = a.type, u = a.enterClass, l = a.enterToClass, p = a.enterActiveClass, d = a.appearClass, v = a.appearToClass, h = a.appearActiveClass, m = a.beforeEnter, y = a.enter, g = a.afterEnter, _ = a.enterCancelled, b = a.beforeAppear, $ = a.appear, w = a.afterAppear, C = a.appearCancelled, x = a.duration, k = Wt, A = Wt.$vnode; A && A.parent;)k = A.context, A = A.parent; var O = !k._isMounted || !e.isRootInsert; if (!O || $ || "" === $) { var S = O && d ? d : u, T = O && h ? h : p, E = O && v ? v : l, N = O && b || m, j = O && "function" == typeof $ ? $ : y, L = O && w || g, M = O && C || _, I = f(o(x) ? x.enter : x), F = !1 !== s && !W, P = Bi(j), R = i._enterCb = D(function () { F && (ji(i, E), ji(i, T)), R.cancelled ? (F && ji(i, S), M && M(i)) : L && L(i), i._enterCb = null }); e.data.show || it(e, "insert", function () { var t = i.parentNode, n = t && t._pending && t._pending[e.key]; n && n.tag === e.tag && n.elm._leaveCb && n.elm._leaveCb(), j && j(i, R) }), N && N(i), F && (Ni(i, S), Ni(i, T), Ei(function () { ji(i, S), R.cancelled || (Ni(i, E), P || (Hi(I) ? setTimeout(R, I) : Di(i, c, R))) })), e.data.show && (r && r(), j && j(i, R)), F || P || R() } } } function Ri(e, r) { var i = e.elm; n(i._enterCb) && (i._enterCb.cancelled = !0, i._enterCb()); var a = bi(e.data.transition); if (t(a) || 1 !== i.nodeType) return r(); if (!n(i._leaveCb)) { var s = a.css, c = a.type, u = a.leaveClass, l = a.leaveToClass, p = a.leaveActiveClass, d = a.beforeLeave, v = a.leave, h = a.afterLeave, m = a.leaveCancelled, y = a.delayLeave, g = a.duration, _ = !1 !== s && !W, b = Bi(v), $ = f(o(g) ? g.leave : g), w = i._leaveCb = D(function () { i.parentNode && i.parentNode._pending && (i.parentNode._pending[e.key] = null), _ && (ji(i, l), ji(i, p)), w.cancelled ? (_ && ji(i, u), m && m(i)) : (r(), h && h(i)), i._leaveCb = null }); y ? y(C) : C() } function C() { w.cancelled || (!e.data.show && i.parentNode && ((i.parentNode._pending || (i.parentNode._pending = {}))[e.key] = e), d && d(i), _ && (Ni(i, u), Ni(i, p), Ei(function () { ji(i, u), w.cancelled || (Ni(i, l), b || (Hi($) ? setTimeout(w, $) : Di(i, c, w))) })), v && v(i, w), _ || b || w()) } } function Hi(e) { return "number" == typeof e && !isNaN(e) } function Bi(e) { if (t(e)) return !1; var r = e.fns; return n(r) ? Bi(Array.isArray(r) ? r[0] : r) : (e._length || e.length) > 1 } function Ui(e, t) { !0 !== t.data.show && Pi(t) } var zi = function (e) { var o, a, s = {}, c = e.modules, u = e.nodeOps; for (o = 0; o < rr.length; ++o)for (s[rr[o]] = [], a = 0; a < c.length; ++a)n(c[a][rr[o]]) && s[rr[o]].push(c[a][rr[o]]); function l(e) { var t = u.parentNode(e); n(t) && u.removeChild(t, e) } function f(e, t, i, o, a, c, l) { if (n(e.elm) && n(c) && (e = c[l] = me(e)), e.isRootInsert = !a, !function (e, t, i, o) { var a = e.data; if (n(a)) { var c = n(e.componentInstance) && a.keepAlive; if (n(a = a.hook) && n(a = a.init) && a(e, !1), n(e.componentInstance)) return d(e, t), v(i, e.elm, o), r(c) && function (e, t, r, i) { for (var o, a = e; a.componentInstance;)if (a = a.componentInstance._vnode, n(o = a.data) && n(o = o.transition)) { for (o = 0; o < s.activate.length; ++o)s.activate[o](nr, a); t.push(a); break } v(r, e.elm, i) }(e, t, i, o), !0 } }(e, t, i, o)) { var f = e.data, p = e.children, m = e.tag; n(m) ? (e.elm = e.ns ? u.createElementNS(e.ns, m) : u.createElement(m, e), g(e), h(e, p, t), n(f) && y(e, t), v(i, e.elm, o)) : r(e.isComment) ? (e.elm = u.createComment(e.text), v(i, e.elm, o)) : (e.elm = u.createTextNode(e.text), v(i, e.elm, o)) } } function d(e, t) { n(e.data.pendingInsert) && (t.push.apply(t, e.data.pendingInsert), e.data.pendingInsert = null), e.elm = e.componentInstance.$el, m(e) ? (y(e, t), g(e)) : (tr(e), t.push(e)) } function v(e, t, r) { n(e) && (n(r) ? u.parentNode(r) === e && u.insertBefore(e, t, r) : u.appendChild(e, t)) } function h(e, t, n) { if (Array.isArray(t)) for (var r = 0; r < t.length; ++r)f(t[r], n, e.elm, null, !0, t, r); else i(e.text) && u.appendChild(e.elm, u.createTextNode(String(e.text))) } function m(e) { for (; e.componentInstance;)e = e.componentInstance._vnode; return n(e.tag) } function y(e, t) { for (var r = 0; r < s.create.length; ++r)s.create[r](nr, e); n(o = e.data.hook) && (n(o.create) && o.create(nr, e), n(o.insert) && t.push(e)) } function g(e) { var t; if (n(t = e.fnScopeId)) u.setStyleScope(e.elm, t); else for (var r = e; r;)n(t = r.context) && n(t = t.$options._scopeId) && u.setStyleScope(e.elm, t), r = r.parent; n(t = Wt) && t !== e.context && t !== e.fnContext && n(t = t.$options._scopeId) && u.setStyleScope(e.elm, t) } function _(e, t, n, r, i, o) { for (; r <= i; ++r)f(n[r], o, e, t, !1, n, r) } function b(e) { var t, r, i = e.data; if (n(i)) for (n(t = i.hook) && n(t = t.destroy) && t(e), t = 0; t < s.destroy.length; ++t)s.destroy[t](e); if (n(t = e.children)) for (r = 0; r < e.children.length; ++r)b(e.children[r]) } function $(e, t, r) { for (; t <= r; ++t) { var i = e[t]; n(i) && (n(i.tag) ? (w(i), b(i)) : l(i.elm)) } } function w(e, t) { if (n(t) || n(e.data)) { var r, i = s.remove.length + 1; for (n(t) ? t.listeners += i : t = function (e, t) { function n() { 0 == --n.listeners && l(e) } return n.listeners = t, n }(e.elm, i), n(r = e.componentInstance) && n(r = r._vnode) && n(r.data) && w(r, t), r = 0; r < s.remove.length; ++r)s.remove[r](e, t); n(r = e.data.hook) && n(r = r.remove) ? r(e, t) : t() } else l(e.elm) } function C(e, t, r, i) { for (var o = r; o < i; o++) { var a = t[o]; if (n(a) && ir(e, a)) return o } } function x(e, i, o, a, c, l) { if (e !== i) { n(i.elm) && n(a) && (i = a[c] = me(i)); var p = i.elm = e.elm; if (r(e.isAsyncPlaceholder)) n(i.asyncFactory.resolved) ? O(e.elm, i, o) : i.isAsyncPlaceholder = !0; else if (r(i.isStatic) && r(e.isStatic) && i.key === e.key && (r(i.isCloned) || r(i.isOnce))) i.componentInstance = e.componentInstance; else { var d, v = i.data; n(v) && n(d = v.hook) && n(d = d.prepatch) && d(e, i); var h = e.children, y = i.children; if (n(v) && m(i)) { for (d = 0; d < s.update.length; ++d)s.update[d](e, i); n(d = v.hook) && n(d = d.update) && d(e, i) } t(i.text) ? n(h) && n(y) ? h !== y && function (e, r, i, o, a) { for (var s, c, l, p = 0, d = 0, v = r.length - 1, h = r[0], m = r[v], y = i.length - 1, g = i[0], b = i[y], w = !a; p <= v && d <= y;)t(h) ? h = r[++p] : t(m) ? m = r[--v] : ir(h, g) ? (x(h, g, o, i, d), h = r[++p], g = i[++d]) : ir(m, b) ? (x(m, b, o, i, y), m = r[--v], b = i[--y]) : ir(h, b) ? (x(h, b, o, i, y), w && u.insertBefore(e, h.elm, u.nextSibling(m.elm)), h = r[++p], b = i[--y]) : ir(m, g) ? (x(m, g, o, i, d), w && u.insertBefore(e, m.elm, h.elm), m = r[--v], g = i[++d]) : (t(s) && (s = or(r, p, v)), t(c = n(g.key) ? s[g.key] : C(g, r, p, v)) ? f(g, o, e, h.elm, !1, i, d) : ir(l = r[c], g) ? (x(l, g, o, i, d), r[c] = void 0, w && u.insertBefore(e, l.elm, h.elm)) : f(g, o, e, h.elm, !1, i, d), g = i[++d]); p > v ? _(e, t(i[y + 1]) ? null : i[y + 1].elm, i, d, y, o) : d > y && $(r, p, v) }(p, h, y, o, l) : n(y) ? (n(e.text) && u.setTextContent(p, ""), _(p, null, y, 0, y.length - 1, o)) : n(h) ? $(h, 0, h.length - 1) : n(e.text) && u.setTextContent(p, "") : e.text !== i.text && u.setTextContent(p, i.text), n(v) && n(d = v.hook) && n(d = d.postpatch) && d(e, i) } } } function k(e, t, i) { if (r(i) && n(e.parent)) e.parent.data.pendingInsert = t; else for (var o = 0; o < t.length; ++o)t[o].data.hook.insert(t[o]) } var A = p("attrs,class,staticClass,staticStyle,key"); function O(e, t, i, o) { var a, s = t.tag, c = t.data, u = t.children; if (o = o || c && c.pre, t.elm = e, r(t.isComment) && n(t.asyncFactory)) return t.isAsyncPlaceholder = !0, !0; if (n(c) && (n(a = c.hook) && n(a = a.init) && a(t, !0), n(a = t.componentInstance))) return d(t, i), !0; if (n(s)) { if (n(u)) if (e.hasChildNodes()) if (n(a = c) && n(a = a.domProps) && n(a = a.innerHTML)) { if (a !== e.innerHTML) return !1 } else { for (var l = !0, f = e.firstChild, p = 0; p < u.length; p++) { if (!f || !O(f, u[p], i, o)) { l = !1; break } f = f.nextSibling } if (!l || f) return !1 } else h(t, u, i); if (n(c)) { var v = !1; for (var m in c) if (!A(m)) { v = !0, y(t, i); break } !v && c.class && et(c.class) } } else e.data !== t.text && (e.data = t.text); return !0 } return function (e, i, o, a) { if (!t(i)) { var c, l = !1, p = []; if (t(e)) l = !0, f(i, p); else { var d = n(e.nodeType); if (!d && ir(e, i)) x(e, i, p, null, null, a); else { if (d) { if (1 === e.nodeType && e.hasAttribute(L) && (e.removeAttribute(L), o = !0), r(o) && O(e, i, p)) return k(i, p, !0), e; c = e, e = new pe(u.tagName(c).toLowerCase(), {}, [], void 0, c) } var v = e.elm, h = u.parentNode(v); if (f(i, p, v._leaveCb ? null : h, u.nextSibling(v)), n(i.parent)) for (var y = i.parent, g = m(i); y;) { for (var _ = 0; _ < s.destroy.length; ++_)s.destroy[_](y); if (y.elm = i.elm, g) { for (var w = 0; w < s.create.length; ++w)s.create[w](nr, y); var C = y.data.hook.insert; if (C.merged) for (var A = 1; A < C.fns.length; A++)C.fns[A]() } else tr(y); y = y.parent } n(h) ? $([e], 0, 0) : n(e.tag) && b(e) } } return k(i, p, l), i.elm } n(e) && b(e) } }({ nodeOps: Qn, modules: [mr, xr, ni, oi, mi, z ? { create: Ui, activate: Ui, remove: function (e, t) { !0 !== e.data.show ? Ri(e, t) : t() } } : {}].concat(pr) }); W && document.addEventListener("selectionchange", function () { var e = document.activeElement; e && e.vmodel && Xi(e, "input") }); var Vi = { inserted: function (e, t, n, r) { "select" === n.tag ? (r.elm && !r.elm._vOptions ? it(n, "postpatch", function () { Vi.componentUpdated(e, t, n) }) : Ki(e, t, n.context), e._vOptions = [].map.call(e.options, Wi)) : ("textarea" === n.tag || Xn(e.type)) && (e._vModifiers = t.modifiers, t.modifiers.lazy || (e.addEventListener("compositionstart", Zi), e.addEventListener("compositionend", Gi), e.addEventListener("change", Gi), W && (e.vmodel = !0))) }, componentUpdated: function (e, t, n) { if ("select" === n.tag) { Ki(e, t, n.context); var r = e._vOptions, i = e._vOptions = [].map.call(e.options, Wi); if (i.some(function (e, t) { return !N(e, r[t]) })) (e.multiple ? t.value.some(function (e) { return qi(e, i) }) : t.value !== t.oldValue && qi(t.value, i)) && Xi(e, "change") } } }; function Ki(e, t, n) { Ji(e, t, n), (q || Z) && setTimeout(function () { Ji(e, t, n) }, 0) } function Ji(e, t, n) { var r = t.value, i = e.multiple; if (!i || Array.isArray(r)) { for (var o, a, s = 0, c = e.options.length; s < c; s++)if (a = e.options[s], i) o = j(r, Wi(a)) > -1, a.selected !== o && (a.selected = o); else if (N(Wi(a), r)) return void (e.selectedIndex !== s && (e.selectedIndex = s)); i || (e.selectedIndex = -1) } } function qi(e, t) { return t.every(function (t) { return !N(t, e) }) } function Wi(e) { return "_value" in e ? e._value : e.value } function Zi(e) { e.target.composing = !0 } function Gi(e) { e.target.composing && (e.target.composing = !1, Xi(e.target, "input")) } function Xi(e, t) { var n = document.createEvent("HTMLEvents"); n.initEvent(t, !0, !0), e.dispatchEvent(n) } function Yi(e) { return !e.componentInstance || e.data && e.data.transition ? e : Yi(e.componentInstance._vnode) } var Qi = { model: Vi, show: { bind: function (e, t, n) { var r = t.value, i = (n = Yi(n)).data && n.data.transition, o = e.__vOriginalDisplay = "none" === e.style.display ? "" : e.style.display; r && i ? (n.data.show = !0, Pi(n, function () { e.style.display = o })) : e.style.display = r ? o : "none" }, update: function (e, t, n) { var r = t.value; !r != !t.oldValue && ((n = Yi(n)).data && n.data.transition ? (n.data.show = !0, r ? Pi(n, function () { e.style.display = e.__vOriginalDisplay }) : Ri(n, function () { e.style.display = "none" })) : e.style.display = r ? e.__vOriginalDisplay : "none") }, unbind: function (e, t, n, r, i) { i || (e.style.display = e.__vOriginalDisplay) } } }, eo = { name: String, appear: Boolean, css: Boolean, mode: String, type: String, enterClass: String, leaveClass: String, enterToClass: String, leaveToClass: String, enterActiveClass: String, leaveActiveClass: String, appearClass: String, appearActiveClass: String, appearToClass: String, duration: [Number, String, Object] }; function to(e) { var t = e && e.componentOptions; return t && t.Ctor.options.abstract ? to(zt(t.children)) : e } function no(e) { var t = {}, n = e.$options; for (var r in n.propsData) t[r] = e[r]; var i = n._parentListeners; for (var o in i) t[b(o)] = i[o]; return t } function ro(e, t) { if (/\d-keep-alive$/.test(t.tag)) return e("keep-alive", { props: t.componentOptions.propsData }) } var io = function (e) { return e.tag || Ut(e) }, oo = function (e) { return "show" === e.name }, ao = { name: "transition", props: eo, abstract: !0, render: function (e) { var t = this, n = this.$slots.default; if (n && (n = n.filter(io)).length) { var r = this.mode, o = n[0]; if (function (e) { for (; e = e.parent;)if (e.data.transition) return !0 }(this.$vnode)) return o; var a = to(o); if (!a) return o; if (this._leaving) return ro(e, o); var s = "__transition-" + this._uid + "-"; a.key = null == a.key ? a.isComment ? s + "comment" : s + a.tag : i(a.key) ? 0 === String(a.key).indexOf(s) ? a.key : s + a.key : a.key; var c = (a.data || (a.data = {})).transition = no(this), u = this._vnode, l = to(u); if (a.data.directives && a.data.directives.some(oo) && (a.data.show = !0), l && l.data && !function (e, t) { return t.key === e.key && t.tag === e.tag }(a, l) && !Ut(l) && (!l.componentInstance || !l.componentInstance._vnode.isComment)) { var f = l.data.transition = A({}, c); if ("out-in" === r) return this._leaving = !0, it(f, "afterLeave", function () { t._leaving = !1, t.$forceUpdate() }), ro(e, o); if ("in-out" === r) { if (Ut(a)) return u; var p, d = function () { p() }; it(c, "afterEnter", d), it(c, "enterCancelled", d), it(f, "delayLeave", function (e) { p = e }) } } return o } } }, so = A({ tag: String, moveClass: String }, eo); function co(e) { e.elm._moveCb && e.elm._moveCb(), e.elm._enterCb && e.elm._enterCb() } function uo(e) { e.data.newPos = e.elm.getBoundingClientRect() } function lo(e) { var t = e.data.pos, n = e.data.newPos, r = t.left - n.left, i = t.top - n.top; if (r || i) { e.data.moved = !0; var o = e.elm.style; o.transform = o.WebkitTransform = "translate(" + r + "px," + i + "px)", o.transitionDuration = "0s" } } delete so.mode; var fo = { Transition: ao, TransitionGroup: { props: so, beforeMount: function () { var e = this, t = this._update; this._update = function (n, r) { var i = Zt(e); e.__patch__(e._vnode, e.kept, !1, !0), e._vnode = e.kept, i(), t.call(e, n, r) } }, render: function (e) { for (var t = this.tag || this.$vnode.data.tag || "span", n = Object.create(null), r = this.prevChildren = this.children, i = this.$slots.default || [], o = this.children = [], a = no(this), s = 0; s < i.length; s++) { var c = i[s]; c.tag && null != c.key && 0 !== String(c.key).indexOf("__vlist") && (o.push(c), n[c.key] = c, (c.data || (c.data = {})).transition = a) } if (r) { for (var u = [], l = [], f = 0; f < r.length; f++) { var p = r[f]; p.data.transition = a, p.data.pos = p.elm.getBoundingClientRect(), n[p.key] ? u.push(p) : l.push(p) } this.kept = e(t, null, u), this.removed = l } return e(t, null, o) }, updated: function () { var e = this.prevChildren, t = this.moveClass || (this.name || "v") + "-move"; e.length && this.hasMove(e[0].elm, t) && (e.forEach(co), e.forEach(uo), e.forEach(lo), this._reflow = document.body.offsetHeight, e.forEach(function (e) { if (e.data.moved) { var n = e.elm, r = n.style; Ni(n, t), r.transform = r.WebkitTransform = r.transitionDuration = "", n.addEventListener(Ai, n._moveCb = function e(r) { r && r.target !== n || r && !/transform$/.test(r.propertyName) || (n.removeEventListener(Ai, e), n._moveCb = null, ji(n, t)) }) } })) }, methods: { hasMove: function (e, t) { if (!wi) return !1; if (this._hasMove) return this._hasMove; var n = e.cloneNode(); e._transitionClasses && e._transitionClasses.forEach(function (e) { _i(n, e) }), gi(n, t), n.style.display = "none", this.$el.appendChild(n); var r = Mi(n); return this.$el.removeChild(n), this._hasMove = r.hasTransform } } } }; wn.config.mustUseProp = jn, wn.config.isReservedTag = Wn, wn.config.isReservedAttr = En, wn.config.getTagNamespace = Zn, wn.config.isUnknownElement = function (e) { if (!z) return !0; if (Wn(e)) return !1; if (e = e.toLowerCase(), null != Gn[e]) return Gn[e]; var t = document.createElement(e); return e.indexOf("-") > -1 ? Gn[e] = t.constructor === window.HTMLUnknownElement || t.constructor === window.HTMLElement : Gn[e] = /HTMLUnknownElement/.test(t.toString()) }, A(wn.options.directives, Qi), A(wn.options.components, fo), wn.prototype.__patch__ = z ? zi : S, wn.prototype.$mount = function (e, t) { return function (e, t, n) { var r; return e.$el = t, e.$options.render || (e.$options.render = ve), Yt(e, "beforeMount"), r = function () { e._update(e._render(), n) }, new fn(e, r, S, { before: function () { e._isMounted && !e._isDestroyed && Yt(e, "beforeUpdate") } }, !0), n = !1, null == e.$vnode && (e._isMounted = !0, Yt(e, "mounted")), e }(this, e = e && z ? Yn(e) : void 0, t) }, z && setTimeout(function () { F.devtools && ne && ne.emit("init", wn) }, 0); var po = /\{\{((?:.|\r?\n)+?)\}\}/g, vo = /[-.*+?^${}()|[\]\/\\]/g, ho = g(function (e) { var t = e[0].replace(vo, "\\$&"), n = e[1].replace(vo, "\\$&"); return new RegExp(t + "((?:.|\\n)+?)" + n, "g") }); var mo = { staticKeys: ["staticClass"], transformNode: function (e, t) { t.warn; var n = Fr(e, "class"); n && (e.staticClass = JSON.stringify(n)); var r = Ir(e, "class", !1); r && (e.classBinding = r) }, genData: function (e) { var t = ""; return e.staticClass && (t += "staticClass:" + e.staticClass + ","), e.classBinding && (t += "class:" + e.classBinding + ","), t } }; var yo, go = { staticKeys: ["staticStyle"], transformNode: function (e, t) { t.warn; var n = Fr(e, "style"); n && (e.staticStyle = JSON.stringify(ai(n))); var r = Ir(e, "style", !1); r && (e.styleBinding = r) }, genData: function (e) { var t = ""; return e.staticStyle && (t += "staticStyle:" + e.staticStyle + ","), e.styleBinding && (t += "style:(" + e.styleBinding + "),"), t } }, _o = function (e) { return (yo = yo || document.createElement("div")).innerHTML = e, yo.textContent }, bo = p("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"), $o = p("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"), wo = p("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"), Co = /^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/, xo = /^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/, ko = "[a-zA-Z_][\\-\\.0-9_a-zA-Z" + P.source + "]*", Ao = "((?:" + ko + "\\:)?" + ko + ")", Oo = new RegExp("^<" + Ao), So = /^\s*(\/?)>/, To = new RegExp("^<\\/" + Ao + "[^>]*>"), Eo = /^<!DOCTYPE [^>]+>/i, No = /^<!\--/, jo = /^<!\[/, Do = p("script,style,textarea", !0), Lo = {}, Mo = { "&lt;": "<", "&gt;": ">", "&quot;": '"', "&amp;": "&", "&#10;": "\n", "&#9;": "\t", "&#39;": "'" }, Io = /&(?:lt|gt|quot|amp|#39);/g, Fo = /&(?:lt|gt|quot|amp|#39|#10|#9);/g, Po = p("pre,textarea", !0), Ro = function (e, t) { return e && Po(e) && "\n" === t[0] }; function Ho(e, t) { var n = t ? Fo : Io; return e.replace(n, function (e) { return Mo[e] }) } var Bo, Uo, zo, Vo, Ko, Jo, qo, Wo, Zo = /^@|^v-on:/, Go = /^v-|^@|^:|^#/, Xo = /([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/, Yo = /,([^,\}\]]*)(?:,([^,\}\]]*))?$/, Qo = /^\(|\)$/g, ea = /^\[.*\]$/, ta = /:(.*)$/, na = /^:|^\.|^v-bind:/, ra = /\.[^.\]]+(?=[^\]]*$)/g, ia = /^v-slot(:|$)|^#/, oa = /[\r\n]/, aa = /\s+/g, sa = g(_o), ca = "_empty_"; function ua(e, t, n) { return { type: 1, tag: e, attrsList: t, attrsMap: ma(t), rawAttrsMap: {}, parent: n, children: [] } } function la(e, t) { Bo = t.warn || Sr, Jo = t.isPreTag || T, qo = t.mustUseProp || T, Wo = t.getTagNamespace || T; t.isReservedTag; zo = Tr(t.modules, "transformNode"), Vo = Tr(t.modules, "preTransformNode"), Ko = Tr(t.modules, "postTransformNode"), Uo = t.delimiters; var n, r, i = [], o = !1 !== t.preserveWhitespace, a = t.whitespace, s = !1, c = !1; function u(e) { if (l(e), s || e.processed || (e = fa(e, t)), i.length || e === n || n.if && (e.elseif || e.else) && da(n, { exp: e.elseif, block: e }), r && !e.forbidden) if (e.elseif || e.else) a = e, (u = function (e) { var t = e.length; for (; t--;) { if (1 === e[t].type) return e[t]; e.pop() } }(r.children)) && u.if && da(u, { exp: a.elseif, block: a }); else { if (e.slotScope) { var o = e.slotTarget || '"default"'; (r.scopedSlots || (r.scopedSlots = {}))[o] = e } r.children.push(e), e.parent = r } var a, u; e.children = e.children.filter(function (e) { return !e.slotScope }), l(e), e.pre && (s = !1), Jo(e.tag) && (c = !1); for (var f = 0; f < Ko.length; f++)Ko[f](e, t) } function l(e) { if (!c) for (var t; (t = e.children[e.children.length - 1]) && 3 === t.type && " " === t.text;)e.children.pop() } return function (e, t) { for (var n, r, i = [], o = t.expectHTML, a = t.isUnaryTag || T, s = t.canBeLeftOpenTag || T, c = 0; e;) { if (n = e, r && Do(r)) { var u = 0, l = r.toLowerCase(), f = Lo[l] || (Lo[l] = new RegExp("([\\s\\S]*?)(</" + l + "[^>]*>)", "i")), p = e.replace(f, function (e, n, r) { return u = r.length, Do(l) || "noscript" === l || (n = n.replace(/<!\--([\s\S]*?)-->/g, "$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g, "$1")), Ro(l, n) && (n = n.slice(1)), t.chars && t.chars(n), "" }); c += e.length - p.length, e = p, A(l, c - u, c) } else { var d = e.indexOf("<"); if (0 === d) { if (No.test(e)) { var v = e.indexOf("--\x3e"); if (v >= 0) { t.shouldKeepComment && t.comment(e.substring(4, v), c, c + v + 3), C(v + 3); continue } } if (jo.test(e)) { var h = e.indexOf("]>"); if (h >= 0) { C(h + 2); continue } } var m = e.match(Eo); if (m) { C(m[0].length); continue } var y = e.match(To); if (y) { var g = c; C(y[0].length), A(y[1], g, c); continue } var _ = x(); if (_) { k(_), Ro(_.tagName, e) && C(1); continue } } var b = void 0, $ = void 0, w = void 0; if (d >= 0) { for ($ = e.slice(d); !(To.test($) || Oo.test($) || No.test($) || jo.test($) || (w = $.indexOf("<", 1)) < 0);)d += w, $ = e.slice(d); b = e.substring(0, d) } d < 0 && (b = e), b && C(b.length), t.chars && b && t.chars(b, c - b.length, c) } if (e === n) { t.chars && t.chars(e); break } } function C(t) { c += t, e = e.substring(t) } function x() { var t = e.match(Oo); if (t) { var n, r, i = { tagName: t[1], attrs: [], start: c }; for (C(t[0].length); !(n = e.match(So)) && (r = e.match(xo) || e.match(Co));)r.start = c, C(r[0].length), r.end = c, i.attrs.push(r); if (n) return i.unarySlash = n[1], C(n[0].length), i.end = c, i } } function k(e) { var n = e.tagName, c = e.unarySlash; o && ("p" === r && wo(n) && A(r), s(n) && r === n && A(n)); for (var u = a(n) || !!c, l = e.attrs.length, f = new Array(l), p = 0; p < l; p++) { var d = e.attrs[p], v = d[3] || d[4] || d[5] || "", h = "a" === n && "href" === d[1] ? t.shouldDecodeNewlinesForHref : t.shouldDecodeNewlines; f[p] = { name: d[1], value: Ho(v, h) } } u || (i.push({ tag: n, lowerCasedTag: n.toLowerCase(), attrs: f, start: e.start, end: e.end }), r = n), t.start && t.start(n, f, u, e.start, e.end) } function A(e, n, o) { var a, s; if (null == n && (n = c), null == o && (o = c), e) for (s = e.toLowerCase(), a = i.length - 1; a >= 0 && i[a].lowerCasedTag !== s; a--); else a = 0; if (a >= 0) { for (var u = i.length - 1; u >= a; u--)t.end && t.end(i[u].tag, n, o); i.length = a, r = a && i[a - 1].tag } else "br" === s ? t.start && t.start(e, [], !0, n, o) : "p" === s && (t.start && t.start(e, [], !1, n, o), t.end && t.end(e, n, o)) } A() }(e, { warn: Bo, expectHTML: t.expectHTML, isUnaryTag: t.isUnaryTag, canBeLeftOpenTag: t.canBeLeftOpenTag, shouldDecodeNewlines: t.shouldDecodeNewlines, shouldDecodeNewlinesForHref: t.shouldDecodeNewlinesForHref, shouldKeepComment: t.comments, outputSourceRange: t.outputSourceRange, start: function (e, o, a, l, f) { var p = r && r.ns || Wo(e); q && "svg" === p && (o = function (e) { for (var t = [], n = 0; n < e.length; n++) { var r = e[n]; ya.test(r.name) || (r.name = r.name.replace(ga, ""), t.push(r)) } return t }(o)); var d, v = ua(e, o, r); p && (v.ns = p), "style" !== (d = v).tag && ("script" !== d.tag || d.attrsMap.type && "text/javascript" !== d.attrsMap.type) || te() || (v.forbidden = !0); for (var h = 0; h < Vo.length; h++)v = Vo[h](v, t) || v; s || (!function (e) { null != Fr(e, "v-pre") && (e.pre = !0) }(v), v.pre && (s = !0)), Jo(v.tag) && (c = !0), s ? function (e) { var t = e.attrsList, n = t.length; if (n) for (var r = e.attrs = new Array(n), i = 0; i < n; i++)r[i] = { name: t[i].name, value: JSON.stringify(t[i].value) }, null != t[i].start && (r[i].start = t[i].start, r[i].end = t[i].end); else e.pre || (e.plain = !0) }(v) : v.processed || (pa(v), function (e) { var t = Fr(e, "v-if"); if (t) e.if = t, da(e, { exp: t, block: e }); else { null != Fr(e, "v-else") && (e.else = !0); var n = Fr(e, "v-else-if"); n && (e.elseif = n) } }(v), function (e) { null != Fr(e, "v-once") && (e.once = !0) }(v)), n || (n = v), a ? u(v) : (r = v, i.push(v)) }, end: function (e, t, n) { var o = i[i.length - 1]; i.length -= 1, r = i[i.length - 1], u(o) }, chars: function (e, t, n) { if (r && (!q || "textarea" !== r.tag || r.attrsMap.placeholder !== e)) { var i, u, l, f = r.children; if (e = c || e.trim() ? "script" === (i = r).tag || "style" === i.tag ? e : sa(e) : f.length ? a ? "condense" === a && oa.test(e) ? "" : " " : o ? " " : "" : "") c || "condense" !== a || (e = e.replace(aa, " ")), !s && " " !== e && (u = function (e, t) { var n = t ? ho(t) : po; if (n.test(e)) { for (var r, i, o, a = [], s = [], c = n.lastIndex = 0; r = n.exec(e);) { (i = r.index) > c && (s.push(o = e.slice(c, i)), a.push(JSON.stringify(o))); var u = Ar(r[1].trim()); a.push("_s(" + u + ")"), s.push({ "@binding": u }), c = i + r[0].length } return c < e.length && (s.push(o = e.slice(c)), a.push(JSON.stringify(o))), { expression: a.join("+"), tokens: s } } }(e, Uo)) ? l = { type: 2, expression: u.expression, tokens: u.tokens, text: e } : " " === e && f.length && " " === f[f.length - 1].text || (l = { type: 3, text: e }), l && f.push(l) } }, comment: function (e, t, n) { if (r) { var i = { type: 3, text: e, isComment: !0 }; r.children.push(i) } } }), n } function fa(e, t) { var n, r; (r = Ir(n = e, "key")) && (n.key = r), e.plain = !e.key && !e.scopedSlots && !e.attrsList.length, function (e) { var t = Ir(e, "ref"); t && (e.ref = t, e.refInFor = function (e) { var t = e; for (; t;) { if (void 0 !== t.for) return !0; t = t.parent } return !1 }(e)) }(e), function (e) { var t; "template" === e.tag ? (t = Fr(e, "scope"), e.slotScope = t || Fr(e, "slot-scope")) : (t = Fr(e, "slot-scope")) && (e.slotScope = t); var n = Ir(e, "slot"); n && (e.slotTarget = '""' === n ? '"default"' : n, e.slotTargetDynamic = !(!e.attrsMap[":slot"] && !e.attrsMap["v-bind:slot"]), "template" === e.tag || e.slotScope || Nr(e, "slot", n, function (e, t) { return e.rawAttrsMap[":" + t] || e.rawAttrsMap["v-bind:" + t] || e.rawAttrsMap[t] }(e, "slot"))); if ("template" === e.tag) { var r = Pr(e, ia); if (r) { var i = va(r), o = i.name, a = i.dynamic; e.slotTarget = o, e.slotTargetDynamic = a, e.slotScope = r.value || ca } } else { var s = Pr(e, ia); if (s) { var c = e.scopedSlots || (e.scopedSlots = {}), u = va(s), l = u.name, f = u.dynamic, p = c[l] = ua("template", [], e); p.slotTarget = l, p.slotTargetDynamic = f, p.children = e.children.filter(function (e) { if (!e.slotScope) return e.parent = p, !0 }), p.slotScope = s.value || ca, e.children = [], e.plain = !1 } } }(e), function (e) { "slot" === e.tag && (e.slotName = Ir(e, "name")) }(e), function (e) { var t; (t = Ir(e, "is")) && (e.component = t); null != Fr(e, "inline-template") && (e.inlineTemplate = !0) }(e); for (var i = 0; i < zo.length; i++)e = zo[i](e, t) || e; return function (e) { var t, n, r, i, o, a, s, c, u = e.attrsList; for (t = 0, n = u.length; t < n; t++)if (r = i = u[t].name, o = u[t].value, Go.test(r)) if (e.hasBindings = !0, (a = ha(r.replace(Go, ""))) && (r = r.replace(ra, "")), na.test(r)) r = r.replace(na, ""), o = Ar(o), (c = ea.test(r)) && (r = r.slice(1, -1)), a && (a.prop && !c && "innerHtml" === (r = b(r)) && (r = "innerHTML"), a.camel && !c && (r = b(r)), a.sync && (s = Br(o, "$event"), c ? Mr(e, '"update:"+(' + r + ")", s, null, !1, 0, u[t], !0) : (Mr(e, "update:" + b(r), s, null, !1, 0, u[t]), C(r) !== b(r) && Mr(e, "update:" + C(r), s, null, !1, 0, u[t])))), a && a.prop || !e.component && qo(e.tag, e.attrsMap.type, r) ? Er(e, r, o, u[t], c) : Nr(e, r, o, u[t], c); else if (Zo.test(r)) r = r.replace(Zo, ""), (c = ea.test(r)) && (r = r.slice(1, -1)), Mr(e, r, o, a, !1, 0, u[t], c); else { var l = (r = r.replace(Go, "")).match(ta), f = l && l[1]; c = !1, f && (r = r.slice(0, -(f.length + 1)), ea.test(f) && (f = f.slice(1, -1), c = !0)), Dr(e, r, i, o, f, c, a, u[t]) } else Nr(e, r, JSON.stringify(o), u[t]), !e.component && "muted" === r && qo(e.tag, e.attrsMap.type, r) && Er(e, r, "true", u[t]) }(e), e } function pa(e) { var t; if (t = Fr(e, "v-for")) { var n = function (e) { var t = e.match(Xo); if (!t) return; var n = {}; n.for = t[2].trim(); var r = t[1].trim().replace(Qo, ""), i = r.match(Yo); i ? (n.alias = r.replace(Yo, "").trim(), n.iterator1 = i[1].trim(), i[2] && (n.iterator2 = i[2].trim())) : n.alias = r; return n }(t); n && A(e, n) } } function da(e, t) { e.ifConditions || (e.ifConditions = []), e.ifConditions.push(t) } function va(e) { var t = e.name.replace(ia, ""); return t || "#" !== e.name[0] && (t = "default"), ea.test(t) ? { name: t.slice(1, -1), dynamic: !0 } : { name: '"' + t + '"', dynamic: !1 } } function ha(e) { var t = e.match(ra); if (t) { var n = {}; return t.forEach(function (e) { n[e.slice(1)] = !0 }), n } } function ma(e) { for (var t = {}, n = 0, r = e.length; n < r; n++)t[e[n].name] = e[n].value; return t } var ya = /^xmlns:NS\d+/, ga = /^NS\d+:/; function _a(e) { return ua(e.tag, e.attrsList.slice(), e.parent) } var ba = [mo, go, { preTransformNode: function (e, t) { if ("input" === e.tag) { var n, r = e.attrsMap; if (!r["v-model"]) return; if ((r[":type"] || r["v-bind:type"]) && (n = Ir(e, "type")), r.type || n || !r["v-bind"] || (n = "(" + r["v-bind"] + ").type"), n) { var i = Fr(e, "v-if", !0), o = i ? "&&(" + i + ")" : "", a = null != Fr(e, "v-else", !0), s = Fr(e, "v-else-if", !0), c = _a(e); pa(c), jr(c, "type", "checkbox"), fa(c, t), c.processed = !0, c.if = "(" + n + ")==='checkbox'" + o, da(c, { exp: c.if, block: c }); var u = _a(e); Fr(u, "v-for", !0), jr(u, "type", "radio"), fa(u, t), da(c, { exp: "(" + n + ")==='radio'" + o, block: u }); var l = _a(e); return Fr(l, "v-for", !0), jr(l, ":type", n), fa(l, t), da(c, { exp: i, block: l }), a ? c.else = !0 : s && (c.elseif = s), c } } } }]; var $a, wa, Ca = { expectHTML: !0, modules: ba, directives: { model: function (e, t, n) { var r = t.value, i = t.modifiers, o = e.tag, a = e.attrsMap.type; if (e.component) return Hr(e, r, i), !1; if ("select" === o) !function (e, t, n) { var r = 'var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return ' + (n && n.number ? "_n(val)" : "val") + "});"; r = r + " " + Br(t, "$event.target.multiple ? $$selectedVal : $$selectedVal[0]"), Mr(e, "change", r, null, !0) }(e, r, i); else if ("input" === o && "checkbox" === a) !function (e, t, n) { var r = n && n.number, i = Ir(e, "value") || "null", o = Ir(e, "true-value") || "true", a = Ir(e, "false-value") || "false"; Er(e, "checked", "Array.isArray(" + t + ")?_i(" + t + "," + i + ")>-1" + ("true" === o ? ":(" + t + ")" : ":_q(" + t + "," + o + ")")), Mr(e, "change", "var $$a=" + t + ",$$el=$event.target,$$c=$$el.checked?(" + o + "):(" + a + ");if(Array.isArray($$a)){var $$v=" + (r ? "_n(" + i + ")" : i) + ",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&(" + Br(t, "$$a.concat([$$v])") + ")}else{$$i>-1&&(" + Br(t, "$$a.slice(0,$$i).concat($$a.slice($$i+1))") + ")}}else{" + Br(t, "$$c") + "}", null, !0) }(e, r, i); else if ("input" === o && "radio" === a) !function (e, t, n) { var r = n && n.number, i = Ir(e, "value") || "null"; Er(e, "checked", "_q(" + t + "," + (i = r ? "_n(" + i + ")" : i) + ")"), Mr(e, "change", Br(t, i), null, !0) }(e, r, i); else if ("input" === o || "textarea" === o) !function (e, t, n) { var r = e.attrsMap.type, i = n || {}, o = i.lazy, a = i.number, s = i.trim, c = !o && "range" !== r, u = o ? "change" : "range" === r ? Wr : "input", l = "$event.target.value"; s && (l = "$event.target.value.trim()"), a && (l = "_n(" + l + ")"); var f = Br(t, l); c && (f = "if($event.target.composing)return;" + f), Er(e, "value", "(" + t + ")"), Mr(e, u, f, null, !0), (s || a) && Mr(e, "blur", "$forceUpdate()") }(e, r, i); else if (!F.isReservedTag(o)) return Hr(e, r, i), !1; return !0 }, text: function (e, t) { t.value && Er(e, "textContent", "_s(" + t.value + ")", t) }, html: function (e, t) { t.value && Er(e, "innerHTML", "_s(" + t.value + ")", t) } }, isPreTag: function (e) { return "pre" === e }, isUnaryTag: bo, mustUseProp: jn, canBeLeftOpenTag: $o, isReservedTag: Wn, getTagNamespace: Zn, staticKeys: function (e) { return e.reduce(function (e, t) { return e.concat(t.staticKeys || []) }, []).join(",") }(ba) }, xa = g(function (e) { return p("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap" + (e ? "," + e : "")) }); function ka(e, t) { e && ($a = xa(t.staticKeys || ""), wa = t.isReservedTag || T, function e(t) { t.static = function (e) { if (2 === e.type) return !1; if (3 === e.type) return !0; return !(!e.pre && (e.hasBindings || e.if || e.for || d(e.tag) || !wa(e.tag) || function (e) { for (; e.parent;) { if ("template" !== (e = e.parent).tag) return !1; if (e.for) return !0 } return !1 }(e) || !Object.keys(e).every($a))) }(t); if (1 === t.type) { if (!wa(t.tag) && "slot" !== t.tag && null == t.attrsMap["inline-template"]) return; for (var n = 0, r = t.children.length; n < r; n++) { var i = t.children[n]; e(i), i.static || (t.static = !1) } if (t.ifConditions) for (var o = 1, a = t.ifConditions.length; o < a; o++) { var s = t.ifConditions[o].block; e(s), s.static || (t.static = !1) } } }(e), function e(t, n) { if (1 === t.type) { if ((t.static || t.once) && (t.staticInFor = n), t.static && t.children.length && (1 !== t.children.length || 3 !== t.children[0].type)) return void (t.staticRoot = !0); if (t.staticRoot = !1, t.children) for (var r = 0, i = t.children.length; r < i; r++)e(t.children[r], n || !!t.for); if (t.ifConditions) for (var o = 1, a = t.ifConditions.length; o < a; o++)e(t.ifConditions[o].block, n) } }(e, !1)) } var Aa = /^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/, Oa = /\([^)]*?\);*$/, Sa = /^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/, Ta = { esc: 27, tab: 9, enter: 13, space: 32, up: 38, left: 37, right: 39, down: 40, delete: [8, 46] }, Ea = { esc: ["Esc", "Escape"], tab: "Tab", enter: "Enter", space: [" ", "Spacebar"], up: ["Up", "ArrowUp"], left: ["Left", "ArrowLeft"], right: ["Right", "ArrowRight"], down: ["Down", "ArrowDown"], delete: ["Backspace", "Delete", "Del"] }, Na = function (e) { return "if(" + e + ")return null;" }, ja = { stop: "$event.stopPropagation();", prevent: "$event.preventDefault();", self: Na("$event.target !== $event.currentTarget"), ctrl: Na("!$event.ctrlKey"), shift: Na("!$event.shiftKey"), alt: Na("!$event.altKey"), meta: Na("!$event.metaKey"), left: Na("'button' in $event && $event.button !== 0"), middle: Na("'button' in $event && $event.button !== 1"), right: Na("'button' in $event && $event.button !== 2") }; function Da(e, t) { var n = t ? "nativeOn:" : "on:", r = "", i = ""; for (var o in e) { var a = La(e[o]); e[o] && e[o].dynamic ? i += o + "," + a + "," : r += '"' + o + '":' + a + "," } return r = "{" + r.slice(0, -1) + "}", i ? n + "_d(" + r + ",[" + i.slice(0, -1) + "])" : n + r } function La(e) { if (!e) return "function(){}"; if (Array.isArray(e)) return "[" + e.map(function (e) { return La(e) }).join(",") + "]"; var t = Sa.test(e.value), n = Aa.test(e.value), r = Sa.test(e.value.replace(Oa, "")); if (e.modifiers) { var i = "", o = "", a = []; for (var s in e.modifiers) if (ja[s]) o += ja[s], Ta[s] && a.push(s); else if ("exact" === s) { var c = e.modifiers; o += Na(["ctrl", "shift", "alt", "meta"].filter(function (e) { return !c[e] }).map(function (e) { return "$event." + e + "Key" }).join("||")) } else a.push(s); return a.length && (i += function (e) { return "if(!$event.type.indexOf('key')&&" + e.map(Ma).join("&&") + ")return null;" }(a)), o && (i += o), "function($event){" + i + (t ? "return " + e.value + "($event)" : n ? "return (" + e.value + ")($event)" : r ? "return " + e.value : e.value) + "}" } return t || n ? e.value : "function($event){" + (r ? "return " + e.value : e.value) + "}" } function Ma(e) { var t = parseInt(e, 10); if (t) return "$event.keyCode!==" + t; var n = Ta[e], r = Ea[e]; return "_k($event.keyCode," + JSON.stringify(e) + "," + JSON.stringify(n) + ",$event.key," + JSON.stringify(r) + ")" } var Ia = { on: function (e, t) { e.wrapListeners = function (e) { return "_g(" + e + "," + t.value + ")" } }, bind: function (e, t) { e.wrapData = function (n) { return "_b(" + n + ",'" + e.tag + "'," + t.value + "," + (t.modifiers && t.modifiers.prop ? "true" : "false") + (t.modifiers && t.modifiers.sync ? ",true" : "") + ")" } }, cloak: S }, Fa = function (e) { this.options = e, this.warn = e.warn || Sr, this.transforms = Tr(e.modules, "transformCode"), this.dataGenFns = Tr(e.modules, "genData"), this.directives = A(A({}, Ia), e.directives); var t = e.isReservedTag || T; this.maybeComponent = function (e) { return !!e.component || !t(e.tag) }, this.onceId = 0, this.staticRenderFns = [], this.pre = !1 }; function Pa(e, t) { var n = new Fa(t); return { render: "with(this){return " + (e ? Ra(e, n) : '_c("div")') + "}", staticRenderFns: n.staticRenderFns } } function Ra(e, t) { if (e.parent && (e.pre = e.pre || e.parent.pre), e.staticRoot && !e.staticProcessed) return Ha(e, t); if (e.once && !e.onceProcessed) return Ba(e, t); if (e.for && !e.forProcessed) return za(e, t); if (e.if && !e.ifProcessed) return Ua(e, t); if ("template" !== e.tag || e.slotTarget || t.pre) { if ("slot" === e.tag) return function (e, t) { var n = e.slotName || '"default"', r = qa(e, t), i = "_t(" + n + (r ? "," + r : ""), o = e.attrs || e.dynamicAttrs ? Ga((e.attrs || []).concat(e.dynamicAttrs || []).map(function (e) { return { name: b(e.name), value: e.value, dynamic: e.dynamic } })) : null, a = e.attrsMap["v-bind"]; !o && !a || r || (i += ",null"); o && (i += "," + o); a && (i += (o ? "" : ",null") + "," + a); return i + ")" }(e, t); var n; if (e.component) n = function (e, t, n) { var r = t.inlineTemplate ? null : qa(t, n, !0); return "_c(" + e + "," + Va(t, n) + (r ? "," + r : "") + ")" }(e.component, e, t); else { var r; (!e.plain || e.pre && t.maybeComponent(e)) && (r = Va(e, t)); var i = e.inlineTemplate ? null : qa(e, t, !0); n = "_c('" + e.tag + "'" + (r ? "," + r : "") + (i ? "," + i : "") + ")" } for (var o = 0; o < t.transforms.length; o++)n = t.transforms[o](e, n); return n } return qa(e, t) || "void 0" } function Ha(e, t) { e.staticProcessed = !0; var n = t.pre; return e.pre && (t.pre = e.pre), t.staticRenderFns.push("with(this){return " + Ra(e, t) + "}"), t.pre = n, "_m(" + (t.staticRenderFns.length - 1) + (e.staticInFor ? ",true" : "") + ")" } function Ba(e, t) { if (e.onceProcessed = !0, e.if && !e.ifProcessed) return Ua(e, t); if (e.staticInFor) { for (var n = "", r = e.parent; r;) { if (r.for) { n = r.key; break } r = r.parent } return n ? "_o(" + Ra(e, t) + "," + t.onceId++ + "," + n + ")" : Ra(e, t) } return Ha(e, t) } function Ua(e, t, n, r) { return e.ifProcessed = !0, function e(t, n, r, i) { if (!t.length) return i || "_e()"; var o = t.shift(); return o.exp ? "(" + o.exp + ")?" + a(o.block) + ":" + e(t, n, r, i) : "" + a(o.block); function a(e) { return r ? r(e, n) : e.once ? Ba(e, n) : Ra(e, n) } }(e.ifConditions.slice(), t, n, r) } function za(e, t, n, r) { var i = e.for, o = e.alias, a = e.iterator1 ? "," + e.iterator1 : "", s = e.iterator2 ? "," + e.iterator2 : ""; return e.forProcessed = !0, (r || "_l") + "((" + i + "),function(" + o + a + s + "){return " + (n || Ra)(e, t) + "})" } function Va(e, t) { var n = "{", r = function (e, t) { var n = e.directives; if (!n) return; var r, i, o, a, s = "directives:[", c = !1; for (r = 0, i = n.length; r < i; r++) { o = n[r], a = !0; var u = t.directives[o.name]; u && (a = !!u(e, o, t.warn)), a && (c = !0, s += '{name:"' + o.name + '",rawName:"' + o.rawName + '"' + (o.value ? ",value:(" + o.value + "),expression:" + JSON.stringify(o.value) : "") + (o.arg ? ",arg:" + (o.isDynamicArg ? o.arg : '"' + o.arg + '"') : "") + (o.modifiers ? ",modifiers:" + JSON.stringify(o.modifiers) : "") + "},") } if (c) return s.slice(0, -1) + "]" }(e, t); r && (n += r + ","), e.key && (n += "key:" + e.key + ","), e.ref && (n += "ref:" + e.ref + ","), e.refInFor && (n += "refInFor:true,"), e.pre && (n += "pre:true,"), e.component && (n += 'tag:"' + e.tag + '",'); for (var i = 0; i < t.dataGenFns.length; i++)n += t.dataGenFns[i](e); if (e.attrs && (n += "attrs:" + Ga(e.attrs) + ","), e.props && (n += "domProps:" + Ga(e.props) + ","), e.events && (n += Da(e.events, !1) + ","), e.nativeEvents && (n += Da(e.nativeEvents, !0) + ","), e.slotTarget && !e.slotScope && (n += "slot:" + e.slotTarget + ","), e.scopedSlots && (n += function (e, t, n) { var r = e.for || Object.keys(t).some(function (e) { var n = t[e]; return n.slotTargetDynamic || n.if || n.for || Ka(n) }), i = !!e.if; if (!r) for (var o = e.parent; o;) { if (o.slotScope && o.slotScope !== ca || o.for) { r = !0; break } o.if && (i = !0), o = o.parent } var a = Object.keys(t).map(function (e) { return Ja(t[e], n) }).join(","); return "scopedSlots:_u([" + a + "]" + (r ? ",null,true" : "") + (!r && i ? ",null,false," + function (e) { var t = 5381, n = e.length; for (; n;)t = 33 * t ^ e.charCodeAt(--n); return t >>> 0 }(a) : "") + ")" }(e, e.scopedSlots, t) + ","), e.model && (n += "model:{value:" + e.model.value + ",callback:" + e.model.callback + ",expression:" + e.model.expression + "},"), e.inlineTemplate) { var o = function (e, t) { var n = e.children[0]; if (n && 1 === n.type) { var r = Pa(n, t.options); return "inlineTemplate:{render:function(){" + r.render + "},staticRenderFns:[" + r.staticRenderFns.map(function (e) { return "function(){" + e + "}" }).join(",") + "]}" } }(e, t); o && (n += o + ",") } return n = n.replace(/,$/, "") + "}", e.dynamicAttrs && (n = "_b(" + n + ',"' + e.tag + '",' + Ga(e.dynamicAttrs) + ")"), e.wrapData && (n = e.wrapData(n)), e.wrapListeners && (n = e.wrapListeners(n)), n } function Ka(e) { return 1 === e.type && ("slot" === e.tag || e.children.some(Ka)) } function Ja(e, t) { var n = e.attrsMap["slot-scope"]; if (e.if && !e.ifProcessed && !n) return Ua(e, t, Ja, "null"); if (e.for && !e.forProcessed) return za(e, t, Ja); var r = e.slotScope === ca ? "" : String(e.slotScope), i = "function(" + r + "){return " + ("template" === e.tag ? e.if && n ? "(" + e.if + ")?" + (qa(e, t) || "undefined") + ":undefined" : qa(e, t) || "undefined" : Ra(e, t)) + "}", o = r ? "" : ",proxy:true"; return "{key:" + (e.slotTarget || '"default"') + ",fn:" + i + o + "}" } function qa(e, t, n, r, i) { var o = e.children; if (o.length) { var a = o[0]; if (1 === o.length && a.for && "template" !== a.tag && "slot" !== a.tag) { var s = n ? t.maybeComponent(a) ? ",1" : ",0" : ""; return "" + (r || Ra)(a, t) + s } var c = n ? function (e, t) { for (var n = 0, r = 0; r < e.length; r++) { var i = e[r]; if (1 === i.type) { if (Wa(i) || i.ifConditions && i.ifConditions.some(function (e) { return Wa(e.block) })) { n = 2; break } (t(i) || i.ifConditions && i.ifConditions.some(function (e) { return t(e.block) })) && (n = 1) } } return n }(o, t.maybeComponent) : 0, u = i || Za; return "[" + o.map(function (e) { return u(e, t) }).join(",") + "]" + (c ? "," + c : "") } } function Wa(e) { return void 0 !== e.for || "template" === e.tag || "slot" === e.tag } function Za(e, t) { return 1 === e.type ? Ra(e, t) : 3 === e.type && e.isComment ? (r = e, "_e(" + JSON.stringify(r.text) + ")") : "_v(" + (2 === (n = e).type ? n.expression : Xa(JSON.stringify(n.text))) + ")"; var n, r } function Ga(e) { for (var t = "", n = "", r = 0; r < e.length; r++) { var i = e[r], o = Xa(i.value); i.dynamic ? n += i.name + "," + o + "," : t += '"' + i.name + '":' + o + "," } return t = "{" + t.slice(0, -1) + "}", n ? "_d(" + t + ",[" + n.slice(0, -1) + "])" : t } function Xa(e) { return e.replace(/\u2028/g, "\\u2028").replace(/\u2029/g, "\\u2029") } new RegExp("\\b" + "do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b") + "\\b"); function Ya(e, t) { try { return new Function(e) } catch (n) { return t.push({ err: n, code: e }), S } } function Qa(e) { var t = Object.create(null); return function (n, r, i) { (r = A({}, r)).warn; delete r.warn; var o = r.delimiters ? String(r.delimiters) + n : n; if (t[o]) return t[o]; var a = e(n, r), s = {}, c = []; return s.render = Ya(a.render, c), s.staticRenderFns = a.staticRenderFns.map(function (e) { return Ya(e, c) }), t[o] = s } } var es, ts, ns = (es = function (e, t) { var n = la(e.trim(), t); !1 !== t.optimize && ka(n, t); var r = Pa(n, t); return { ast: n, render: r.render, staticRenderFns: r.staticRenderFns } }, function (e) { function t(t, n) { var r = Object.create(e), i = [], o = []; if (n) for (var a in n.modules && (r.modules = (e.modules || []).concat(n.modules)), n.directives && (r.directives = A(Object.create(e.directives || null), n.directives)), n) "modules" !== a && "directives" !== a && (r[a] = n[a]); r.warn = function (e, t, n) { (n ? o : i).push(e) }; var s = es(t.trim(), r); return s.errors = i, s.tips = o, s } return { compile: t, compileToFunctions: Qa(t) } })(Ca), rs = (ns.compile, ns.compileToFunctions); function is(e) { return (ts = ts || document.createElement("div")).innerHTML = e ? '<a href="\n"/>' : '<div a="\n"/>', ts.innerHTML.indexOf("&#10;") > 0 } var os = !!z && is(!1), as = !!z && is(!0), ss = g(function (e) { var t = Yn(e); return t && t.innerHTML }), cs = wn.prototype.$mount; return wn.prototype.$mount = function (e, t) { if ((e = e && Yn(e)) === document.body || e === document.documentElement) return this; var n = this.$options; if (!n.render) { var r = n.template; if (r) if ("string" == typeof r) "#" === r.charAt(0) && (r = ss(r)); else { if (!r.nodeType) return this; r = r.innerHTML } else e && (r = function (e) { if (e.outerHTML) return e.outerHTML; var t = document.createElement("div"); return t.appendChild(e.cloneNode(!0)), t.innerHTML }(e)); if (r) { var i = rs(r, { outputSourceRange: !1, shouldDecodeNewlines: os, shouldDecodeNewlinesForHref: as, delimiters: n.delimiters, comments: n.comments }, this), o = i.render, a = i.staticRenderFns; n.render = o, n.staticRenderFns = a } } return cs.call(this, e, t) }, wn.compile = rs, wn });
  </script>
  <!-- Protobuf -->
  <script>
    (function (c, d) { if (typeof define === "function" && (define.amd || define.cmd)) { define(d) } else { if (typeof require === "function" && typeof module === "object" && module && module.exports) { module.exports = d(true) } else { c.RongIMLib = c.RongIMLib || { RongIMClient: {} }; c.RongIMLib.RongIMClient.Protobuf = d() } } })(window, function (a) { var d = (function () { function E(an, ap, ao) { this.low = an | 0; this.high = ap | 0; this.unsigned = !!ao } E.prototype.__isLong__; Object.defineProperty(E.prototype, "__isLong__", { value: true, enumerable: false, configurable: false }); function k(an) { return (an && an.__isLong__) === true } E.isLong = k; var aa = {}; var M = {}; function ah(ap, ao) { var aq, ar, an; if (ao) { ap >>>= 0; if (an = (0 <= ap && ap < 256)) { ar = M[ap]; if (ar) { return ar } } aq = S(ap, (ap | 0) < 0 ? -1 : 0, true); if (an) { M[ap] = aq } return aq } else { ap |= 0; if (an = (-128 <= ap && ap < 128)) { ar = aa[ap]; if (ar) { return ar } } aq = S(ap, ap < 0 ? -1 : 0, false); if (an) { aa[ap] = aq } return aq } } E.fromInt = ah; function q(ao, an) { if (isNaN(ao) || !isFinite(ao)) { return an ? m : F } if (an) { if (ao < 0) { return m } if (ao >= h) { return D } } else { if (ao <= -C) { return T } if (ao + 1 >= C) { return b } } if (ao < 0) { return q(-ao, an).neg() } return S((ao % i) | 0, (ao / i) | 0, an) } E.fromNumber = q; function S(an, ap, ao) { return new E(an, ap, ao) } E.fromBits = S; var B = Math.pow; function L(ar, ap, at) { if (ar.length === 0) { throw Error("empty string") } if (ar === "NaN" || ar === "Infinity" || ar === "+Infinity" || ar === "-Infinity") { return F } if (typeof ap === "number") { at = ap, ap = false } else { ap = !!ap } at = at || 10; if (at < 2 || 36 < at) { throw RangeError("radix") } var ao; if ((ao = ar.indexOf("-")) > 0) { throw Error("interior hyphen") } else { if (ao === 0) { return L(ar.substring(1), ap, at).neg() } } var av = q(B(at, 8)); var ax = F; for (var aq = 0; aq < ar.length; aq += 8) { var aw = Math.min(8, ar.length - aq), au = parseInt(ar.substring(aq, aq + aw), at); if (aw < 8) { var an = q(B(at, aw)); ax = ax.mul(an).add(q(au)) } else { ax = ax.mul(av); ax = ax.add(q(au)) } } ax.unsigned = ap; return ax } E.fromString = L; function K(an) { if (an instanceof E) { return an } if (typeof an === "number") { return q(an) } if (typeof an === "string") { return L(an) } return S(an.low, an.high, an.unsigned) } E.fromValue = K; var ai = 1 << 16; var al = 1 << 24; var i = ai * ai; var h = i * i; var C = h / 2; var u = ah(al); var F = ah(0); E.ZERO = F; var m = ah(0, true); E.UZERO = m; var W = ah(1); E.ONE = W; var O = ah(1, true); E.UONE = O; var f = ah(-1); E.NEG_ONE = f; var b = S(4294967295 | 0, 2147483647 | 0, false); E.MAX_VALUE = b; var D = S(4294967295 | 0, 4294967295 | 0, true); E.MAX_UNSIGNED_VALUE = D; var T = S(0, 2147483648 | 0, false); E.MIN_VALUE = T; var z = E.prototype; z.toInt = function v() { return this.unsigned ? this.low >>> 0 : this.low }; z.toNumber = function ae() { if (this.unsigned) { return ((this.high >>> 0) * i) + (this.low >>> 0) } return this.high * i + (this.low >>> 0) }; z.toString = function n(at) { at = at || 10; if (at < 2 || 36 < at) { throw RangeError("radix") } if (this.isZero()) { return "0" } if (this.isNegative()) { if (this.eq(T)) { var aq = q(at), an = this.div(aq), ap = an.mul(aq).sub(this); return an.toString(at) + ap.toInt().toString(at) } else { return "-" + this.neg().toString(at) } } var aw = q(B(at, 6), this.unsigned), av = this; var ax = ""; while (true) { var au = av.div(aw), ar = av.sub(au.mul(aw)).toInt() >>> 0, ao = ar.toString(at); av = au; if (av.isZero()) { return ao + ax } else { while (ao.length < 6) { ao = "0" + ao } ax = "" + ao + ax } } }; z.getHighBits = function af() { return this.high }; z.getHighBitsUnsigned = function p() { return this.high >>> 0 }; z.getLowBits = function y() { return this.low }; z.getLowBitsUnsigned = function U() { return this.low >>> 0 }; z.getNumBitsAbs = function aj() { if (this.isNegative()) { return this.eq(T) ? 64 : this.neg().getNumBitsAbs() } var ao = this.high != 0 ? this.high : this.low; for (var an = 31; an > 0; an--) { if ((ao & (1 << an)) != 0) { break } } return this.high != 0 ? an + 33 : an + 1 }; z.isZero = function R() { return this.high === 0 && this.low === 0 }; z.isNegative = function X() { return !this.unsigned && this.high < 0 }; z.isPositive = function ad() { return this.unsigned || this.high >= 0 }; z.isOdd = function V() { return (this.low & 1) === 1 }; z.isEven = function x() { return (this.low & 1) === 0 }; z.equals = function N(an) { if (!k(an)) { an = K(an) } if (this.unsigned !== an.unsigned && (this.high >>> 31) === 1 && (an.high >>> 31) === 1) { return false } return this.high === an.high && this.low === an.low }; z.eq = z.equals; z.notEquals = function ag(an) { return !this.eq(an) }; z.neq = z.notEquals; z.lessThan = function t(an) { return this.comp(an) < 0 }; z.lt = z.lessThan; z.lessThanOrEqual = function Z(an) { return this.comp(an) <= 0 }; z.lte = z.lessThanOrEqual; z.greaterThan = function o(an) { return this.comp(an) > 0 }; z.gt = z.greaterThan; z.greaterThanOrEqual = function Q(an) { return this.comp(an) >= 0 }; z.gte = z.greaterThanOrEqual; z.compare = function s(ao) { if (!k(ao)) { ao = K(ao) } if (this.eq(ao)) { return 0 } var an = this.isNegative(), ap = ao.isNegative(); if (an && !ap) { return -1 } if (!an && ap) { return 1 } if (!this.unsigned) { return this.sub(ao).isNegative() ? -1 : 1 } return (ao.high >>> 0) > (this.high >>> 0) || (ao.high === this.high && (ao.low >>> 0) > (this.low >>> 0)) ? -1 : 1 }; z.comp = z.compare; z.negate = function w() { if (!this.unsigned && this.eq(T)) { return T } return this.not().add(W) }; z.neg = z.negate; z.add = function j(aq) { if (!k(aq)) { aq = K(aq) } var au = this.high >>> 16; var ao = this.high & 65535; var aw = this.low >>> 16; var ap = this.low & 65535; var ay = aq.high >>> 16; var ar = aq.high & 65535; var az = aq.low >>> 16; var at = aq.low & 65535; var aA = 0, av = 0, an = 0, ax = 0; ax += ap + at; an += ax >>> 16; ax &= 65535; an += aw + az; av += an >>> 16; an &= 65535; av += ao + ar; aA += av >>> 16; av &= 65535; aA += au + ay; aA &= 65535; return S((an << 16) | ax, (aA << 16) | av, this.unsigned) }; z.subtract = function r(an) { if (!k(an)) { an = K(an) } return this.add(an.neg()) }; z.sub = z.subtract; z.multiply = function I(az) { if (this.isZero()) { return F } if (!k(az)) { az = K(az) } if (az.isZero()) { return F } if (this.eq(T)) { return az.isOdd() ? T : F } if (az.eq(T)) { return this.isOdd() ? T : F } if (this.isNegative()) { if (az.isNegative()) { return this.neg().mul(az.neg()) } else { return this.neg().mul(az).neg() } } else { if (az.isNegative()) { return this.mul(az.neg()).neg() } } if (this.lt(u) && az.lt(u)) { return q(this.toNumber() * az.toNumber(), this.unsigned) } var at = this.high >>> 16; var ao = this.high & 65535; var av = this.low >>> 16; var ap = this.low & 65535; var ax = az.high >>> 16; var aq = az.high & 65535; var ay = az.low >>> 16; var ar = az.low & 65535; var aA = 0, au = 0, an = 0, aw = 0; aw += ap * ar; an += aw >>> 16; aw &= 65535; an += av * ar; au += an >>> 16; an &= 65535; an += ap * ay; au += an >>> 16; an &= 65535; au += ao * ar; aA += au >>> 16; au &= 65535; au += av * ay; aA += au >>> 16; au &= 65535; au += ap * aq; aA += au >>> 16; au &= 65535; aA += at * ar + ao * ay + av * aq + ap * ax; aA &= 65535; return S((an << 16) | aw, (aA << 16) | au, this.unsigned) }; z.mul = z.multiply; z.divide = function J(an) { if (!k(an)) { an = K(an) } if (an.isZero()) { throw Error("division by zero") } if (this.isZero()) { return this.unsigned ? m : F } var at, av, aq; if (!this.unsigned) { if (this.eq(T)) { if (an.eq(W) || an.eq(f)) { return T } else { if (an.eq(T)) { return W } else { var ao = this.shr(1); at = ao.div(an).shl(1); if (at.eq(F)) { return an.isNegative() ? W : f } else { av = this.sub(an.mul(at)); aq = at.add(av.div(an)); return aq } } } } else { if (an.eq(T)) { return this.unsigned ? m : F } } if (this.isNegative()) { if (an.isNegative()) { return this.neg().div(an.neg()) } return this.neg().div(an).neg() } else { if (an.isNegative()) { return this.div(an.neg()).neg() } } aq = F } else { if (!an.unsigned) { an = an.toUnsigned() } if (an.gt(this)) { return m } if (an.gt(this.shru(1))) { return O } aq = m } av = this; while (av.gte(an)) { at = Math.max(1, Math.floor(av.toNumber() / an.toNumber())); var aw = Math.ceil(Math.log(at) / Math.LN2), au = (aw <= 48) ? 1 : B(2, aw - 48), ap = q(at), ar = ap.mul(an); while (ar.isNegative() || ar.gt(av)) { at -= au; ap = q(at, this.unsigned); ar = ap.mul(an) } if (ap.isZero()) { ap = W } aq = aq.add(ap); av = av.sub(ar) } return aq }; z.div = z.divide; z.modulo = function ak(an) { if (!k(an)) { an = K(an) } return this.sub(this.div(an).mul(an)) }; z.mod = z.modulo; z.not = function ac() { return S(~this.low, ~this.high, this.unsigned) }; z.and = function ab(an) { if (!k(an)) { an = K(an) } return S(this.low & an.low, this.high & an.high, this.unsigned) }; z.or = function P(an) { if (!k(an)) { an = K(an) } return S(this.low | an.low, this.high | an.high, this.unsigned) }; z.xor = function Y(an) { if (!k(an)) { an = K(an) } return S(this.low ^ an.low, this.high ^ an.high, this.unsigned) }; z.shiftLeft = function A(an) { if (k(an)) { an = an.toInt() } if ((an &= 63) === 0) { return this } else { if (an < 32) { return S(this.low << an, (this.high << an) | (this.low >>> (32 - an)), this.unsigned) } else { return S(0, this.low << (an - 32), this.unsigned) } } }; z.shl = z.shiftLeft; z.shiftRight = function l(an) { if (k(an)) { an = an.toInt() } if ((an &= 63) === 0) { return this } else { if (an < 32) { return S((this.low >>> an) | (this.high << (32 - an)), this.high >> an, this.unsigned) } else { return S(this.high >> (an - 32), this.high >= 0 ? 0 : -1, this.unsigned) } } }; z.shr = z.shiftRight; z.shiftRightUnsigned = function G(ap) { if (k(ap)) { ap = ap.toInt() } ap &= 63; if (ap === 0) { return this } else { var ao = this.high; if (ap < 32) { var an = this.low; return S((an >>> ap) | (ao << (32 - ap)), ao >>> ap, this.unsigned) } else { if (ap === 32) { return S(ao, 0, this.unsigned) } else { return S(ao >>> (ap - 32), 0, this.unsigned) } } } }; z.shru = z.shiftRightUnsigned; z.toSigned = function am() { if (!this.unsigned) { return this } return S(this.low, this.high, false) }; z.toUnsigned = function H() { if (this.unsigned) { return this } return S(this.low, this.high, true) }; z.toBytes = function (an) { return an ? this.toBytesLE() : this.toBytesBE() }; z.toBytesLE = function () { var an = this.high, ao = this.low; return [ao & 255, (ao >>> 8) & 255, (ao >>> 16) & 255, (ao >>> 24) & 255, an & 255, (an >>> 8) & 255, (an >>> 16) & 255, (an >>> 24) & 255] }; z.toBytesBE = function () { var an = this.high, ao = this.low; return [(an >>> 24) & 255, (an >>> 16) & 255, (an >>> 8) & 255, an & 255, (ao >>> 24) & 255, (ao >>> 16) & 255, (ao >>> 8) & 255, ao & 255] }; return E })(); var c = (function (k) { var n = function (q, s, r) { if (typeof q === "undefined") { q = n.DEFAULT_CAPACITY } if (typeof s === "undefined") { s = n.DEFAULT_ENDIAN } if (typeof r === "undefined") { r = n.DEFAULT_NOASSERT } if (!r) { q = q | 0; if (q < 0) { throw RangeError("Illegal capacity") } s = !!s; r = !!r } this.buffer = q === 0 ? p : new ArrayBuffer(q); this.view = q === 0 ? null : new Uint8Array(this.buffer); this.offset = 0; this.markedOffset = -1; this.limit = q; this.littleEndian = s; this.noAssert = r }; n.VERSION = "5.0.1"; n.LITTLE_ENDIAN = true; n.BIG_ENDIAN = false; n.DEFAULT_CAPACITY = 16; n.DEFAULT_ENDIAN = n.BIG_ENDIAN; n.DEFAULT_NOASSERT = false; n.Long = k || null; var l = n.prototype; l.__isByteBuffer__; Object.defineProperty(l, "__isByteBuffer__", { value: true, enumerable: false, configurable: false }); var p = new ArrayBuffer(0); var m = String.fromCharCode; function b(r) { var q = 0; return function () { return q < r.length ? r.charCodeAt(q++) : null } } function f() { var q = [], r = []; return function () { if (arguments.length === 0) { return r.join("") + m.apply(String, q) } if (q.length + arguments.length > 1024) { r.push(m.apply(String, q)), q.length = 0 } Array.prototype.push.apply(q, arguments) } } n.accessor = function () { return Uint8Array }; n.allocate = function (q, s, r) { return new n(q, s, r) }; n.concat = function (z, s, r, y) { if (typeof s === "boolean" || typeof s !== "string") { y = r; r = s; s = undefined } var q = 0; for (var w = 0, v = z.length, t; w < v; ++w) { if (!n.isByteBuffer(z[w])) { z[w] = n.wrap(z[w], s) } t = z[w].limit - z[w].offset; if (t > 0) { q += t } } if (q === 0) { return new n(0, r, y) } var x = new n(q, r, y), u; w = 0; while (w < v) { u = z[w++]; t = u.limit - u.offset; if (t <= 0) { continue } x.view.set(u.view.subarray(u.offset, u.limit), x.offset); x.offset += t } x.limit = x.offset; x.offset = 0; return x }; n.isByteBuffer = function (q) { return (q && q.__isByteBuffer__) === true }; n.type = function () { return ArrayBuffer }; n.wrap = function (q, s, u, t) { if (typeof s !== "string") { t = u; u = s; s = undefined } if (typeof q === "string") { if (typeof s === "undefined") { s = "utf8" } switch (s) { case "base64": return n.fromBase64(q, u); case "hex": return n.fromHex(q, u); case "binary": return n.fromBinary(q, u); case "utf8": return n.fromUTF8(q, u); case "debug": return n.fromDebug(q, u); default: throw Error("Unsupported encoding: " + s) } } if (q === null || typeof q !== "object") { throw TypeError("Illegal buffer") } var v; if (n.isByteBuffer(q)) { v = l.clone.call(q); v.markedOffset = -1; return v } if (q instanceof Uint8Array) { v = new n(0, u, t); if (q.length > 0) { v.buffer = q.buffer; v.offset = q.byteOffset; v.limit = q.byteOffset + q.byteLength; v.view = new Uint8Array(q.buffer) } } else { if (q instanceof ArrayBuffer) { v = new n(0, u, t); if (q.byteLength > 0) { v.buffer = q; v.offset = 0; v.limit = q.byteLength; v.view = q.byteLength > 0 ? new Uint8Array(q) : null } } else { if (Object.prototype.toString.call(q) === "[object Array]") { v = new n(q.length, u, t); v.limit = q.length; for (var r = 0; r < q.length; ++r) { v.view[r] = q[r] } } else { throw TypeError("Illegal buffer") } } } return v }; l.writeBitSet = function (w, u) { var q = typeof u === "undefined"; if (q) { u = this.offset } if (!this.noAssert) { if (!(w instanceof Array)) { throw TypeError("Illegal BitSet: Not an array") } if (typeof u !== "number" || u % 1 !== 0) { throw TypeError("Illegal offset: " + u + " (not an integer)") } u >>>= 0; if (u < 0 || u + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + u + " (+" + 0 + ") <= " + this.buffer.byteLength) } } var r = u, x = w.length, y = (x >> 3), v = 0, t; u += this.writeVarint32(x, u); while (y--) { t = (!!w[v++] & 1) | ((!!w[v++] & 1) << 1) | ((!!w[v++] & 1) << 2) | ((!!w[v++] & 1) << 3) | ((!!w[v++] & 1) << 4) | ((!!w[v++] & 1) << 5) | ((!!w[v++] & 1) << 6) | ((!!w[v++] & 1) << 7); this.writeByte(t, u++) } if (v < x) { var s = 0; t = 0; while (v < x) { t = t | ((!!w[v++] & 1) << (s++)) } this.writeByte(t, u++) } if (q) { this.offset = u; return this } return u - r }; l.readBitSet = function (t) { var q = typeof t === "undefined"; if (q) { t = this.offset } var u = this.readVarint32(t), x = u.value, y = (x >> 3), v = 0, w = [], s; t += u.length; while (y--) { s = this.readByte(t++); w[v++] = !!(s & 1); w[v++] = !!(s & 2); w[v++] = !!(s & 4); w[v++] = !!(s & 8); w[v++] = !!(s & 16); w[v++] = !!(s & 32); w[v++] = !!(s & 64); w[v++] = !!(s & 128) } if (v < x) { var r = 0; s = this.readByte(t++); while (v < x) { w[v++] = !!((s >> (r++)) & 1) } } if (q) { this.offset = t } return w }; l.readBytes = function (q, t) { var r = typeof t === "undefined"; if (r) { t = this.offset } if (!this.noAssert) { if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal offset: " + t + " (not an integer)") } t >>>= 0; if (t < 0 || t + q > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + t + " (+" + q + ") <= " + this.buffer.byteLength) } } var s = this.slice(t, t + q); if (r) { this.offset += q } return s }; l.writeBytes = l.append; l.writeInt8 = function (s, t) { var r = typeof t === "undefined"; if (r) { t = this.offset } if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal value: " + s + " (not an integer)") } s |= 0; if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal offset: " + t + " (not an integer)") } t >>>= 0; if (t < 0 || t + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + t + " (+" + 0 + ") <= " + this.buffer.byteLength) } } t += 1; var q = this.buffer.byteLength; if (t > q) { this.resize((q *= 2) > t ? q : t) } t -= 1; this.view[t] = s; if (r) { this.offset += 1 } return this }; l.writeByte = l.writeInt8; l.readInt8 = function (s) { var r = typeof s === "undefined"; if (r) { s = this.offset } if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal offset: " + s + " (not an integer)") } s >>>= 0; if (s < 0 || s + 1 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + s + " (+" + 1 + ") <= " + this.buffer.byteLength) } } var q = this.view[s]; if ((q & 128) === 128) { q = -(255 - q + 1) } if (r) { this.offset += 1 } return q }; l.readByte = l.readInt8; l.writeUint8 = function (s, t) { var r = typeof t === "undefined"; if (r) { t = this.offset } if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal value: " + s + " (not an integer)") } s >>>= 0; if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal offset: " + t + " (not an integer)") } t >>>= 0; if (t < 0 || t + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + t + " (+" + 0 + ") <= " + this.buffer.byteLength) } } t += 1; var q = this.buffer.byteLength; if (t > q) { this.resize((q *= 2) > t ? q : t) } t -= 1; this.view[t] = s; if (r) { this.offset += 1 } return this }; l.writeUInt8 = l.writeUint8; l.readUint8 = function (s) { var r = typeof s === "undefined"; if (r) { s = this.offset } if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal offset: " + s + " (not an integer)") } s >>>= 0; if (s < 0 || s + 1 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + s + " (+" + 1 + ") <= " + this.buffer.byteLength) } } var q = this.view[s]; if (r) { this.offset += 1 } return q }; l.readUInt8 = l.readUint8; l.writeInt16 = function (s, t) { var r = typeof t === "undefined"; if (r) { t = this.offset } if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal value: " + s + " (not an integer)") } s |= 0; if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal offset: " + t + " (not an integer)") } t >>>= 0; if (t < 0 || t + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + t + " (+" + 0 + ") <= " + this.buffer.byteLength) } } t += 2; var q = this.buffer.byteLength; if (t > q) { this.resize((q *= 2) > t ? q : t) } t -= 2; if (this.littleEndian) { this.view[t + 1] = (s & 65280) >>> 8; this.view[t] = s & 255 } else { this.view[t] = (s & 65280) >>> 8; this.view[t + 1] = s & 255 } if (r) { this.offset += 2 } return this }; l.writeShort = l.writeInt16; l.readInt16 = function (s) { var r = typeof s === "undefined"; if (r) { s = this.offset } if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal offset: " + s + " (not an integer)") } s >>>= 0; if (s < 0 || s + 2 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + s + " (+" + 2 + ") <= " + this.buffer.byteLength) } } var q = 0; if (this.littleEndian) { q = this.view[s]; q |= this.view[s + 1] << 8 } else { q = this.view[s] << 8; q |= this.view[s + 1] } if ((q & 32768) === 32768) { q = -(65535 - q + 1) } if (r) { this.offset += 2 } return q }; l.readShort = l.readInt16; l.writeUint16 = function (s, t) { var r = typeof t === "undefined"; if (r) { t = this.offset } if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal value: " + s + " (not an integer)") } s >>>= 0; if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal offset: " + t + " (not an integer)") } t >>>= 0; if (t < 0 || t + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + t + " (+" + 0 + ") <= " + this.buffer.byteLength) } } t += 2; var q = this.buffer.byteLength; if (t > q) { this.resize((q *= 2) > t ? q : t) } t -= 2; if (this.littleEndian) { this.view[t + 1] = (s & 65280) >>> 8; this.view[t] = s & 255 } else { this.view[t] = (s & 65280) >>> 8; this.view[t + 1] = s & 255 } if (r) { this.offset += 2 } return this }; l.writeUInt16 = l.writeUint16; l.readUint16 = function (s) { var r = typeof s === "undefined"; if (r) { s = this.offset } if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal offset: " + s + " (not an integer)") } s >>>= 0; if (s < 0 || s + 2 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + s + " (+" + 2 + ") <= " + this.buffer.byteLength) } } var q = 0; if (this.littleEndian) { q = this.view[s]; q |= this.view[s + 1] << 8 } else { q = this.view[s] << 8; q |= this.view[s + 1] } if (r) { this.offset += 2 } return q }; l.readUInt16 = l.readUint16; l.writeInt32 = function (s, t) { var r = typeof t === "undefined"; if (r) { t = this.offset } if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal value: " + s + " (not an integer)") } s |= 0; if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal offset: " + t + " (not an integer)") } t >>>= 0; if (t < 0 || t + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + t + " (+" + 0 + ") <= " + this.buffer.byteLength) } } t += 4; var q = this.buffer.byteLength; if (t > q) { this.resize((q *= 2) > t ? q : t) } t -= 4; if (this.littleEndian) { this.view[t + 3] = (s >>> 24) & 255; this.view[t + 2] = (s >>> 16) & 255; this.view[t + 1] = (s >>> 8) & 255; this.view[t] = s & 255 } else { this.view[t] = (s >>> 24) & 255; this.view[t + 1] = (s >>> 16) & 255; this.view[t + 2] = (s >>> 8) & 255; this.view[t + 3] = s & 255 } if (r) { this.offset += 4 } return this }; l.writeInt = l.writeInt32; l.readInt32 = function (s) { var r = typeof s === "undefined"; if (r) { s = this.offset } if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal offset: " + s + " (not an integer)") } s >>>= 0; if (s < 0 || s + 4 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + s + " (+" + 4 + ") <= " + this.buffer.byteLength) } } var q = 0; if (this.littleEndian) { q = this.view[s + 2] << 16; q |= this.view[s + 1] << 8; q |= this.view[s]; q += this.view[s + 3] << 24 >>> 0 } else { q = this.view[s + 1] << 16; q |= this.view[s + 2] << 8; q |= this.view[s + 3]; q += this.view[s] << 24 >>> 0 } q |= 0; if (r) { this.offset += 4 } return q }; l.readInt = l.readInt32; l.writeUint32 = function (s, t) { var r = typeof t === "undefined"; if (r) { t = this.offset } if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal value: " + s + " (not an integer)") } s >>>= 0; if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal offset: " + t + " (not an integer)") } t >>>= 0; if (t < 0 || t + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + t + " (+" + 0 + ") <= " + this.buffer.byteLength) } } t += 4; var q = this.buffer.byteLength; if (t > q) { this.resize((q *= 2) > t ? q : t) } t -= 4; if (this.littleEndian) { this.view[t + 3] = (s >>> 24) & 255; this.view[t + 2] = (s >>> 16) & 255; this.view[t + 1] = (s >>> 8) & 255; this.view[t] = s & 255 } else { this.view[t] = (s >>> 24) & 255; this.view[t + 1] = (s >>> 16) & 255; this.view[t + 2] = (s >>> 8) & 255; this.view[t + 3] = s & 255 } if (r) { this.offset += 4 } return this }; l.writeUInt32 = l.writeUint32; l.readUint32 = function (s) { var r = typeof s === "undefined"; if (r) { s = this.offset } if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal offset: " + s + " (not an integer)") } s >>>= 0; if (s < 0 || s + 4 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + s + " (+" + 4 + ") <= " + this.buffer.byteLength) } } var q = 0; if (this.littleEndian) { q = this.view[s + 2] << 16; q |= this.view[s + 1] << 8; q |= this.view[s]; q += this.view[s + 3] << 24 >>> 0 } else { q = this.view[s + 1] << 16; q |= this.view[s + 2] << 8; q |= this.view[s + 3]; q += this.view[s] << 24 >>> 0 } if (r) { this.offset += 4 } return q }; l.readUInt32 = l.readUint32; if (k) { l.writeInt64 = function (t, u) { var s = typeof u === "undefined"; if (s) { u = this.offset } if (!this.noAssert) { if (typeof t === "number") { t = k.fromNumber(t) } else { if (typeof t === "string") { t = k.fromString(t) } else { if (!(t && t instanceof k)) { throw TypeError("Illegal value: " + t + " (not an integer or Long)") } } } if (typeof u !== "number" || u % 1 !== 0) { throw TypeError("Illegal offset: " + u + " (not an integer)") } u >>>= 0; if (u < 0 || u + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + u + " (+" + 0 + ") <= " + this.buffer.byteLength) } } if (typeof t === "number") { t = k.fromNumber(t) } else { if (typeof t === "string") { t = k.fromString(t) } } u += 8; var v = this.buffer.byteLength; if (u > v) { this.resize((v *= 2) > u ? v : u) } u -= 8; var r = t.low, q = t.high; if (this.littleEndian) { this.view[u + 3] = (r >>> 24) & 255; this.view[u + 2] = (r >>> 16) & 255; this.view[u + 1] = (r >>> 8) & 255; this.view[u] = r & 255; u += 4; this.view[u + 3] = (q >>> 24) & 255; this.view[u + 2] = (q >>> 16) & 255; this.view[u + 1] = (q >>> 8) & 255; this.view[u] = q & 255 } else { this.view[u] = (q >>> 24) & 255; this.view[u + 1] = (q >>> 16) & 255; this.view[u + 2] = (q >>> 8) & 255; this.view[u + 3] = q & 255; u += 4; this.view[u] = (r >>> 24) & 255; this.view[u + 1] = (r >>> 16) & 255; this.view[u + 2] = (r >>> 8) & 255; this.view[u + 3] = r & 255 } if (s) { this.offset += 8 } return this }; l.writeLong = l.writeInt64; l.readInt64 = function (u) { var t = typeof u === "undefined"; if (t) { u = this.offset } if (!this.noAssert) { if (typeof u !== "number" || u % 1 !== 0) { throw TypeError("Illegal offset: " + u + " (not an integer)") } u >>>= 0; if (u < 0 || u + 8 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + u + " (+" + 8 + ") <= " + this.buffer.byteLength) } } var r = 0, q = 0; if (this.littleEndian) { r = this.view[u + 2] << 16; r |= this.view[u + 1] << 8; r |= this.view[u]; r += this.view[u + 3] << 24 >>> 0; u += 4; q = this.view[u + 2] << 16; q |= this.view[u + 1] << 8; q |= this.view[u]; q += this.view[u + 3] << 24 >>> 0 } else { q = this.view[u + 1] << 16; q |= this.view[u + 2] << 8; q |= this.view[u + 3]; q += this.view[u] << 24 >>> 0; u += 4; r = this.view[u + 1] << 16; r |= this.view[u + 2] << 8; r |= this.view[u + 3]; r += this.view[u] << 24 >>> 0 } var s = new k(r, q, false); if (t) { this.offset += 8 } return s }; l.readLong = l.readInt64; l.writeUint64 = function (t, v) { var s = typeof v === "undefined"; if (s) { v = this.offset } if (!this.noAssert) { if (typeof t === "number") { t = k.fromNumber(t) } else { if (typeof t === "string") { t = k.fromString(t) } else { if (!(t && t instanceof k)) { throw TypeError("Illegal value: " + t + " (not an integer or Long)") } } } if (typeof v !== "number" || v % 1 !== 0) { throw TypeError("Illegal offset: " + v + " (not an integer)") } v >>>= 0; if (v < 0 || v + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + v + " (+" + 0 + ") <= " + this.buffer.byteLength) } } if (typeof t === "number") { t = k.fromNumber(t) } else { if (typeof t === "string") { t = k.fromString(t) } } v += 8; var u = this.buffer.byteLength; if (v > u) { this.resize((u *= 2) > v ? u : v) } v -= 8; var r = t.low, q = t.high; if (this.littleEndian) { this.view[v + 3] = (r >>> 24) & 255; this.view[v + 2] = (r >>> 16) & 255; this.view[v + 1] = (r >>> 8) & 255; this.view[v] = r & 255; v += 4; this.view[v + 3] = (q >>> 24) & 255; this.view[v + 2] = (q >>> 16) & 255; this.view[v + 1] = (q >>> 8) & 255; this.view[v] = q & 255 } else { this.view[v] = (q >>> 24) & 255; this.view[v + 1] = (q >>> 16) & 255; this.view[v + 2] = (q >>> 8) & 255; this.view[v + 3] = q & 255; v += 4; this.view[v] = (r >>> 24) & 255; this.view[v + 1] = (r >>> 16) & 255; this.view[v + 2] = (r >>> 8) & 255; this.view[v + 3] = r & 255 } if (s) { this.offset += 8 } return this }; l.writeUInt64 = l.writeUint64; l.readUint64 = function (u) { var t = typeof u === "undefined"; if (t) { u = this.offset } if (!this.noAssert) { if (typeof u !== "number" || u % 1 !== 0) { throw TypeError("Illegal offset: " + u + " (not an integer)") } u >>>= 0; if (u < 0 || u + 8 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + u + " (+" + 8 + ") <= " + this.buffer.byteLength) } } var r = 0, q = 0; if (this.littleEndian) { r = this.view[u + 2] << 16; r |= this.view[u + 1] << 8; r |= this.view[u]; r += this.view[u + 3] << 24 >>> 0; u += 4; q = this.view[u + 2] << 16; q |= this.view[u + 1] << 8; q |= this.view[u]; q += this.view[u + 3] << 24 >>> 0 } else { q = this.view[u + 1] << 16; q |= this.view[u + 2] << 8; q |= this.view[u + 3]; q += this.view[u] << 24 >>> 0; u += 4; r = this.view[u + 1] << 16; r |= this.view[u + 2] << 8; r |= this.view[u + 3]; r += this.view[u] << 24 >>> 0 } var s = new k(r, q, true); if (t) { this.offset += 8 } return s }; l.readUInt64 = l.readUint64 } function i(x, w, t, r, A) { var B, v, u = A * 8 - r - 1, z = (1 << u) - 1, q = z >> 1, D = -7, y = t ? (A - 1) : 0, C = t ? -1 : 1, E = x[w + y]; y += C; B = E & ((1 << (-D)) - 1); E >>= (-D); D += u; for (; D > 0; B = B * 256 + x[w + y], y += C, D -= 8) { } v = B & ((1 << (-D)) - 1); B >>= (-D); D += r; for (; D > 0; v = v * 256 + x[w + y], y += C, D -= 8) { } if (B === 0) { B = 1 - q } else { if (B === z) { return v ? NaN : ((E ? -1 : 1) * Infinity) } else { v = v + Math.pow(2, r); B = B - q } } return (E ? -1 : 1) * v * Math.pow(2, B - r) } function j(y, F, x, t, r, B) { var C, v, E, u = B * 8 - r - 1, A = (1 << u) - 1, q = A >> 1, w = (r === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0), z = t ? 0 : (B - 1), D = t ? 1 : -1, G = F < 0 || (F === 0 && 1 / F < 0) ? 1 : 0; F = Math.abs(F); if (isNaN(F) || F === Infinity) { v = isNaN(F) ? 1 : 0; C = A } else { C = Math.floor(Math.log(F) / Math.LN2); if (F * (E = Math.pow(2, -C)) < 1) { C--; E *= 2 } if (C + q >= 1) { F += w / E } else { F += w * Math.pow(2, 1 - q) } if (F * E >= 2) { C++; E /= 2 } if (C + q >= A) { v = 0; C = A } else { if (C + q >= 1) { v = (F * E - 1) * Math.pow(2, r); C = C + q } else { v = F * Math.pow(2, q - 1) * Math.pow(2, r); C = 0 } } } for (; r >= 8; y[x + z] = v & 255, z += D, v /= 256, r -= 8) { } C = (C << r) | v; u += r; for (; u > 0; y[x + z] = C & 255, z += D, C /= 256, u -= 8) { } y[x + z - D] |= G * 128 } l.writeFloat32 = function (r, t) { var q = typeof t === "undefined"; if (q) { t = this.offset } if (!this.noAssert) { if (typeof r !== "number") { throw TypeError("Illegal value: " + r + " (not a number)") } if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal offset: " + t + " (not an integer)") } t >>>= 0; if (t < 0 || t + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + t + " (+" + 0 + ") <= " + this.buffer.byteLength) } } t += 4; var s = this.buffer.byteLength; if (t > s) { this.resize((s *= 2) > t ? s : t) } t -= 4; j(this.view, r, t, this.littleEndian, 23, 4); if (q) { this.offset += 4 } return this }; l.writeFloat = l.writeFloat32; l.readFloat32 = function (s) { var r = typeof s === "undefined"; if (r) { s = this.offset } if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal offset: " + s + " (not an integer)") } s >>>= 0; if (s < 0 || s + 4 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + s + " (+" + 4 + ") <= " + this.buffer.byteLength) } } var q = i(this.view, s, this.littleEndian, 23, 4); if (r) { this.offset += 4 } return q }; l.readFloat = l.readFloat32; l.writeFloat64 = function (s, t) { var r = typeof t === "undefined"; if (r) { t = this.offset } if (!this.noAssert) { if (typeof s !== "number") { throw TypeError("Illegal value: " + s + " (not a number)") } if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal offset: " + t + " (not an integer)") } t >>>= 0; if (t < 0 || t + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + t + " (+" + 0 + ") <= " + this.buffer.byteLength) } } t += 8; var q = this.buffer.byteLength; if (t > q) { this.resize((q *= 2) > t ? q : t) } t -= 8; j(this.view, s, t, this.littleEndian, 52, 8); if (r) { this.offset += 8 } return this }; l.writeDouble = l.writeFloat64; l.readFloat64 = function (s) { var r = typeof s === "undefined"; if (r) { s = this.offset } if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal offset: " + s + " (not an integer)") } s >>>= 0; if (s < 0 || s + 8 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + s + " (+" + 8 + ") <= " + this.buffer.byteLength) } } var q = i(this.view, s, this.littleEndian, 52, 8); if (r) { this.offset += 8 } return q }; l.readDouble = l.readFloat64; n.MAX_VARINT32_BYTES = 5; n.calculateVarint32 = function (q) { q = q >>> 0; if (q < 1 << 7) { return 1 } else { if (q < 1 << 14) { return 2 } else { if (q < 1 << 21) { return 3 } else { if (q < 1 << 28) { return 4 } else { return 5 } } } } }; n.zigZagEncode32 = function (q) { return (((q |= 0) << 1) ^ (q >> 31)) >>> 0 }; n.zigZagDecode32 = function (q) { return ((q >>> 1) ^ -(q & 1)) | 0 }; l.writeVarint32 = function (u, v) { var t = typeof v === "undefined"; if (t) { v = this.offset } if (!this.noAssert) { if (typeof u !== "number" || u % 1 !== 0) { throw TypeError("Illegal value: " + u + " (not an integer)") } u |= 0; if (typeof v !== "number" || v % 1 !== 0) { throw TypeError("Illegal offset: " + v + " (not an integer)") } v >>>= 0; if (v < 0 || v + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + v + " (+" + 0 + ") <= " + this.buffer.byteLength) } } var r = n.calculateVarint32(u), q; v += r; var s = this.buffer.byteLength; if (v > s) { this.resize((s *= 2) > v ? s : v) } v -= r; u >>>= 0; while (u >= 128) { q = (u & 127) | 128; this.view[v++] = q; u >>>= 7 } this.view[v++] = u; if (t) { this.offset = v; return this } return r }; l.writeVarint32ZigZag = function (q, r) { return this.writeVarint32(n.zigZagEncode32(q), r) }; l.readVarint32 = function (u) { var t = typeof u === "undefined"; if (t) { u = this.offset } if (!this.noAssert) { if (typeof u !== "number" || u % 1 !== 0) { throw TypeError("Illegal offset: " + u + " (not an integer)") } u >>>= 0; if (u < 0 || u + 1 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + u + " (+" + 1 + ") <= " + this.buffer.byteLength) } } var v = 0, s = 0 >>> 0, q; do { if (!this.noAssert && u > this.limit) { var r = Error("Truncated"); r.truncated = true; throw r } q = this.view[u++]; if (v < 5) { s |= (q & 127) << (7 * v) } ++v } while ((q & 128) !== 0); s |= 0; if (t) { this.offset = u; return s } return { value: s, length: v } }; l.readVarint32ZigZag = function (r) { var q = this.readVarint32(r); if (typeof q === "object") { q.value = n.zigZagDecode32(q.value) } else { q = n.zigZagDecode32(q) } return q }; if (k) { n.MAX_VARINT64_BYTES = 10; n.calculateVarint64 = function (r) { if (typeof r === "number") { r = k.fromNumber(r) } else { if (typeof r === "string") { r = k.fromString(r) } } var t = r.toInt() >>> 0, s = r.shiftRightUnsigned(28).toInt() >>> 0, q = r.shiftRightUnsigned(56).toInt() >>> 0; if (q == 0) { if (s == 0) { if (t < 1 << 14) { return t < 1 << 7 ? 1 : 2 } else { return t < 1 << 21 ? 3 : 4 } } else { if (s < 1 << 14) { return s < 1 << 7 ? 5 : 6 } else { return s < 1 << 21 ? 7 : 8 } } } else { return q < 1 << 7 ? 9 : 10 } }; n.zigZagEncode64 = function (q) { if (typeof q === "number") { q = k.fromNumber(q, false) } else { if (typeof q === "string") { q = k.fromString(q, false) } else { if (q.unsigned !== false) { q = q.toSigned() } } } return q.shiftLeft(1).xor(q.shiftRight(63)).toUnsigned() }; n.zigZagDecode64 = function (q) { if (typeof q === "number") { q = k.fromNumber(q, false) } else { if (typeof q === "string") { q = k.fromString(q, false) } else { if (q.unsigned !== false) { q = q.toSigned() } } } return q.shiftRightUnsigned(1).xor(q.and(k.ONE).toSigned().negate()).toSigned() }; l.writeVarint64 = function (u, x) { var t = typeof x === "undefined"; if (t) { x = this.offset } if (!this.noAssert) { if (typeof u === "number") { u = k.fromNumber(u) } else { if (typeof u === "string") { u = k.fromString(u) } else { if (!(u && u instanceof k)) { throw TypeError("Illegal value: " + u + " (not an integer or Long)") } } } if (typeof x !== "number" || x % 1 !== 0) { throw TypeError("Illegal offset: " + x + " (not an integer)") } x >>>= 0; if (x < 0 || x + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + x + " (+" + 0 + ") <= " + this.buffer.byteLength) } } if (typeof u === "number") { u = k.fromNumber(u, false) } else { if (typeof u === "string") { u = k.fromString(u, false) } else { if (u.unsigned !== false) { u = u.toSigned() } } } var q = n.calculateVarint64(u), w = u.toInt() >>> 0, v = u.shiftRightUnsigned(28).toInt() >>> 0, s = u.shiftRightUnsigned(56).toInt() >>> 0; x += q; var r = this.buffer.byteLength; if (x > r) { this.resize((r *= 2) > x ? r : x) } x -= q; switch (q) { case 10: this.view[x + 9] = (s >>> 7) & 1; case 9: this.view[x + 8] = q !== 9 ? (s) | 128 : (s) & 127; case 8: this.view[x + 7] = q !== 8 ? (v >>> 21) | 128 : (v >>> 21) & 127; case 7: this.view[x + 6] = q !== 7 ? (v >>> 14) | 128 : (v >>> 14) & 127; case 6: this.view[x + 5] = q !== 6 ? (v >>> 7) | 128 : (v >>> 7) & 127; case 5: this.view[x + 4] = q !== 5 ? (v) | 128 : (v) & 127; case 4: this.view[x + 3] = q !== 4 ? (w >>> 21) | 128 : (w >>> 21) & 127; case 3: this.view[x + 2] = q !== 3 ? (w >>> 14) | 128 : (w >>> 14) & 127; case 2: this.view[x + 1] = q !== 2 ? (w >>> 7) | 128 : (w >>> 7) & 127; case 1: this.view[x] = q !== 1 ? (w) | 128 : (w) & 127 }if (t) { this.offset += q; return this } else { return q } }; l.writeVarint64ZigZag = function (q, r) { return this.writeVarint64(n.zigZagEncode64(q), r) }; l.readVarint64 = function (w) { var t = typeof w === "undefined"; if (t) { w = this.offset } if (!this.noAssert) { if (typeof w !== "number" || w % 1 !== 0) { throw TypeError("Illegal offset: " + w + " (not an integer)") } w >>>= 0; if (w < 0 || w + 1 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + w + " (+" + 1 + ") <= " + this.buffer.byteLength) } } var x = w, v = 0, u = 0, s = 0, q = 0; q = this.view[w++]; v = (q & 127); if (q & 128) { q = this.view[w++]; v |= (q & 127) << 7; if ((q & 128) || (this.noAssert && typeof q === "undefined")) { q = this.view[w++]; v |= (q & 127) << 14; if ((q & 128) || (this.noAssert && typeof q === "undefined")) { q = this.view[w++]; v |= (q & 127) << 21; if ((q & 128) || (this.noAssert && typeof q === "undefined")) { q = this.view[w++]; u = (q & 127); if ((q & 128) || (this.noAssert && typeof q === "undefined")) { q = this.view[w++]; u |= (q & 127) << 7; if ((q & 128) || (this.noAssert && typeof q === "undefined")) { q = this.view[w++]; u |= (q & 127) << 14; if ((q & 128) || (this.noAssert && typeof q === "undefined")) { q = this.view[w++]; u |= (q & 127) << 21; if ((q & 128) || (this.noAssert && typeof q === "undefined")) { q = this.view[w++]; s = (q & 127); if ((q & 128) || (this.noAssert && typeof q === "undefined")) { q = this.view[w++]; s |= (q & 127) << 7; if ((q & 128) || (this.noAssert && typeof q === "undefined")) { throw Error("Buffer overrun") } } } } } } } } } } var r = k.fromBits(v | (u << 28), (u >>> 4) | (s) << 24, false); if (t) { this.offset = w; return r } else { return { value: r, length: w - x } } }; l.readVarint64ZigZag = function (r) { var q = this.readVarint64(r); if (q && q.value instanceof k) { q.value = n.zigZagDecode64(q.value) } else { q = n.zigZagDecode64(q) } return q } } l.writeCString = function (v, u) { var t = typeof u === "undefined"; if (t) { u = this.offset } var r, q = v.length; if (!this.noAssert) { if (typeof v !== "string") { throw TypeError("Illegal str: Not a string") } for (r = 0; r < q; ++r) { if (v.charCodeAt(r) === 0) { throw RangeError("Illegal str: Contains NULL-characters") } } if (typeof u !== "number" || u % 1 !== 0) { throw TypeError("Illegal offset: " + u + " (not an integer)") } u >>>= 0; if (u < 0 || u + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + u + " (+" + 0 + ") <= " + this.buffer.byteLength) } } q = o.calculateUTF16asUTF8(b(v))[1]; u += q + 1; var s = this.buffer.byteLength; if (u > s) { this.resize((s *= 2) > u ? s : u) } u -= q + 1; o.encodeUTF16toUTF8(b(v), function (w) { this.view[u++] = w }.bind(this)); this.view[u++] = 0; if (t) { this.offset = u; return this } return q }; l.readCString = function (u) { var s = typeof u === "undefined"; if (s) { u = this.offset } if (!this.noAssert) { if (typeof u !== "number" || u % 1 !== 0) { throw TypeError("Illegal offset: " + u + " (not an integer)") } u >>>= 0; if (u < 0 || u + 1 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + u + " (+" + 1 + ") <= " + this.buffer.byteLength) } } var v = u, r; var t, q = -1; o.decodeUTF8toUTF16(function () { if (q === 0) { return null } if (u >= this.limit) { throw RangeError("Illegal range: Truncated data, " + u + " < " + this.limit) } q = this.view[u++]; return q === 0 ? null : q }.bind(this), t = f(), true); if (s) { this.offset = u; return t() } else { return { string: t(), length: u - v } } }; l.writeIString = function (u, t) { var s = typeof t === "undefined"; if (s) { t = this.offset } if (!this.noAssert) { if (typeof u !== "string") { throw TypeError("Illegal str: Not a string") } if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal offset: " + t + " (not an integer)") } t >>>= 0; if (t < 0 || t + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + t + " (+" + 0 + ") <= " + this.buffer.byteLength) } } var v = t, q; q = o.calculateUTF16asUTF8(b(u), this.noAssert)[1]; t += 4 + q; var r = this.buffer.byteLength; if (t > r) { this.resize((r *= 2) > t ? r : t) } t -= 4 + q; if (this.littleEndian) { this.view[t + 3] = (q >>> 24) & 255; this.view[t + 2] = (q >>> 16) & 255; this.view[t + 1] = (q >>> 8) & 255; this.view[t] = q & 255 } else { this.view[t] = (q >>> 24) & 255; this.view[t + 1] = (q >>> 16) & 255; this.view[t + 2] = (q >>> 8) & 255; this.view[t + 3] = q & 255 } t += 4; o.encodeUTF16toUTF8(b(u), function (w) { this.view[t++] = w }.bind(this)); if (t !== v + 4 + q) { throw RangeError("Illegal range: Truncated data, " + t + " == " + (t + 4 + q)) } if (s) { this.offset = t; return this } return t - v }; l.readIString = function (t) { var r = typeof t === "undefined"; if (r) { t = this.offset } if (!this.noAssert) { if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal offset: " + t + " (not an integer)") } t >>>= 0; if (t < 0 || t + 4 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + t + " (+" + 4 + ") <= " + this.buffer.byteLength) } } var u = t; var q = this.readUint32(t); var s = this.readUTF8String(q, n.METRICS_BYTES, t += 4); t += s.length; if (r) { this.offset = t; return s.string } else { return { string: s.string, length: t - u } } }; n.METRICS_CHARS = "c"; n.METRICS_BYTES = "b"; l.writeUTF8String = function (u, t) { var s = typeof t === "undefined"; if (s) { t = this.offset } if (!this.noAssert) { if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal offset: " + t + " (not an integer)") } t >>>= 0; if (t < 0 || t + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + t + " (+" + 0 + ") <= " + this.buffer.byteLength) } } var q; var v = t; q = o.calculateUTF16asUTF8(b(u))[1]; t += q; var r = this.buffer.byteLength; if (t > r) { this.resize((r *= 2) > t ? r : t) } t -= q; o.encodeUTF16toUTF8(b(u), function (w) { this.view[t++] = w }.bind(this)); if (s) { this.offset = t; return this } return t - v }; l.writeString = l.writeUTF8String; n.calculateUTF8Chars = function (q) { return o.calculateUTF16asUTF8(b(q))[0] }; n.calculateUTF8Bytes = function (q) { return o.calculateUTF16asUTF8(b(q))[1] }; n.calculateString = n.calculateUTF8Bytes; l.readUTF8String = function (t, s, w) { if (typeof s === "number") { w = s; s = undefined } var u = typeof w === "undefined"; if (u) { w = this.offset } if (typeof s === "undefined") { s = n.METRICS_CHARS } if (!this.noAssert) { if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal length: " + t + " (not an integer)") } t |= 0; if (typeof w !== "number" || w % 1 !== 0) { throw TypeError("Illegal offset: " + w + " (not an integer)") } w >>>= 0; if (w < 0 || w + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + w + " (+" + 0 + ") <= " + this.buffer.byteLength) } } var r = 0, x = w, v; if (s === n.METRICS_CHARS) { v = f(); o.decodeUTF8(function () { return r < t && w < this.limit ? this.view[w++] : null }.bind(this), function (y) { ++r; o.UTF8toUTF16(y, v) }); if (r !== t) { throw RangeError("Illegal range: Truncated data, " + r + " == " + t) } if (u) { this.offset = w; return v() } else { return { string: v(), length: w - x } } } else { if (s === n.METRICS_BYTES) { if (!this.noAssert) { if (typeof w !== "number" || w % 1 !== 0) { throw TypeError("Illegal offset: " + w + " (not an integer)") } w >>>= 0; if (w < 0 || w + t > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + w + " (+" + t + ") <= " + this.buffer.byteLength) } } var q = w + t; o.decodeUTF8toUTF16(function () { return w < q ? this.view[w++] : null }.bind(this), v = f(), this.noAssert); if (w !== q) { throw RangeError("Illegal range: Truncated data, " + w + " == " + q) } if (u) { this.offset = w; return v() } else { return { string: v(), length: w - x } } } else { throw TypeError("Unsupported metrics: " + s) } } }; l.readString = l.readUTF8String; l.writeVString = function (v, u) { var t = typeof u === "undefined"; if (t) { u = this.offset } if (!this.noAssert) { if (typeof v !== "string") { throw TypeError("Illegal str: Not a string") } if (typeof u !== "number" || u % 1 !== 0) { throw TypeError("Illegal offset: " + u + " (not an integer)") } u >>>= 0; if (u < 0 || u + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + u + " (+" + 0 + ") <= " + this.buffer.byteLength) } } var w = u, s, q; s = o.calculateUTF16asUTF8(b(v), this.noAssert)[1]; q = n.calculateVarint32(s); u += q + s; var r = this.buffer.byteLength; if (u > r) { this.resize((r *= 2) > u ? r : u) } u -= q + s; u += this.writeVarint32(s, u); o.encodeUTF16toUTF8(b(v), function (x) { this.view[u++] = x }.bind(this)); if (u !== w + s + q) { throw RangeError("Illegal range: Truncated data, " + u + " == " + (u + s + q)) } if (t) { this.offset = u; return this } return u - w }; l.readVString = function (t) { var r = typeof t === "undefined"; if (r) { t = this.offset } if (!this.noAssert) { if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal offset: " + t + " (not an integer)") } t >>>= 0; if (t < 0 || t + 1 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + t + " (+" + 1 + ") <= " + this.buffer.byteLength) } } var u = t; var q = this.readVarint32(t); var s = this.readUTF8String(q.value, n.METRICS_BYTES, t += q.length); t += s.length; if (r) { this.offset = t; return s.string } else { return { string: s.string, length: t - u } } }; l.append = function (u, s, v) { if (typeof s === "number" || typeof s !== "string") { v = s; s = undefined } var t = typeof v === "undefined"; if (t) { v = this.offset } if (!this.noAssert) { if (typeof v !== "number" || v % 1 !== 0) { throw TypeError("Illegal offset: " + v + " (not an integer)") } v >>>= 0; if (v < 0 || v + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + v + " (+" + 0 + ") <= " + this.buffer.byteLength) } } if (!(u instanceof n)) { u = n.wrap(u, s) } var r = u.limit - u.offset; if (r <= 0) { return this } v += r; var q = this.buffer.byteLength; if (v > q) { this.resize((q *= 2) > v ? q : v) } v -= r; this.view.set(u.view.subarray(u.offset, u.limit), v); u.offset += r; if (t) { this.offset += r } return this }; l.appendTo = function (q, r) { q.append(this, r); return this }; l.assert = function (q) { this.noAssert = !q; return this }; l.capacity = function () { return this.buffer.byteLength }; l.clear = function () { this.offset = 0; this.limit = this.buffer.byteLength; this.markedOffset = -1; return this }; l.clone = function (r) { var q = new n(0, this.littleEndian, this.noAssert); if (r) { q.buffer = new ArrayBuffer(this.buffer.byteLength); q.view = new Uint8Array(q.buffer) } else { q.buffer = this.buffer; q.view = this.view } q.offset = this.offset; q.markedOffset = this.markedOffset; q.limit = this.limit; return q }; l.compact = function (u, t) { if (typeof u === "undefined") { u = this.offset } if (typeof t === "undefined") { t = this.limit } if (!this.noAssert) { if (typeof u !== "number" || u % 1 !== 0) { throw TypeError("Illegal begin: Not an integer") } u >>>= 0; if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal end: Not an integer") } t >>>= 0; if (u < 0 || u > t || t > this.buffer.byteLength) { throw RangeError("Illegal range: 0 <= " + u + " <= " + t + " <= " + this.buffer.byteLength) } } if (u === 0 && t === this.buffer.byteLength) { return this } var q = t - u; if (q === 0) { this.buffer = p; this.view = null; if (this.markedOffset >= 0) { this.markedOffset -= u } this.offset = 0; this.limit = 0; return this } var s = new ArrayBuffer(q); var r = new Uint8Array(s); r.set(this.view.subarray(u, t)); this.buffer = s; this.view = r; if (this.markedOffset >= 0) { this.markedOffset -= u } this.offset = 0; this.limit = q; return this }; l.copy = function (s, q) { if (typeof s === "undefined") { s = this.offset } if (typeof q === "undefined") { q = this.limit } if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal begin: Not an integer") } s >>>= 0; if (typeof q !== "number" || q % 1 !== 0) { throw TypeError("Illegal end: Not an integer") } q >>>= 0; if (s < 0 || s > q || q > this.buffer.byteLength) { throw RangeError("Illegal range: 0 <= " + s + " <= " + q + " <= " + this.buffer.byteLength) } } if (s === q) { return new n(0, this.littleEndian, this.noAssert) } var r = q - s, t = new n(r, this.littleEndian, this.noAssert); t.offset = 0; t.limit = r; if (t.markedOffset >= 0) { t.markedOffset -= s } this.copyTo(t, 0, s, q); return t }; l.copyTo = function (u, w, s, v) { var t, r; if (!this.noAssert) { if (!n.isByteBuffer(u)) { throw TypeError("Illegal target: Not a ByteBuffer") } } w = (r = typeof w === "undefined") ? u.offset : w | 0; s = (t = typeof s === "undefined") ? this.offset : s | 0; v = typeof v === "undefined" ? this.limit : v | 0; if (w < 0 || w > u.buffer.byteLength) { throw RangeError("Illegal target range: 0 <= " + w + " <= " + u.buffer.byteLength) } if (s < 0 || v > this.buffer.byteLength) { throw RangeError("Illegal source range: 0 <= " + s + " <= " + this.buffer.byteLength) } var q = v - s; if (q === 0) { return u } u.ensureCapacity(w + q); u.view.set(this.view.subarray(s, v), w); if (t) { this.offset += q } if (r) { u.offset += q } return this }; l.ensureCapacity = function (q) { var r = this.buffer.byteLength; if (r < q) { return this.resize((r *= 2) > q ? r : q) } return this }; l.fill = function (t, r, q) { var s = typeof r === "undefined"; if (s) { r = this.offset } if (typeof t === "string" && t.length > 0) { t = t.charCodeAt(0) } if (typeof r === "undefined") { r = this.offset } if (typeof q === "undefined") { q = this.limit } if (!this.noAssert) { if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal value: " + t + " (not an integer)") } t |= 0; if (typeof r !== "number" || r % 1 !== 0) { throw TypeError("Illegal begin: Not an integer") } r >>>= 0; if (typeof q !== "number" || q % 1 !== 0) { throw TypeError("Illegal end: Not an integer") } q >>>= 0; if (r < 0 || r > q || q > this.buffer.byteLength) { throw RangeError("Illegal range: 0 <= " + r + " <= " + q + " <= " + this.buffer.byteLength) } } if (r >= q) { return this } while (r < q) { this.view[r++] = t } if (s) { this.offset = r } return this }; l.flip = function () { this.limit = this.offset; this.offset = 0; return this }; l.mark = function (q) { q = typeof q === "undefined" ? this.offset : q; if (!this.noAssert) { if (typeof q !== "number" || q % 1 !== 0) { throw TypeError("Illegal offset: " + q + " (not an integer)") } q >>>= 0; if (q < 0 || q + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + q + " (+" + 0 + ") <= " + this.buffer.byteLength) } } this.markedOffset = q; return this }; l.order = function (q) { if (!this.noAssert) { if (typeof q !== "boolean") { throw TypeError("Illegal littleEndian: Not a boolean") } } this.littleEndian = !!q; return this }; l.LE = function (q) { this.littleEndian = typeof q !== "undefined" ? !!q : true; return this }; l.BE = function (q) { this.littleEndian = typeof q !== "undefined" ? !q : false; return this }; l.prepend = function (q, s, t) { if (typeof s === "number" || typeof s !== "string") { t = s; s = undefined } var r = typeof t === "undefined"; if (r) { t = this.offset } if (!this.noAssert) { if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal offset: " + t + " (not an integer)") } t >>>= 0; if (t < 0 || t + 0 > this.buffer.byteLength) { throw RangeError("Illegal offset: 0 <= " + t + " (+" + 0 + ") <= " + this.buffer.byteLength) } } if (!(q instanceof n)) { q = n.wrap(q, s) } var v = q.limit - q.offset; if (v <= 0) { return this } var y = v - t; if (y > 0) { var u = new ArrayBuffer(this.buffer.byteLength + y); var x = new Uint8Array(u); x.set(this.view.subarray(t, this.buffer.byteLength), v); this.buffer = u; this.view = x; this.offset += y; if (this.markedOffset >= 0) { this.markedOffset += y } this.limit += y; t += y } else { var w = new Uint8Array(this.buffer) } this.view.set(q.view.subarray(q.offset, q.limit), t - v); q.offset = q.limit; if (r) { this.offset -= v } return this }; l.prependTo = function (q, r) { q.prepend(this, r); return this }; l.printDebug = function (q) { if (typeof q !== "function") { q = console.log.bind(console) } q(this.toString() + "\n-------------------------------------------------------------------\n" + this.toDebug(true)) }; l.remaining = function () { return this.limit - this.offset }; l.reset = function () { if (this.markedOffset >= 0) { this.offset = this.markedOffset; this.markedOffset = -1 } else { this.offset = 0 } return this }; l.resize = function (s) { if (!this.noAssert) { if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal capacity: " + s + " (not an integer)") } s |= 0; if (s < 0) { throw RangeError("Illegal capacity: 0 <= " + s) } } if (this.buffer.byteLength < s) { var r = new ArrayBuffer(s); var q = new Uint8Array(r); q.set(this.view); this.buffer = r; this.view = q } return this }; l.reverse = function (r, q) { if (typeof r === "undefined") { r = this.offset } if (typeof q === "undefined") { q = this.limit } if (!this.noAssert) { if (typeof r !== "number" || r % 1 !== 0) { throw TypeError("Illegal begin: Not an integer") } r >>>= 0; if (typeof q !== "number" || q % 1 !== 0) { throw TypeError("Illegal end: Not an integer") } q >>>= 0; if (r < 0 || r > q || q > this.buffer.byteLength) { throw RangeError("Illegal range: 0 <= " + r + " <= " + q + " <= " + this.buffer.byteLength) } } if (r === q) { return this } Array.prototype.reverse.call(this.view.subarray(r, q)); return this }; l.skip = function (q) { if (!this.noAssert) { if (typeof q !== "number" || q % 1 !== 0) { throw TypeError("Illegal length: " + q + " (not an integer)") } q |= 0 } var r = this.offset + q; if (!this.noAssert) { if (r < 0 || r > this.buffer.byteLength) { throw RangeError("Illegal length: 0 <= " + this.offset + " + " + q + " <= " + this.buffer.byteLength) } } this.offset = r; return this }; l.slice = function (r, q) { if (typeof r === "undefined") { r = this.offset } if (typeof q === "undefined") { q = this.limit } if (!this.noAssert) { if (typeof r !== "number" || r % 1 !== 0) { throw TypeError("Illegal begin: Not an integer") } r >>>= 0; if (typeof q !== "number" || q % 1 !== 0) { throw TypeError("Illegal end: Not an integer") } q >>>= 0; if (r < 0 || r > q || q > this.buffer.byteLength) { throw RangeError("Illegal range: 0 <= " + r + " <= " + q + " <= " + this.buffer.byteLength) } } var s = this.clone(); s.offset = r; s.limit = q; return s }; l.toBuffer = function (q) { var t = this.offset, s = this.limit; if (!this.noAssert) { if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal offset: Not an integer") } t >>>= 0; if (typeof s !== "number" || s % 1 !== 0) { throw TypeError("Illegal limit: Not an integer") } s >>>= 0; if (t < 0 || t > s || s > this.buffer.byteLength) { throw RangeError("Illegal range: 0 <= " + t + " <= " + s + " <= " + this.buffer.byteLength) } } if (!q && t === 0 && s === this.buffer.byteLength) { return this.buffer } if (t === s) { return p } var r = new ArrayBuffer(s - t); new Uint8Array(r).set(new Uint8Array(this.buffer).subarray(t, s), 0); return r }; l.toArrayBuffer = l.toBuffer; l.toString = function (s, r, q) { if (typeof s === "undefined") { return "ByteBufferAB(offset=" + this.offset + ",markedOffset=" + this.markedOffset + ",limit=" + this.limit + ",capacity=" + this.capacity() + ")" } if (typeof s === "number") { s = "utf8", r = s, q = r } switch (s) { case "utf8": return this.toUTF8(r, q); case "base64": return this.toBase64(r, q); case "hex": return this.toHex(r, q); case "binary": return this.toBinary(r, q); case "debug": return this.toDebug(); case "columns": return this.toColumns(); default: throw Error("Unsupported encoding: " + s) } }; var h = function () { var r = {}; var u = [65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 43, 47]; var t = []; for (var s = 0, q = u.length; s < q; ++s) { t[u[s]] = s } r.encode = function (x, y) { var v, w; while ((v = x()) !== null) { y(u[(v >> 2) & 63]); w = (v & 3) << 4; if ((v = x()) !== null) { w |= (v >> 4) & 15; y(u[(w | ((v >> 4) & 15)) & 63]); w = (v & 15) << 2; if ((v = x()) !== null) { y(u[(w | ((v >> 6) & 3)) & 63]), y(u[v & 63]) } else { y(u[w & 63]), y(61) } } else { y(u[w & 63]), y(61), y(61) } } }; r.decode = function (y, A) { var z, x, w; function v(B) { throw Error("Illegal character code: " + B) } while ((z = y()) !== null) { x = t[z]; if (typeof x === "undefined") { v(z) } if ((z = y()) !== null) { w = t[z]; if (typeof w === "undefined") { v(z) } A((x << 2) >>> 0 | (w & 48) >> 4); if ((z = y()) !== null) { x = t[z]; if (typeof x === "undefined") { if (z === 61) { break } else { v(z) } } A(((w & 15) << 4) >>> 0 | (x & 60) >> 2); if ((z = y()) !== null) { w = t[z]; if (typeof w === "undefined") { if (z === 61) { break } else { v(z) } } A(((x & 3) << 6) >>> 0 | w) } } } } }; r.test = function (v) { return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(v) }; return r }(); l.toBase64 = function (r, q) { if (typeof r === "undefined") { r = this.offset } if (typeof q === "undefined") { q = this.limit } r = r | 0; q = q | 0; if (r < 0 || q > this.capacity || r > q) { throw RangeError("begin, end") } var s; h.encode(function () { return r < q ? this.view[r++] : null }.bind(this), s = f()); return s() }; n.fromBase64 = function (t, r) { if (typeof t !== "string") { throw TypeError("str") } var s = new n(t.length / 4 * 3, r), q = 0; h.decode(b(t), function (u) { s.view[q++] = u }); s.limit = q; return s }; n.btoa = function (q) { return n.fromBinary(q).toBase64() }; n.atob = function (q) { return n.fromBase64(q).toBinary() }; l.toBinary = function (r, q) { if (typeof r === "undefined") { r = this.offset } if (typeof q === "undefined") { q = this.limit } r |= 0; q |= 0; if (r < 0 || q > this.capacity() || r > q) { throw RangeError("begin, end") } if (r === q) { return "" } var s = [], t = []; while (r < q) { s.push(this.view[r++]); if (s.length >= 1024) { t.push(String.fromCharCode.apply(String, s)), s = [] } } return t.join("") + String.fromCharCode.apply(String, s) }; n.fromBinary = function (v, t) { if (typeof v !== "string") { throw TypeError("str") } var s = 0, r = v.length, q, u = new n(r, t); while (s < r) { q = v.charCodeAt(s); if (q > 255) { throw RangeError("illegal char code: " + q) } u.view[s++] = q } u.limit = r; return u }; l.toDebug = function (u) { var t = -1, r = this.buffer.byteLength, q, w = "", v = "", s = ""; while (t < r) { if (t !== -1) { q = this.view[t]; if (q < 16) { w += "0" + q.toString(16).toUpperCase() } else { w += q.toString(16).toUpperCase() } if (u) { v += q > 32 && q < 127 ? String.fromCharCode(q) : "." } } ++t; if (u) { if (t > 0 && t % 16 === 0 && t !== r) { while (w.length < 3 * 16 + 3) { w += " " } s += w + v + "\n"; w = v = "" } } if (t === this.offset && t === this.limit) { w += t === this.markedOffset ? "!" : "|" } else { if (t === this.offset) { w += t === this.markedOffset ? "[" : "<" } else { if (t === this.limit) { w += t === this.markedOffset ? "]" : ">" } else { w += t === this.markedOffset ? "'" : (u || (t !== 0 && t !== r) ? " " : "") } } } } if (u && w !== " ") { while (w.length < 3 * 16 + 3) { w += " " } s += w + v + "\n" } return u ? s : w }; n.fromDebug = function (A, s, C) { var w = A.length, z = new n(((w + 1) / 3) | 0, s, C); var y = 0, x = 0, q, B, v = false, D = false, r = false, t = false, u = false; while (y < w) { switch (q = A.charAt(y++)) { case "!": if (!C) { if (D || r || t) { u = true; break } D = r = t = true } z.offset = z.markedOffset = z.limit = x; v = false; break; case "|": if (!C) { if (D || t) { u = true; break } D = t = true } z.offset = z.limit = x; v = false; break; case "[": if (!C) { if (D || r) { u = true; break } D = r = true } z.offset = z.markedOffset = x; v = false; break; case "<": if (!C) { if (D) { u = true; break } D = true } z.offset = x; v = false; break; case "]": if (!C) { if (t || r) { u = true; break } t = r = true } z.limit = z.markedOffset = x; v = false; break; case ">": if (!C) { if (t) { u = true; break } t = true } z.limit = x; v = false; break; case "'": if (!C) { if (r) { u = true; break } r = true } z.markedOffset = x; v = false; break; case " ": v = false; break; default: if (!C) { if (v) { u = true; break } } B = parseInt(q + A.charAt(y++), 16); if (!C) { if (isNaN(B) || B < 0 || B > 255) { throw TypeError("Illegal str: Not a debug encoded string") } } z.view[x++] = B; v = true }if (u) { throw TypeError("Illegal str: Invalid symbol at " + y) } } if (!C) { if (!D || !t) { throw TypeError("Illegal str: Missing offset or limit") } if (x < z.buffer.byteLength) { throw TypeError("Illegal str: Not a debug encoded string (is it hex?) " + x + " < " + w) } } return z }; l.toHex = function (t, r) { t = typeof t === "undefined" ? this.offset : t; r = typeof r === "undefined" ? this.limit : r; if (!this.noAssert) { if (typeof t !== "number" || t % 1 !== 0) { throw TypeError("Illegal begin: Not an integer") } t >>>= 0; if (typeof r !== "number" || r % 1 !== 0) { throw TypeError("Illegal end: Not an integer") } r >>>= 0; if (t < 0 || t > r || r > this.buffer.byteLength) { throw RangeError("Illegal range: 0 <= " + t + " <= " + r + " <= " + this.buffer.byteLength) } } var s = new Array(r - t), q; while (t < r) { q = this.view[t++]; if (q < 16) { s.push("0", q.toString(16)) } else { s.push(q.toString(16)) } } return s.join("") }; n.fromHex = function (x, v, u) { if (!u) { if (typeof x !== "string") { throw TypeError("Illegal str: Not a string") } if (x.length % 2 !== 0) { throw TypeError("Illegal str: Length not a multiple of 2") } } var r = x.length, w = new n((r / 2) | 0, v), q; for (var t = 0, s = 0; t < r; t += 2) { q = parseInt(x.substring(t, t + 2), 16); if (!u) { if (!isFinite(q) || q < 0 || q > 255) { throw TypeError("Illegal str: Contains non-hex characters") } } w.view[s++] = q } w.limit = s; return w }; var o = function () { var q = {}; q.MAX_CODEPOINT = 1114111; q.encodeUTF8 = function (s, t) { var r = null; if (typeof s === "number") { r = s, s = function () { return null } } while (r !== null || (r = s()) !== null) { if (r < 128) { t(r & 127) } else { if (r < 2048) { t(((r >> 6) & 31) | 192), t((r & 63) | 128) } else { if (r < 65536) { t(((r >> 12) & 15) | 224), t(((r >> 6) & 63) | 128), t((r & 63) | 128) } else { t(((r >> 18) & 7) | 240), t(((r >> 12) & 63) | 128), t(((r >> 6) & 63) | 128), t((r & 63) | 128) } } } r = null } }; q.decodeUTF8 = function (v, x) { var t, r, w, u, s = function (y) { y = y.slice(0, y.indexOf(null)); var z = Error(y.toString()); z.name = "TruncatedError"; z.bytes = y; throw z }; while ((t = v()) !== null) { if ((t & 128) === 0) { x(t) } else { if ((t & 224) === 192) { ((r = v()) === null) && s([t, r]), x(((t & 31) << 6) | (r & 63)) } else { if ((t & 240) === 224) { ((r = v()) === null || (w = v()) === null) && s([t, r, w]), x(((t & 15) << 12) | ((r & 63) << 6) | (w & 63)) } else { if ((t & 248) === 240) { ((r = v()) === null || (w = v()) === null || (u = v()) === null) && s([t, r, w, u]), x(((t & 7) << 18) | ((r & 63) << 12) | ((w & 63) << 6) | (u & 63)) } else { throw RangeError("Illegal starting byte: " + t) } } } } } }; q.UTF16toUTF8 = function (t, u) { var s, r = null; while (true) { if ((s = r !== null ? r : t()) === null) { break } if (s >= 55296 && s <= 57343) { if ((r = t()) !== null) { if (r >= 56320 && r <= 57343) { u((s - 55296) * 1024 + r - 56320 + 65536); r = null; continue } } } u(s) } if (r !== null) { u(r) } }; q.UTF8toUTF16 = function (s, t) { var r = null; if (typeof s === "number") { r = s, s = function () { return null } } while (r !== null || (r = s()) !== null) { if (r <= 65535) { t(r) } else { r -= 65536, t((r >> 10) + 55296), t((r % 1024) + 56320) } r = null } }; q.encodeUTF16toUTF8 = function (r, s) { q.UTF16toUTF8(r, function (t) { q.encodeUTF8(t, s) }) }; q.decodeUTF8toUTF16 = function (r, s) { q.decodeUTF8(r, function (t) { q.UTF8toUTF16(t, s) }) }; q.calculateCodePoint = function (r) { return (r < 128) ? 1 : (r < 2048) ? 2 : (r < 65536) ? 3 : 4 }; q.calculateUTF8 = function (t) { var s, r = 0; while ((s = t()) !== null) { r += (s < 128) ? 1 : (s < 2048) ? 2 : (s < 65536) ? 3 : 4 } return r }; q.calculateUTF16asUTF8 = function (s) { var t = 0, r = 0; q.UTF16toUTF8(s, function (u) { ++t; r += (u < 128) ? 1 : (u < 2048) ? 2 : (u < 65536) ? 3 : 4 }); return [t, r] }; return q }(); l.toUTF8 = function (r, q) { if (typeof r === "undefined") { r = this.offset } if (typeof q === "undefined") { q = this.limit } if (!this.noAssert) { if (typeof r !== "number" || r % 1 !== 0) { throw TypeError("Illegal begin: Not an integer") } r >>>= 0; if (typeof q !== "number" || q % 1 !== 0) { throw TypeError("Illegal end: Not an integer") } q >>>= 0; if (r < 0 || r > q || q > this.buffer.byteLength) { throw RangeError("Illegal range: 0 <= " + r + " <= " + q + " <= " + this.buffer.byteLength) } } var t; try { o.decodeUTF8toUTF16(function () { return r < q ? this.view[r++] : null }.bind(this), t = f()) } catch (s) { if (r !== q) { throw RangeError("Illegal range: Truncated data, " + r + " != " + q) } } return t() }; n.fromUTF8 = function (u, s, r) { if (!r) { if (typeof u !== "string") { throw TypeError("Illegal str: Not a string") } } var t = new n(o.calculateUTF16asUTF8(b(u), true)[1], s, r), q = 0; o.encodeUTF16toUTF8(b(u), function (v) { t.view[q++] = v }); t.limit = q; return t }; return n })(d); var e = (function (j, k, f) { var l = {}; l.ByteBuffer = j; l.c = j; var n = j; l.Long = k || null; l.VERSION = "5.0.1"; l.WIRE_TYPES = {}; l.WIRE_TYPES.VARINT = 0; l.WIRE_TYPES.BITS64 = 1; l.WIRE_TYPES.LDELIM = 2; l.WIRE_TYPES.STARTGROUP = 3; l.WIRE_TYPES.ENDGROUP = 4; l.WIRE_TYPES.BITS32 = 5; l.PACKABLE_WIRE_TYPES = [l.WIRE_TYPES.VARINT, l.WIRE_TYPES.BITS64, l.WIRE_TYPES.BITS32]; l.TYPES = { int32: { name: "int32", wireType: l.WIRE_TYPES.VARINT, defaultValue: 0 }, uint32: { name: "uint32", wireType: l.WIRE_TYPES.VARINT, defaultValue: 0 }, sint32: { name: "sint32", wireType: l.WIRE_TYPES.VARINT, defaultValue: 0 }, int64: { name: "int64", wireType: l.WIRE_TYPES.VARINT, defaultValue: l.Long ? l.Long.ZERO : undefined }, uint64: { name: "uint64", wireType: l.WIRE_TYPES.VARINT, defaultValue: l.Long ? l.Long.UZERO : undefined }, sint64: { name: "sint64", wireType: l.WIRE_TYPES.VARINT, defaultValue: l.Long ? l.Long.ZERO : undefined }, bool: { name: "bool", wireType: l.WIRE_TYPES.VARINT, defaultValue: false }, "double": { name: "double", wireType: l.WIRE_TYPES.BITS64, defaultValue: 0 }, string: { name: "string", wireType: l.WIRE_TYPES.LDELIM, defaultValue: "" }, bytes: { name: "bytes", wireType: l.WIRE_TYPES.LDELIM, defaultValue: null }, fixed32: { name: "fixed32", wireType: l.WIRE_TYPES.BITS32, defaultValue: 0 }, sfixed32: { name: "sfixed32", wireType: l.WIRE_TYPES.BITS32, defaultValue: 0 }, fixed64: { name: "fixed64", wireType: l.WIRE_TYPES.BITS64, defaultValue: l.Long ? l.Long.UZERO : undefined }, sfixed64: { name: "sfixed64", wireType: l.WIRE_TYPES.BITS64, defaultValue: l.Long ? l.Long.ZERO : undefined }, "float": { name: "float", wireType: l.WIRE_TYPES.BITS32, defaultValue: 0 }, "enum": { name: "enum", wireType: l.WIRE_TYPES.VARINT, defaultValue: 0 }, message: { name: "message", wireType: l.WIRE_TYPES.LDELIM, defaultValue: null }, group: { name: "group", wireType: l.WIRE_TYPES.STARTGROUP, defaultValue: null } }; l.MAP_KEY_TYPES = [l.TYPES.int32, l.TYPES.sint32, l.TYPES.sfixed32, l.TYPES.uint32, l.TYPES.fixed32, l.TYPES.int64, l.TYPES.sint64, l.TYPES.sfixed64, l.TYPES.uint64, l.TYPES.fixed64, l.TYPES.bool, l.TYPES.string, l.TYPES.bytes]; l.ID_MIN = 1; l.ID_MAX = 536870911; l.convertFieldsToCamelCase = false; l.populateAccessors = true; l.populateDefaults = true; l.Util = (function () { var b = {}; b.IS_NODE = !!(typeof process === "object" && process + "" === "[object process]" && !process.browser); b.XHR = function () { var r = [function () { return new XMLHttpRequest() }, function () { return new ActiveXObject("Msxml2.XMLHTTP") }, function () { return new ActiveXObject("Msxml3.XMLHTTP") }, function () { return new ActiveXObject("Microsoft.XMLHTTP") }]; var o = null; for (var q = 0; q < r.length; q++) { try { o = r[q]() } catch (p) { continue } break } if (!o) { throw Error("XMLHttpRequest is not supported") } return o }; b.fetch = function (q, o) { if (o && typeof o != "function") { o = null } if (b.IS_NODE) { if (o) { g.readFile(q, function (t, s) { if (t) { o(null) } else { o("" + s) } }) } else { try { return g.readFileSync(q) } catch (r) { return null } } } else { var p = b.XHR(); p.open("GET", q, o ? true : false); p.setRequestHeader("Accept", "text/plain"); if (typeof p.overrideMimeType === "function") { p.overrideMimeType("text/plain") } if (o) { p.onreadystatechange = function () { if (p.readyState != 4) { return } if (p.status == 200 || (p.status == 0 && typeof p.responseText === "string")) { o(p.responseText) } else { o(null) } }; if (p.readyState == 4) { return } p.send(null) } else { p.send(null); if (p.status == 200 || (p.status == 0 && typeof p.responseText === "string")) { return p.responseText } return null } } }; b.toCamelCase = function (o) { return o.replace(/_([a-zA-Z])/g, function (p, q) { return q.toUpperCase() }) }; return b })(); l.Lang = { DELIM: /[\s\{\}=;:\[\],'"\(\)<>]/g, RULE: /^(?:required|optional|repeated|map)$/, TYPE: /^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/, NAME: /^[a-zA-Z_][a-zA-Z_0-9]*$/, TYPEDEF: /^[a-zA-Z][a-zA-Z_0-9]*$/, TYPEREF: /^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/, FQTYPEREF: /^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/, NUMBER: /^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/, NUMBER_DEC: /^(?:[1-9][0-9]*|0)$/, NUMBER_HEX: /^0[xX][0-9a-fA-F]+$/, NUMBER_OCT: /^0[0-7]+$/, NUMBER_FLT: /^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/, BOOL: /^(?:true|false)$/i, ID: /^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/, NEGID: /^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/, WHITESPACE: /\s/, STRING: /(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g, STRING_DQ: /(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g, STRING_SQ: /(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g }; l.DotProto = (function (s, t) { var q = {}; var r = function (o) { this.source = o + ""; this.index = 0; this.line = 1; this.stack = []; this._stringOpen = null }; var b = r.prototype; b._readString = function () { var o = this._stringOpen === '"' ? t.STRING_DQ : t.STRING_SQ; o.lastIndex = this.index - 1; var y = o.exec(this.source); if (!y) { throw Error("unterminated string") } this.index = o.lastIndex; this.stack.push(this._stringOpen); this._stringOpen = null; return y[1] }; b.next = function () { if (this.stack.length > 0) { return this.stack.shift() } if (this.index >= this.source.length) { return null } if (this._stringOpen !== null) { return this._readString() } var y, z, A; do { y = false; while (t.WHITESPACE.test(A = this.source.charAt(this.index))) { if (A === "\n") { ++this.line } if (++this.index === this.source.length) { return null } } if (this.source.charAt(this.index) === "/") { ++this.index; if (this.source.charAt(this.index) === "/") { while (this.source.charAt(++this.index) !== "\n") { if (this.index == this.source.length) { return null } } ++this.index; ++this.line; y = true } else { if ((A = this.source.charAt(this.index)) === "*") { do { if (A === "\n") { ++this.line } if (++this.index === this.source.length) { return null } z = A; A = this.source.charAt(this.index) } while (z !== "*" || A !== "/"); ++this.index; y = true } else { return "/" } } } } while (y); if (this.index === this.source.length) { return null } var C = this.index; t.DELIM.lastIndex = 0; var o = t.DELIM.test(this.source.charAt(C++)); if (!o) { while (C < this.source.length && !t.DELIM.test(this.source.charAt(C))) { ++C } } var B = this.source.substring(this.index, this.index = C); if (B === '"' || B === "'") { this._stringOpen = B } return B }; b.peek = function () { if (this.stack.length === 0) { var o = this.next(); if (o === null) { return null } this.stack.push(o) } return this.stack[0] }; b.skip = function (y) { var o = this.next(); if (o !== y) { throw Error("illegal '" + o + "', '" + y + "' expected") } }; b.omit = function (o) { if (this.peek() === o) { this.next(); return true } return false }; b.toString = function () { return "Tokenizer (" + this.index + "/" + this.source.length + " at line " + this.line + ")" }; q.Tokenizer = r; var u = function (o) { this.tn = new r(o); this.proto3 = false }; var w = u.prototype; w.parse = function () { var A = { name: "[ROOT]", "package": null, messages: [], enums: [], imports: [], options: {}, services: [] }; var y, z = true; try { while (y = this.tn.next()) { switch (y) { case "package": if (!z || A["package"] !== null) { throw Error("unexpected 'package'") } y = this.tn.next(); if (!t.TYPEREF.test(y)) { throw Error("illegal package name: " + y) } this.tn.skip(";"); A["package"] = y; break; case "import": if (!z) { throw Error("unexpected 'import'") } y = this.tn.peek(); if (y === "public") { this.tn.next() } y = this._readString(); this.tn.skip(";"); A.imports.push(y); break; case "syntax": if (!z) { throw Error("unexpected 'syntax'") } this.tn.skip("="); if ((A.syntax = this._readString()) === "proto3") { this.proto3 = true } this.tn.skip(";"); break; case "message": this._parseMessage(A, null); z = false; break; case "enum": this._parseEnum(A); z = false; break; case "option": this._parseOption(A); break; case "service": this._parseService(A); break; case "extend": this._parseExtend(A); break; default: throw Error("unexpected '" + y + "'") } } } catch (o) { o.message = "Parse error at line " + this.tn.line + ": " + o.message; throw o } delete A.name; return A }; u.parse = function (o) { return new u(o).parse() }; function x(y, z) { var o = -1, A = 1; if (y.charAt(0) == "-") { A = -1; y = y.substring(1) } if (t.NUMBER_DEC.test(y)) { o = parseInt(y) } else { if (t.NUMBER_HEX.test(y)) { o = parseInt(y.substring(2), 16) } else { if (t.NUMBER_OCT.test(y)) { o = parseInt(y.substring(1), 8) } else { throw Error("illegal id value: " + (A < 0 ? "-" : "") + y) } } } o = (A * o) | 0; if (!z && o < 0) { throw Error("illegal id value: " + (A < 0 ? "-" : "") + y) } return o } function p(o) { var y = 1; if (o.charAt(0) == "-") { y = -1; o = o.substring(1) } if (t.NUMBER_DEC.test(o)) { return y * parseInt(o, 10) } else { if (t.NUMBER_HEX.test(o)) { return y * parseInt(o.substring(2), 16) } else { if (t.NUMBER_OCT.test(o)) { return y * parseInt(o.substring(1), 8) } else { if (o === "inf") { return y * Infinity } else { if (o === "nan") { return NaN } else { if (t.NUMBER_FLT.test(o)) { return y * parseFloat(o) } } } } } } throw Error("illegal number value: " + (y < 0 ? "-" : "") + o) } w._readString = function () { var y = "", z, o; do { o = this.tn.next(); if (o !== "'" && o !== '"') { throw Error("illegal string delimiter: " + o) } y += this.tn.next(); this.tn.skip(o); z = this.tn.peek() } while (z === '"' || z === '"'); return y }; w._readValue = function (z) { var y = this.tn.peek(), o; if (y === '"' || y === "'") { return this._readString() } this.tn.next(); if (t.NUMBER.test(y)) { return p(y) } if (t.BOOL.test(y)) { return (y.toLowerCase() === "true") } if (z && t.TYPEREF.test(y)) { return y } throw Error("illegal value: " + y) }; w._parseOption = function (z, o) { var A = this.tn.next(), y = false; if (A === "(") { y = true; A = this.tn.next() } if (!t.TYPEREF.test(A)) { throw Error("illegal option name: " + A) } var B = A; if (y) { this.tn.skip(")"); B = "(" + B + ")"; A = this.tn.peek(); if (t.FQTYPEREF.test(A)) { B += A; this.tn.next() } } this.tn.skip("="); this._parseOptionValue(z, B); if (!o) { this.tn.skip(";") } }; function v(y, z, o) { if (typeof y[z] === "undefined") { y[z] = o } else { if (!Array.isArray(y[z])) { y[z] = [y[z]] } y[z].push(o) } } w._parseOptionValue = function (o, z) { var y = this.tn.peek(); if (y !== "{") { v(o.options, z, this._readValue(true)) } else { this.tn.skip("{"); while ((y = this.tn.next()) !== "}") { if (!t.NAME.test(y)) { throw Error("illegal option name: " + z + "." + y) } if (this.tn.omit(":")) { v(o.options, z + "." + y, this._readValue(true)) } else { this._parseOptionValue(o, z + "." + y) } } } }; w._parseService = function (y) { var z = this.tn.next(); if (!t.NAME.test(z)) { throw Error("illegal service name at line " + this.tn.line + ": " + z) } var A = z; var o = { name: A, rpc: {}, options: {} }; this.tn.skip("{"); while ((z = this.tn.next()) !== "}") { if (z === "option") { this._parseOption(o) } else { if (z === "rpc") { this._parseServiceRPC(o) } else { throw Error("illegal service token: " + z) } } } this.tn.omit(";"); y.services.push(o) }; w._parseServiceRPC = function (y) { var z = "rpc", A = this.tn.next(); if (!t.NAME.test(A)) { throw Error("illegal rpc service method name: " + A) } var B = A; var o = { request: null, response: null, request_stream: false, response_stream: false, options: {} }; this.tn.skip("("); A = this.tn.next(); if (A.toLowerCase() === "stream") { o.request_stream = true; A = this.tn.next() } if (!t.TYPEREF.test(A)) { throw Error("illegal rpc service request type: " + A) } o.request = A; this.tn.skip(")"); A = this.tn.next(); if (A.toLowerCase() !== "returns") { throw Error("illegal rpc service request type delimiter: " + A) } this.tn.skip("("); A = this.tn.next(); if (A.toLowerCase() === "stream") { o.response_stream = true; A = this.tn.next() } o.response = A; this.tn.skip(")"); A = this.tn.peek(); if (A === "{") { this.tn.next(); while ((A = this.tn.next()) !== "}") { if (A === "option") { this._parseOption(o) } else { throw Error("illegal rpc service token: " + A) } } this.tn.omit(";") } else { this.tn.skip(";") } if (typeof y[z] === "undefined") { y[z] = {} } y[z][B] = o }; w._parseMessage = function (z, A) { var o = !!A, B = this.tn.next(); var y = { name: "", fields: [], enums: [], messages: [], options: {}, services: [], oneofs: {} }; if (!t.NAME.test(B)) { throw Error("illegal " + (o ? "group" : "message") + " name: " + B) } y.name = B; if (o) { this.tn.skip("="); A.id = x(this.tn.next()); y.isGroup = true } B = this.tn.peek(); if (B === "[" && A) { this._parseFieldOptions(A) } this.tn.skip("{"); while ((B = this.tn.next()) !== "}") { if (t.RULE.test(B)) { this._parseMessageField(y, B) } else { if (B === "oneof") { this._parseMessageOneOf(y) } else { if (B === "enum") { this._parseEnum(y) } else { if (B === "message") { this._parseMessage(y) } else { if (B === "option") { this._parseOption(y) } else { if (B === "service") { this._parseService(y) } else { if (B === "extensions") { y.extensions = this._parseExtensionRanges() } else { if (B === "reserved") { this._parseIgnored() } else { if (B === "extend") { this._parseExtend(y) } else { if (t.TYPEREF.test(B)) { if (!this.proto3) { throw Error("illegal field rule: " + B) } this._parseMessageField(y, "optional", B) } else { throw Error("illegal message token: " + B) } } } } } } } } } } } this.tn.omit(";"); z.messages.push(y); return y }; w._parseIgnored = function () { while (this.tn.peek() !== ";") { this.tn.next() } this.tn.skip(";") }; w._parseMessageField = function (o, y, z) { if (!t.RULE.test(y)) { throw Error("illegal message field rule: " + y) } var A = { rule: y, type: "", name: "", options: {}, id: 0 }; var B; if (y === "map") { if (z) { throw Error("illegal type: " + z) } this.tn.skip("<"); B = this.tn.next(); if (!t.TYPE.test(B) && !t.TYPEREF.test(B)) { throw Error("illegal message field type: " + B) } A.keytype = B; this.tn.skip(","); B = this.tn.next(); if (!t.TYPE.test(B) && !t.TYPEREF.test(B)) { throw Error("illegal message field: " + B) } A.type = B; this.tn.skip(">"); B = this.tn.next(); if (!t.NAME.test(B)) { throw Error("illegal message field name: " + B) } A.name = B; this.tn.skip("="); A.id = x(this.tn.next()); B = this.tn.peek(); if (B === "[") { this._parseFieldOptions(A) } this.tn.skip(";") } else { z = typeof z !== "undefined" ? z : this.tn.next(); if (z === "group") { var C = this._parseMessage(o, A); if (!/^[A-Z]/.test(C.name)) { throw Error("illegal group name: " + C.name) } A.type = C.name; A.name = C.name.toLowerCase(); this.tn.omit(";") } else { if (!t.TYPE.test(z) && !t.TYPEREF.test(z)) { throw Error("illegal message field type: " + z) } A.type = z; B = this.tn.next(); if (!t.NAME.test(B)) { throw Error("illegal message field name: " + B) } A.name = B; this.tn.skip("="); A.id = x(this.tn.next()); B = this.tn.peek(); if (B === "[") { this._parseFieldOptions(A) } this.tn.skip(";") } } o.fields.push(A); return A }; w._parseMessageOneOf = function (o) { var y = this.tn.next(); if (!t.NAME.test(y)) { throw Error("illegal oneof name: " + y) } var A = y, z; var B = []; this.tn.skip("{"); while ((y = this.tn.next()) !== "}") { z = this._parseMessageField(o, "optional", y); z.oneof = A; B.push(z.id) } this.tn.omit(";"); o.oneofs[A] = B }; w._parseFieldOptions = function (y) { this.tn.skip("["); var z, o = true; while ((z = this.tn.peek()) !== "]") { if (!o) { this.tn.skip(",") } this._parseOption(y, true); o = false } this.tn.next() }; w._parseEnum = function (o) { var A = { name: "", values: [], options: {} }; var z = this.tn.next(); if (!t.NAME.test(z)) { throw Error("illegal name: " + z) } A.name = z; this.tn.skip("{"); while ((z = this.tn.next()) !== "}") { if (z === "option") { this._parseOption(A) } else { if (!t.NAME.test(z)) { throw Error("illegal name: " + z) } this.tn.skip("="); var y = { name: z, id: x(this.tn.next(), true) }; z = this.tn.peek(); if (z === "[") { this._parseFieldOptions({ options: {} }) } this.tn.skip(";"); A.values.push(y) } } this.tn.omit(";"); o.enums.push(A) }; w._parseExtensionRanges = function () { var A = []; var y, z, o; do { z = []; while (true) { y = this.tn.next(); switch (y) { case "min": o = s.ID_MIN; break; case "max": o = s.ID_MAX; break; default: o = p(y); break }z.push(o); if (z.length === 2) { break } if (this.tn.peek() !== "to") { z.push(o); break } this.tn.next() } A.push(z) } while (this.tn.omit(",")); this.tn.skip(";"); return A }; w._parseExtend = function (o) { var z = this.tn.next(); if (!t.TYPEREF.test(z)) { throw Error("illegal extend reference: " + z) } var y = { ref: z, fields: [] }; this.tn.skip("{"); while ((z = this.tn.next()) !== "}") { if (t.RULE.test(z)) { this._parseMessageField(y, z) } else { if (t.TYPEREF.test(z)) { if (!this.proto3) { throw Error("illegal field rule: " + z) } this._parseMessageField(y, "optional", z) } else { throw Error("illegal extend token: " + z) } } } this.tn.omit(";"); o.messages.push(y); return y }; w.toString = function () { return "Parser at line " + this.tn.line }; q.Parser = u; return q })(l, l.Lang); l.Reflect = (function (V) { var aa = {}; var Z = function (q, o, p) { this.builder = q; this.parent = o; this.name = p; this.className }; var ab = Z.prototype; ab.fqn = function () { var p = this.name, o = this; do { o = o.parent; if (o == null) { break } p = o.name + "." + p } while (true); return p }; ab.toString = function (o) { return (o ? this.className + " " : "") + this.fqn() }; ab.build = function () { throw Error(this.toString(true) + " cannot be built directly") }; aa.T = Z; var P = function (r, o, p, q, s) { Z.call(this, r, o, p); this.className = "Namespace"; this.children = []; this.options = q || {}; this.syntax = s || "proto2" }; var H = P.prototype = Object.create(Z.prototype); H.getChildren = function (o) { o = o || null; if (o == null) { return this.children.slice() } var p = []; for (var q = 0, r = this.children.length; q < r; ++q) { if (this.children[q] instanceof o) { p.push(this.children[q]) } } return p }; H.addChild = function (o) { var p; if (p = this.getChild(o.name)) { if (p instanceof ad.Field && p.name !== p.originalName && this.getChild(p.originalName) === null) { p.name = p.originalName } else { if (o instanceof ad.Field && o.name !== o.originalName && this.getChild(o.originalName) === null) { o.name = o.originalName } else { throw Error("Duplicate name in namespace " + this.toString(true) + ": " + o.name) } } } this.children.push(o) }; H.getChild = function (o) { var p = typeof o === "number" ? "id" : "name"; for (var q = 0, r = this.children.length; q < r; ++q) { if (this.children[q][p] === o) { return this.children[q] } } return null }; H.resolve = function (q, t) { var s = typeof q === "string" ? q.split(".") : q, o = this, r = 0; if (s[r] === "") { while (o.parent !== null) { o = o.parent } r++ } var p; do { do { if (!(o instanceof aa.Namespace)) { o = null; break } p = o.getChild(s[r]); if (!p || !(p instanceof aa.T) || (t && !(p instanceof aa.Namespace))) { o = null; break } o = p; r++ } while (r < s.length); if (o != null) { break } if (this.parent !== null) { return this.parent.resolve(q, t) } } while (o != null); return o }; H.qn = function (q) { var r = [], o = q; do { r.unshift(o.name); o = o.parent } while (o !== null); for (var s = 1; s <= r.length; s++) { var p = r.slice(r.length - s); if (q === this.resolve(p, q instanceof aa.Namespace)) { return p.join(".") } } return q.fqn() }; H.build = function () { var p = {}; var q = this.children; for (var r = 0, s = q.length, o; r < s; ++r) { o = q[r]; if (o instanceof P) { p[o.name] = o.build() } } if (Object.defineProperty) { Object.defineProperty(p, "$options", { value: this.buildOpt() }) } return p }; H.buildOpt = function () { var q = {}, p = Object.keys(this.options); for (var r = 0, t = p.length; r < t; ++r) { var s = p[r], o = this.options[p[r]]; q[s] = o } return q }; H.getOption = function (o) { if (typeof o === "undefined") { return this.options } return typeof this.options[o] !== "undefined" ? this.options[o] : null }; aa.Namespace = P; var J = function (o, q, p, r) { this.type = o; this.resolvedType = q; this.isMapKey = p; this.syntax = r; if (p && V.MAP_KEY_TYPES.indexOf(o) < 0) { throw Error("Invalid map key type: " + o.name) } }; var b = J.prototype; function F(o) { if (typeof o === "string") { o = V.TYPES[o] } if (typeof o.defaultValue === "undefined") { throw Error("default value for type " + o.name + " is not supported") } if (o == V.TYPES.bytes) { return new n(0) } return o.defaultValue } J.defaultFieldValue = F; function W(o, p) { if (o && typeof o.low === "number" && typeof o.high === "number" && typeof o.unsigned === "boolean" && o.low === o.low && o.high === o.high) { return new V.Long(o.low, o.high, typeof p === "undefined" ? o.unsigned : p) } if (typeof o === "string") { return V.Long.fromString(o, p || false, 10) } if (typeof o === "number") { return V.Long.fromNumber(o, p || false) } throw Error("not convertible to Long") } b.verifyValue = function (q) { var t = function (v, u) { throw Error("Illegal value for " + this.toString(true) + " of type " + this.type.name + ": " + v + " (" + u + ")") }.bind(this); switch (this.type) { case V.TYPES.int32: case V.TYPES.sint32: case V.TYPES.sfixed32: if (typeof q !== "number" || (q === q && q % 1 !== 0)) { t(typeof q, "not an integer") } return q > 4294967295 ? q | 0 : q; case V.TYPES.uint32: case V.TYPES.fixed32: if (typeof q !== "number" || (q === q && q % 1 !== 0)) { t(typeof q, "not an integer") } return q < 0 ? q >>> 0 : q; case V.TYPES.int64: case V.TYPES.sint64: case V.TYPES.sfixed64: if (V.Long) { try { return W(q, false) } catch (o) { t(typeof q, o.message) } } else { t(typeof q, "requires Long.js") } case V.TYPES.uint64: case V.TYPES.fixed64: if (V.Long) { try { return W(q, true) } catch (o) { t(typeof q, o.message) } } else { t(typeof q, "requires Long.js") } case V.TYPES.bool: if (typeof q !== "boolean") { t(typeof q, "not a boolean") } return q; case V.TYPES["float"]: case V.TYPES["double"]: if (typeof q !== "number") { t(typeof q, "not a number") } return q; case V.TYPES.string: if (typeof q !== "string" && !(q && q instanceof String)) { t(typeof q, "not a string") } return "" + q; case V.TYPES.bytes: if (j.isByteBuffer(q)) { return q } return j.wrap(q); case V.TYPES["enum"]: var s = this.resolvedType.getChildren(V.Reflect.Enum.Value); for (r = 0; r < s.length; r++) { if (s[r].name == q) { return s[r].id } else { if (s[r].id == q) { return s[r].id } } } if (this.syntax === "proto3") { if (typeof q !== "number" || (q === q && q % 1 !== 0)) { t(typeof q, "not an integer") } if (q > 4294967295 || q < 0) { t(typeof q, "not in range for uint32") } return q } else { t(q, "not a valid enum value") } case V.TYPES.group: case V.TYPES.message: if (!q || typeof q !== "object") { t(typeof q, "object expected") } if (q instanceof this.resolvedType.clazz) { return q } if (q instanceof V.Builder.Message) { var p = {}; for (var r in q) { if (q.hasOwnProperty(r)) { p[r] = q[r] } } q = p } return new (this.resolvedType.clazz)(q) }throw Error("[INTERNAL] Illegal value for " + this.toString(true) + ": " + q + " (undefined type " + this.type + ")") }; b.calculateLength = function (o, q) { if (q === null) { return 0 } var p; switch (this.type) { case V.TYPES.int32: return q < 0 ? n.calculateVarint64(q) : n.calculateVarint32(q); case V.TYPES.uint32: return n.calculateVarint32(q); case V.TYPES.sint32: return n.calculateVarint32(n.zigZagEncode32(q)); case V.TYPES.fixed32: case V.TYPES.sfixed32: case V.TYPES["float"]: return 4; case V.TYPES.int64: case V.TYPES.uint64: return n.calculateVarint64(q); case V.TYPES.sint64: return n.calculateVarint64(n.zigZagEncode64(q)); case V.TYPES.fixed64: case V.TYPES.sfixed64: return 8; case V.TYPES.bool: return 1; case V.TYPES["enum"]: return n.calculateVarint32(q); case V.TYPES["double"]: return 8; case V.TYPES.string: p = n.calculateUTF8Bytes(q); return n.calculateVarint32(p) + p; case V.TYPES.bytes: if (q.remaining() < 0) { throw Error("Illegal value for " + this.toString(true) + ": " + q.remaining() + " bytes remaining") } return n.calculateVarint32(q.remaining()) + q.remaining(); case V.TYPES.message: p = this.resolvedType.calculate(q); return n.calculateVarint32(p) + p; case V.TYPES.group: p = this.resolvedType.calculate(q); return p + n.calculateVarint32((o << 3) | V.WIRE_TYPES.ENDGROUP) }throw Error("[INTERNAL] Illegal value to encode in " + this.toString(true) + ": " + q + " (unknown type)") }; b.encodeValue = function (o, r, s) { if (r === null) { return s } switch (this.type) { case V.TYPES.int32: if (r < 0) { s.writeVarint64(r) } else { s.writeVarint32(r) } break; case V.TYPES.uint32: s.writeVarint32(r); break; case V.TYPES.sint32: s.writeVarint32ZigZag(r); break; case V.TYPES.fixed32: s.writeUint32(r); break; case V.TYPES.sfixed32: s.writeInt32(r); break; case V.TYPES.int64: case V.TYPES.uint64: s.writeVarint64(r); break; case V.TYPES.sint64: s.writeVarint64ZigZag(r); break; case V.TYPES.fixed64: s.writeUint64(r); break; case V.TYPES.sfixed64: s.writeInt64(r); break; case V.TYPES.bool: if (typeof r === "string") { s.writeVarint32(r.toLowerCase() === "false" ? 0 : !!r) } else { s.writeVarint32(r ? 1 : 0) } break; case V.TYPES["enum"]: s.writeVarint32(r); break; case V.TYPES["float"]: s.writeFloat32(r); break; case V.TYPES["double"]: s.writeFloat64(r); break; case V.TYPES.string: s.writeVString(r); break; case V.TYPES.bytes: if (r.remaining() < 0) { throw Error("Illegal value for " + this.toString(true) + ": " + r.remaining() + " bytes remaining") } var q = r.offset; s.writeVarint32(r.remaining()); s.append(r); r.offset = q; break; case V.TYPES.message: var p = new n().LE(); this.resolvedType.encode(r, p); s.writeVarint32(p.offset); s.append(p.flip()); break; case V.TYPES.group: this.resolvedType.encode(r, s); s.writeVarint32((o << 3) | V.WIRE_TYPES.ENDGROUP); break; default: throw Error("[INTERNAL] Illegal value to encode in " + this.toString(true) + ": " + r + " (unknown type)") }return s }; b.decode = function (r, s, o) { if (s != this.type.wireType) { throw Error("Unexpected wire type for element") } var q, p; switch (this.type) { case V.TYPES.int32: return r.readVarint32() | 0; case V.TYPES.uint32: return r.readVarint32() >>> 0; case V.TYPES.sint32: return r.readVarint32ZigZag() | 0; case V.TYPES.fixed32: return r.readUint32() >>> 0; case V.TYPES.sfixed32: return r.readInt32() | 0; case V.TYPES.int64: return r.readVarint64(); case V.TYPES.uint64: return r.readVarint64().toUnsigned(); case V.TYPES.sint64: return r.readVarint64ZigZag(); case V.TYPES.fixed64: return r.readUint64(); case V.TYPES.sfixed64: return r.readInt64(); case V.TYPES.bool: return !!r.readVarint32(); case V.TYPES["enum"]: return r.readVarint32(); case V.TYPES["float"]: return r.readFloat(); case V.TYPES["double"]: return r.readDouble(); case V.TYPES.string: return r.readVString(); case V.TYPES.bytes: p = r.readVarint32(); if (r.remaining() < p) { throw Error("Illegal number of bytes for " + this.toString(true) + ": " + p + " required but got only " + r.remaining()) } q = r.clone(); q.limit = q.offset + p; r.offset += p; return q; case V.TYPES.message: p = r.readVarint32(); return this.resolvedType.decode(r, p); case V.TYPES.group: return this.resolvedType.decode(r, -1, o) }throw Error("[INTERNAL] Illegal decode type") }; b.valueFromString = function (o) { if (!this.isMapKey) { throw Error("valueFromString() called on non-map-key element") } switch (this.type) { case V.TYPES.int32: case V.TYPES.sint32: case V.TYPES.sfixed32: case V.TYPES.uint32: case V.TYPES.fixed32: return this.verifyValue(parseInt(o)); case V.TYPES.int64: case V.TYPES.sint64: case V.TYPES.sfixed64: case V.TYPES.uint64: case V.TYPES.fixed64: return this.verifyValue(o); case V.TYPES.bool: return o === "true"; case V.TYPES.string: return this.verifyValue(o); case V.TYPES.bytes: return n.fromBinary(o) } }; b.valueToString = function (o) { if (!this.isMapKey) { throw Error("valueToString() called on non-map-key element") } if (this.type === V.TYPES.bytes) { return o.toString("binary") } else { return o.toString() } }; aa.Element = J; var ad = function (s, p, q, r, o, t) { P.call(this, s, p, q, r, t); this.className = "Message"; this.extensions = undefined; this.clazz = null; this.isGroup = !!o; this._fields = null; this._fieldsById = null; this._fieldsByName = null }; var L = ad.prototype = Object.create(P.prototype); L.build = function (s) { if (this.clazz && !s) { return this.clazz } var q = (function (y, E) { var A = E.getChildren(y.Reflect.Message.Field), v = E.getChildren(y.Reflect.Message.OneOf); var x = function (ak, ag) { y.Builder.Message.call(this); for (var aj = 0, af = v.length; aj < af; ++aj) { this[v[aj].name] = null } for (aj = 0, af = A.length; aj < af; ++aj) { var ah = A[aj]; this[ah.name] = ah.repeated ? [] : (ah.map ? new y.Map(ah) : null); if ((ah.required || E.syntax === "proto3") && ah.defaultValue !== null) { this[ah.name] = ah.defaultValue } } if (arguments.length > 0) { var ai; if (arguments.length === 1 && ak !== null && typeof ak === "object" && (typeof ak.encode !== "function" || ak instanceof x) && !Array.isArray(ak) && !(ak instanceof y.Map) && !n.isByteBuffer(ak) && !(ak instanceof ArrayBuffer) && !(y.Long && ak instanceof y.Long)) { this.$set(ak) } else { for (aj = 0, af = arguments.length; aj < af; ++aj) { if (typeof (ai = arguments[aj]) !== "undefined") { this.$set(A[aj].name, ai) } } } } }; var B = x.prototype = Object.create(y.Builder.Message.prototype); B.add = function (af, ai, ah) { var ag = E._fieldsByName[af]; if (!ah) { if (!ag) { throw Error(this + "#" + af + " is undefined") } if (!(ag instanceof y.Reflect.Message.Field)) { throw Error(this + "#" + af + " is not a field: " + ag.toString(true)) } if (!ag.repeated) { throw Error(this + "#" + af + " is not a repeated field") } ai = ag.verifyValue(ai, true) } if (this[af] === null) { this[af] = [] } this[af].push(ai); return this }; B.$add = B.add; B.set = function (ag, ak, ah) { if (ag && typeof ag === "object") { ah = ak; for (var aj in ag) { if (ag.hasOwnProperty(aj) && typeof (ak = ag[aj]) !== "undefined") { this.$set(aj, ak, ah) } } return this } var ai = E._fieldsByName[ag]; if (!ah) { if (!ai) { throw Error(this + "#" + ag + " is not a field: undefined") } if (!(ai instanceof y.Reflect.Message.Field)) { throw Error(this + "#" + ag + " is not a field: " + ai.toString(true)) } this[ai.name] = (ak = ai.verifyValue(ak)) } else { this[ag] = ak } if (ai && ai.oneof) { var af = this[ai.oneof.name]; if (ak !== null) { if (af !== null && af !== ai.name) { this[af] = null } this[ai.oneof.name] = ai.name } else { if (af === ag) { this[ai.oneof.name] = null } } } return this }; B.$set = B.set; B.get = function (af, ag) { if (ag) { return this[af] } var ah = E._fieldsByName[af]; if (!ah || !(ah instanceof y.Reflect.Message.Field)) { throw Error(this + "#" + af + " is not a field: undefined") } if (!(ah instanceof y.Reflect.Message.Field)) { throw Error(this + "#" + af + " is not a field: " + ah.toString(true)) } return this[ah.name] }; B.$get = B.get; for (var D = 0; D < A.length; D++) { var w = A[D]; if (w instanceof y.Reflect.Message.ExtensionField) { continue } if (E.builder.options.populateAccessors) { (function (ai) { var aj = ai.originalName.replace(/(_[a-zA-Z])/g, function (ak) { return ak.toUpperCase().replace("_", "") }); aj = aj.substring(0, 1).toUpperCase() + aj.substring(1); var ah = ai.originalName.replace(/([A-Z])/g, function (ak) { return "_" + ak }); var ag = function (al, ak) { this[ai.name] = ak ? al : ai.verifyValue(al); return this }; var af = function () { return this[ai.name] }; if (E.getChild("set" + aj) === null) { B["set" + aj] = ag } if (E.getChild("set_" + ah) === null) { B["set_" + ah] = ag } if (E.getChild("get" + aj) === null) { B["get" + aj] = af } if (E.getChild("get_" + ah) === null) { B["get_" + ah] = af } })(w) } } B.encode = function (aj, ai) { if (typeof aj === "boolean") { ai = aj, aj = undefined } var af = false; if (!aj) { aj = new j(), af = true } var ah = aj.littleEndian; try { E.encode(this, aj.LE(), ai); return (af ? aj.flip() : aj).LE(ah) } catch (ag) { aj.LE(ah); throw (ag) } }; x.encode = function (ag, af, ah) { return new x(ag).encode(af, ah) }; B.calculate = function () { return E.calculate(this) }; B.encodeDelimited = function (ah) { var af = false; if (!ah) { ah = new n(), af = true } var ag = new n().LE(); E.encode(this, ag).flip(); ah.writeVarint32(ag.remaining()); ah.append(ag); return af ? ah.flip() : ah }; B.encodeAB = function () { try { return this.encode().toArrayBuffer() } catch (af) { if (af.encoded) { af.encoded = af.encoded.toArrayBuffer() } throw (af) } }; B.toArrayBuffer = B.encodeAB; B.encodeNB = function () { try { return this.encode().toBuffer() } catch (af) { if (af.encoded) { af.encoded = af.encoded.toBuffer() } throw (af) } }; B.toBuffer = B.encodeNB; B.encode64 = function () { try { return this.encode().toBase64() } catch (af) { if (af.encoded) { af.encoded = af.encoded.toBase64() } throw (af) } }; B.toBase64 = B.encode64; B.encodeHex = function () { try { return this.encode().toHex() } catch (af) { if (af.encoded) { af.encoded = af.encoded.toHex() } throw (af) } }; B.toHex = B.encodeHex; function u(aj, aq, at, am) { if (aj === null || typeof aj !== "object") { if (am && am instanceof y.Reflect.Enum) { var al = y.Reflect.Enum.getName(am.object, aj); if (al !== null) { return al } } return aj } if (n.isByteBuffer(aj)) { return aq ? aj.toBase64() : aj.toBuffer() } if (y.Long.isLong(aj)) { return at ? aj.toString() : y.Long.fromValue(aj) } var ao; if (Array.isArray(aj)) { ao = []; aj.forEach(function (ag, af) { ao[af] = u(ag, aq, at, am) }); return ao } ao = {}; if (aj instanceof y.Map) { var ai = aj.entries(); for (var ar = ai.next(); !ar.done; ar = ai.next()) { ao[aj.keyElem.valueToString(ar.value[0])] = u(ar.value[1], aq, at, aj.valueElem.resolvedType) } return ao } var ap = aj.$type, an = undefined; for (var ak in aj) { if (aj.hasOwnProperty(ak)) { if (ap && (an = ap.getChild(ak))) { ao[ak] = u(aj[ak], aq, at, an.resolvedType) } else { ao[ak] = u(aj[ak], aq, at) } } } return ao } B.toRaw = function (af, ag) { return u(this, !!af, !!ag, this.$type) }; B.encodeJSON = function () { return JSON.stringify(u(this, true, true, this.$type)) }; x.decode = function (af, aj) { if (typeof af === "string") { af = n.wrap(af, aj ? aj : "base64") } af = n.isByteBuffer(af) ? af : n.wrap(af); var ai = af.littleEndian; try { var ag = E.decode(af.LE()); af.LE(ai); return ag } catch (ah) { af.LE(ai); throw (ah) } }; x.decodeDelimited = function (ak, aj) { if (typeof ak === "string") { ak = n.wrap(ak, aj ? aj : "base64") } ak = n.isByteBuffer(ak) ? ak : n.wrap(ak); if (ak.remaining() < 1) { return null } var ag = ak.offset, af = ak.readVarint32(); if (ak.remaining() < af) { ak.offset = ag; return null } try { var ah = E.decode(ak.slice(ak.offset, ak.offset + af).LE()); ak.offset += af; return ah } catch (ai) { ak.offset += af; throw ai } }; x.decode64 = function (af) { return x.decode(af, "base64") }; x.decodeHex = function (af) { return x.decode(af, "hex") }; x.decodeJSON = function (af) { return new x(JSON.parse(af)) }; B.toString = function () { return E.toString() }; var ae; var C; var t; var z; if (Object.defineProperty) { Object.defineProperty(x, "$options", { value: E.buildOpt() }), Object.defineProperty(B, "$options", { value: x["$options"] }), Object.defineProperty(x, "$type", { value: E }), Object.defineProperty(B, "$type", { value: E }) } return x })(V, this); this._fields = []; this._fieldsById = {}; this._fieldsByName = {}; for (var p = 0, r = this.children.length, o; p < r; p++) { o = this.children[p]; if (o instanceof M || o instanceof ad || o instanceof Q) { if (q.hasOwnProperty(o.name)) { throw Error("Illegal reflect child of " + this.toString(true) + ": " + o.toString(true) + " cannot override static property '" + o.name + "'") } q[o.name] = o.build() } else { if (o instanceof ad.Field) { o.build(), this._fields.push(o), this._fieldsById[o.id] = o, this._fieldsByName[o.name] = o } else { if (!(o instanceof ad.OneOf) && !(o instanceof T)) { throw Error("Illegal reflect child of " + this.toString(true) + ": " + this.children[p].toString(true)) } } } } return this.clazz = q }; L.encode = function (o, s, r) { var w = null, p; for (var q = 0, t = this._fields.length, v; q < t; ++q) { p = this._fields[q]; v = o[p.name]; if (p.required && v === null) { if (w === null) { w = p } } else { p.encode(r ? v : p.verifyValue(v), s, o) } } if (w !== null) { var u = Error("Missing at least one required field for " + this.toString(true) + ": " + w); u.encoded = s; throw (u) } return s }; L.calculate = function (r) { for (var o = 0, s = 0, t = this._fields.length, q, p; s < t; ++s) { q = this._fields[s]; p = r[q.name]; if (q.required && p === null) { throw Error("Missing at least one required field for " + this.toString(true) + ": " + q) } else { o += q.calculate(p, r) } } return o }; function O(p, q) { var r = q.readVarint32(), s = r & 7, o = r >>> 3; switch (s) { case V.WIRE_TYPES.VARINT: do { r = q.readUint8() } while ((r & 128) === 128); break; case V.WIRE_TYPES.BITS64: q.offset += 8; break; case V.WIRE_TYPES.LDELIM: r = q.readVarint32(); q.offset += r; break; case V.WIRE_TYPES.STARTGROUP: O(o, q); break; case V.WIRE_TYPES.ENDGROUP: if (o === p) { return false } else { throw Error("Illegal GROUPEND after unknown group: " + o + " (" + p + " expected)") } case V.WIRE_TYPES.BITS32: q.offset += 4; break; default: throw Error("Illegal wire type in unknown group " + p + ": " + s) }return true } L.decode = function (w, A, u) { A = typeof A === "number" ? A : -1; var C = w.offset, z = new (this.clazz)(), o, p, B, r; while (w.offset < C + A || (A === -1 && w.remaining() > 0)) { o = w.readVarint32(); p = o & 7; B = o >>> 3; if (p === V.WIRE_TYPES.ENDGROUP) { if (B !== u) { throw Error("Illegal group end indicator for " + this.toString(true) + ": " + B + " (" + (u ? u + " expected" : "not a group") + ")") } break } if (!(r = this._fieldsById[B])) { switch (p) { case V.WIRE_TYPES.VARINT: w.readVarint32(); break; case V.WIRE_TYPES.BITS32: w.offset += 4; break; case V.WIRE_TYPES.BITS64: w.offset += 8; break; case V.WIRE_TYPES.LDELIM: var t = w.readVarint32(); w.offset += t; break; case V.WIRE_TYPES.STARTGROUP: while (O(B, w)) { } break; default: throw Error("Illegal wire type for unknown field " + B + " in " + this.toString(true) + "#decode: " + p) }continue } if (r.repeated && !r.options.packed) { z[r.name].push(r.decode(p, w)) } else { if (r.map) { var s = r.decode(p, w); z[r.name].set(s[0], s[1]) } else { z[r.name] = r.decode(p, w); if (r.oneof) { var q = z[r.oneof.name]; if (q !== null && q !== r.name) { z[q] = null } z[r.oneof.name] = r.name } } } } for (var v = 0, x = this._fields.length; v < x; ++v) { r = this._fields[v]; if (z[r.name] === null) { if (this.syntax === "proto3") { z[r.name] = r.defaultValue } else { if (r.required) { var y = Error("Missing at least one required field for " + this.toString(true) + ": " + r.name); y.decoded = z; throw (y) } else { if (V.populateDefaults && r.defaultValue !== null) { z[r.name] = r.defaultValue } } } } } return z }; aa.Message = ad; var X = function (t, p, q, v, r, x, w, o, s, u) { Z.call(this, t, p, x); this.className = "Message.Field"; this.required = q === "required"; this.repeated = q === "repeated"; this.map = q === "map"; this.keyType = v || null; this.type = r; this.resolvedType = null; this.id = w; this.options = o || {}; this.defaultValue = null; this.oneof = s || null; this.syntax = u || "proto2"; this.originalName = this.name; this.element = null; this.keyElement = null; if (this.builder.options.convertFieldsToCamelCase && !(this instanceof ad.ExtensionField)) { this.name = V.Util.toCamelCase(this.name) } }; var N = X.prototype = Object.create(Z.prototype); N.build = function () { this.element = new J(this.type, this.resolvedType, false, this.syntax); if (this.map) { this.keyElement = new J(this.keyType, undefined, true, this.syntax) } if (this.syntax === "proto3" && !this.repeated && !this.map) { this.defaultValue = J.defaultFieldValue(this.type) } else { if (typeof this.options["default"] !== "undefined") { this.defaultValue = this.verifyValue(this.options["default"]) } } }; N.verifyValue = function (o, r) { r = r || false; var s = function (t, u) { throw Error("Illegal value for " + this.toString(true) + " of type " + this.type.name + ": " + t + " (" + u + ")") }.bind(this); if (o === null) { if (this.required) { s(typeof o, "required") } if (this.syntax === "proto3" && this.type !== V.TYPES.message) { s(typeof o, "proto3 field without field presence cannot be null") } return null } var p; if (this.repeated && !r) { if (!Array.isArray(o)) { o = [o] } var q = []; for (p = 0; p < o.length; p++) { q.push(this.element.verifyValue(o[p])) } return q } if (this.map && !r) { if (!(o instanceof V.Map)) { if (!(o instanceof Object)) { s(typeof o, "expected ProtoBuf.Map or raw object for map field") } return new V.Map(this, o) } else { return o } } if (!this.repeated && Array.isArray(o)) { s(typeof o, "no array expected") } return this.element.verifyValue(o) }; N.hasWirePresence = function (o, p) { if (this.syntax !== "proto3") { return (o !== null) } if (this.oneof && p[this.oneof.name] === this.name) { return true } switch (this.type) { case V.TYPES.int32: case V.TYPES.sint32: case V.TYPES.sfixed32: case V.TYPES.uint32: case V.TYPES.fixed32: return o !== 0; case V.TYPES.int64: case V.TYPES.sint64: case V.TYPES.sfixed64: case V.TYPES.uint64: case V.TYPES.fixed64: return o.low !== 0 || o.high !== 0; case V.TYPES.bool: return o; case V.TYPES["float"]: case V.TYPES["double"]: return o !== 0; case V.TYPES.string: return o.length > 0; case V.TYPES.bytes: return o.remaining() > 0; case V.TYPES["enum"]: return o !== 0; case V.TYPES.message: return o !== null; default: return true } }; N.encode = function (p, t, o) { if (this.type === null || typeof this.type !== "object") { throw Error("[INTERNAL] Unresolved type in " + this.toString(true) + ": " + this.type) } if (p === null || (this.repeated && p.length == 0)) { return t } try { if (this.repeated) { var s; if (this.options.packed && V.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType) >= 0) { t.writeVarint32((this.id << 3) | V.WIRE_TYPES.LDELIM); t.ensureCapacity(t.offset += 1); var w = t.offset; for (s = 0; s < p.length; s++) { this.element.encodeValue(this.id, p[s], t) } var r = t.offset - w, u = n.calculateVarint32(r); if (u > 1) { var v = t.slice(w, t.offset); w += u - 1; t.offset = w; t.append(v) } t.writeVarint32(r, w - u) } else { for (s = 0; s < p.length; s++) { t.writeVarint32((this.id << 3) | this.type.wireType), this.element.encodeValue(this.id, p[s], t) } } } else { if (this.map) { p.forEach(function (x, z, A) { var y = n.calculateVarint32((1 << 3) | this.keyType.wireType) + this.keyElement.calculateLength(1, z) + n.calculateVarint32((2 << 3) | this.type.wireType) + this.element.calculateLength(2, x); t.writeVarint32((this.id << 3) | V.WIRE_TYPES.LDELIM); t.writeVarint32(y); t.writeVarint32((1 << 3) | this.keyType.wireType); this.keyElement.encodeValue(1, z, t); t.writeVarint32((2 << 3) | this.type.wireType); this.element.encodeValue(2, x, t) }, this) } else { if (this.hasWirePresence(p, o)) { t.writeVarint32((this.id << 3) | this.type.wireType); this.element.encodeValue(this.id, p, t) } } } } catch (q) { throw Error("Illegal value for " + this.toString(true) + ": " + p + " (" + q + ")") } return t }; N.calculate = function (q, r) { q = this.verifyValue(q); if (this.type === null || typeof this.type !== "object") { throw Error("[INTERNAL] Unresolved type in " + this.toString(true) + ": " + this.type) } if (q === null || (this.repeated && q.length == 0)) { return 0 } var o = 0; try { if (this.repeated) { var s, t; if (this.options.packed && V.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType) >= 0) { o += n.calculateVarint32((this.id << 3) | V.WIRE_TYPES.LDELIM); t = 0; for (s = 0; s < q.length; s++) { t += this.element.calculateLength(this.id, q[s]) } o += n.calculateVarint32(t); o += t } else { for (s = 0; s < q.length; s++) { o += n.calculateVarint32((this.id << 3) | this.type.wireType), o += this.element.calculateLength(this.id, q[s]) } } } else { if (this.map) { q.forEach(function (v, x, u) { var w = n.calculateVarint32((1 << 3) | this.keyType.wireType) + this.keyElement.calculateLength(1, x) + n.calculateVarint32((2 << 3) | this.type.wireType) + this.element.calculateLength(2, v); o += n.calculateVarint32((this.id << 3) | V.WIRE_TYPES.LDELIM); o += n.calculateVarint32(w); o += w }, this) } else { if (this.hasWirePresence(q, r)) { o += n.calculateVarint32((this.id << 3) | this.type.wireType); o += this.element.calculateLength(this.id, q) } } } } catch (p) { throw Error("Illegal value for " + this.toString(true) + ": " + q + " (" + p + ")") } return o }; N.decode = function (s, x, v) { var t, w; var p = (!this.map && s == this.type.wireType) || (!v && this.repeated && this.options.packed && s == V.WIRE_TYPES.LDELIM) || (this.map && s == V.WIRE_TYPES.LDELIM); if (!p) { throw Error("Illegal wire type for field " + this.toString(true) + ": " + s + " (" + this.type.wireType + " expected)") } if (s == V.WIRE_TYPES.LDELIM && this.repeated && this.options.packed && V.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType) >= 0) { if (!v) { w = x.readVarint32(); w = x.offset + w; var q = []; while (x.offset < w) { q.push(this.decode(this.type.wireType, x, true)) } return q } } if (this.map) { var r = J.defaultFieldValue(this.keyType); t = J.defaultFieldValue(this.type); w = x.readVarint32(); if (x.remaining() < w) { throw Error("Illegal number of bytes for " + this.toString(true) + ": " + w + " required but got only " + x.remaining()) } var u = x.clone(); u.limit = u.offset + w; x.offset += w; while (u.remaining() > 0) { var o = u.readVarint32(); s = o & 7; var y = o >>> 3; if (y === 1) { r = this.keyElement.decode(u, s, y) } else { if (y === 2) { t = this.element.decode(u, s, y) } else { throw Error("Unexpected tag in map field key/value submessage") } } } return [r, t] } return this.element.decode(x, s, this.id) }; aa.Message.Field = X; var I = function (u, q, p, r, s, o, t) { X.call(this, u, q, p, null, r, s, o, t); this.extension }; I.prototype = Object.create(X.prototype); aa.Message.ExtensionField = I; var G = function (q, o, p) { Z.call(this, q, o, p); this.fields = [] }; aa.Message.OneOf = G; var M = function (r, o, p, q, s) { P.call(this, r, o, p, q, s); this.className = "Enum"; this.object = null }; M.getName = function (s, o) { var p = Object.keys(s); for (var q = 0, r; q < p.length; ++q) { if (s[r = p[q]] === o) { return r } } return null }; var Y = M.prototype = Object.create(P.prototype); Y.build = function (s) { if (this.object && !s) { return this.object } var p = new V.Builder.Enum(), q = this.getChildren(M.Value); for (var o = 0, r = q.length; o < r; ++o) { p[q[o]["name"]] = q[o]["id"] } if (Object.defineProperty) { Object.defineProperty(p, "$options", { value: this.buildOpt(), enumerable: false }) } return this.object = p }; aa.Enum = M; var R = function (r, p, q, o) { Z.call(this, r, p, q); this.className = "Enum.Value"; this.id = o }; R.prototype = Object.create(Z.prototype); aa.Enum.Value = R; var T = function (r, p, q, o) { Z.call(this, r, p, q); this.field = o }; T.prototype = Object.create(Z.prototype); aa.Extension = T; var Q = function (q, r, o, p) { P.call(this, q, r, o, p); this.className = "Service"; this.clazz = null }; var S = Q.prototype = Object.create(P.prototype); S.build = function (o) { if (this.clazz && !o) { return this.clazz } return this.clazz = (function (r, w) { var x = function (z) { r.Builder.Service.call(this); this.rpcImpl = z || function (C, B, A) { setTimeout(A.bind(this, Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")), 0) } }; var q = x.prototype = Object.create(r.Builder.Service.prototype); var t = w.getChildren(r.Reflect.Service.RPCMethod); for (var v = 0; v < t.length; v++) { (function (z) { q[z.name] = function (B, A) { try { try { B = z.resolvedRequestType.clazz.decode(n.wrap(B)) } catch (C) { if (!(C instanceof TypeError)) { throw C } } if (B === null || typeof B !== "object") { throw Error("Illegal arguments") } if (!(B instanceof z.resolvedRequestType.clazz)) { B = new z.resolvedRequestType.clazz(B) } this.rpcImpl(z.fqn(), B, function (E, ae) { if (E) { A(E); return } try { ae = z.resolvedResponseType.clazz.decode(ae) } catch (D) { } if (!ae || !(ae instanceof z.resolvedResponseType.clazz)) { A(Error("Illegal response type received in service method " + w.name + "#" + z.name)); return } A(null, ae) }) } catch (C) { setTimeout(A.bind(this, C), 0) } }; x[z.name] = function (C, B, A) { new x(C)[z.name](B, A) }; if (Object.defineProperty) { Object.defineProperty(x[z.name], "$options", { value: z.buildOpt() }), Object.defineProperty(q[z.name], "$options", { value: x[z.name]["$options"] }) } })(t[v]) } var y; var u; var p; var s; if (Object.defineProperty) { Object.defineProperty(x, "$options", { value: w.buildOpt() }), Object.defineProperty(q, "$options", { value: x["$options"] }), Object.defineProperty(x, "$type", { value: w }), Object.defineProperty(q, "$type", { value: w }) } return x })(V, this) }; aa.Service = Q; var ac = function (r, o, p, q) { Z.call(this, r, o, p); this.className = "Service.Method"; this.options = q || {} }; var U = ac.prototype = Object.create(Z.prototype); U.buildOpt = H.buildOpt; aa.Service.Method = ac; var K = function (s, v, p, o, t, q, u, r) { ac.call(this, s, v, p, r); this.className = "Service.RPCMethod"; this.requestName = o; this.responseName = t; this.requestStream = q; this.responseStream = u; this.resolvedRequestType = null; this.resolvedResponseType = null }; K.prototype = Object.create(ac.prototype); aa.Service.RPCMethod = K; return aa })(l); l.Builder = (function (p, q, b) { var o = function (t) { this.ns = new b.Namespace(this, null, ""); this.ptr = this.ns; this.resolved = false; this.result = null; this.files = {}; this.importRoot = null; this.options = t || {} }; var s = o.prototype; o.isMessage = function (t) { if (typeof t.name !== "string") { return false } if (typeof t.values !== "undefined" || typeof t.rpc !== "undefined") { return false } return true }; o.isMessageField = function (t) { if (typeof t.rule !== "string" || typeof t.name !== "string" || typeof t.type !== "string" || typeof t.id === "undefined") { return false } return true }; o.isEnum = function (t) { if (typeof t.name !== "string") { return false } if (typeof t.values === "undefined" || !Array.isArray(t.values) || t.values.length === 0) { return false } return true }; o.isService = function (t) { if (typeof t.name !== "string" || typeof t.rpc !== "object" || !t.rpc) { return false } return true }; o.isExtend = function (t) { if (typeof t.ref !== "string") { return false } return true }; s.reset = function () { this.ptr = this.ns; return this }; s.define = function (t) { if (typeof t !== "string" || !q.TYPEREF.test(t)) { throw Error("illegal namespace: " + t) } t.split(".").forEach(function (u) { var v = this.ptr.getChild(u); if (v === null) { this.ptr.addChild(v = new b.Namespace(this, this.ptr, u)) } this.ptr = v }, this); return this }; s.create = function (t) { if (!t) { return this } if (!Array.isArray(t)) { t = [t] } else { if (t.length === 0) { return this } t = t.slice() } var u = [t]; while (u.length > 0) { t = u.pop(); if (!Array.isArray(t)) { throw Error("not a valid namespace: " + JSON.stringify(t)) } while (t.length > 0) { var w = t.shift(); if (o.isMessage(w)) { var v = new b.Message(this, this.ptr, w.name, w.options, w.isGroup, w.syntax); var x = {}; if (w.oneofs) { Object.keys(w.oneofs).forEach(function (z) { v.addChild(x[z] = new b.Message.OneOf(this, v, z)) }, this) } if (w.fields) { w.fields.forEach(function (A) { if (v.getChild(A.id | 0) !== null) { throw Error("duplicate or invalid field id in " + v.name + ": " + A.id) } if (A.options && typeof A.options !== "object") { throw Error("illegal field options in " + v.name + "#" + A.name) } var z = null; if (typeof A.oneof === "string" && !(z = x[A.oneof])) { throw Error("illegal oneof in " + v.name + "#" + A.name + ": " + A.oneof) } A = new b.Message.Field(this, v, A.rule, A.keytype, A.type, A.name, A.id, A.options, z, w.syntax); if (z) { z.fields.push(A) } v.addChild(A) }, this) } var y = []; if (w.enums) { w.enums.forEach(function (z) { y.push(z) }) } if (w.messages) { w.messages.forEach(function (z) { y.push(z) }) } if (w.services) { w.services.forEach(function (z) { y.push(z) }) } if (w.extensions) { if (typeof w.extensions[0] === "number") { v.extensions = [w.extensions] } else { v.extensions = w.extensions } } this.ptr.addChild(v); if (y.length > 0) { u.push(t); t = y; y = null; this.ptr = v; v = null; continue } y = null } else { if (o.isEnum(w)) { v = new b.Enum(this, this.ptr, w.name, w.options, w.syntax); w.values.forEach(function (z) { v.addChild(new b.Enum.Value(this, v, z.name, z.id)) }, this); this.ptr.addChild(v) } else { if (o.isService(w)) { v = new b.Service(this, this.ptr, w.name, w.options); Object.keys(w.rpc).forEach(function (z) { var A = w.rpc[z]; v.addChild(new b.Service.RPCMethod(this, v, z, A.request, A.response, !!A.request_stream, !!A.response_stream, A.options)) }, this); this.ptr.addChild(v) } else { if (o.isExtend(w)) { v = this.ptr.resolve(w.ref, true); if (v) { w.fields.forEach(function (C) { if (v.getChild(C.id | 0) !== null) { throw Error("duplicate extended field id in " + v.name + ": " + C.id) } if (v.extensions) { var A = false; v.extensions.forEach(function (E) { if (C.id >= E[0] && C.id <= E[1]) { A = true } }); if (!A) { throw Error("illegal extended field id in " + v.name + ": " + C.id + " (not within valid ranges)") } } var D = C.name; if (this.options.convertFieldsToCamelCase) { D = p.Util.toCamelCase(D) } var z = new b.Message.ExtensionField(this, v, C.rule, C.type, this.ptr.fqn() + "." + D, C.id, C.options); var B = new b.Extension(this, this.ptr, C.name, z); z.extension = B; this.ptr.addChild(B); v.addChild(z) }, this) } else { if (!/\.?google\.protobuf\./.test(w.ref)) { throw Error("extended message " + w.ref + " is not defined") } } } else { throw Error("not a valid definition: " + JSON.stringify(w)) } } } } w = null; v = null } t = null; this.ptr = this.ptr.parent } this.resolved = false; this.result = null; return this }; function r(t) { if (t.messages) { t.messages.forEach(function (u) { u.syntax = t.syntax; r(u) }) } if (t.enums) { t.enums.forEach(function (u) { u.syntax = t.syntax }) } } s["import"] = function (D, C) { var A = "/"; if (typeof C === "string") { if (p.Util.IS_NODE) { } if (this.files[C] === true) { return this.reset() } this.files[C] = true } else { if (typeof C === "object") { var F = C.root; if (p.Util.IS_NODE) { } if (F.indexOf("\\") >= 0 || C.file.indexOf("\\") >= 0) { A = "\\" } var z = F + A + C.file; if (this.files[z] === true) { return this.reset() } this.files[z] = true } } if (D.imports && D.imports.length > 0) { var x, G = false; if (typeof C === "object") { this.importRoot = C.root; G = true; x = this.importRoot; C = C.file; if (x.indexOf("\\") >= 0 || C.indexOf("\\") >= 0) { A = "\\" } } else { if (typeof C === "string") { if (this.importRoot) { x = this.importRoot } else { if (C.indexOf("/") >= 0) { x = C.replace(/\/[^\/]*$/, ""); if (x === "") { x = "/" } } else { if (C.indexOf("\\") >= 0) { x = C.replace(/\\[^\\]*$/, ""); A = "\\" } else { x = "." } } } } else { x = null } } for (var w = 0; w < D.imports.length; w++) { if (typeof D.imports[w] === "string") { if (!x) { throw Error("cannot determine import root") } var E = D.imports[w]; if (E === "google/protobuf/descriptor.proto") { continue } E = x + A + E; if (this.files[E] === true) { continue } if (/\.proto$/i.test(E) && !p.DotProto) { E = E.replace(/\.proto$/, ".json") } var y = p.Util.fetch(E); if (y === null) { throw Error("failed to import '" + E + "' in '" + C + "': file not found") } if (/\.json$/i.test(E)) { this["import"](JSON.parse(y + ""), E) } else { this["import"](p.DotProto.Parser.parse(y), E) } } else { if (!C) { this["import"](D.imports[w]) } else { if (/\.(\w+)$/.test(C)) { this["import"](D.imports[w], C.replace(/^(.+)\.(\w+)$/, function (t, u, v) { return u + "_import" + w + "." + v })) } else { this["import"](D.imports[w], C + "_import" + w) } } } } if (G) { this.importRoot = null } } if (D["package"]) { this.define(D["package"]) } if (D.syntax) { r(D) } var B = this.ptr; if (D.options) { Object.keys(D.options).forEach(function (t) { B.options[t] = D.options[t] }) } if (D.messages) { this.create(D.messages), this.ptr = B } if (D.enums) { this.create(D.enums), this.ptr = B } if (D.services) { this.create(D.services), this.ptr = B } if (D["extends"]) { this.create(D["extends"]) } return this.reset() }; s.resolveAll = function () { var t; if (this.ptr == null || typeof this.ptr.type === "object") { return this } if (this.ptr instanceof b.Namespace) { this.ptr.children.forEach(function (u) { this.ptr = u; this.resolveAll() }, this) } else { if (this.ptr instanceof b.Message.Field) { if (!q.TYPE.test(this.ptr.type)) { if (!q.TYPEREF.test(this.ptr.type)) { throw Error("illegal type reference in " + this.ptr.toString(true) + ": " + this.ptr.type) } t = (this.ptr instanceof b.Message.ExtensionField ? this.ptr.extension.parent : this.ptr.parent).resolve(this.ptr.type, true); if (!t) { throw Error("unresolvable type reference in " + this.ptr.toString(true) + ": " + this.ptr.type) } this.ptr.resolvedType = t; if (t instanceof b.Enum) { this.ptr.type = p.TYPES["enum"]; if (this.ptr.syntax === "proto3" && t.syntax !== "proto3") { throw Error("proto3 message cannot reference proto2 enum") } } else { if (t instanceof b.Message) { this.ptr.type = t.isGroup ? p.TYPES.group : p.TYPES.message } else { throw Error("illegal type reference in " + this.ptr.toString(true) + ": " + this.ptr.type) } } } else { this.ptr.type = p.TYPES[this.ptr.type] } if (this.ptr.map) { if (!q.TYPE.test(this.ptr.keyType)) { throw Error("illegal key type for map field in " + this.ptr.toString(true) + ": " + this.ptr.keyType) } this.ptr.keyType = p.TYPES[this.ptr.keyType] } } else { if (this.ptr instanceof p.Reflect.Service.Method) { if (this.ptr instanceof p.Reflect.Service.RPCMethod) { t = this.ptr.parent.resolve(this.ptr.requestName, true); if (!t || !(t instanceof p.Reflect.Message)) { throw Error("Illegal type reference in " + this.ptr.toString(true) + ": " + this.ptr.requestName) } this.ptr.resolvedRequestType = t; t = this.ptr.parent.resolve(this.ptr.responseName, true); if (!t || !(t instanceof p.Reflect.Message)) { throw Error("Illegal type reference in " + this.ptr.toString(true) + ": " + this.ptr.responseName) } this.ptr.resolvedResponseType = t } else { throw Error("illegal service type in " + this.ptr.toString(true)) } } else { if (!(this.ptr instanceof p.Reflect.Message.OneOf) && !(this.ptr instanceof p.Reflect.Extension) && !(this.ptr instanceof p.Reflect.Enum.Value)) { throw Error("illegal object in namespace: " + typeof (this.ptr) + ": " + this.ptr) } } } } return this.reset() }; s.build = function (w) { this.reset(); if (!this.resolved) { this.resolveAll(), this.resolved = true, this.result = null } if (this.result === null) { this.result = this.ns.build() } if (!w) { return this.result } var u = typeof w === "string" ? w.split(".") : w, v = this.result; for (var t = 0; t < u.length; t++) { if (v[u[t]]) { v = v[u[t]] } else { v = null; break } } return v }; s.lookup = function (t, u) { return t ? this.ns.resolve(t, u) : this.ns }; s.toString = function () { return "Builder" }; o.Message = function () { }; o.Enum = function () { }; o.Service = function () { }; return o })(l, l.Lang, l.Reflect); l.Map = (function (q, b) { var r = function (w, x) { if (!w.map) { throw Error("field is not a map") } this.field = w; this.keyElem = new b.Element(w.keyType, null, true, w.syntax); this.valueElem = new b.Element(w.type, w.resolvedType, false, w.syntax); this.map = {}; Object.defineProperty(this, "size", { get: function () { return Object.keys(this.map).length } }); if (x) { var s = Object.keys(x); for (var t = 0; t < s.length; t++) { var u = this.keyElem.valueFromString(s[t]); var v = this.valueElem.verifyValue(x[s[t]]); this.map[this.keyElem.valueToString(u)] = { key: u, value: v } } } }; var p = r.prototype; function o(s) { var t = 0; return { next: function () { if (t < s.length) { return { done: false, value: s[t++] } } return { done: true } } } } p.clear = function () { this.map = {} }; p["delete"] = function (t) { var s = this.keyElem.valueToString(this.keyElem.verifyValue(t)); var u = s in this.map; delete this.map[s]; return u }; p.entries = function () { var u = []; var v = Object.keys(this.map); for (var t = 0, s; t < v.length; t++) { u.push([(s = this.map[v[t]]).key, s.value]) } return o(u) }; p.keys = function () { var t = []; var s = Object.keys(this.map); for (var u = 0; u < s.length; u++) { t.push(this.map[s[u]].key) } return o(t) }; p.values = function () { var u = []; var s = Object.keys(this.map); for (var t = 0; t < s.length; t++) { u.push(this.map[s[t]].value) } return o(u) }; p.forEach = function (u, t) { var v = Object.keys(this.map); for (var s = 0, w; s < v.length; s++) { u.call(t, (w = this.map[v[s]]).value, w.key, this) } }; p.set = function (u, s) { var v = this.keyElem.verifyValue(u); var t = this.valueElem.verifyValue(s); this.map[this.keyElem.valueToString(v)] = { key: v, value: t }; return this }; p.get = function (t) { var s = this.keyElem.valueToString(this.keyElem.verifyValue(t)); if (!(s in this.map)) { return undefined } return this.map[s].value }; p.has = function (t) { var s = this.keyElem.valueToString(this.keyElem.verifyValue(t)); return (s in this.map) }; return r })(l, l.Reflect); l.loadProto = function (b, o, p) { if (typeof o === "string" || (o && typeof o.file === "string" && typeof o.root === "string")) { p = o, o = undefined } return l.loadJson(l.DotProto.Parser.parse(b), o, p) }; l.protoFromString = l.loadProto; l.loadProtoFile = function (p, b, q) { if (b && typeof b === "object") { q = b, b = null } else { if (!b || typeof b !== "function") { b = null } } if (b) { return l.Util.fetch(typeof p === "string" ? p : p.root + "/" + p.file, function (s) { if (s === null) { b(Error("Failed to fetch file")); return } try { b(null, l.loadProto(s, q, p)) } catch (r) { b(r) } }) } var o = l.Util.fetch(typeof p === "object" ? p.root + "/" + p.file : p); return o === null ? null : l.loadProto(o, q, p) }; l.protoFromFile = l.loadProtoFile; l.newBuilder = function (b) { b = b || {}; if (typeof b.convertFieldsToCamelCase === "undefined") { b.convertFieldsToCamelCase = l.convertFieldsToCamelCase } if (typeof b.populateAccessors === "undefined") { b.populateAccessors = l.populateAccessors } return new l.Builder(b) }; l.loadJson = function (b, o, p) { if (typeof o === "string" || (o && typeof o.file === "string" && typeof o.root === "string")) { p = o, o = null } if (!o || typeof o !== "object") { o = l.newBuilder() } if (typeof b === "string") { b = JSON.parse(b) } o["import"](b, p); o.resolveAll(); return o }; l.loadJsonFile = function (p, b, q) { if (b && typeof b === "object") { q = b, b = null } else { if (!b || typeof b !== "function") { b = null } } if (b) { return l.Util.fetch(typeof p === "string" ? p : p.root + "/" + p.file, function (s) { if (s === null) { b(Error("Failed to fetch file")); return } try { b(null, l.loadJson(JSON.parse(s), q, p)) } catch (r) { b(r) } }) } var o = l.Util.fetch(typeof p === "object" ? p.root + "/" + p.file : p); return o === null ? null : l.loadJson(JSON.parse(o), q, p) }; var m = function (b) { var s, u, v, w, r, p, t, q = new Array(-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1); p = b.length; r = 0; t = ""; while (r < p) { do { s = q[b.charCodeAt(r++) & 255] } while (r < p && s == -1); if (s == -1) { break } do { u = q[b.charCodeAt(r++) & 255] } while (r < p && u == -1); if (u == -1) { break } t += String.fromCharCode((s << 2) | ((u & 48) >> 4)); do { v = b.charCodeAt(r++) & 255; if (v == 61) { return t } v = q[v] } while (r < p && v == -1); if (v == -1) { break } t += String.fromCharCode(((u & 15) << 4) | ((v & 60) >> 2)); do { w = b.charCodeAt(r++) & 255; if (w == 61) { return t } w = q[w] } while (r < p && w == -1); if (w == -1) { break } t += String.fromCharCode(((v & 3) << 6) | w) } return t }; var h = m("cGFja2FnZSBNb2R1bGVzOw0KbWVzc2FnZSBwcm9idWYgew0KICAgIG1lc3NhZ2UgU2V0VXNlclN0YXR1c0lucHV0DQogICAgew0KICAgICAgICBvcHRpb25hbCBpbnQzMiBzdGF0dXM9MTsNCiAgICB9DQoNCiAgICBtZXNzYWdlIFNldFVzZXJTdGF0dXNPdXRwdXQNCiAgICB7DQogICAgICAgIG9wdGlvbmFsIGludDMyIG5vdGhpbmc9MTsNCiAgICB9DQoNCiAgICBtZXNzYWdlIEdldFVzZXJTdGF0dXNJbnB1dA0KICAgIHsNCiAgICAgICAgb3B0aW9uYWwgaW50MzIgbm90aGluZz0xOw0KICAgIH0NCg0KICAgIG1lc3NhZ2UgR2V0VXNlclN0YXR1c091dHB1dA0KICAgIHsNCiAgICAgICAgb3B0aW9uYWwgc3RyaW5nIHN0YXR1cz0xOw0KICAgICAgICBvcHRpb25hbCBzdHJpbmcgc3ViVXNlcklkPTI7DQogICAgfQ0KDQogICAgbWVzc2FnZSBTdWJVc2VyU3RhdHVzSW5wdXQNCiAgICB7DQogICAgICAgIHJlcGVhdGVkIHN0cmluZyB1c2VyaWQgPTE7IA0KICAgIH0NCg0KICAgIG1lc3NhZ2UgU3ViVXNlclN0YXR1c091dHB1dA0KICAgIHsNCiAgICAgICAgb3B0aW9uYWwgaW50MzIgbm90aGluZz0xOyAgIA0KICAgIH0NCiAgICBtZXNzYWdlIFZvaXBEeW5hbWljSW5wdXQNCiAgICB7DQogICAgICAgIHJlcXVpcmVkIGludDMyICBlbmdpbmVUeXBlID0gMTsNCiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIGNoYW5uZWxOYW1lID0gMjsNCiAgICAgICAgb3B0aW9uYWwgc3RyaW5nIGNoYW5uZWxFeHRyYSA9IDM7DQogICAgfQ0KDQogICAgbWVzc2FnZSBWb2lwRHluYW1pY091dHB1dA0KICAgIHsNCiAgICAgICAgIHJlcXVpcmVkIHN0cmluZyBkeW5hbWljS2V5PTE7DQogICAgfQ0KICAgIG1lc3NhZ2UgTm90aWZ5TXNnIHsNCiAgICAgICAgcmVxdWlyZWQgaW50MzIgdHlwZSA9IDE7DQogICAgICAgIG9wdGlvbmFsIGludDY0IHRpbWUgPSAyOw0KICAgICAgICBvcHRpb25hbCBzdHJpbmcgY2hybUlkPTM7DQogICAgfQ0KICAgIG1lc3NhZ2UgU3luY1JlcXVlc3RNc2cgew0KICAgICAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZSA9IDE7DQogICAgICAgIHJlcXVpcmVkIGJvb2wgaXNwb2xsaW5nID0gMjsNCiAgICAgICAgb3B0aW9uYWwgYm9vbCBpc3dlYj0zOw0KICAgICAgICBvcHRpb25hbCBib29sIGlzUHVsbFNlbmQ9NDsNCiAgICAgICAgb3B0aW9uYWwgYm9vbCBpc0tlZXBpbmc9NTsNCiAgICAgICAgb3B0aW9uYWwgaW50NjQgc2VuZEJveFN5bmNUaW1lPTY7DQogICAgfQ0KICAgIG1lc3NhZ2UgVXBTdHJlYW1NZXNzYWdlIHsNCiAgICAgICAgcmVxdWlyZWQgaW50MzIgc2Vzc2lvbklkID0gMTsNCiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIGNsYXNzbmFtZSA9IDI7DQogICAgICAgIHJlcXVpcmVkIGJ5dGVzIGNvbnRlbnQgPSAzOw0KICAgICAgICBvcHRpb25hbCBzdHJpbmcgcHVzaFRleHQgPSA0Ow0KICAgICAgICBvcHRpb25hbCBzdHJpbmcgYXBwRGF0YSA9IDU7DQogICAgICAgIHJlcGVhdGVkIHN0cmluZyB1c2VySWQgPSA2Ow0KICAgICAgICBvcHRpb25hbCBpbnQ2NCBkZWxNc2dUaW1lID0gNzsgLy/liKDpmaTnirbmgIHnsbvlkb3ku6Tmtojmga/nmoTml7bpl7QNCiAgICAgICAgb3B0aW9uYWwgc3RyaW5nIGRlbE1zZ0lkID0gODsgIC8v5Yig6Zmk54q25oCB57G75ZG95Luk5raI5oGvIElkDQogICAgICAgIG9wdGlvbmFsIGludDMyIGNvbmZpZ0ZsYWcgPSA5OyAvL+agh+iusOS9jemFjee9ruWPguaVsO+8jOesrOS4gOS9je+8iOacgOWQjuS4gOS9je+8ieS4unZvaXBQdXNoDQogICAgfQ0KICAgIG1lc3NhZ2UgRG93blN0cmVhbU1lc3NhZ2VzIHsNCiAgICAgICAgcmVwZWF0ZWQgRG93blN0cmVhbU1lc3NhZ2UgbGlzdCA9IDE7DQogICAgICAgIHJlcXVpcmVkIGludDY0IHN5bmNUaW1lID0gMjsNCiAgICAgICAgb3B0aW9uYWwgYm9vbCBmaW5pc2hlZCA9IDM7DQogICAgfQ0KICAgIG1lc3NhZ2UgRG93blN0cmVhbU1lc3NhZ2Ugew0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgZnJvbVVzZXJJZCA9IDE7DQogICAgICAgIHJlcXVpcmVkIENoYW5uZWxUeXBlIHR5cGUgPSAyOw0KICAgICAgICBvcHRpb25hbCBzdHJpbmcgZ3JvdXBJZCA9IDM7DQogICAgICAgIHJlcXVpcmVkIHN0cmluZyBjbGFzc25hbWUgPSA0Ow0KICAgICAgICByZXF1aXJlZCBieXRlcyBjb250ZW50ID0gNTsNCiAgICAgICAgcmVxdWlyZWQgaW50NjQgZGF0YVRpbWUgPSA2Ow0KICAgICAgICByZXF1aXJlZCBpbnQ2NCBzdGF0dXMgPSA3Ow0KICAgICAgICBvcHRpb25hbCBpbnQ2NCBleHRyYSA9IDg7DQogICAgICAgIG9wdGlvbmFsIHN0cmluZyBtc2dJZCA9IDk7DQogICAgICAgIG9wdGlvbmFsIGludDMyIGRpcmVjdGlvbiA9IDEwOyANCiAgICB9DQogICAgZW51bSBDaGFubmVsVHlwZSB7DQogICAgICAgIFBFUlNPTiA9IDE7DQogICAgICAgIFBFUlNPTlMgPSAyOw0KICAgICAgICBHUk9VUCA9IDM7DQogICAgICAgIFRFTVBHUk9VUCA9IDQ7DQogICAgICAgIENVU1RPTUVSU0VSVklDRSA9IDU7DQogICAgICAgIE5PVElGWSA9IDY7DQogICAgICAgIE1DPTc7DQogICAgICAgIE1QPTg7DQogICAgfQ0KICAgIG1lc3NhZ2UgQ3JlYXRlRGlzY3Vzc2lvbklucHV0IHsNCiAgICAgICAgb3B0aW9uYWwgc3RyaW5nIG5hbWUgPSAxOw0KICAgIH0NCiAgICBtZXNzYWdlIENyZWF0ZURpc2N1c3Npb25PdXRwdXQgew0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgaWQgPSAxOw0KICAgIH0NCiAgICBtZXNzYWdlIENoYW5uZWxJbnZpdGF0aW9uSW5wdXQgew0KICAgICAgICByZXBlYXRlZCBzdHJpbmcgdXNlcnMgPSAxOw0KICAgIH0NCiAgICBtZXNzYWdlIExlYXZlQ2hhbm5lbElucHV0IHsNCiAgICAgICAgcmVxdWlyZWQgaW50MzIgbm90aGluZyA9IDE7DQogICAgfQ0KICAgIG1lc3NhZ2UgQ2hhbm5lbEV2aWN0aW9uSW5wdXQgew0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgdXNlciA9IDE7DQogICAgfQ0KICAgIG1lc3NhZ2UgUmVuYW1lQ2hhbm5lbElucHV0IHsNCiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIG5hbWUgPSAxOw0KICAgIH0NCiAgICBtZXNzYWdlIENoYW5uZWxJbmZvSW5wdXQgew0KICAgICAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTsNCiAgICB9DQogICAgbWVzc2FnZSBDaGFubmVsSW5mb091dHB1dCB7DQogICAgICAgIHJlcXVpcmVkIENoYW5uZWxUeXBlIHR5cGUgPSAxOw0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgY2hhbm5lbElkID0gMjsNCiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIGNoYW5uZWxOYW1lID0gMzsNCiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIGFkbWluVXNlcklkID0gNDsNCiAgICAgICAgcmVwZWF0ZWQgc3RyaW5nIGZpcnN0VGVuVXNlcklkcyA9IDU7DQogICAgICAgIHJlcXVpcmVkIGludDMyIG9wZW5TdGF0dXMgPSA2Ow0KICAgIH0NCiAgICBtZXNzYWdlIENoYW5uZWxJbmZvc0lucHV0IHsNCiAgICAgICAgcmVxdWlyZWQgaW50MzIgcGFnZSA9IDE7DQogICAgICAgIG9wdGlvbmFsIGludDMyIG51bWJlciA9IDI7DQogICAgfQ0KICAgIG1lc3NhZ2UgQ2hhbm5lbEluZm9zT3V0cHV0IHsNCiAgICAgICAgcmVwZWF0ZWQgQ2hhbm5lbEluZm9PdXRwdXQgY2hhbm5lbHMgPSAxOw0KICAgICAgICByZXF1aXJlZCBpbnQzMiB0b3RhbCA9IDI7DQogICAgfQ0KICAgIG1lc3NhZ2UgTWVtYmVySW5mbyB7DQogICAgICAgIHJlcXVpcmVkIHN0cmluZyB1c2VySWQgPSAxOw0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgdXNlck5hbWUgPSAyOw0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgdXNlclBvcnRyYWl0ID0gMzsNCiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIGV4dGVuc2lvbiA9IDQ7DQogICAgfQ0KICAgIG1lc3NhZ2UgR3JvdXBNZW1iZXJzSW5wdXQgew0KICAgICAgICByZXF1aXJlZCBpbnQzMiBwYWdlID0gMTsNCiAgICAgICAgb3B0aW9uYWwgaW50MzIgbnVtYmVyID0gMjsNCiAgICB9DQogICAgbWVzc2FnZSBHcm91cE1lbWJlcnNPdXRwdXQgew0KICAgICAgICByZXBlYXRlZCBNZW1iZXJJbmZvIG1lbWJlcnMgPSAxOw0KICAgICAgICByZXF1aXJlZCBpbnQzMiB0b3RhbCA9IDI7DQogICAgfQ0KICAgIG1lc3NhZ2UgR2V0VXNlckluZm9JbnB1dCB7DQogICAgICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxOw0KICAgIH0NCiAgICBtZXNzYWdlIEdldFVzZXJJbmZvT3V0cHV0IHsNCiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDE7DQogICAgICAgIHJlcXVpcmVkIHN0cmluZyB1c2VyTmFtZSA9IDI7DQogICAgICAgIHJlcXVpcmVkIHN0cmluZyB1c2VyUG9ydHJhaXQgPSAzOw0KICAgIH0NCiAgICBtZXNzYWdlIEdldFNlc3Npb25JZElucHV0IHsNCiAgICAgICAgcmVxdWlyZWQgaW50MzIgbm90aGluZyA9IDE7DQogICAgfQ0KICAgIG1lc3NhZ2UgR2V0U2Vzc2lvbklkT3V0cHV0IHsNCiAgICAgICAgcmVxdWlyZWQgaW50MzIgc2Vzc2lvbklkID0gMTsNCiAgICB9DQogICAgZW51bSBGaWxlVHlwZSB7DQogICAgICAgIGltYWdlID0gMTsNCiAgICAgICAgYXVkaW8gPSAyOw0KICAgICAgICB2aWRlbyA9IDM7DQogICAgICAgIGZpbGUgPSA0Ow0KICAgIH0NCiAgICBtZXNzYWdlIEdldFFOdXBUb2tlbklucHV0IHsNCiAgICAgICAgcmVxdWlyZWQgRmlsZVR5cGUgdHlwZSA9IDE7DQogICAgfQ0KICAgIG1lc3NhZ2UgR2V0UU5kb3dubG9hZFVybElucHV0IHsNCiAgICAgICAgcmVxdWlyZWQgRmlsZVR5cGUgdHlwZSA9IDE7DQogICAgICAgIHJlcXVpcmVkIHN0cmluZyBrZXkgPSAyOw0KICAgICAgICBvcHRpb25hbCBzdHJpbmcgIGZpbGVOYW1lID0gMzsNCiAgICB9DQogICAgbWVzc2FnZSBHZXRRTnVwVG9rZW5PdXRwdXQgew0KICAgICAgICByZXF1aXJlZCBpbnQ2NCBkZWFkbGluZSA9IDE7DQogICAgICAgIHJlcXVpcmVkIHN0cmluZyB0b2tlbiA9IDI7DQogICAgfQ0KICAgIG1lc3NhZ2UgR2V0UU5kb3dubG9hZFVybE91dHB1dCB7DQogICAgICAgIHJlcXVpcmVkIHN0cmluZyBkb3dubG9hZFVybCA9IDE7DQogICAgfQ0KICAgIG1lc3NhZ2UgQWRkMkJsYWNrTGlzdElucHV0IHsNCiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDE7DQogICAgfQ0KICAgIG1lc3NhZ2UgUmVtb3ZlRnJvbUJsYWNrTGlzdElucHV0IHsNCiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDE7DQogICAgfQ0KICAgIG1lc3NhZ2UgUXVlcnlCbGFja0xpc3RJbnB1dCB7DQogICAgICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxOw0KICAgIH0NCiAgICBtZXNzYWdlIFF1ZXJ5QmxhY2tMaXN0T3V0cHV0IHsNCiAgICAgICAgcmVwZWF0ZWQgc3RyaW5nIHVzZXJJZHMgPSAxOw0KICAgIH0NCiAgICBtZXNzYWdlIEJsYWNrTGlzdFN0YXR1c0lucHV0IHsNCiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDE7DQogICAgfQ0KICAgIG1lc3NhZ2UgQmxvY2tQdXNoSW5wdXQgew0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgYmxvY2tlZUlkID0gMTsNCiAgICB9DQogICAgbWVzc2FnZSBNb2RpZnlQZXJtaXNzaW9uSW5wdXQgew0KICAgICAgICByZXF1aXJlZCBpbnQzMiBvcGVuU3RhdHVzID0gMTsNCiAgICB9DQogICAgbWVzc2FnZSBHcm91cElucHV0IHsNCiAgICAgICAgcmVwZWF0ZWQgR3JvdXBJbmZvIGdyb3VwSW5mbyA9IDE7DQogICAgfQ0KICAgIG1lc3NhZ2UgR3JvdXBPdXRwdXQgew0KICAgICAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTsNCiAgICB9DQogICAgbWVzc2FnZSBHcm91cEluZm8gew0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgaWQgPSAxOw0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgbmFtZSA9IDI7DQogICAgfQ0KICAgIG1lc3NhZ2UgR3JvdXBIYXNoSW5wdXQgew0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgdXNlcklkID0gMTsNCiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIGdyb3VwSGFzaENvZGUgPSAyOw0KICAgIH0NCiAgICBtZXNzYWdlIEdyb3VwSGFzaE91dHB1dCB7DQogICAgICAgIHJlcXVpcmVkIEdyb3VwSGFzaFR5cGUgcmVzdWx0ID0gMTsNCiAgICB9DQogICAgZW51bSBHcm91cEhhc2hUeXBlIHsNCiAgICAgICAgZ3JvdXBfc3VjY2VzcyA9IDB4MDA7DQogICAgICAgIGdyb3VwX2ZhaWx1cmUgPSAweDAxOw0KICAgIH0NCiAgICBtZXNzYWdlIENocm1JbnB1dCB7DQogICAgICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxOw0KICAgIH0NCiAgICBtZXNzYWdlIENocm1PdXRwdXQgew0KICAgICAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTsNCiAgICB9DQogICAgbWVzc2FnZSBDaHJtUHVsbE1zZyB7DQogICAgICAgIHJlcXVpcmVkIGludDY0IHN5bmNUaW1lID0gMTsNCiAgICAgICAgcmVxdWlyZWQgaW50MzIgY291bnQgPSAyOw0KICAgIH0NCiAgICANCiAgICBtZXNzYWdlIENocm1QdWxsTXNnTmV3IA0KICAgIHsNCiAgICAgcmVxdWlyZWQgaW50MzIgY291bnQgPSAxOw0KICAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZSA9IDI7DQogICAgIG9wdGlvbmFsIHN0cmluZyBjaHJtSWQ9MzsNCiAgICB9DQogICAgDQogICAgbWVzc2FnZSBSZWxhdGlvbnNJbnB1dA0KICAgIHsNCiAgICAgICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDE7DQogICAgICAgIG9wdGlvbmFsIERvd25TdHJlYW1NZXNzYWdlIG1zZyA9MjsNCiAgICAgICAgb3B0aW9uYWwgaW50MzIgY291bnQgPSAzOw0KICAgICAgICBvcHRpb25hbCBpbnQzMiBvZmZzZXQgPSA0Ow0KICAgICAgICBvcHRpb25hbCBpbnQ2NCBzdGFydFRpbWUgPSA1Ow0KICAgICAgICBvcHRpb25hbCBpbnQ2NCBlbmRUaW1lID0gNjsNCiAgICB9DQogICAgbWVzc2FnZSBSZWxhdGlvbnNPdXRwdXQNCiAgICB7DQogICAgICAgIHJlcGVhdGVkIFJlbGF0aW9uSW5mbyBpbmZvID0gMTsNCiAgICB9DQogICAgbWVzc2FnZSBSZWxhdGlvbkluZm8NCiAgICB7DQogICAgICAgIHJlcXVpcmVkIENoYW5uZWxUeXBlIHR5cGUgPSAxOw0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgdXNlcklkID0gMjsNCiAgICAgICAgb3B0aW9uYWwgRG93blN0cmVhbU1lc3NhZ2UgbXNnID0zOw0KICAgICAgICBvcHRpb25hbCBpbnQ2NCByZWFkTXNnVGltZT0gNDsNCiAgICB9DQogICAgbWVzc2FnZSBSZWxhdGlvbkluZm9SZWFkVGltZQ0KICAgIHsNCiAgICAgICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDE7DQogICAgICAgIHJlcXVpcmVkIGludDY0IHJlYWRNc2dUaW1lPSAyOw0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgdGFyZ2V0SWQgPSAzOw0KICAgIH0NCiAgICBtZXNzYWdlIENsZWFuSGlzTXNnSW5wdXQNCiAgICB7DQogICAgICAgICByZXF1aXJlZCBzdHJpbmcgdGFyZ2V0SWQgPSAxOw0KICAgICAgICAgcmVxdWlyZWQgaW50NjQgZGF0YVRpbWUgPSAyOw0KICAgICAgICAgb3B0aW9uYWwgaW50MzIgY29udmVyc2F0aW9uVHlwZT0gMzsNCiAgICB9DQogICAgbWVzc2FnZSBIaXN0b3J5TWVzc2FnZUlucHV0DQogICAgew0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgdGFyZ2V0SWQgPSAxOw0KICAgICAgICByZXF1aXJlZCBpbnQ2NCBkYXRhVGltZSA9MjsNCiAgICAgICAgcmVxdWlyZWQgaW50MzIgc2l6ZSAgPSAzOw0KICAgIH0NCg0KICAgIG1lc3NhZ2UgSGlzdG9yeU1lc3NhZ2VzT3VwdXQNCiAgICB7DQogICAgICAgIHJlcGVhdGVkIERvd25TdHJlYW1NZXNzYWdlIGxpc3QgPSAxOw0KICAgICAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZSA9IDI7DQogICAgICAgIHJlcXVpcmVkIGludDMyIGhhc01zZyA9IDM7DQogICAgfQ0KICAgIG1lc3NhZ2UgUXVlcnlDaGF0cm9vbUluZm9JbnB1dA0KICAgIHsNCiAgICAgcmVxdWlyZWQgaW50MzIgY291bnQ9IDE7DQogICAgIG9wdGlvbmFsIGludDMyIG9yZGVyPSAyOw0KICAgIH0NCg0KICAgIG1lc3NhZ2UgUXVlcnlDaGF0cm9vbUluZm9PdXRwdXQNCiAgICB7DQogICAgIG9wdGlvbmFsIGludDMyIHVzZXJUb3RhbE51bXMgPSAxOw0KICAgICByZXBlYXRlZCBDaHJtTWVtYmVyIHVzZXJJbmZvcyA9IDI7DQogICAgfQ0KICAgIG1lc3NhZ2UgQ2hybU1lbWJlcg0KICAgIHsNCiAgICAgcmVxdWlyZWQgaW50NjQgdGltZSA9IDE7DQogICAgIHJlcXVpcmVkIHN0cmluZyBpZCA9IDI7DQogICAgfQ0KICAgIG1lc3NhZ2UgTVBGb2xsb3dJbnB1dA0KICAgIHsNCiAgICAgICAgcmVxdWlyZWQgc3RyaW5nIGlkID0gMTsNCiAgICB9DQoNCiAgICBtZXNzYWdlIE1QRm9sbG93T3V0cHV0DQogICAgew0KICAgICAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTsNCiAgICAgICAgb3B0aW9uYWwgTXBJbmZvIGluZm8gPTI7DQogICAgfQ0KDQogICAgbWVzc2FnZSBNQ0ZvbGxvd0lucHV0DQogICAgew0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgaWQgPSAxOw0KICAgIH0NCg0KICAgIG1lc3NhZ2UgTUNGb2xsb3dPdXRwdXQNCiAgICB7DQogICAgICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxOw0KICAgICAgICBvcHRpb25hbCBNcEluZm8gaW5mbyA9MjsNCiAgICB9DQoNCiAgICBtZXNzYWdlIE1wSW5mbyAgDQogICAgew0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgbXBpZD0xOw0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgbmFtZSA9IDI7DQogICAgICAgIHJlcXVpcmVkIHN0cmluZyB0eXBlID0gMzsNCiAgICAgICAgcmVxdWlyZWQgaW50NjQgdGltZT00Ow0KICAgICAgICBvcHRpb25hbCBzdHJpbmcgcG9ydHJhaXRVcmw9NTsNCiAgICAgICAgb3B0aW9uYWwgc3RyaW5nIGV4dHJhID02Ow0KICAgIH0NCg0KICAgIG1lc3NhZ2UgU2VhcmNoTXBJbnB1dA0KICAgIHsNCiAgICAgICAgcmVxdWlyZWQgaW50MzIgdHlwZT0xOw0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgaWQ9MjsNCiAgICB9DQoNCiAgICBtZXNzYWdlIFNlYXJjaE1wT3V0cHV0DQogICAgew0KICAgICAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nPTE7DQogICAgICAgIHJlcGVhdGVkIE1wSW5mbyBpbmZvID0gMjsNCiAgICB9DQoNCiAgICBtZXNzYWdlIFB1bGxNcElucHV0DQogICAgew0KICAgICAgICByZXF1aXJlZCBpbnQ2NCB0aW1lPTE7DQogICAgICAgIHJlcXVpcmVkIHN0cmluZyBtcGlkPTI7DQogICAgfQ0KDQogICAgbWVzc2FnZSBQdWxsTXBPdXRwdXQNCiAgICB7DQogICAgICAgIHJlcXVpcmVkIGludDMyIHN0YXR1cz0xOw0KICAgICAgICByZXBlYXRlZCBNcEluZm8gaW5mbyA9IDI7DQogICAgfQ0KICAgIG1lc3NhZ2UgSGlzdG9yeU1zZ0lucHV0ICANCiAgICB7DQogICAgICAgIG9wdGlvbmFsIHN0cmluZyB0YXJnZXRJZCA9IDE7DQogICAgICAgIG9wdGlvbmFsIGludDY0IHRpbWUgPSAyOw0KICAgICAgICBvcHRpb25hbCBpbnQzMiBjb3VudCAgPSAzOw0KICAgICAgICBvcHRpb25hbCBpbnQzMiBvcmRlciA9IDQ7DQogICAgfQ0KDQogICAgbWVzc2FnZSBIaXN0b3J5TXNnT3VwdXQgDQogICAgew0KICAgICAgICByZXBlYXRlZCBEb3duU3RyZWFtTWVzc2FnZSBsaXN0PTE7DQogICAgICAgIHJlcXVpcmVkIGludDY0IHN5bmNUaW1lPTI7DQogICAgICAgIHJlcXVpcmVkIGludDMyIGhhc01zZz0zOw0KICAgIH0NCiAgICBtZXNzYWdlIFJ0Y1F1ZXJ5TGlzdElucHV0ew0KICAgICAgb3B0aW9uYWwgaW50MzIgb3JkZXI9MTsNCiAgICB9DQoNCiAgICBtZXNzYWdlIFJ0Y0tleURlbGV0ZUlucHV0ew0KICAgICAgcmVwZWF0ZWQgc3RyaW5nIGtleT0xOw0KICAgIH0NCg0KICAgIG1lc3NhZ2UgUnRjVmFsdWVJbmZvew0KICAgICAgcmVxdWlyZWQgc3RyaW5nIGtleT0xOw0KICAgICAgcmVxdWlyZWQgc3RyaW5nIHZhbHVlPTI7DQogICAgfQ0KDQogICAgbWVzc2FnZSBSdGNVc2VySW5mb3sNCiAgICAgIHJlcXVpcmVkIHN0cmluZyB1c2VySWQ9MTsNCiAgICAgIHJlcGVhdGVkIFJ0Y1ZhbHVlSW5mbyB1c2VyRGF0YT0yOw0KICAgIH0NCg0KICAgIG1lc3NhZ2UgUnRjVXNlckxpc3RPdXRwdXR7DQogICAgICByZXBlYXRlZCBSdGNVc2VySW5mbyBsaXN0PTE7DQogICAgICBvcHRpb25hbCBzdHJpbmcgdG9rZW49MjsNCiAgICAgIG9wdGlvbmFsIHN0cmluZyBzZXNzaW9uSWQ9MzsNCiAgICB9DQogICAgbWVzc2FnZSBSdGNSb29tSW5mb091dHB1dHsNCiAgICAgICAgb3B0aW9uYWwgc3RyaW5nIHJvb21JZCA9IDE7DQogICAgICAgIHJlcGVhdGVkIFJ0Y1ZhbHVlSW5mbyByb29tRGF0YSA9IDI7DQogICAgICAgIG9wdGlvbmFsIGludDMyIHVzZXJDb3VudCA9IDM7DQogICAgICAgIHJlcGVhdGVkIFJ0Y1VzZXJJbmZvIGxpc3Q9NDsNCiAgICB9DQogICAgbWVzc2FnZSBSdGNJbnB1dHsNCiAgICAgIHJlcXVpcmVkIGludDMyIHJvb21UeXBlPTE7DQogICAgICBvcHRpb25hbCBpbnQzMiBicm9hZGNhc3RUeXBlPTI7DQogICAgfQ0KICAgIG1lc3NhZ2UgUnRjUXJ5SW5wdXR7IA0KICAgICAgcmVxdWlyZWQgYm9vbCBpc0ludGVyaW9yPTE7DQogICAgICByZXF1aXJlZCB0YXJnZXRUeXBlIHRhcmdldD0yOw0KICAgICAgcmVwZWF0ZWQgc3RyaW5nIGtleT0zOw0KICAgIH0NCiAgICBtZXNzYWdlIFJ0Y1FyeU91dHB1dHsNCiAgICAgIHJlcGVhdGVkIFJ0Y1ZhbHVlSW5mbyBvdXRJbmZvPTE7DQogICAgfQ0KICAgIG1lc3NhZ2UgUnRjRGVsRGF0YUlucHV0ew0KICAgICAgcmVwZWF0ZWQgc3RyaW5nIGtleT0xOw0KICAgICAgcmVxdWlyZWQgYm9vbCBpc0ludGVyaW9yPTI7DQogICAgICByZXF1aXJlZCB0YXJnZXRUeXBlIHRhcmdldD0zOw0KICAgIH0NCiAgICBtZXNzYWdlIFJ0Y0RhdGFJbnB1dHsgDQogICAgICByZXF1aXJlZCBib29sIGludGVyaW9yPTE7DQogICAgICByZXF1aXJlZCB0YXJnZXRUeXBlIHRhcmdldD0yOw0KICAgICAgcmVwZWF0ZWQgc3RyaW5nIGtleT0zOw0KICAgICAgb3B0aW9uYWwgc3RyaW5nIG9iamVjdE5hbWU9NDsNCiAgICAgIG9wdGlvbmFsIHN0cmluZyBjb250ZW50PTU7DQogICAgfQ0KICAgIG1lc3NhZ2UgUnRjU2V0RGF0YUlucHV0ew0KICAgICAgcmVxdWlyZWQgYm9vbCBpbnRlcmlvcj0xOw0KICAgICAgcmVxdWlyZWQgdGFyZ2V0VHlwZSB0YXJnZXQ9MjsNCiAgICAgIHJlcXVpcmVkIHN0cmluZyBrZXk9MzsNCiAgICAgIHJlcXVpcmVkIHN0cmluZyB2YWx1ZT00Ow0KICAgICAgb3B0aW9uYWwgc3RyaW5nIG9iamVjdE5hbWU9NTsNCiAgICAgIG9wdGlvbmFsIHN0cmluZyBjb250ZW50PTY7DQogICAgfQ0KICAgIG1lc3NhZ2UgUnRjT3V0cHV0DQogICAgew0KICAgICAgICBvcHRpb25hbCBpbnQzMiBub3RoaW5nPTE7ICAgDQogICAgfQ0KICAgIG1lc3NhZ2UgUnRjVG9rZW5PdXRwdXR7DQogICAgICByZXF1aXJlZCBzdHJpbmcgcnRjVG9rZW49MTsNCiAgICB9DQogICAgZW51bSB0YXJnZXRUeXBlIHsNCiAgICAgIFJPT00gPTEgOw0KICAgICAgUEVSU09OID0gMjsNCiAgICB9DQogICAgbWVzc2FnZSBSdGNTZXRPdXREYXRhSW5wdXR7DQogICAgICByZXF1aXJlZCB0YXJnZXRUeXBlIHRhcmdldD0xOw0KICAgICAgcmVwZWF0ZWQgUnRjVmFsdWVJbmZvIHZhbHVlSW5mbz0yOw0KICAgICAgb3B0aW9uYWwgc3RyaW5nIG9iamVjdE5hbWU9MzsNCiAgICAgIG9wdGlvbmFsIHN0cmluZyBjb250ZW50PTQ7DQogICAgfQ0KICAgIG1lc3NhZ2UgUnRjUXJ5VXNlck91dERhdGFJbnB1dHsNCiAgICAgIHJlcGVhdGVkIHN0cmluZyB1c2VySWQgPSAxOw0KICAgIH0NCiAgICBtZXNzYWdlIFJ0Y1VzZXJPdXREYXRhT3V0cHV0ew0KICAgICAgcmVwZWF0ZWQgUnRjVXNlckluZm8gdXNlciA9IDE7DQogICAgfQ0KDQoNCiAgICBtZXNzYWdlIENocm1LVkVudGl0eSB7DQogICAgICByZXF1aXJlZCBzdHJpbmcga2V5ID0gMTsNCiAgICAgIHJlcXVpcmVkIHN0cmluZyB2YWx1ZSA9IDI7DQogICAgICBvcHRpb25hbCBpbnQzMiBzdGF0dXMgPSAzOw0KICAgICAgb3B0aW9uYWwgaW50NjQgdGltZXN0YW1wID0gNDsNCiAgICAgIG9wdGlvbmFsIHN0cmluZyB1aWQgPSA1Ow0KICAgIH0NCiAgICBtZXNzYWdlIFNldENocm1LViB7DQogICAgICByZXF1aXJlZCBDaHJtS1ZFbnRpdHkgZW50cnkgPSAxOw0KICAgICAgb3B0aW9uYWwgYm9vbCBiTm90aWZ5ID0gMjsNCiAgICAgIG9wdGlvbmFsIFVwU3RyZWFtTWVzc2FnZSBub3RpZmljYXRpb24gPSAzOw0KICAgICAgb3B0aW9uYWwgQ2hhbm5lbFR5cGUgdHlwZSA9IDQ7DQogICAgfQ0KICAgIG1lc3NhZ2UgQ2hybUtWT3V0cHV0IHsNCiAgICAgIHJlcGVhdGVkIENocm1LVkVudGl0eSBlbnRyaWVzID0gMTsNCiAgICAgIG9wdGlvbmFsIGJvb2wgYkZ1bGxVcGRhdGUgPSAyOw0KICAgICAgb3B0aW9uYWwgaW50NjQgc3luY1RpbWUgPSAzOw0KICAgIH0NCiAgICBtZXNzYWdlIFF1ZXJ5Q2hybUtWIHsNCiAgICAgIHJlcXVpcmVkIGludDY0IHRpbWVzdGFtcCA9IDE7DQogICAgfQ0KICAgIG1lc3NhZ2UgRGVsZXRlQ2hybUtWIHsNCiAgICAgIHJlcXVpcmVkIENocm1LVkVudGl0eSBlbnRyeSA9IDE7DQogICAgICBvcHRpb25hbCBib29sIGJOb3RpZnkgPSAyOw0KICAgICAgb3B0aW9uYWwgVXBTdHJlYW1NZXNzYWdlIG5vdGlmaWNhdGlvbiA9IDM7DQogICAgICBvcHRpb25hbCBDaGFubmVsVHlwZSB0eXBlID0gNDsNCiAgICB9DQoNCiAgICBtZXNzYWdlIERlbGV0ZU1zZyB7DQogICAgICBvcHRpb25hbCBzdHJpbmcgbXNnSWQgPSAxOw0KICAgICAgb3B0aW9uYWwgaW50NjQgbXNnRGF0YVRpbWUgPSAyOw0KICAgICAgb3B0aW9uYWwgaW50MzIgZGlyZWN0ID0gMzsNCiAgICB9DQogICAgDQogICAgbWVzc2FnZSBEZWxldGVNc2dJbnB1dCB7DQogICAgICBvcHRpb25hbCBDaGFubmVsVHlwZSB0eXBlID0gMTsNCiAgICAgIG9wdGlvbmFsIHN0cmluZyBjb252ZXJzYXRpb25JZCA9IDI7DQogICAgICByZXBlYXRlZCBEZWxldGVNc2cgbXNncyA9IDM7DQogICAgfQ0KDQogICAgbWVzc2FnZSBEZWxldGVNc2dPdXRwdXQgew0KICAgICAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTsNCiAgICB9DQoNCiAgICBtZXNzYWdlIFB1bGxVc2VyU2V0dGluZ0lucHV0IHsNCiAgICAgICAgcmVxdWlyZWQgaW50NjQgdmVyc2lvbj0xOw0KICAgICAgICBvcHRpb25hbCBib29sIHJlc2VydmU9MjsNCiAgICB9DQogICAgbWVzc2FnZSBVc2VyU2V0dGluZ0l0ZW0gew0KICAgICAgICByZXF1aXJlZCBzdHJpbmcgdGFyZ2V0SWQ9IDE7IC8v5rKh5pyJ55qE5pe25YCZ6buY6K6k5Li6IiINCiAgICAgICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDI7IC8v5rKh5pyJ55qE5Lya5ZCO6buY6K6k5Li6MQ0KICAgICAgICByZXF1aXJlZCBzdHJpbmcga2V5ID0gNDsgLy/orr7nva7nmoRrZXkNCiAgICAgICAgcmVxdWlyZWQgYnl0ZXMgdmFsdWUgPSA1OyAvL+iuvue9rueahHZhbHVlDQogICAgICAgIHJlcXVpcmVkIGludDY0IHZlcnNpb249NjsgLy/orr7nva7nmoTniYjmnKzlj7cNCiAgICAgICAgcmVxdWlyZWQgaW50MzIgc3RhdHVzPTc7IC8v6K6+572u55qE54q25oCBIDHvvJphZGQgMu+8mnVwZGF0ZSAz77yaZGVsZXRlDQogICAgfQ0KICAgIG1lc3NhZ2UgUHVsbFVzZXJTZXR0aW5nT3V0cHV0IHsNCiAgICAgICAgcmVwZWF0ZWQgVXNlclNldHRpbmdJdGVtIGl0ZW1zID0gMTsvL+WFt+S9k+adoeebrg0KCSAgICByZXF1aXJlZCBpbnQ2NCB2ZXJzaW9uPTI7Ly/lvZPliY3orr7nva7nmoTmnIDlpKfniYjmnKzlj7cNCiAgICB9DQp9");var i=l.loadProto(h,undefined,"").build("Modules").probuf;return i})(c,d,a);return e});
  </script>
  <!-- RongIMLib -->
  <script>
    !function(a,b){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=b();else if("function"==typeof define&&(define.amd||define.cmd))define(b);else{var c=b(),d=c.RongIMClient,e=!!a.RongIMLib;if(e){var f=RongIMLib.RongIMClient||{};for(var g in f)d[g]=f[g]}a.RongIMLib=c,a.RongIMClient=d}}(window,function(){var Polling={SetUserStatusInput:function(){var a={};this.setStatus=function(b){a.status=b},this.toArrayBuffer=function(){return a}},SetUserStatusOutput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},GetUserStatusInput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},GetUserStatusOutput:function(){var a={};this.setStatus=function(b){a.status=b},this.setSubUserId=function(b){a.subUserId=b},this.toArrayBuffer=function(){return a}},VoipDynamicInput:function(){var a={};this.setEngineType=function(b){a.engineType=b},this.setChannelName=function(b){a.channelName=b},this.setChannelExtra=function(b){a.channelExtra=b},this.toArrayBuffer=function(){return a}},VoipDynamicOutput:function(){var a={};this.setDynamicKey=function(b){a.dynamicKey=b},this.toArrayBuffer=function(){return a}},SubUserStatusInput:function(){var a={};this.setUserid=function(b){a.userid=b},this.toArrayBuffer=function(){return a}},SubUserStatusOutput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},CleanHisMsgInput:function(){var a={};this.setTargetId=function(b){a.targetId=b},this.setDataTime=function(b){a.dataTime=b},this.setConversationType=function(b){a.conversationType=b},this.toArrayBuffer=function(){return a}},DeleteMsgInput:function(){var a={};this.setType=function(b){a.type=b},this.setConversationId=function(b){a.conversationId=b},this.setMsgs=function(b){a.msgs=b},this.toArrayBuffer=function(){return a}},DeleteMsg:function(){var a={};this.setMsgId=function(b){a.msgId=b},this.setMsgDataTime=function(b){a.msgDataTime=b},this.setDirect=function(b){a.direct=b},this.toArrayBuffer=function(){return a}},DeleteMsgOutput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},SearchMpInput:function(){var a={};this.setType=function(b){a.type=b},this.setId=function(b){a.id=b},this.toArrayBuffer=function(){return a}},SearchMpOutput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.setInfo=function(b){a.info=b},this.toArrayBuffer=function(){return a}},MpInfo:function(){var a={};this.setMpid=function(b){a.mpid=b},this.setName=function(b){a.name=b},this.setType=function(b){a.type=b},this.setTime=function(b){a.time=b},this.setPortraitUri=function(b){a.portraitUrl=b},this.setExtra=function(b){a.extra=b},this.toArrayBuffer=function(){return a}},PullMpInput:function(){var a={};this.setMpid=function(b){a.mpid=b},this.setTime=function(b){a.time=b},this.toArrayBuffer=function(){return a}},PullMpOutput:function(){var a={};this.setStatus=function(b){a.status=b},this.setInfo=function(b){a.info=b},this.toArrayBuffer=function(){return a}},MPFollowInput:function(){var a={};this.setId=function(b){a.id=b},this.toArrayBuffer=function(){return a}},MPFollowOutput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.setInfo=function(b){a.info=b},this.toArrayBuffer=function(){return a}},NotifyMsg:function(){var a={};this.setType=function(b){a.type=b},this.setTime=function(b){a.time=b},this.setChrmId=function(b){a.chrmId=b},this.toArrayBuffer=function(){return a}},SyncRequestMsg:function(){var a={};this.setSyncTime=function(b){a.syncTime=b||0},this.setIspolling=function(b){a.ispolling=!!b},this.setIsweb=function(b){a.isweb=!!b},this.setIsPullSend=function(b){a.isPullSend=!!b},this.setSendBoxSyncTime=function(b){a.sendBoxSyncTime=b},this.toArrayBuffer=function(){return a}},UpStreamMessage:function(){var a={};this.setSessionId=function(b){a.sessionId=b},this.setClassname=function(b){a.classname=b},this.setContent=function(b){b&&(a.content=b)},this.setPushText=function(b){a.pushText=b},this.setUserId=function(b){a.userId=b},this.setConfigFlag=function(b){a.configFlag=b},this.setAppData=function(b){a.appData=b},this.toArrayBuffer=function(){return a}},DownStreamMessages:function(){var a={};this.setList=function(b){a.list=b},this.setSyncTime=function(b){a.syncTime=b},this.setFinished=function(b){a.finished=b},this.toArrayBuffer=function(){return a}},DownStreamMessage:function(){var a={};this.setFromUserId=function(b){a.fromUserId=b},this.setType=function(b){a.type=b},this.setGroupId=function(b){a.groupId=b},this.setClassname=function(b){a.classname=b},this.setContent=function(b){b&&(a.content=b)},this.setDataTime=function(b){a.dataTime=b},this.setStatus=function(b){a.status=b},this.setMsgId=function(b){a.msgId=b},this.toArrayBuffer=function(){return a}},CreateDiscussionInput:function(){var a={};this.setName=function(b){a.name=b},this.toArrayBuffer=function(){return a}},CreateDiscussionOutput:function(){var a={};this.setId=function(b){a.id=b},this.toArrayBuffer=function(){return a}},ChannelInvitationInput:function(){var a={};this.setUsers=function(b){a.users=b},this.toArrayBuffer=function(){return a}},LeaveChannelInput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},QueryChatroomInfoInput:function(){var a={};this.setCount=function(b){a.count=b},this.setOrder=function(b){a.order=b},this.toArrayBuffer=function(){return a}},QueryChatroomInfoOutput:function(){var a={};this.setUserTotalNums=function(b){a.userTotalNums=b},this.setUserInfos=function(b){a.userInfos=b},this.toArrayBuffer=function(){return a}},ChannelEvictionInput:function(){var a={};this.setUser=function(b){a.user=b},this.toArrayBuffer=function(){return a}},RenameChannelInput:function(){var a={};this.setName=function(b){a.name=b},this.toArrayBuffer=function(){return a}},ChannelInfoInput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},ChannelInfoOutput:function(){var a={};this.setType=function(b){a.type=b},this.setChannelId=function(b){a.channelId=b},this.setChannelName=function(b){a.channelName=b},this.setAdminUserId=function(b){a.adminUserId=b},this.setFirstTenUserIds=function(b){a.firstTenUserIds=b},this.setOpenStatus=function(b){a.openStatus=b},this.toArrayBuffer=function(){return a}},ChannelInfosInput:function(){var a={};this.setPage=function(b){a.page=b},this.setNumber=function(b){a.number=b},this.toArrayBuffer=function(){return a}},ChannelInfosOutput:function(){var a={};this.setChannels=function(b){a.channels=b},this.setTotal=function(b){a.total=b},this.toArrayBuffer=function(){return a}},MemberInfo:function(){var a={};this.setUserId=function(b){a.userId=b},this.setUserName=function(b){a.userName=b},this.setUserPortrait=function(b){a.userPortrait=b},this.setExtension=function(b){a.extension=b},this.toArrayBuffer=function(){return a}},GroupMembersInput:function(){var a={};this.setPage=function(b){a.page=b},this.setNumber=function(b){a.number=b},this.toArrayBuffer=function(){return a}},GroupMembersOutput:function(){var a={};this.setMembers=function(b){a.members=b},this.setTotal=function(b){a.total=b},this.toArrayBuffer=function(){return a}},GetUserInfoInput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},GetUserInfoOutput:function(){var a={};this.setUserId=function(b){a.userId=b},this.setUserName=function(b){a.userName=b},this.setUserPortrait=function(b){a.userPortrait=b},this.toArrayBuffer=function(){return a}},GetSessionIdInput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},GetSessionIdOutput:function(){var a={};this.setSessionId=function(b){a.sessionId=b},this.toArrayBuffer=function(){return a}},GetQNupTokenInput:function(){var a={};this.setType=function(b){a.type=b},this.toArrayBuffer=function(){return a}},GetQNupTokenOutput:function(){var a={};this.setDeadline=function(b){a.deadline=b},this.setToken=function(b){a.token=b},this.toArrayBuffer=function(){return a}},GetQNdownloadUrlInput:function(){var a={};this.setType=function(b){a.type=b},this.setKey=function(b){a.key=b},this.setFileName=function(b){a.fileName=b},this.toArrayBuffer=function(){return a}},GetQNdownloadUrlOutput:function(){var a={};this.setDownloadUrl=function(b){a.downloadUrl=b},this.toArrayBuffer=function(){return a}},Add2BlackListInput:function(){var a={};this.setUserId=function(b){a.userId=b},this.toArrayBuffer=function(){return a}},RemoveFromBlackListInput:function(){var a={};this.setUserId=function(b){a.userId=b},this.toArrayBuffer=function(){return a}},QueryBlackListInput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},QueryBlackListOutput:function(){var a={};this.setUserIds=function(b){a.userIds=b},this.toArrayBuffer=function(){return a}},BlackListStatusInput:function(){var a={};this.setUserId=function(b){a.userId=b},this.toArrayBuffer=function(){return a}},BlockPushInput:function(){var a={};this.setBlockeeId=function(b){a.blockeeId=b},this.toArrayBuffer=function(){return a}},ModifyPermissionInput:function(){var a={};this.setOpenStatus=function(b){a.openStatus=b},this.toArrayBuffer=function(){return a}},GroupInput:function(){var a={};this.setGroupInfo=function(b){for(var c=0,d=[];c<b.length;c++)d.push({id:b[c].getContent().id,name:b[c].getContent().name});a.groupInfo=d},this.toArrayBuffer=function(){return a}},GroupOutput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},GroupInfo:function(){var a={};this.setId=function(b){a.id=b},this.setName=function(b){a.name=b},this.getContent=function(){return a},this.toArrayBuffer=function(){return a}},GroupHashInput:function(){var a={};this.setUserId=function(b){a.userId=b},this.setGroupHashCode=function(b){a.groupHashCode=b},this.toArrayBuffer=function(){return a}},GroupHashOutput:function(){var a={};this.setResult=function(b){a.result=b},this.toArrayBuffer=function(){return a}},ChrmInput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},ChrmOutput:function(){var a={};this.setNothing=function(b){a.nothing=b},this.toArrayBuffer=function(){return a}},ChrmPullMsg:function(){var a={};this.setSyncTime=function(b){a.syncTime=b},this.setCount=function(b){a.count=b},this.toArrayBuffer=function(){return a}},RelationsInput:function(){var a={};this.setType=function(b){a.type=b},this.setMsg=function(b){a.msg=b},this.setCount=function(b){a.count=b},this.toArrayBuffer=function(){return a}},RelationsOutput:function(){var a={};this.setInfo=function(b){a.info=b},this.toArrayBuffer=function(){return a}},RelationInfo:function(){var a={};this.setType=function(b){a.type=b},this.setUserId=function(b){a.userId=b},this.setMsg=function(b){a.msg=b},this.toArrayBuffer=function(){return a}},HistoryMessageInput:function(){var a={};this.setTargetId=function(b){a.targetId=b},this.setDataTime=function(b){a.dataTime=b},this.setSize=function(b){a.size=b},this.toArrayBuffer=function(){return a}},HistoryMessagesOuput:function(){var a={};this.setList=function(b){a.list=b},this.setSyncTime=function(b){a.syncTime=b},this.setHasMsg=function(b){a.hasMsg=b},this.toArrayBuffer=function(){return a}},HistoryMsgInput:function(){var a={};this.setTargetId=function(b){a.targetId=b},this.setTime=function(b){a.time=b},this.setCount=function(b){a.count=b},this.setOrder=function(b){a.order=b},this.toArrayBuffer=function(){return a}},HistoryMsgOuput:function(){var a={};this.setList=function(b){a.list=b},this.setSyncTime=function(b){a.syncTime=b},this.setHasMsg=function(b){a.hasMsg=b},this.toArrayBuffer=function(){return a}},RtcQueryListInput:function(){var a={};this.toArrayBuffer=function(){return a},this.setOrder=function(b){a.order=b}},RtcKeyDeleteInput:function(){var a={};this.toArrayBuffer=function(){return a},this.setKey=function(b){a.key=b}},RtcValueInfo:function(){var a={};this.toArrayBuffer=function(){return a},this.setKey=function(b){a.key=b},this.setValue=function(b){a.value=b}},RtcUserListOutput:function(){var a={};this.toArrayBuffer=function(){return a},this.setList=function(b){a.list=b},this.setToken=function(b){a.token=b}},RtcRoomInfoOutput:function(){var a={};this.toArrayBuffer=function(){return a},this.setRoomId=function(b){a.roomId=b},this.setRoomData=function(b){a.roomData=b},this.setUserCount=function(b){a.userCount=b},this.setList=function(b){a.list=b}},RtcInput:function(){var a={};this.toArrayBuffer=function(){return a},this.setRoomType=function(b){a.roomType=b},this.setBroadcastType=function(b){a.broadcastType=b}},RtcQryOutput:function(){var a={};this.toArrayBuffer=function(){return a},this.setOutInfo=function(b){a.outInfo=b}},RtcDataInput:function(){var a={};this.toArrayBuffer=function(){return a},this.setInterior=function(b){a.interior=b},this.setTarget=function(b){a.target=b},this.setKey=function(b){a.key=b},this.setObjectName=function(b){a.objectName=b},this.setContent=function(b){a.content=b}},RtcSetDataInput:function(){var a={};this.toArrayBuffer=function(){return a},this.setInterior=function(b){a.interior=b},this.setTarget=function(b){a.target=b},this.setKey=function(b){a.key=b},this.setValue=function(b){a.value=b},this.setObjectName=function(b){a.objectName=b},this.setContent=function(b){a.content=b}},RtcOutput:function(){var a={};this.toArrayBuffer=function(){return a},this.setNothing=function(b){a.nothing=b}},RtcTokenOutput:function(){var a={};this.toArrayBuffer=function(){return a},this.setRtcToken=function(b){a.rtcToken=b}},ChrmNotifyMsg:function(){var a={};this.toArrayBuffer=function(){return a},this.setType=function(b){a.type=b},this.setTime=function(b){a.time=b},this.setChrmId=function(b){a.chrmId=b}},ChrmKVEntity:function(){var a={};this.toArrayBuffer=function(){return a},this.setKey=function(b){a.key=b},this.setValue=function(b){a.value=b},this.setStatus=function(b){a.status=b},this.setTimestamp=function(b){a.timestamp=b},this.setUid=function(b){a.uid=b}},SetChrmKV:function(){var a={};this.toArrayBuffer=function(){return a},this.setEntry=function(b){a.entry=b},this.setNotification=function(b){a.notification=b.toArrayBuffer()},this.setBNotify=function(b){a.bNotify=b},this.setType=function(b){a.type=b}},ChrmKVOutput:function(){var a={};this.toArrayBuffer=function(){return a},this.setEntries=function(a){this.entries=a},this.setBFullUpdate=function(a){this.bFullUpdate=a},this.setSyncTime=function(a){this.syncTime=a}},QueryChrmKV:function(){var a={};this.toArrayBuffer=function(){return a},this.setTimestamp=function(b){a.timestamp=b}},DeleteChrmKV:function(){var a={};this.toArrayBuffer=function(){return a},this.setEntry=function(b){a.entry=b},this.setBNotify=function(b){a.bNotify=b},this.setNotification=function(b){a.notification=b.toArrayBuffer()},this.setType=function(b){a.type=b}}};for(var f in Polling)Polling[f].decode=function(b){var back={},val=JSON.parse(b)||eval("("+b+")");for(var i in val)back[i]=val[i],back["get"+i.charAt(0).toUpperCase()+i.slice(1)]=function(){return val[i]};return back};var md5=function(){"use strict";function a(a,b){var c=(65535&a)+(65535&b);return(a>>16)+(b>>16)+(c>>16)<<16|65535&c}function b(a,b){return a<<b|a>>>32-b}function c(c,d,e,f,g,h){return a(b(a(a(d,c),a(f,h)),g),e)}function d(a,b,d,e,f,g,h){return c(b&d|~b&e,a,b,f,g,h)}function e(a,b,d,e,f,g,h){return c(b&e|d&~e,a,b,f,g,h)}function f(a,b,d,e,f,g,h){return c(b^d^e,a,b,f,g,h)}function g(a,b,d,e,f,g,h){return c(d^(b|~e),a,b,f,g,h)}function h(b,c){b[c>>5]|=128<<c%32,b[14+(c+64>>>9<<4)]=c;var h,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(h=0;h<b.length;h+=16)i=m,j=n,k=o,l=p,m=d(m,n,o,p,b[h],7,-680876936),p=d(p,m,n,o,b[h+1],12,-389564586),o=d(o,p,m,n,b[h+2],17,606105819),n=d(n,o,p,m,b[h+3],22,-1044525330),m=d(m,n,o,p,b[h+4],7,-176418897),p=d(p,m,n,o,b[h+5],12,1200080426),o=d(o,p,m,n,b[h+6],17,-1473231341),n=d(n,o,p,m,b[h+7],22,-45705983),m=d(m,n,o,p,b[h+8],7,1770035416),p=d(p,m,n,o,b[h+9],12,-1958414417),o=d(o,p,m,n,b[h+10],17,-42063),n=d(n,o,p,m,b[h+11],22,-1990404162),m=d(m,n,o,p,b[h+12],7,1804603682),p=d(p,m,n,o,b[h+13],12,-40341101),o=d(o,p,m,n,b[h+14],17,-1502002290),n=d(n,o,p,m,b[h+15],22,1236535329),m=e(m,n,o,p,b[h+1],5,-165796510),p=e(p,m,n,o,b[h+6],9,-1069501632),o=e(o,p,m,n,b[h+11],14,643717713),n=e(n,o,p,m,b[h],20,-373897302),m=e(m,n,o,p,b[h+5],5,-701558691),p=e(p,m,n,o,b[h+10],9,38016083),o=e(o,p,m,n,b[h+15],14,-660478335),n=e(n,o,p,m,b[h+4],20,-405537848),m=e(m,n,o,p,b[h+9],5,568446438),p=e(p,m,n,o,b[h+14],9,-1019803690),o=e(o,p,m,n,b[h+3],14,-187363961),n=e(n,o,p,m,b[h+8],20,1163531501),m=e(m,n,o,p,b[h+13],5,-1444681467),p=e(p,m,n,o,b[h+2],9,-51403784),o=e(o,p,m,n,b[h+7],14,1735328473),n=e(n,o,p,m,b[h+12],20,-1926607734),m=f(m,n,o,p,b[h+5],4,-378558),p=f(p,m,n,o,b[h+8],11,-2022574463),o=f(o,p,m,n,b[h+11],16,1839030562),n=f(n,o,p,m,b[h+14],23,-35309556),m=f(m,n,o,p,b[h+1],4,-1530992060),p=f(p,m,n,o,b[h+4],11,1272893353),o=f(o,p,m,n,b[h+7],16,-155497632),n=f(n,o,p,m,b[h+10],23,-1094730640),m=f(m,n,o,p,b[h+13],4,681279174),p=f(p,m,n,o,b[h],11,-358537222),o=f(o,p,m,n,b[h+3],16,-722521979),n=f(n,o,p,m,b[h+6],23,76029189),m=f(m,n,o,p,b[h+9],4,-640364487),p=f(p,m,n,o,b[h+12],11,-421815835),o=f(o,p,m,n,b[h+15],16,530742520),n=f(n,o,p,m,b[h+2],23,-995338651),m=g(m,n,o,p,b[h],6,-198630844),p=g(p,m,n,o,b[h+7],10,1126891415),o=g(o,p,m,n,b[h+14],15,-1416354905),n=g(n,o,p,m,b[h+5],21,-57434055),m=g(m,n,o,p,b[h+12],6,1700485571),p=g(p,m,n,o,b[h+3],10,-1894986606),o=g(o,p,m,n,b[h+10],15,-1051523),n=g(n,o,p,m,b[h+1],21,-2054922799),m=g(m,n,o,p,b[h+8],6,1873313359),p=g(p,m,n,o,b[h+15],10,-30611744),o=g(o,p,m,n,b[h+6],15,-1560198380),n=g(n,o,p,m,b[h+13],21,1309151649),m=g(m,n,o,p,b[h+4],6,-145523070),p=g(p,m,n,o,b[h+11],10,-1120210379),o=g(o,p,m,n,b[h+2],15,718787259),n=g(n,o,p,m,b[h+9],21,-343485551),m=a(m,i),n=a(n,j),o=a(o,k),p=a(p,l);return[m,n,o,p]}function i(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function j(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function k(a){return i(h(j(a),8*a.length))}function l(a,b){var c,d,e=j(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=h(e,8*a.length)),c=0;c<16;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=h(f.concat(j(b)),512+8*b.length),i(h(g.concat(d),640))}function m(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function n(a){return unescape(encodeURIComponent(a))}function o(a){return k(n(a))}function p(a){return m(o(a))}function q(a,b){return l(n(a),n(b))}function r(a,b){return m(q(a,b))}function s(a,b,c){return b?c?q(b,a):r(b,a):c?o(a):p(a)}return s}(),RongIMLib;!function(a){!function(a){a[a.ALL=1]="ALL",a[a.PART=2]="PART"}(a.MentionedType||(a.MentionedType={}));a.MentionedType;!function(a){a[a.CUSTOMER_SERVICE=1]="CUSTOMER_SERVICE",a[a.RECALL=2]="RECALL"}(a.MethodType||(a.MethodType={}));a.MethodType;!function(a){a[a.IN_BLACK_LIST=0]="IN_BLACK_LIST",a[a.NOT_IN_BLACK_LIST=1]="NOT_IN_BLACK_LIST"}(a.BlacklistStatus||(a.BlacklistStatus={}));a.BlacklistStatus;!function(a){a[a.XHR_POLLING=0]="XHR_POLLING",a[a.WEBSOCKET=1]="WEBSOCKET",a[a.HTTP=0]="HTTP",a[a.HTTPS=1]="HTTPS"}(a.ConnectionChannel||(a.ConnectionChannel={}));a.ConnectionChannel;!function(a){a[a.ONLY_ROBOT=1]="ONLY_ROBOT",a[a.ONLY_HUMAN=2]="ONLY_HUMAN",a[a.ROBOT_FIRST=3]="ROBOT_FIRST",a[a.HUMAN_FIRST=4]="HUMAN_FIRST"}(a.CustomerType||(a.CustomerType={}));a.CustomerType;!function(a){a[a.NONE=0]="NONE",a[a.SQQUENCE=1]="SQQUENCE",a[a.REVERSE=2]="REVERSE"}(a.GetChatRoomType||(a.GetChatRoomType={}));a.GetChatRoomType;!function(a){a[a.CONNECTED=0]="CONNECTED",a[a.CONNECTING=1]="CONNECTING",a[a.DISCONNECTED=2]="DISCONNECTED",a[a.KICKED_OFFLINE_BY_OTHER_CLIENT=6]="KICKED_OFFLINE_BY_OTHER_CLIENT",a[a.WEBSOCKET_UNAVAILABLE=7]="WEBSOCKET_UNAVAILABLE",a[a.WEBSOCKET_ERROR=8]="WEBSOCKET_ERROR",a[a.NETWORK_UNAVAILABLE=3]="NETWORK_UNAVAILABLE",a[a.DOMAIN_INCORRECT=12]="DOMAIN_INCORRECT",a[a.APPKEY_IS_FAKE=20]="APPKEY_IS_FAKE",a[a.CONNECTION_CLOSED=4]="CONNECTION_CLOSED",a[a.ULTRALIMIT=1101]="ULTRALIMIT",a[a.REQUEST_NAVI=201]="REQUEST_NAVI",a[a.RESPONSE_NAVI=202]="RESPONSE_NAVI",a[a.RESPONSE_NAVI_ERROR=203]="RESPONSE_NAVI_ERROR",a[a.RESPONSE_NAVI_TIMEOUT=204]="RESPONSE_NAVI_TIMEOUT"}(a.ConnectionStatus||(a.ConnectionStatus={}));a.ConnectionStatus;!function(a){a[a.DO_NOT_DISTURB=0]="DO_NOT_DISTURB",a[a.NOTIFY=1]="NOTIFY"}(a.ConversationNotificationStatus||(a.ConversationNotificationStatus={}));a.ConversationNotificationStatus;!function(a){a[a.NONE=0]="NONE",a[a.PRIVATE=1]="PRIVATE",a[a.DISCUSSION=2]="DISCUSSION",a[a.GROUP=3]="GROUP",a[a.CHATROOM=4]="CHATROOM",a[a.CUSTOMER_SERVICE=5]="CUSTOMER_SERVICE",a[a.SYSTEM=6]="SYSTEM",a[a.APP_PUBLIC_SERVICE=7]="APP_PUBLIC_SERVICE",a[a.PUBLIC_SERVICE=8]="PUBLIC_SERVICE"}(a.ConversationType||(a.ConversationType={}));a.ConversationType;!function(a){a[a.OPENED=0]="OPENED",a[a.CLOSED=1]="CLOSED"}(a.DiscussionInviteStatus||(a.DiscussionInviteStatus={}));a.DiscussionInviteStatus;!function(a){a[a.TIMEOUT=-1]="TIMEOUT",a[a.UNKNOWN=-2]="UNKNOWN",a[a.PARAMETER_ERROR=-3]="PARAMETER_ERROR",a[a.RECALL_MESSAGE=25101]="RECALL_MESSAGE",a[a.SEND_FREQUENCY_TOO_FAST=20604]="SEND_FREQUENCY_TOO_FAST",a[a.RC_MSG_UNAUTHORIZED=20406]="RC_MSG_UNAUTHORIZED",a[a.RC_DISCUSSION_GROUP_ID_INVALID=20407]="RC_DISCUSSION_GROUP_ID_INVALID",a[a.FORBIDDEN_IN_GROUP=22408]="FORBIDDEN_IN_GROUP",a[a.NOT_IN_DISCUSSION=21406]="NOT_IN_DISCUSSION",a[a.NOT_IN_GROUP=22406]="NOT_IN_GROUP",a[a.NOT_IN_CHATROOM=23406]="NOT_IN_CHATROOM",a[a.FORBIDDEN_IN_CHATROOM=23408]="FORBIDDEN_IN_CHATROOM",a[a.RC_CHATROOM_USER_KICKED=23409]="RC_CHATROOM_USER_KICKED",a[a.RC_CHATROOM_NOT_EXIST=23410]="RC_CHATROOM_NOT_EXIST",a[a.RC_CHATROOM_IS_FULL=23411]="RC_CHATROOM_IS_FULL",a[a.RC_CHATROOM_PATAMETER_INVALID=23412]="RC_CHATROOM_PATAMETER_INVALID",a[a.CHATROOM_GET_HISTORYMSG_ERROR=23413]="CHATROOM_GET_HISTORYMSG_ERROR",a[a.CHATROOM_NOT_OPEN_HISTORYMSG_STORE=23414]="CHATROOM_NOT_OPEN_HISTORYMSG_STORE",a[a.CHATROOM_KV_EXCEED=23423]="CHATROOM_KV_EXCEED",a[a.CHATROOM_KV_OVERWRITE_INVALID=23424]="CHATROOM_KV_OVERWRITE_INVALID",a[a.CHATROOM_KV_STORE_NOT_OPEN=23426]="CHATROOM_KV_STORE_NOT_OPEN",a[a.CHATROOM_KEY_NOT_EXIST=23427]="CHATROOM_KEY_NOT_EXIST",a[a.SENSITIVE_SHIELD=21501]="SENSITIVE_SHIELD",a[a.SENSITIVE_REPLACE=21502]="SENSITIVE_REPLACE",a[a.JOIN_IN_DISCUSSION=21407]="JOIN_IN_DISCUSSION",a[a.CREATE_DISCUSSION=21408]="CREATE_DISCUSSION",a[a.INVITE_DICUSSION=21409]="INVITE_DICUSSION",a[a.GET_USERINFO_ERROR=23407]="GET_USERINFO_ERROR",a[a.REJECTED_BY_BLACKLIST=405]="REJECTED_BY_BLACKLIST",a[a.RC_NET_CHANNEL_INVALID=30001]="RC_NET_CHANNEL_INVALID",a[a.RC_NET_UNAVAILABLE=30002]="RC_NET_UNAVAILABLE",a[a.RC_MSG_RESP_TIMEOUT=30003]="RC_MSG_RESP_TIMEOUT",a[a.RC_HTTP_SEND_FAIL=30004]="RC_HTTP_SEND_FAIL",a[a.RC_HTTP_REQ_TIMEOUT=30005]="RC_HTTP_REQ_TIMEOUT",a[a.RC_HTTP_RECV_FAIL=30006]="RC_HTTP_RECV_FAIL",a[a.RC_NAVI_RESOURCE_ERROR=30007]="RC_NAVI_RESOURCE_ERROR",a[a.RC_NODE_NOT_FOUND=30008]="RC_NODE_NOT_FOUND",a[a.RC_DOMAIN_NOT_RESOLVE=30009]="RC_DOMAIN_NOT_RESOLVE",a[a.RC_SOCKET_NOT_CREATED=30010]="RC_SOCKET_NOT_CREATED",a[a.RC_SOCKET_DISCONNECTED=30011]="RC_SOCKET_DISCONNECTED",a[a.RC_PING_SEND_FAIL=30012]="RC_PING_SEND_FAIL",a[a.RC_PONG_RECV_FAIL=30013]="RC_PONG_RECV_FAIL",a[a.RC_MSG_SEND_FAIL=30014]="RC_MSG_SEND_FAIL",a[a.RC_MSG_CONTENT_EXCEED_LIMIT=30016]="RC_MSG_CONTENT_EXCEED_LIMIT",a[a.RC_CONN_ACK_TIMEOUT=31e3]="RC_CONN_ACK_TIMEOUT",a[a.RC_CONN_PROTO_VERSION_ERROR=31001]="RC_CONN_PROTO_VERSION_ERROR",a[a.RC_CONN_ID_REJECT=31002]="RC_CONN_ID_REJECT",a[a.RC_CONN_SERVER_UNAVAILABLE=31003]="RC_CONN_SERVER_UNAVAILABLE",a[a.RC_CONN_USER_OR_PASSWD_ERROR=31004]="RC_CONN_USER_OR_PASSWD_ERROR",a[a.RC_CONN_NOT_AUTHRORIZED=31005]="RC_CONN_NOT_AUTHRORIZED",a[a.RC_CONN_REDIRECTED=31006]="RC_CONN_REDIRECTED",a[a.RC_CONN_PACKAGE_NAME_INVALID=31007]="RC_CONN_PACKAGE_NAME_INVALID",a[a.RC_CONN_APP_BLOCKED_OR_DELETED=31008]="RC_CONN_APP_BLOCKED_OR_DELETED",a[a.RC_CONN_USER_BLOCKED=31009]="RC_CONN_USER_BLOCKED",a[a.RC_DISCONN_KICK=31010]="RC_DISCONN_KICK",a[a.RC_DISCONN_EXCEPTION=31011]="RC_DISCONN_EXCEPTION",a[a.RC_QUERY_ACK_NO_DATA=32001]="RC_QUERY_ACK_NO_DATA",a[a.RC_MSG_DATA_INCOMPLETE=32002]="RC_MSG_DATA_INCOMPLETE",a[a.BIZ_ERROR_CLIENT_NOT_INIT=33001]="BIZ_ERROR_CLIENT_NOT_INIT",a[a.BIZ_ERROR_DATABASE_ERROR=33002]="BIZ_ERROR_DATABASE_ERROR",a[a.BIZ_ERROR_INVALID_PARAMETER=33003]="BIZ_ERROR_INVALID_PARAMETER",a[a.BIZ_ERROR_NO_CHANNEL=33004]="BIZ_ERROR_NO_CHANNEL",a[a.BIZ_ERROR_RECONNECT_SUCCESS=33005]="BIZ_ERROR_RECONNECT_SUCCESS",a[a.BIZ_ERROR_CONNECTING=33006]="BIZ_ERROR_CONNECTING",a[a.MSG_ROAMING_SERVICE_UNAVAILABLE=33007]="MSG_ROAMING_SERVICE_UNAVAILABLE",a[a.MSG_INSERT_ERROR=33008]="MSG_INSERT_ERROR",a[a.MSG_DEL_ERROR=33009]="MSG_DEL_ERROR",a[a.CONVER_REMOVE_ERROR=34001]="CONVER_REMOVE_ERROR",a[a.CONVER_GETLIST_ERROR=34002]="CONVER_GETLIST_ERROR",a[a.CONVER_SETOP_ERROR=34003]="CONVER_SETOP_ERROR",a[a.CONVER_TOTAL_UNREAD_ERROR=34004]="CONVER_TOTAL_UNREAD_ERROR",a[a.CONVER_TYPE_UNREAD_ERROR=34005]="CONVER_TYPE_UNREAD_ERROR",a[a.CONVER_ID_TYPE_UNREAD_ERROR=34006]="CONVER_ID_TYPE_UNREAD_ERROR",a[a.CONVER_CLEAR_ERROR=34007]="CONVER_CLEAR_ERROR",a[a.CLEAR_HIS_ERROR=34010]="CLEAR_HIS_ERROR",a[a.CLEAR_HIS_TYPE_ERROR=34008]="CLEAR_HIS_TYPE_ERROR",a[a.CLEAR_HIS_TIME_ERROR=34011]="CLEAR_HIS_TIME_ERROR",a[a.CONVER_GET_ERROR=34009]="CONVER_GET_ERROR",a[a.GROUP_SYNC_ERROR=35001]="GROUP_SYNC_ERROR",a[a.GROUP_MATCH_ERROR=35002]="GROUP_MATCH_ERROR",a[a.CHATROOM_ID_ISNULL=36001]="CHATROOM_ID_ISNULL",a[a.CHARTOOM_JOIN_ERROR=36002]="CHARTOOM_JOIN_ERROR",a[a.CHATROOM_HISMESSAGE_ERROR=36003]="CHATROOM_HISMESSAGE_ERROR",a[a.CHATROOM_KV_NOT_FOUND=36004]="CHATROOM_KV_NOT_FOUND",a[a.BLACK_ADD_ERROR=37001]="BLACK_ADD_ERROR",a[a.BLACK_GETSTATUS_ERROR=37002]="BLACK_GETSTATUS_ERROR",a[a.BLACK_REMOVE_ERROR=37003]="BLACK_REMOVE_ERROR",a[a.DRAF_GET_ERROR=38001]="DRAF_GET_ERROR",a[a.DRAF_SAVE_ERROR=38002]="DRAF_SAVE_ERROR",a[a.DRAF_REMOVE_ERROR=38003]="DRAF_REMOVE_ERROR",a[a.SUBSCRIBE_ERROR=39001]="SUBSCRIBE_ERROR",a[a.QNTKN_FILETYPE_ERROR=41001]="QNTKN_FILETYPE_ERROR",a[a.QNTKN_GET_ERROR=41002]="QNTKN_GET_ERROR",a[a.COOKIE_ENABLE=51001]="COOKIE_ENABLE",a[a.GET_MESSAGE_BY_ID_ERROR=61001]="GET_MESSAGE_BY_ID_ERROR",a[a.HAVNODEVICEID=24001]="HAVNODEVICEID",a[a.DEVICEIDISHAVE=24002]="DEVICEIDISHAVE",a[a.SUCCESS=0]="SUCCESS",a[a.FEILD=24009]="FEILD",a[a.VOIPISNULL=24013]="VOIPISNULL",a[a.NOENGINETYPE=24010]="NOENGINETYPE",a[a.NULLCHANNELNAME=24011]="NULLCHANNELNAME",a[a.VOIPDYANMICERROR=24012]="VOIPDYANMICERROR",a[a.NOVOIP=24014]="NOVOIP",a[a.INTERNALERRROR=24015]="INTERNALERRROR",a[a.VOIPCLOSE=24016]="VOIPCLOSE",a[a.CLOSE_BEFORE_OPEN=51001]="CLOSE_BEFORE_OPEN",a[a.ALREADY_IN_USE=51002]="ALREADY_IN_USE",a[a.INVALID_CHANNEL_NAME=51003]="INVALID_CHANNEL_NAME",a[a.VIDEO_CONTAINER_IS_NULL=51004]="VIDEO_CONTAINER_IS_NULL",a[a.DELETE_MESSAGE_ID_IS_NULL=61001]="DELETE_MESSAGE_ID_IS_NULL",a[a.CANCEL=1]="CANCEL",a[a.REJECT=2]="REJECT",a[a.HANGUP=3]="HANGUP",a[a.BUSYLINE=4]="BUSYLINE",a[a.NO_RESPONSE=5]="NO_RESPONSE",a[a.ENGINE_UN_SUPPORTED=6]="ENGINE_UN_SUPPORTED",a[a.NETWORK_ERROR=7]="NETWORK_ERROR",a[a.REMOTE_CANCEL=11]="REMOTE_CANCEL",a[a.REMOTE_REJECT=12]="REMOTE_REJECT",a[a.REMOTE_HANGUP=13]="REMOTE_HANGUP",a[a.REMOTE_BUSYLINE=14]="REMOTE_BUSYLINE",a[a.REMOTE_NO_RESPONSE=15]="REMOTE_NO_RESPONSE",a[a.REMOTE_ENGINE_UN_SUPPORTED=16]="REMOTE_ENGINE_UN_SUPPORTED",a[a.REMOTE_NETWORK_ERROR=17]="REMOTE_NETWORK_ERROR",a[a.VOIP_NOT_AVALIABLE=18]="VOIP_NOT_AVALIABLE"}(a.ErrorCode||(a.ErrorCode={}));a.ErrorCode;!function(a){a[a.MEDIA_AUDIO=1]="MEDIA_AUDIO",a[a.MEDIA_VEDIO=2]="MEDIA_VEDIO",a[a.MEDIA_VIDEO=2]="MEDIA_VIDEO"}(a.VoIPMediaType||(a.VoIPMediaType={}));a.VoIPMediaType;!function(a){a[a.IMAGE=1]="IMAGE",a[a.AUDIO=2]="AUDIO",a[a.VIDEO=3]="VIDEO",a[a.FILE=100]="FILE"}(a.MediaType||(a.MediaType={}));a.MediaType;!function(a){a[a.SEND=1]="SEND",a[a.RECEIVE=2]="RECEIVE"}(a.MessageDirection||(a.MessageDirection={}));a.MessageDirection;!function(a){a[a.IMAGE=1]="IMAGE",a[a.AUDIO=2]="AUDIO",a[a.VIDEO=3]="VIDEO",a[a.FILE=4]="FILE"}(a.FileType||(a.FileType={}));a.FileType;!function(a){a[a.RC_REAL_TIME_LOCATION_NOT_INIT=-1]="RC_REAL_TIME_LOCATION_NOT_INIT",a[a.RC_REAL_TIME_LOCATION_SUCCESS=0]="RC_REAL_TIME_LOCATION_SUCCESS",a[a.RC_REAL_TIME_LOCATION_GPS_DISABLED=1]="RC_REAL_TIME_LOCATION_GPS_DISABLED",a[a.RC_REAL_TIME_LOCATION_CONVERSATION_NOT_SUPPORT=2]="RC_REAL_TIME_LOCATION_CONVERSATION_NOT_SUPPORT",a[a.RC_REAL_TIME_LOCATION_IS_ON_GOING=3]="RC_REAL_TIME_LOCATION_IS_ON_GOING",a[a.RC_REAL_TIME_LOCATION_EXCEED_MAX_PARTICIPANT=4]="RC_REAL_TIME_LOCATION_EXCEED_MAX_PARTICIPANT",a[a.RC_REAL_TIME_LOCATION_JOIN_FAILURE=5]="RC_REAL_TIME_LOCATION_JOIN_FAILURE",a[a.RC_REAL_TIME_LOCATION_START_FAILURE=6]="RC_REAL_TIME_LOCATION_START_FAILURE",a[a.RC_REAL_TIME_LOCATION_NETWORK_UNAVAILABLE=7]="RC_REAL_TIME_LOCATION_NETWORK_UNAVAILABLE"}(a.RealTimeLocationErrorCode||(a.RealTimeLocationErrorCode={}));a.RealTimeLocationErrorCode;!function(a){a[a.RC_REAL_TIME_LOCATION_STATUS_IDLE=0]="RC_REAL_TIME_LOCATION_STATUS_IDLE",a[a.RC_REAL_TIME_LOCATION_STATUS_INCOMING=1]="RC_REAL_TIME_LOCATION_STATUS_INCOMING",a[a.RC_REAL_TIME_LOCATION_STATUS_OUTGOING=2]="RC_REAL_TIME_LOCATION_STATUS_OUTGOING",a[a.RC_REAL_TIME_LOCATION_STATUS_CONNECTED=3]="RC_REAL_TIME_LOCATION_STATUS_CONNECTED"}(a.RealTimeLocationStatus||(a.RealTimeLocationStatus={}));a.RealTimeLocationStatus;!function(a){a[a.READ=1]="READ",a[a.LISTENED=2]="LISTENED",a[a.DOWNLOADED=4]="DOWNLOADED",a[a.RETRIEVED=8]="RETRIEVED",a[a.UNREAD=0]="UNREAD"}(a.ReceivedStatus||(a.ReceivedStatus={}));a.ReceivedStatus;!function(a){a[a.READ=1]="READ",a[a.LISTENED=2]="LISTENED",a[a.DOWNLOADED=4]="DOWNLOADED",a[a.RETRIEVED=8]="RETRIEVED",a[a.UNREAD=0]="UNREAD"}(a.ReadStatus||(a.ReadStatus={}));a.ReadStatus;!function(a){a[a.EXACT=0]="EXACT",a[a.FUZZY=1]="FUZZY"}(a.SearchType||(a.SearchType={}));a.SearchType;!function(a){a[a.SENDING=10]="SENDING",a[a.FAILED=20]="FAILED",a[a.SENT=30]="SENT",a[a.RECEIVED=40]="RECEIVED",a[a.READ=50]="READ",a[a.DESTROYED=60]="DESTROYED"}(a.SentStatus||(a.SentStatus={}));a.SentStatus;!function(a){a[a.ACCEPTED=0]="ACCEPTED",a[a.UNACCEPTABLE_PROTOCOL_VERSION=1]="UNACCEPTABLE_PROTOCOL_VERSION",a[a.IDENTIFIER_REJECTED=2]="IDENTIFIER_REJECTED",a[a.SERVER_UNAVAILABLE=3]="SERVER_UNAVAILABLE",a[a.TOKEN_INCORRECT=4]="TOKEN_INCORRECT",a[a.NOT_AUTHORIZED=5]="NOT_AUTHORIZED",a[a.REDIRECT=6]="REDIRECT",a[a.PACKAGE_ERROR=7]="PACKAGE_ERROR",a[a.APP_BLOCK_OR_DELETE=8]="APP_BLOCK_OR_DELETE",a[a.BLOCK=9]="BLOCK",a[a.TOKEN_EXPIRE=10]="TOKEN_EXPIRE",a[a.DEVICE_ERROR=11]="DEVICE_ERROR"}(a.ConnectionState||(a.ConnectionState={}));a.ConnectionState;!function(a){a[a.ROOM=1]="ROOM",a[a.PERSON=2]="PERSON"}(a.RTCAPIType||(a.RTCAPIType={}));a.RTCAPIType;!function(a){a[a.UPDATE=1]="UPDATE",a[a.DELETE=2]="DELETE"}(a.ChatroomEntityOpt||(a.ChatroomEntityOpt={}));a.ChatroomEntityOpt;!function(a){a[a.KEY=128]="KEY",a[a.VALUE=4096]="VALUE"}(a.ChatroomEntityLimit||(a.ChatroomEntityLimit={}));a.ChatroomEntityLimit}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(){}return b.getInstance=function(){if(!b._instance)throw new Error("RongIMClient is not initialized. Call .init() method first.");return b._instance},b.showError=function(a){console&&console.error&&console.error(JSON.stringify(a))},b.logger=function(a){var c=a.code,d=b.LogFactory[c]||a;d.funcName=a.funcName,d.msg=a.msg||d.msg,b._memoryStore.depend.showError&&b.showError(d)},b.logCallback=function(a,c){return{onSuccess:a.onSuccess,onError:function(d){b.logger({code:d,funcName:c}),a.onError(d)}}},b.logSendCallback=function(a,c){return{onSuccess:a.onSuccess,onError:function(d,e){b.logger({code:d,funcName:c}),a.onError(d,e)},onBefore:a.onBefore}},b.init=function(c,d,e,f){if(b.statusListeners=[],b.messageListeners=[],b._instance)return b._memoryStore.sdkInfo
;b._instance=new b,e=e||{};var g="http://",h="ws://";("object"!=typeof location||"https:"==location.protocol)&&(h="wss://",g="https://");var i=!1;"function"!=typeof WebSocket&&(i=!0);var j=function(){var a=typeof WebSocket,b="number"==typeof WebSocket.OPEN;return a&&b};"object"==typeof WebSocket&&j()&&(i=!1);var k=function(){return document.documentElement.addBehavior};a.RongUtil.supportLocalStorage()?b._storageProvider=new a.LocalStorageProvider:k()?b._storageProvider=new a.UserDataProvider:b._storageProvider=new a.MemeoryProvider;var l=b._storageProvider.getItem("serverIndex");b.serverStore.index=l||0;var m="{0}{1}",n={api:"api.cn.ronghub.com"};a.RongUtil.forEach(n,function(b,c){n[c]=a.RongUtil.stringFormat(m,[g,b])}),a.RongUtil.forEach(n,function(b,c){var d=c in e,f={path:e[c],tmpl:m,protocol:g,sub:!0};b=d?a.RongUtil.formatProtoclPath(f):b,e[c]=b});var o=e.navigaters||[];e.navi&&(o=[e.navi]),!e.navi&&a.RongUtil.isEqual(o.length,0)&&(o=["nav.cn.ronghub.com","nav2-cn.ronghub.com"]);var p={protobuf:"cdn.ronghub.com/protobuf-2.3.7.min.js"};a.RongUtil.forEach(p,function(b,c){p[c]=a.RongUtil.stringFormat(m,[g,b])}),a.RongUtil.extend(p,e);var q={isPolling:i,wsScheme:h,protocol:g,showError:!0,openMp:!0,snifferTime:2e3,naviTimeout:5e3,navigaters:o,maxNaviRetry:10,isNaviJSONP:!1,isWSPingJSONP:!1,isNotifyConversationList:!1,maxConversationCount:300,cmpUrl:""};delete e.navigaters,a.RongUtil.extend(q,e),a.RongUtil.isFunction(e.protobuf)&&(b.Protobuf=e.protobuf),b.userStatusObserver=new a.RongObserver,(new a.FeaturePatcher).patchAll();var r={token:"",callback:null,lastReadTime:new a.LimitableMap,historyMessageLimit:new a.MemoryCache,conversationList:[],appKey:c,publicServiceMap:new a.PublicServiceMap,providerType:1,deltaTime:0,filterMessages:[],isSyncRemoteConverList:!0,otherDevice:!1,custStore:{},converStore:{latestMessage:{}},connectAckTime:0,voipStategy:0,isFirstPingMsg:!0,depend:e,notification:{}};b._memoryStore=r;var s=d&&"[object Object]"==Object.prototype.toString.call(d);b._dataAccessProvider=s?d:new a.ServerDataProvider,e.appCallback=f;var t=b._dataAccessProvider.init(c,e);b._memoryStore.sdkInfo=t,s&&b._dataAccessProvider.setServerInfo({navi:location.protocol+e.navi+"/navi.xml"}),b.MessageParams={TextMessage:{objectName:"RC:TxtMsg",msgTag:new a.MessageTag(!0,!0)},ImageMessage:{objectName:"RC:ImgMsg",msgTag:new a.MessageTag(!0,!0)},DiscussionNotificationMessage:{objectName:"RC:DizNtf",msgTag:new a.MessageTag(!1,!0)},VoiceMessage:{objectName:"RC:VcMsg",msgTag:new a.MessageTag(!0,!0)},ReferenceMessage:{objectName:"RC:ReferenceMsg",msgTag:new a.MessageTag(!0,!0)},RichContentMessage:{objectName:"RC:ImgTextMsg",msgTag:new a.MessageTag(!0,!0)},FileMessage:{objectName:"RC:FileMsg",msgTag:new a.MessageTag(!0,!0)},HQVoiceMessage:{objectName:"RC:HQVCMsg",msgTag:new a.MessageTag(!0,!0)},GIFMessage:{objectName:"RC:GIFMsg",msgTag:new a.MessageTag(!0,!0)},SightMessage:{objectName:"RC:SightMsg",msgTag:new a.MessageTag(!0,!0)},HandshakeMessage:{objectName:"",msgTag:new a.MessageTag(!0,!0)},UnknownMessage:{objectName:"",msgTag:new a.MessageTag(!0,!0)},LocationMessage:{objectName:"RC:LBSMsg",msgTag:new a.MessageTag(!0,!0)},InformationNotificationMessage:{objectName:"RC:InfoNtf",msgTag:new a.MessageTag(!1,!0)},ContactNotificationMessage:{objectName:"RC:ContactNtf",msgTag:new a.MessageTag(!1,!0)},ProfileNotificationMessage:{objectName:"RC:ProfileNtf",msgTag:new a.MessageTag(!1,!0)},CommandNotificationMessage:{objectName:"RC:CmdNtf",msgTag:new a.MessageTag(!1,!0)},PublicServiceRichContentMessage:{objectName:"RC:PSImgTxtMsg",msgTag:new a.MessageTag(!0,!0)},PublicServiceMultiRichContentMessage:{objectName:"RC:PSMultiImgTxtMsg",msgTag:new a.MessageTag(!0,!0)},JrmfRedPacketMessage:{objectName:"RCJrmf:RpMsg",msgTag:new a.MessageTag(!0,!0)},JrmfRedPacketOpenedMessage:{objectName:"RCJrmf:RpOpendMsg",msgTag:new a.MessageTag(!0,!0)},GroupNotificationMessage:{objectName:"RC:GrpNtf",msgTag:new a.MessageTag(!1,!0)},CommandMessage:{objectName:"RC:CmdMsg",msgTag:new a.MessageTag(!1,!1)},TypingStatusMessage:{objectName:"RC:TypSts",msgTag:new a.MessageTag(!1,!1)},PublicServiceCommandMessage:{objectName:"RC:PSCmd",msgTag:new a.MessageTag(!1,!1)},RecallCommandMessage:{objectName:"RC:RcCmd",msgTag:new a.MessageTag(!1,!0)},SyncReadStatusMessage:{objectName:"RC:SRSMsg",msgTag:new a.MessageTag(!1,!1)},ReadReceiptRequestMessage:{objectName:"RC:RRReqMsg",msgTag:new a.MessageTag(!1,!1)},ReadReceiptResponseMessage:{objectName:"RC:RRRspMsg",msgTag:new a.MessageTag(!1,!1)},ChangeModeResponseMessage:{objectName:"RC:CsChaR",msgTag:new a.MessageTag(!1,!1)},ChangeModeMessage:{objectName:"RC:CSCha",msgTag:new a.MessageTag(!1,!1)},EvaluateMessage:{objectName:"RC:CsEva",msgTag:new a.MessageTag(!1,!1)},CustomerContact:{objectName:"RC:CsContact",msgTag:new a.MessageTag(!1,!1)},HandShakeMessage:{objectName:"RC:CsHs",msgTag:new a.MessageTag(!1,!1)},HandShakeResponseMessage:{objectName:"RC:CsHsR",msgTag:new a.MessageTag(!1,!1)},SuspendMessage:{objectName:"RC:CsSp",msgTag:new a.MessageTag(!1,!1)},TerminateMessage:{objectName:"RC:CsEnd",msgTag:new a.MessageTag(!1,!1)},CustomerStatusUpdateMessage:{objectName:"RC:CsUpdate",msgTag:new a.MessageTag(!1,!1)},ReadReceiptMessage:{objectName:"RC:ReadNtf",msgTag:new a.MessageTag(!1,!1)},RCCombineMessage:{objectName:"RC:CombineMsg",msgTag:new a.MessageTag(!0,!0)},ChrmKVNotificationMessage:{objectName:"RC:chrmKVNotiMsg",msgTag:new a.MessageTag(!1,!1)}},b.MessageParams.AcceptMessage={objectName:"RC:VCAccept",msgTag:new a.MessageTag(!1,!1)},b.MessageParams.RingingMessage={objectName:"RC:VCRinging",msgTag:new a.MessageTag(!1,!1)},b.MessageParams.SummaryMessage={objectName:"RC:VCSummary",msgTag:new a.MessageTag(!1,!1)},b.MessageParams.HungupMessage={objectName:"RC:VCHangup",msgTag:new a.MessageTag(!1,!1)},b.MessageParams.InviteMessage={objectName:"RC:VCInvite",msgTag:new a.MessageTag(!1,!1)},b.MessageParams.MediaModifyMessage={objectName:"RC:VCModifyMedia",msgTag:new a.MessageTag(!1,!1)},b.MessageParams.MemberModifyMessage={objectName:"RC:VCModifyMem",msgTag:new a.MessageTag(!1,!1)},b.MessageType={TextMessage:"TextMessage",ImageMessage:"ImageMessage",ReferenceMessage:"ReferenceMessage",DiscussionNotificationMessage:"DiscussionNotificationMessage",VoiceMessage:"VoiceMessage",RichContentMessage:"RichContentMessage",HandshakeMessage:"HandshakeMessage",UnknownMessage:"UnknownMessage",LocationMessage:"LocationMessage",InformationNotificationMessage:"InformationNotificationMessage",ContactNotificationMessage:"ContactNotificationMessage",ProfileNotificationMessage:"ProfileNotificationMessage",CommandNotificationMessage:"CommandNotificationMessage",CommandMessage:"CommandMessage",TypingStatusMessage:"TypingStatusMessage",ChangeModeResponseMessage:"ChangeModeResponseMessage",ChangeModeMessage:"ChangeModeMessage",EvaluateMessage:"EvaluateMessage",HandShakeMessage:"HandShakeMessage",HandShakeResponseMessage:"HandShakeResponseMessage",SuspendMessage:"SuspendMessage",TerminateMessage:"TerminateMessage",CustomerContact:"CustomerContact",CustomerStatusUpdateMessage:"CustomerStatusUpdateMessage",SyncReadStatusMessage:"SyncReadStatusMessage",ReadReceiptRequestMessage:"ReadReceiptRequestMessage",ReadReceiptResponseMessage:"ReadReceiptResponseMessage",FileMessage:"FileMessage",HQVoiceMessage:"HQVoiceMessage",GIFMessage:"GIFMessage",SightMessage:"SightMessage",AcceptMessage:"AcceptMessage",RingingMessage:"RingingMessage",SummaryMessage:"SummaryMessage",HungupMessage:"HungupMessage",InviteMessage:"InviteMessage",MediaModifyMessage:"MediaModifyMessage",MemberModifyMessage:"MemberModifyMessage",JrmfRedPacketMessage:"JrmfRedPacketMessage",JrmfRedPacketOpenedMessage:"JrmfRedPacketOpenedMessage",GroupNotificationMessage:"GroupNotificationMessage",PublicServiceRichContentMessage:"PublicServiceRichContentMessage",PublicServiceMultiRichContentMessage:"PublicServiceMultiRichContentMessage",PublicServiceCommandMessage:"PublicServiceCommandMessage",RecallCommandMessage:"RecallCommandMessage",ReadReceiptMessage:"ReadReceiptMessage",RCCombineMessage:"RCCombineMessage",ChrmKVNotificationMessage:"ChrmKVNotificationMessage"},b.LogFactory={"-1":{code:"-1",msg:"鏈嶅姟鍣ㄨ秴鏃�"},"-2":{code:"-2",msg:"鏈煡鍘熷洜澶辫触"},"-3":{code:"-3",msg:"鍙傛暟閿欒"},"-4":{code:"-4",msg:"鍙傛暟涓嶆纭垨灏氭湭瀹炰緥鍖�"},25101:{code:"25101",msg:"鎾ゅ洖娑堟伅鍙傛暟閿欒",desc:"璇锋鏌ユ挙鍥炴秷鎭弬鏁� https://rongcloud.github.io/websdk-demo/api-test.html"},25102:{code:"25101",msg:"鍙兘鎾ゅ洖鑷彂鍙戦€佺殑娑堟伅"},20604:{code:"20604",msg:"鍙戦€侀鐜囪繃蹇�",desc:"https://developer.rongcloud.cn/ticket/info/9Q3L6vRKd1cLS7rycA==?type=1"},20406:{code:"20406",msg:"琚瑷€"},23407:{code:"23407",msg:"鑾峰彇鐢ㄦ埛澶辫触"},20407:{code:"20407",msg:"缇ょ粍Id鏃犳晥"},22408:{code:"22408",msg:"缇ょ粍琚瑷€"},22406:{code:"22406",msg:"涓嶅湪缇ょ粍"},35001:{code:"35001",msg:"缇ょ粍鍚屾寮傚父"},35002:{code:"35002",msg:"鍖归厤缇や俊鎭紓甯�"},21406:{code:"21406",msg:"涓嶅湪璁ㄨ缁�"},21407:{code:"21407",msg:"鍔犲叆璁ㄨ澶辫触"},21408:{code:"21408",msg:"鍒涘缓璁ㄨ缁勫け璐�"},21409:{code:"21409",msg:"璁剧疆璁ㄨ缁勯個璇风姸鎬佸け璐�"},23406:{code:"23406",msg:"涓嶅湪鑱婂ぉ瀹�"},23408:{code:"23408",msg:"鑱婂ぉ瀹よ绂佽█"},23409:{code:"23409",msg:"鑱婂ぉ瀹や腑鎴愬憳琚涪鍑�"},23410:{code:"23410",msg:"鑱婂ぉ瀹や笉瀛樺湪"},23411:{code:"23411",msg:"鑱婂ぉ瀹ゆ垚鍛樺凡婊�"},23412:{code:"23412",msg:"鑾峰彇鑱婂ぉ瀹や俊鎭弬鏁版棤鏁�"},23413:{code:"23413",msg:"鑱婂ぉ瀹ゅ紓甯�"},23414:{code:"23414",msg:"娌℃湁鎵撳紑鑱婂ぉ瀹ゆ秷鎭瓨鍌�"},36001:{code:"36001",msg:"鍔犲叆鑱婂ぉ瀹d涓虹┖"},36002:{code:"36002",msg:"鍔犲叆鑱婂ぉ瀹ゅけ璐�"},36003:{code:"36003",msg:"鎷夊彇鑱婂ぉ瀹ゅ巻鍙叉秷鎭け璐�"},24001:{code:"24001",msg:"娌℃湁娉ㄥ唽DeviveId 涔熷氨鏄敤鎴锋病鏈夌櫥闄�"},24002:{code:"24002",msg:"鐢ㄦ埛宸茬粡瀛樺湪"},0:{code:"0",msg:"鎴愬姛"},24009:{code:"24009",msg:"娌℃湁瀵瑰簲鐨勭敤鎴锋垨token"},24013:{code:"24013",msg:"voip涓虹┖"},24010:{code:"24010",msg:"涓嶆敮鎸佺殑Voip寮曟搸"},24011:{code:"24011",msg:"channelName 鏄┖"},24012:{code:"24012",msg:"鐢熸垚Voipkey澶辫触"},24014:{code:"24014",msg:"娌℃湁閰嶇疆voip"},24015:{code:"24015",msg:"鏈嶅姟鍣ㄥ唴閮ㄩ敊璇�"},24016:{code:"24016",msg:"VOIP close"},30001:{code:"30001",msg:"閫氫俊杩囩▼涓紝褰撳墠Socket涓嶅瓨鍦�"},30002:{code:"30002",msg:"Socket杩炴帴涓嶅彲鐢�"},30003:{code:"30003",msg:"閫氫俊瓒呮椂"},30004:{code:"30004",msg:"瀵艰埅鎿嶄綔鏃讹紝Http璇锋眰澶辫触"},30005:{code:"30005",msg:"HTTP璇锋眰澶辫触"},30006:{code:"30006",msg:"HTTP鎺ユ敹澶辫触"},30007:{code:"30007",msg:"瀵艰埅璧勬簮閿欒"},30008:{code:"30008",msg:"娌℃湁鏈夋晥鏁版嵁"},30009:{code:"30009",msg:"涓嶅瓨鍦ㄦ湁鏁� IP 鍦板潃"},30010:{code:"30010",msg:"鍒涘缓 Socket 澶辫触"},30011:{code:"30011",msg:" Socket 琚柇寮€"},30012:{code:"30012",msg:"PING 鎿嶄綔澶辫触"},30013:{code:"30013",msg:"PING 瓒呮椂"},30014:{code:"30014",msg:"娑堟伅鍙戦€佸け璐�"},30016:{code:"30016",msg:"娑堟伅澶у皬瓒呴檺锛屾渶澶� 128 KB"},31000:{code:"31000",msg:"鍋� connect 杩炴帴鏃讹紝鏀跺埌鐨� ACK 瓒呮椂"},31001:{code:"31001",msg:"鍙傛暟閿欒"},31002:{code:"31002",msg:"鍙傛暟閿欒锛孉pp Id 閿欒"},31003:{code:"31003",msg:"鏈嶅姟鍣ㄤ笉鍙敤"},31004:{code:"31004",msg:"Token 閿欒"},31005:{code:"31005",msg:"App Id 涓� Token 涓嶅尮閰�"},31006:{code:"31006",msg:"閲嶅畾鍚戯紝鍦板潃閿欒"},31007:{code:"31007",msg:"NAME 涓庡悗鍙版敞鍐屼俊鎭笉涓€鑷�"},31008:{code:"31008",msg:"APP 琚睆钄姐€佸垹闄ゆ垨涓嶅瓨鍦�"},31009:{code:"31009",msg:"鐢ㄦ埛琚睆钄�"},31010:{code:"31010",msg:"Disconnect锛岀敱鏈嶅姟鍣ㄨ繑鍥烇紝姣斿鐢ㄦ埛浜掕涪"},31011:{code:"31011",msg:"Disconnect锛岀敱鏈嶅姟鍣ㄨ繑鍥烇紝姣斿鐢ㄦ埛浜掕涪"},32001:{code:"32001",msg:"鍗忚灞傚唴閮ㄩ敊璇€俼uery锛屼笂浼犱笅杞借繃绋嬩腑鏁版嵁閿欒"},32002:{code:"32002",msg:"鍗忚灞傚唴閮ㄩ敊璇�"},33001:{code:"33001",msg:"鏈皟鐢� init 鍒濆鍖栧嚱鏁�"},33002:{code:"33002",msg:"鏁版嵁搴撳垵濮嬪寲澶辫触"},33003:{code:"33003",msg:"浼犲叆鍙傛暟鏃犳晥"},33004:{code:"33004",msg:"閫氶亾鏃犳晥"},33005:{code:"33005",msg:"閲嶆柊杩炴帴鎴愬姛"},33006:{code:"33006",msg:"杩炴帴涓紝鍐嶈皟鐢� connect 琚嫆缁�"},33007:{code:"33007",msg:"娑堟伅婕父鏈嶅姟鏈紑閫�"},33008:{code:"33008",msg:"娑堟伅娣诲姞澶辫触"},33009:{code:"33009",msg:"娑堟伅鍒犻櫎澶辫触"},34001:{code:"34001",msg:"鍒犻櫎浼氳瘽澶辫触"},34002:{code:"34002",msg:"鎷夊彇鍘嗗彶娑堟伅澶辫触"},34003:{code:"34003",msg:"浼氳瘽鎸囧畾寮傚父"},34004:{code:"34004",msg:"鑾峰彇浼氳瘽鏈娑堟伅鎬绘暟澶辫触"},34005:{code:"34005",msg:"鑾峰彇鎸囧畾浼氳瘽绫诲瀷鏈娑堟伅鏁板紓甯�"},34006:{code:"34006",msg:"鑾峰彇鎸囧畾鐢ㄦ埛ID&浼氳瘽绫诲瀷鏈娑堟伅鏁板紓甯�"},34007:{code:"34007",msg:"娓呴櫎浼氳瘽娑堟伅寮傚父"},34008:{code:"34008",msg:"鑾峰彇浼氳瘽娑堟伅寮傚父"},34009:{code:"34009",msg:"娓呴櫎鍘嗗彶娑堟伅浼氳瘽绫诲瀷涓嶆纭�"},34010:{code:"34010",msg:"娓呴櫎鍘嗗彶娑堟伅澶辫触锛岃妫€鏌ヤ紶鍏ュ弬鏁�"},37001:{code:"37001",msg:"鍔犲叆榛戝悕鍗曞紓甯�"},37002:{code:"37002",msg:"鑾峰緱鎸囧畾浜哄憳鍐嶉粦鍚嶅崟涓殑鐘舵€佸紓甯�"},37003:{code:"37003",msg:"绉婚櫎榛戝悕鍗曞紓甯�"},405:{code:"405",msg:"鍦ㄩ粦鍚嶅崟涓�"},38001:{code:"38001",msg:"鑾峰彇鑽夌ǹ澶辫触"},38002:{code:"38002",msg:"淇濆瓨鑽夌ǹ澶辫触"},38003:{code:"38003",msg:"鍒犻櫎鑽夌ǹ澶辫触"},39001:{code:"39001",msg:"鍏虫敞鍏紬鍙峰け璐�"},41001:{code:"41001",msg:"鏂囦欢绫诲瀷閿欒"},41002:{code:"41002",msg:"鑾峰彇涓冪墰token澶辫触"},51001:{code:"51001",msg:"鏈畨瑁呮垨鏈惎鍔ㄦ彃浠�"},51002:{code:"51002",msg:"瑙嗛宸茬粡瀛樺湪"},51003:{code:"51003",msg:"鏃犳晥鐨刢hannelName"},51004:{code:"51004",msg:"瑙嗛鍐呭涓虹┖"},61001:{code:"61001",msg:"鍒犻櫎娑堟伅鏁扮粍闀垮害涓� 0"}};var u=function(c,d,e){var f=c.senderUserId,g=b.roomInfo.users[f].uris||"[]";a.RongUtil.isString(g)&&(g=JSON.parse(g));var h=JSON.parse(JSON.stringify(g));a.RongUtil.forEach(h,function(b,c){a.RongUtil.forEach(d,function(a){a.uri==b.uri&&e(b,a,g,c)})}),b.roomInfo.users[f].uris=JSON.stringify(g)},v={RTCPublishResourceMessage:function(c,d){var e=c.senderUserId,f=b.roomInfo.users[e];f||(f={},b.roomInfo.users[e]={});var g=f.uris||"[]";a.RongUtil.isString(g)&&(g=JSON.parse(g)),g=g.concat(d),b.roomInfo.users[e].uris=JSON.stringify(g)},RTCUnpublishResourceMessage:function(a,b){u(a,b,function(a,b,c,d){c.splice(d,1)})},RTCModifyResourceMessage:function(a,b){u(a,b,function(a,b){a.state=b.state})},RTCUserChangeMessage:function(c){var d=c.content,e=d.users,f={JOINED:0,LEFT:1,OFFLINE:2};a.RongUtil.forEach(e,function(a){var c=a.state,d=a.userId;switch(+c){case f.JOINED:b.roomInfo.users[d]={};break;case f.LEFT:case f.OFFLINE:delete b.roomInfo.users[d]}})}};return b.RTCInnerListener=function(a){(v[a.messageType]||function(){})(a,a.content.uris)},b.Conversation=b._dataAccessProvider.Conversation,t},b.setProtocol=function(a){b._memoryStore.depend=b._memoryStore.depend||{};var c=b.HttpProtocol,d=b.WsProtocol;a===c.http?(b._memoryStore.depend.protocol=c.http,b._memoryStore.depend.wsScheme=d.ws):(b._memoryStore.depend.protocol=c.https,b._memoryStore.depend.wsScheme=d.wss)},b.getProtocol=function(){b._memoryStore.depend=b._memoryStore.depend||{};var a=b._memoryStore.depend,c=a.protocol,d=a.wsScheme;return c&&d||(c=b.HttpProtocol.https,d=b.WsProtocol.wss),{protocol:c,wsScheme:d}},b.initApp=function(a,c){b.init(a.appkey,a.dataAccessProvider,a.opts,function(){var a=b._instance;c(null,a)})},b.connect=function(c,d,e,f){if(a.CheckParam.getInstance().check(["string","object","string|null|object|global|undefined","object|null|global|undefined"],"connect",!0,arguments),a.IMHandler.isIncludeNavi(c)){var g=b._memoryStore.depend.protocol,h=b._memoryStore.depend.navigaters,i=a.IMHandler.getNavsByToken(c,g);c=a.IMHandler.getToken(c),b._memoryStore.depend.navigaters=a.RongUtil.concat(i,h,!0)}var j={onSuccess:d.onSuccess,onTokenIncorrect:d.onTokenIncorrect,onError:function(a){b.logger({code:a,funcName:"connect"}),d.onError(a)}};b._dataAccessProvider.connect(c,j,e,f)},b.reconnect=function(a,c){var d={onSuccess:a.onSuccess,onTokenIncorrect:a.onTokenIncorrect,onError:function(c){b.logger({code:c,funcName:"connect"}),a.onError(c)}};b._dataAccessProvider.reconnect(d,c)},b.registerMessageType=function(a,c,d,e,f){b._dataAccessProvider.registerMessageType(a,c,d,e,f),b.RegisterMessage[a].messageName=a,b.MessageType[a]=a,b.MessageParams[a]={objectName:c,msgTag:d}},b.prototype.registerMessageTypes=function(a){a=a||{},b._dataAccessProvider.registerMessageTypes(a)},b.setConnectionStatusListener=function(c){b._dataAccessProvider?b._dataAccessProvider.setConnectionStatusListener(c):a.RongUtil.isObject(c)&&a.RongUtil.isFunction(c.onChanged)&&b.statusListeners.push(c.onChanged)},b.statusWatch=function(c){a.RongUtil.isFunction(c)&&b.statusListeners.push(c)},b.setOnReceiveMessageListener=function(c){b._dataAccessProvider?b._dataAccessProvider.setOnReceiveMessageListener(c):a.RongUtil.isObject(c)&&a.RongUtil.isFunction(c.onReceived)&&b.messageListeners.push(c.onReceived)},b.prototype.logout=function(){b._dataAccessProvider.logout()},b.prototype.disconnect=function(){b._dataAccessProvider.disconnect()},b.prototype.startCustomService=function(c,d,e){if(c&&d){var f=new a.HandShakeMessage(e),g=this;a.RongIMClient._memoryStore.custStore.isInit=!0,b.getInstance().sendMessage(a.ConversationType.CUSTOMER_SERVICE,c,f,{onSuccess:function(a){a.isBlack?(d.onError(),g.stopCustomeService(c,{onSuccess:function(){},onError:function(){}})):d.onSuccess()},onError:function(){d.onError()},onBefore:function(){}})}},b.prototype.stopCustomeService=function(c,d){if(c&&d){var e=b._memoryStore.custStore[c];if(e){var f=new a.SuspendMessage({sid:e.sid,uid:e.uid,pid:e.pid});this.sendCustMessage(c,f,{onSuccess:function(){setTimeout(function(){d.onSuccess()})},onError:function(){setTimeout(function(){d.onError()})}})}}},b.prototype.switchToHumanMode=function(c,d){if(c&&d){var e=b._memoryStore.custStore[c];if(e){var f=new a.ChangeModeMessage({sid:e.sid,uid:e.uid,pid:e.pid});this.sendCustMessage(c,f,d)}}},b.prototype.evaluateRebotCustomService=function(c,d,e,f){if(c&&f){var g=b._memoryStore.custStore[c];if(g){var h=new a.EvaluateMessage({sid:g.sid,uid:g.uid,pid:g.pid,isRobotResolved:d,sugest:e,type:0});this.sendCustMessage(c,h,f)}}},b.prototype.evaluateHumanCustomService=function(c,d,e,f){if(c&&f){var g=b._memoryStore.custStore[c];if(g){var h=new a.EvaluateMessage({sid:g.sid,uid:g.uid,pid:g.pid,humanValue:d,sugest:e,type:1});this.sendCustMessage(c,h,f)}}},b.prototype.sendCustMessage=function(c,d,e){b.getInstance().sendMessage(a.ConversationType.CUSTOMER_SERVICE,c,d,{onSuccess:function(a){e.onSuccess()},onError:function(){e.onError()},onBefore:function(){}})},b.prototype.getCurrentConnectionStatus=function(){return b._dataAccessProvider.getCurrentConnectionStatus()},b.prototype.getConnectionChannel=function(){return a.Transportations._TransportType==a.Socket.XHR_POLLING?a.ConnectionChannel.XHR_POLLING:a.Transportations._TransportType==a.Socket.WEBSOCKET?a.ConnectionChannel.WEBSOCKET:void 0},b.prototype.getStorageProvider=function(){return 1==b._memoryStore.providerType?"ServerDataProvider":"OtherDataProvider"},b.prototype.setFilterMessages=function(a){"[object Array]"==Object.prototype.toString.call(a)&&(b._memoryStore.filterMessages=a)},b.prototype.getAgoraDynamicKey=function(a,c,d){b._dataAccessProvider.getAgoraDynamicKey(a,c,d)},b.prototype.getCurrentUserId=function(){return a.Bridge._client.userId},b.prototype.getDeltaTime=function(){return b._dataAccessProvider.getDelaTime()},b.prototype.getMessage=function(a,c){b._dataAccessProvider.getMessage(a,b.logCallback(c,"getMessage"))},b.prototype.deleteLocalMessages=function(a,c,d,e){b._dataAccessProvider.removeLocalMessage(a,c,d,b.logCallback(e,"deleteLocalMessages"))},b.prototype.updateMessage=function(a,c){b._dataAccessProvider.updateMessage(a,b.logCallback(c,"updateMessage"))},b.prototype.clearData=function(){return b._dataAccessProvider.clearData()},b.prototype.clearMessages=function(a,c,d){b._dataAccessProvider.clearMessages(a,c,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"clearMessages"}),d.onError(a)})}})},b.prototype.clearMessagesUnreadStatus=function(a,c,d){b._dataAccessProvider.updateMessages(a,c,"readStatus",null,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"clearMessagesUnreadStatus"}),d.onError(a)})}})},b.prototype.deleteMessages=function(a,c,d,e){b._dataAccessProvider.removeMessage(a,c,d,{onSuccess:function(a){setTimeout(function(){e.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"deleteMessages"}),e.onError(a)})}})},b.prototype.sendLocalMessage=function(c,d){a.CheckParam.getInstance().check(["object","object"],"sendLocalMessage",!1,arguments),b._dataAccessProvider.updateMessage(c),this.sendMessage(c.conversationType,c.targetId,c.content,b.logSendCallback(d,"sendLocalMessage"))},b.prototype.getPullSetting=function(a){b._dataAccessProvider.getPullSetting(a)},b.prototype.setOfflineMessageDuration=function(c,d){a.CheckParam.getInstance().check(["number","object"],"setOfflineMessageDuration",!0,arguments),b._dataAccessProvider.setOfflineMessageDuration(c,d)},b.prototype.sendMessage=function(c,d,e,f,g,h,i,j,k){if(a.CheckParam.getInstance().check(["number","string","object","object","undefined|object|null|global|boolean","undefined|object|null|global|string","undefined|object|null|global|string","undefined|object|null|global|number","undefined|object|null|global"],"sendMessage",!1,arguments),!a.RongUtil.isString(d))return f.onError(a.ErrorCode.PARAMETER_ERROR);b._dataAccessProvider.sendMessage(c,d,e,b.logSendCallback(f,"sendMessage"),g,h,i,j,k)},b.prototype.sendReceiptResponse=function(a,c,d){b._dataAccessProvider.sendReceiptResponse(a,c,b.logSendCallback(d,"sendReceiptResponse"))},b.prototype.sendTypingStatusMessage=function(a,c,d,e){b._dataAccessProvider.sendTypingStatusMessage(a,c,d,b.logSendCallback(e,"sendTypingStatusMessage"))},b.prototype.sendStatusMessage=function(a,b,c){throw new Error("Not implemented yet")},b.prototype.sendTextMessage=function(a,c,d,e){b._dataAccessProvider.sendTextMessage(a,c,d,b.logSendCallback(e,"sendTextMessage"))},b.prototype.sendRecallMessage=function(c,d){var e=b.logSendCallback(d,"sendRecallMessage");if(c.senderUserId!=a.Bridge._client.userId){var e=b.logSendCallback(d,"sendRecallMessage");return void e.onError(a.ErrorCode.RECALL_MESSAGE,c)}b._dataAccessProvider.sendRecallMessage(c,e)},b.prototype.insertMessage=function(a,c,d,e){b._dataAccessProvider.addMessage(a,c,d,b.logCallback(e,"insertMessage"))},b.prototype.setMessageContent=function(a,c,d){b._dataAccessProvider.setMessageContent(a,c,d)},b.prototype.setMessageSearchField=function(a,c,d){b._dataAccessProvider.setMessageSearchField(a,c,d)},b.prototype.getHistoryMessages=function(c,d,e,f,g,h,i){if(a.CheckParam.getInstance().check(["number","string|number","number|null|global|object","number","object","undefined|object|null|global|string","number|null|global|object"],"getHistoryMessages",!1,arguments),f>20)throw new Error("HistroyMessage count must be less than or equal to 20!");if(c.valueOf()<0)throw new Error("ConversationType must be greater than -1");b._dataAccessProvider.getHistoryMessages(c,d,e,f,b.logCallback(g,"getHistoryMessages"),h,i)},b.prototype.getRemoteHistoryMessages=function(c,d,e,f,g,h){a.CheckParam.getInstance().check(["number","string|number","number|null|global|object","number","object","undefined|null|global|object"],"getRemoteHistoryMessages",!1,arguments);var i={errorCode:a.ErrorCode.RC_CONN_PROTO_VERSION_ERROR,funcName:"getRemoteHistoryMessages"};return f>20?(b.logger(i),void g.onError(a.ErrorCode.RC_CONN_PROTO_VERSION_ERROR)):c.valueOf()<0?(b.logger(i),void g.onError(a.ErrorCode.RC_CONN_PROTO_VERSION_ERROR)):void b._dataAccessProvider.getRemoteHistoryMessages(c,d,e,f,b.logCallback(g,"getRemoteHistoryMessages"),h)},b.prototype.clearHistoryMessages=function(a,c){b._dataAccessProvider.clearHistoryMessages(a,c)},b.prototype.clearRemoteHistoryMessages=function(a,c){b._dataAccessProvider.clearRemoteHistoryMessages(a,b.logCallback(c,"clearRemoteHistoryMessages"))},b.prototype.deleteRemoteMessages=function(a,c,d,e){b._dataAccessProvider.deleteRemoteMessages(a,c,d,b.logCallback(e,"deleteRemoteMessages"))},b.prototype.hasRemoteUnreadMessages=function(a,c){b._dataAccessProvider.hasRemoteUnreadMessages(a,b.logCallback(c,"hasRemoteUnreadMessages"))},b.prototype.getTotalUnreadCount=function(a,c){b._dataAccessProvider.getTotalUnreadCount({onSuccess:function(b){setTimeout(function(){a.onSuccess(b)})},onError:function(c){setTimeout(function(){b.logger({code:c,funcName:"getTotalUnreadCount"}),a.onError(c)})}},c)},b.prototype.getConversationUnreadCount=function(a,c){b._dataAccessProvider.getConversationUnreadCount(a,{onSuccess:function(a){setTimeout(function(){c.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"getConversationUnreadCount"}),c.onError(a)})}})},b.prototype.getUnreadCount=function(a,c,d){b._dataAccessProvider.getUnreadCount(a,c,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"getUnreadCount"}),d.onError(a)})}})},b.prototype.setUnreadCount=function(c,d,e){a.CheckParam.getInstance().check(["number","string","number"],"setUnreadCount",!1,arguments),b._dataAccessProvider.setUnreadCount(c,d,e)},b.prototype.clearUnreadCountByTimestamp=function(a,c,d,e){b._dataAccessProvider.clearUnreadCountByTimestamp(a,c,d,b.logCallback(e,"clearUnreadCountByTimestamp"))},b.prototype.clearUnreadCount=function(a,c,d){b._dataAccessProvider.clearUnreadCount(a,c,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"clearUnreadCount"}),d.onError(a)})}})},b.prototype.clearTotalUnreadCount=function(a){b._dataAccessProvider.clearTotalUnreadCount({onSuccess:function(b){a.onSuccess(b)},onError:function(c){setTimeout(function(){b.logger({code:c,funcName:"clearTotalUnreadCount"}),a.onError(c)})}})},b.prototype.clearLocalStorage=function(a){b._storageProvider.clearItem(),a()},b.prototype.setMessageExtra=function(a,c,d){b._dataAccessProvider.setMessageExtra(a,c,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"setMessageExtra"}),d.onError(a)})}})},b.prototype.setMessageReceivedStatus=function(a,c,d){b._dataAccessProvider.setMessageReceivedStatus(a,c,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"setMessageReceivedStatus"}),d.onError(a)})}})},b.prototype.setMessageStatus=function(a,c,d,e,f){b._dataAccessProvider.setMessageStatus(a,c,d,e,b.logCallback(f,"setMessageStatus"))},b.prototype.setMessageSentStatus=function(a,c,d){b._dataAccessProvider.setMessageSentStatus(a,c,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"setMessageSentStatus"}),d.onError(a)})}})},b.prototype.clearTextMessageDraft=function(c,d){a.CheckParam.getInstance().check(["number","string|number","object"],"clearTextMessageDraft",!1,arguments);var e="darf_"+c+"_"+d;return delete b._memoryStore[e],!0},b.prototype.getTextMessageDraft=function(c,d){if(a.CheckParam.getInstance().check(["number","string|number","object"],"getTextMessageDraft",!1,arguments),""==d||c<0)throw new Error("params error : "+a.ErrorCode.DRAF_GET_ERROR);var e="darf_"+c+"_"+d;return b._memoryStore[e]},b.prototype.saveTextMessageDraft=function(c,d,e){a.CheckParam.getInstance().check(["number","string|number","string","object"],"saveTextMessageDraft",!1,arguments);var f="darf_"+c+"_"+d;return b._memoryStore[f]=e,!0},b.prototype.searchConversationByContent=function(a,c,d){b._dataAccessProvider.searchConversationByContent(a,b.logCallback(c,"searchConversationByContent"),d)},b.prototype.searchMessageByContent=function(a,c,d,e,f,g,h){b._dataAccessProvider.searchMessageByContent(a,c,d,e,f,g,b.logCallback(h,"searchMessageByContent"))},b.prototype.clearCache=function(){b._dataAccessProvider.clearCache()},b.prototype.clearConversations=function(c){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];0==d.length&&(d=[a.ConversationType.CHATROOM,a.ConversationType.CUSTOMER_SERVICE,a.ConversationType.DISCUSSION,a.ConversationType.GROUP,a.ConversationType.PRIVATE,a.ConversationType.SYSTEM,a.ConversationType.PUBLIC_SERVICE,a.ConversationType.APP_PUBLIC_SERVICE]),b._dataAccessProvider.clearConversations(d,{onSuccess:function(a){setTimeout(function(){c.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"clearConversations"}),c.onError(a)})}})},b.prototype.getConversation=function(c,d,e){a.CheckParam.getInstance().check(["number","string|number","object"],"getConversation",!1,arguments),b._dataAccessProvider.getConversation(c,d,{onSuccess:function(a){setTimeout(function(){e.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"getConversation"}),e.onError(a)})}})},b.prototype.pottingConversation=function(c){var d=this,e=!1;b._dataAccessProvider.getConversation(c.type,c.userId,{onSuccess:function(f){f?e=!0:f=new a.Conversation,f.conversationType=c.type,f.targetId=c.userId,f.latestMessage=a.MessageUtil.messageParser(c.msg),f.latestMessageId=f.latestMessage.messageId,f.objectName=f.latestMessage.objectName,f.receivedStatus=f.latestMessage.receivedStatus,f.receivedTime=f.latestMessage.receiveTime,f.sentStatus=f.latestMessage.sentStatus,f.sentTime=f.latestMessage.sentTime;var g=b._storageProvider.getItem("mentioneds_"+a.Bridge._client.userId+"_"+f.conversationType+"_"+f.targetId);if(g){var h=JSON.parse(g);f.mentionedMsg=h[c.type+"_"+c.userId]}e||(a.RongUtil.supportLocalStorage()?f.unreadMessageCount=a.UnreadCountHandler.get(c.type,c.userId):f.unreadMessageCount=0),f.conversationType==a.ConversationType.DISCUSSION&&d.getDiscussion(c.userId,{onSuccess:function(a){f.conversationTitle=a.name},onError:function(a){}}),b._dataAccessProvider.addConversation(f,{onSuccess:function(a){}})},onError:function(a){}})},b.prototype.addConversation=function(a,c){b._dataAccessProvider.addConversation(a,c)},b.prototype.sortConversationList=function(a){for(var c=[],d=0,e=a.length;d<e;d++)if(a[d])if(a[d].isTop)c.push(a[d]),a.splice(d,1);else for(var f=0;f<e-d-1;f++)if(a[f].sentTime<a[f+1].sentTime){var g=a[f];a[f]=a[f+1],a[f+1]=g}return b._memoryStore.conversationList=c.concat(a)},b.prototype.getConversationList=function(c,d,e,f){a.CheckParam.getInstance().check(["object","null|undefined|array|object|global","number|undefined|null|object|global","boolean|undefined|null|object|global"],"getConversationList",!1,arguments);b._dataAccessProvider.getConversationList({onSuccess:function(a){d||b._dataAccessProvider?setTimeout(function(){c.onSuccess(a)}):setTimeout(function(){c.onSuccess(b._memoryStore.conversationList)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"getConversationList"}),c.onError(a)})}},d,e,f)},b.prototype.getRemoteConversationList=function(c,d,e,f){a.CheckParam.getInstance().check(["object","null|array|object|global","number|undefined|null|object|global","boolean|undefined|null|object|global"],"getRemoteConversationList",!1,arguments),b._dataAccessProvider.getRemoteConversationList(b.logCallback(c,"getRemoteConversationList"),d,e,f)},b.prototype.updateConversation=function(a){return b._dataAccessProvider.updateConversation(a)},b.prototype.createConversation=function(b,c,d){a.CheckParam.getInstance().check(["number","string|number","string"],"createConversation",!1,arguments);var e=new a.Conversation;return e.targetId=c,e.conversationType=b,e.conversationTitle=d,e.latestMessage={},e.unreadMessageCount=0,e},b.prototype.removeConversation=function(c,d,e){a.CheckParam.getInstance().check(["number","string|number","object"],"removeConversation",!1,arguments),b._dataAccessProvider.removeConversation(c,d,b.logCallback(e,"removeConversation"))},b.prototype.setConversationHidden=function(c,d,e){a.CheckParam.getInstance().check(["number","string|number","boolean"],"setConversationHidden",!1,arguments),b._dataAccessProvider.setConversationHidden(c,d,e)},b.prototype.setConversationToTop=function(c,d,e,f){a.CheckParam.getInstance().check(["number","string|number","boolean","object"],"setConversationToTop",!1,arguments),b._dataAccessProvider.setConversationToTop(c,d,e,{onSuccess:function(a){setTimeout(function(){f.onSuccess(a)})},onError:function(a){setTimeout(function(){b.logger({code:a,funcName:"setConversationToTop"}),f.onError(a)})}})},b.prototype.getConversationNotificationStatus=function(a,c,d){var e={conversationType:a,targetId:c};b._dataAccessProvider.getConversationNotificationStatus(e,b.logCallback(d,"getConversationNotificationStatus"))},b.prototype.setConversationNotificationStatus=function(a,c,d,e){var f={conversationType:a,targetId:c,status:status};b._dataAccessProvider.setConversationNotificationStatus(f,b.logCallback(e,"setConversationNotificationStatus"))},b.prototype.getNotificationQuietHours=function(a){throw new Error("Not implemented yet")},b.prototype.removeNotificationQuietHours=function(a){throw new Error("Not implemented yet")},b.prototype.setNotificationQuietHours=function(a,b,c){throw new Error("Not implemented yet")},b.prototype.addMemberToDiscussion=function(c,d,e){
a.CheckParam.getInstance().check(["string","array","object"],"addMemberToDiscussion",!1,arguments),b._dataAccessProvider.addMemberToDiscussion(c,d,b.logCallback(e,"addMemberToDiscussion"))},b.prototype.createDiscussion=function(c,d,e){a.CheckParam.getInstance().check(["string","array","object"],"createDiscussion",!1,arguments),b._dataAccessProvider.createDiscussion(c,d,e)},b.prototype.getDiscussion=function(c,d){a.CheckParam.getInstance().check(["string","object"],"getDiscussion",!1,arguments),b._dataAccessProvider.getDiscussion(c,b.logCallback(d,"getDiscussion"))},b.prototype.quitDiscussion=function(c,d){a.CheckParam.getInstance().check(["string","object"],"quitDiscussion",!1,arguments),b._dataAccessProvider.quitDiscussion(c,b.logCallback(d,"quitDiscussion"))},b.prototype.removeMemberFromDiscussion=function(c,d,e){a.CheckParam.getInstance().check(["string","string","object"],"removeMemberFromDiscussion",!1,arguments),b._dataAccessProvider.removeMemberFromDiscussion(c,d,b.logCallback(e,"removeMemberFromDiscussion"))},b.prototype.setDiscussionInviteStatus=function(c,d,e){a.CheckParam.getInstance().check(["string","number","object"],"setDiscussionInviteStatus",!1,arguments),b._dataAccessProvider.setDiscussionInviteStatus(c,d,b.logCallback(e,"setDiscussionInviteStatus"))},b.prototype.setDiscussionName=function(c,d,e){a.CheckParam.getInstance().check(["string","string","object"],"setDiscussionName",!1,arguments),b._dataAccessProvider.setDiscussionName(c,d,b.logCallback(e,"setDiscussionName"))},b.prototype.joinChatRoom=function(c,d,e){if(a.CheckParam.getInstance().check(["string","number","object"],"joinChatRoom",!1,arguments),""==c)return void setTimeout(function(){var c=a.ErrorCode.CHATROOM_ID_ISNULL;b.logger({code:c,funcName:"joinChatRoom"}),e.onError(a.ErrorCode.CHATROOM_ID_ISNULL)});b._dataAccessProvider.joinChatRoom(c,d,b.logCallback(e,"joinChatRoom"))},b.prototype.setDeviceInfo=function(a){b._dataAccessProvider.setDeviceInfo(a)},b.prototype.setChatroomHisMessageTimestamp=function(c,d){a.CheckParam.getInstance().check(["string","number"],"setChatroomHisMessageTimestamp",!1,arguments),b._dataAccessProvider.setChatroomHisMessageTimestamp(c,d)},b.prototype.getChatRoomHistoryMessages=function(c,d,e,f){a.CheckParam.getInstance().check(["string","number","number","object"],"getChatRoomHistoryMessages",!1,arguments),b._dataAccessProvider.getChatRoomHistoryMessages(c,d,e,b.logCallback(f,"getChatRoomHistoryMessages"))},b.prototype.getChatRoomInfo=function(c,d,e,f){a.CheckParam.getInstance().check(["string","number","number","object"],"getChatRoomInfo",!1,arguments),b._dataAccessProvider.getChatRoomInfo(c,d,e,b.logCallback(f,"getChatRoomInfo"))},b.prototype.quitChatRoom=function(c,d){a.CheckParam.getInstance().check(["string","object"],"quitChatRoom",!1,arguments),b._dataAccessProvider.quitChatRoom(c,b.logCallback(d,"quitChatRoom"))},b.prototype.setChatroomEntry=function(c,d,e){a.CheckParam.getInstance().check(["string","object","object"],"setChatroomEntry",!1,arguments),b._dataAccessProvider.setChatroomEntry(c,d,b.logCallback(e,"setChatroomEntry"))},b.prototype.forceSetChatroomEntry=function(c,d,e){a.CheckParam.getInstance().check(["string","object","object"],"setChatroomEntry",!1,arguments),b._dataAccessProvider.forceSetChatroomEntry(c,d,b.logCallback(e,"setChatroomEntry"))},b.prototype.getChatroomEntry=function(c,d,e){a.CheckParam.getInstance().check(["string","string","object"],"getChatroomEntry",!1,arguments),b._dataAccessProvider.getChatroomEntry(c,d,b.logCallback(e,"setChatroomEntry"))},b.prototype.getAllChatroomEntries=function(c,d){a.CheckParam.getInstance().check(["string","object"],"getAllChatroomEntries",!1,arguments),b._dataAccessProvider.getAllChatroomEntries(c,b.logCallback(d,"setChatroomEntry"))},b.prototype.removeChatroomEntry=function(c,d,e){a.CheckParam.getInstance().check(["string","object","object"],"removeChatroomEntry",!1,arguments),b._dataAccessProvider.removeChatroomEntry(c,d,b.logCallback(e,"setChatroomEntry"))},b.prototype.forceRemoveChatroomEntry=function(c,d,e){a.CheckParam.getInstance().check(["string","object","object"],"removeChatroomEntry",!1,arguments),b._dataAccessProvider.forceRemoveChatroomEntry(c,d,b.logCallback(e,"setChatroomEntry"))},b.prototype.getRemotePublicServiceList=function(a,c){b._dataAccessProvider.getRemotePublicServiceList(b.logCallback(a,"getRemotePublicServiceList"),c)},b.prototype.getPublicServiceList=function(c){b._memoryStore.depend.openMp&&(a.CheckParam.getInstance().check(["object"],"getPublicServiceList",!1,arguments),this.getRemotePublicServiceList(b.logCallback(c,"getPublicServiceList")))},b.prototype.getPublicServiceProfile=function(c,d,e){b._memoryStore.depend.openMp&&(a.CheckParam.getInstance().check(["number","string|number","object"],"getPublicServiceProfile",!1,arguments),b._dataAccessProvider.getPublicServiceProfile(c,d,b.logCallback(e,"getPublicServiceProfile")))},b.prototype.pottingPublicSearchType=function(a,c){if(b._memoryStore.depend.openMp){var d=0;return 0==a?(d|=3,d|=0==c?12:48):1==a?(d|=1,d|=0==c?8:32):(d|=2,d|=0==a?4:16),d}},b.prototype.searchPublicService=function(c,d,e){if(b._memoryStore.depend.openMp){a.CheckParam.getInstance().check(["number","string","object"],"searchPublicService",!1,arguments);var f=new b.Protobuf.SearchMpInput;f.setType(this.pottingPublicSearchType(0,c)),f.setId(d),b.bridge.queryMsg(29,a.MessageUtil.ArrayForm(f.toArrayBuffer()),a.Bridge._client.userId,b.logCallback(e,"searchPublicService"),"SearchMpOutput")}},b.prototype.searchPublicServiceByType=function(c,d,e,f){if(b._memoryStore.depend.openMp){a.CheckParam.getInstance().check(["number","number","string","object"],"searchPublicServiceByType",!1,arguments);var g=c==a.ConversationType.APP_PUBLIC_SERVICE?2:1,h=new b.Protobuf.SearchMpInput;h.setType(this.pottingPublicSearchType(g,d)),h.setId(e),b.bridge.queryMsg(29,a.MessageUtil.ArrayForm(h.toArrayBuffer()),a.Bridge._client.userId,b.logCallback(f,"searchPublicServiceByType"),"SearchMpOutput")}},b.prototype.subscribePublicService=function(c,d,e){if(b._memoryStore.depend.openMp){a.CheckParam.getInstance().check(["number","string|number","object"],"subscribePublicService",!1,arguments);var f=new b.Protobuf.MPFollowInput,g=this,h=c==a.ConversationType.APP_PUBLIC_SERVICE?"mcFollow":"mpFollow";f.setId(d),b.bridge.queryMsg(h,a.MessageUtil.ArrayForm(f.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(){g.getRemotePublicServiceList({onSuccess:function(){},onError:function(){}}),e.onSuccess()},onError:function(a){var c=a;b.logger({code:c,funcName:"subscribePublicService"}),e.onError(a)}},"MPFollowOutput")}},b.prototype.unsubscribePublicService=function(c,d,e){if(b._memoryStore.depend.openMp){a.CheckParam.getInstance().check(["number","string|number","object"],"unsubscribePublicService",!1,arguments);var f=new b.Protobuf.MPFollowInput,g=c==a.ConversationType.APP_PUBLIC_SERVICE?"mcUnFollow":"mpUnFollow";f.setId(d),b.bridge.queryMsg(g,a.MessageUtil.ArrayForm(f.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(){b._memoryStore.publicServiceMap.remove(c,d),e.onSuccess()},onError:function(a){var c=a;b.logger({code:c,funcName:"unsubscribePublicService"}),e.onError(a)}},"MPFollowOutput")}},b.prototype.addToBlacklist=function(c,d){a.CheckParam.getInstance().check(["string|number","object"],"addToBlacklist",!1,arguments),b._dataAccessProvider.addToBlacklist(c,b.logCallback(d,"addToBlacklist"))},b.prototype.getBlacklist=function(c){a.CheckParam.getInstance().check(["object"],"getBlacklist",!1,arguments),b._dataAccessProvider.getBlacklist(c)},b.prototype.getBlacklistStatus=function(c,d){a.CheckParam.getInstance().check(["string|number","object"],"getBlacklistStatus",!1,arguments),b._dataAccessProvider.getBlacklistStatus(c,b.logCallback(d,"getBlacklistStatus"))},b.prototype.removeFromBlacklist=function(c,d){a.CheckParam.getInstance().check(["string|number","object"],"removeFromBlacklist",!1,arguments),b._dataAccessProvider.removeFromBlacklist(c,b.logCallback(d,"removeFromBlacklist"))},b.prototype.getFileToken=function(c,d){a.CheckParam.getInstance().check(["number","object"],"getQngetFileTokenTkn",!1,arguments),b._dataAccessProvider.getFileToken(c,b.logCallback(d,"getFileToken"))},b.prototype.getFileUrl=function(c,d,e,f){a.CheckParam.getInstance().check(["number","string","string|global|object|null","object"],"getFileUrl",!1,arguments),b._dataAccessProvider.getFileUrl(c,d,e,b.logCallback(f,"getFileUrl"))},b.prototype.addRealTimeLocationListener=function(a,b,c){throw new Error("Not implemented yet")},b.prototype.getRealTimeLocation=function(a,b){throw new Error("Not implemented yet")},b.prototype.getRealTimeLocationCurrentState=function(a,b){throw new Error("Not implemented yet")},b.prototype.getRealTimeLocationParticipants=function(a,b){throw new Error("Not implemented yet")},b.prototype.joinRealTimeLocation=function(a,b){throw new Error("Not implemented yet")},b.prototype.quitRealTimeLocation=function(a,b){throw new Error("Not implemented yet")},b.prototype.startRealTimeLocation=function(a,b){throw new Error("Not implemented yet")},b.prototype.updateRealTimeLocationStatus=function(a,b,c,d){throw new Error("Not implemented yet")},b.prototype.startCall=function(c,d,e,f,g,h){if(a.CheckParam.getInstance().check(["number","string|number","array","number","string","object"],"startCall",!1,arguments),b._memoryStore.voipStategy)b._voipProvider.startCall(c,d,e,f,g,b.logCallback(h,"startCall"));else{var i=a.ErrorCode.VOIP_NOT_AVALIABLE;b.logger({code:i,funcName:"startCall"}),h.onError(a.ErrorCode.VOIP_NOT_AVALIABLE)}},b.prototype.joinCall=function(c,d){if(a.CheckParam.getInstance().check(["number","object"],"joinCall",!1,arguments),b._memoryStore.voipStategy)b._voipProvider.joinCall(c,b.logCallback(d,"joinCall"));else{var e=a.ErrorCode.VOIP_NOT_AVALIABLE;b.logger({code:e,funcName:"joinCall"}),d.onError(a.ErrorCode.VOIP_NOT_AVALIABLE)}},b.prototype.hungupCall=function(c,d,e){a.CheckParam.getInstance().check(["number","string","number"],"hungupCall",!1,arguments),b._memoryStore.voipStategy&&b._voipProvider.hungupCall(c,d,e)},b.prototype.changeMediaType=function(c,d,e,f){if(a.CheckParam.getInstance().check(["number","string","number","object"],"changeMediaType",!1,arguments),b._memoryStore.voipStategy)b._voipProvider.changeMediaType(c,d,e,b.logCallback(f,"changeMediaType"));else{var g=a.ErrorCode.VOIP_NOT_AVALIABLE;b.logger({code:g,funcName:"changeMediaType"}),f.onError(a.ErrorCode.VOIP_NOT_AVALIABLE)}},b.prototype.getUnreadMentionedMessages=function(a,c){return b._dataAccessProvider.getUnreadMentionedMessages(a,c)},b.prototype.clearListeners=function(){b._dataAccessProvider.clearListeners()},b.prototype.getUserStatus=function(a,c){b._dataAccessProvider.getUserStatus(a,b.logCallback(c,"getUserStatus"))},b.prototype.setUserStatus=function(a,c){b._dataAccessProvider.setUserStatus(a,b.logCallback(c,"setUserStatus"))},b.prototype.setUserStatusListener=function(a,c){var d=a.userIds,e=a.multiple;b.userStatusObserver.watch({key:d,func:c,multiple:e}),b._dataAccessProvider.setUserStatusListener(a,c)},b.messageWatch=function(a){b.RTCListener=a},b.messageSignalWatch=function(a){b.RTCSignalLisener=a},b.prototype.getRTCUserInfoList=function(c,d){a.CheckParam.getInstance().check(["object","object"],"getRTCUserInfoList",!1,arguments),b._dataAccessProvider.getRTCUserInfoList(c,d)},b.prototype.getRTCUserList=function(c,d){a.CheckParam.getInstance().check(["object","object"],"getRTCUserList",!1,arguments),b._dataAccessProvider.getRTCUserList(c,d)},b.prototype.setRTCUserInfo=function(c,d,e){a.CheckParam.getInstance().check(["object","object","object"],"setRTCUserInfo",!1,arguments),b._dataAccessProvider.setRTCUserInfo(c,d,e)},b.prototype.removeRTCUserInfo=function(c,d,e){a.CheckParam.getInstance().check(["object","object","object"],"removeRTCUserInfo",!1,arguments),b._dataAccessProvider.removeRTCUserInfo(c,d,e)},b.prototype.getRTCRoomInfo=function(c,d){a.CheckParam.getInstance().check(["object","object"],"getRTCRoomInfo",!1,arguments),b._dataAccessProvider.getRTCRoomInfo(c,d)},b.prototype.setRTCRoomInfo=function(c,d,e){a.CheckParam.getInstance().check(["object","object","object"],"setRTCRoomInfo",!1,arguments),b._dataAccessProvider.setRTCRoomInfo(c,d,e)},b.prototype.removeRTCRoomInfo=function(c,d,e){a.CheckParam.getInstance().check(["object","object","object"],"removeRTCRoomInfo",!1,arguments),b._dataAccessProvider.removeRTCRoomInfo(c,d,e)},b.prototype.joinRTCRoom=function(c,d){if(a.CheckParam.getInstance().check(["object","object"],"joinRTCRoom",!1,arguments),b.isJoinedRTCRoom)return d.onSuccess(b.roomInfo);b._dataAccessProvider.joinRTCRoom(c,{onSuccess:function(a){b.roomInfo=a,b.isJoinedRTCRoom=!0,d.onSuccess(a)},onError:d.onError})},b.prototype.quitRTCRoom=function(c,d){a.CheckParam.getInstance().check(["object","object"],"quitRTCRoom",!1,arguments),b.isJoinedRTCRoom=!1,b._dataAccessProvider.quitRTCRoom(c,{onSuccess:function(){b.roomInfo={users:{},token:""},d.onSuccess(!0)},onError:d.onError})},b.prototype.RTCPing=function(c,d){a.CheckParam.getInstance().check(["object","object"],"RTCPing",!1,arguments),b._dataAccessProvider.RTCPing(c,d)},b.prototype.setRTCUserData=function(c,d,e,f,g,h){a.CheckParam.getInstance().check(["string","string","string","boolean","object","global|object|null|undefined"],"setRTCUserData",!1,arguments),b._dataAccessProvider.setRTCUserData(c,d,e,f,g,h)},b.prototype.getRTCUserData=function(c,d,e,f){a.CheckParam.getInstance().check(["string","array","boolean","object","global|object|null"],"getRTCUserData",!1,arguments),b._dataAccessProvider.getRTCUserData(c,d,e,f)},b.prototype.removeRTCUserData=function(c,d,e,f,g){a.CheckParam.getInstance().check(["string","array","boolean","object","global|object|null|undefined"],"removeRTCUserData",!1,arguments),b._dataAccessProvider.removeRTCUserData(c,d,e,f,g)},b.prototype.setRTCRoomData=function(c,d,e,f,g,h){a.CheckParam.getInstance().check(["string","string","string","boolean","object","global|object|null|undefined"],"setRTCRoomData",!1,arguments),b._dataAccessProvider.setRTCRoomData(c,d,e,f,g,h)},b.prototype.getRTCRoomData=function(c,d,e,f){a.CheckParam.getInstance().check(["string","array","boolean","object"],"getRTCRoomData",!1,arguments),b._dataAccessProvider.getRTCRoomData(c,d,e,f)},b.prototype.removeRTCRoomData=function(c,d,e,f,g){a.CheckParam.getInstance().check(["string","array","boolean","object","global|object|null|undefined"],"removeRTCRoomData",!1,arguments),b._dataAccessProvider.removeRTCRoomData(c,d,e,f,g)},b.prototype.setRTCOutData=function(a,c,d,e,f){b._dataAccessProvider.setRTCOutData(a,c,d,e,f)},b.prototype.getRTCOutData=function(a,c,d){b._dataAccessProvider.getRTCOutData(a,c,d)},b.prototype.getNavi=function(){return b._dataAccessProvider.getNavi()},b.prototype.getRTCToken=function(c,d){return a.CheckParam.getInstance().check(["object","object"],"getRTCToken",!1,arguments),b._dataAccessProvider.getRTCToken(c,d)},b.prototype.setRTCState=function(c,d,e){return a.CheckParam.getInstance().check(["object","object","object"],"setRTCState",!1,arguments),b._dataAccessProvider.setRTCState(c,d,e)},b.prototype.getAppInfo=function(){return{appKey:b._memoryStore.appKey}},b.prototype.getSDKInfo=function(){return{version:b.sdkver}},b.HttpProtocol={http:"http://",https:"https://"},b.WsProtocol={ws:"ws://",wss:"wss://"},b.RTCListener=function(){},b.RTCInnerListener=function(){},b.RTCSignalLisener=function(){},b.MaxMessageContentBytes=131072,b.NavMarkInToken="@",b.NavSeparatorInToken=";",b.NavExpiredTime=72e5,b.currentServer="",b.LogFactory={},b.MessageType={},b.RegisterMessage={},b._memoryStore={isPullFinished:!1,syncMsgQueue:[]},b.isNotPullMsg=!1,b.userStatusObserver=null,b.sdkver="2.5.6",b.otherDeviceLoginCount=0,b.serverStore={index:0},b.isFirstConnect=!0,b.roomInfo={users:{},token:""},b.invalidWsUrls=[],b.isJoinedRTCRoom=!1,b.statusListeners=[],b.messageListeners=[],b.userStatusListener=null,b}();a.RongIMClient=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){!function(a){a[a.AT_MOST_ONCE=0]="AT_MOST_ONCE",a[a.AT_LEAST_ONCE=1]="AT_LEAST_ONCE",a[a.EXACTLY_ONCE=2]="EXACTLY_ONCE",a[a.DEFAULT=3]="DEFAULT"}(a.Qos||(a.Qos={}));var b=a.Qos;!function(a){a[a.CONNECT=1]="CONNECT",a[a.CONNACK=2]="CONNACK",a[a.PUBLISH=3]="PUBLISH",a[a.PUBACK=4]="PUBACK",a[a.QUERY=5]="QUERY",a[a.QUERYACK=6]="QUERYACK",a[a.QUERYCON=7]="QUERYCON",a[a.SUBSCRIBE=8]="SUBSCRIBE",a[a.SUBACK=9]="SUBACK",a[a.UNSUBSCRIBE=10]="UNSUBSCRIBE",a[a.UNSUBACK=11]="UNSUBACK",a[a.PINGREQ=12]="PINGREQ",a[a.PINGRESP=13]="PINGRESP",a[a.DISCONNECT=14]="DISCONNECT"}(a.Type||(a.Type={}));a.Type;a.StatusTopic=function(){var b=a.ConversationType,c={};return c[b.PRIVATE]="ppMsgS",c[b.GROUP]="pgMsgS",c}();var c=["invtDiz","crDiz","qnUrl","userInf","dizInf","userInf","joinGrp","quitDiz","exitGrp","evctDiz",["","ppMsgP","pdMsgP","pgMsgP","chatMsg","pcMsgP","","pmcMsgN","pmpMsgN","","","","prMsgS","prMsgP"],"pdOpen","rename","uGcmpr","qnTkn","destroyChrm","createChrm","exitChrm","queryChrm","joinChrm","pGrps","addBlack","rmBlack","getBlack","blackStat","addRelation","qryRelation","delRelation","pullMp","schMp","qnTkn","qnUrl","qryVoipK","delMsg","qryCHMsg","getUserStatus","setUserStatus","subUserStatus","cleanHisMsg"],d=function(){function b(c,d){this.connectionStatus=-1;var f=d.appId,g=encodeURIComponent(d.token),h=d.sdkVer,i=d.apiVer;this.self=d,this.socket=e.getInstance().createServer();var j=this,k=a.RongIMClient._storageProvider,l=k.getItem("servers");l=JSON.parse(l)||[],l=a.RongUtil.getValidWsUrlList(l);var m=a.RongIMClient._memoryStore.depend;m.cmpUrl&&(l=[m.cmpUrl].concat(l));var n=function(b){j.url=a.RongUtil.tplEngine("{host}/websocket?appId={appId}&token={token}&sdkVer={sdkVer}&apiVer={apiVer}",{host:b,appId:f,token:g,sdkVer:h,apiVer:i}),j.socket.connect(j.url,c);var d=k.getItem("rong_current_user");a.Navigation.Endpoint={host:b,userId:d}};({get:function(){for(var b=new a.Timer({timeout:15e3}),c=[],d=[],e=!1,f=function(){for(var a=0;a<c.length;a++){var b=c[a];clearTimeout(b)}for(var a=0;a<d.length;a++){d[a].abort()}c.length=0,d.length=0},g=function(g,h){var i=g.url,j=g.time;if(!e){var k=setTimeout(function(){var c=function(){e||(f(),e=!0,b.pause(),h(i))},g=a.MessageUtil.detectCMP({url:i,success:c,fail:function(a){console.log(a)}});d.push(g)},j);c.push(k)}},h=function(b){var c=/(http|https):\/\/([^\/]+)/i,d=b.match(c)[2];a.RongIMClient.currentServer=d,n(d)},i="{protocol}{server}/ping?r={random}",k=0;k<l.length;k++){var o=l[k];o&&(o=a.RongUtil.tplEngine(i,{protocol:m.protocol,server:o,random:a.RongUtil.getTimestamp()}),g({url:o,time:1e3*k},h))}b.resume(function(){a.Navigation.clear(),f(),j.socket.fire("StatusChanged",a.ConnectionStatus.NETWORK_UNAVAILABLE)})},element:function(){for(var b=new a.Timer({timeout:15e3}),c=[],d=[],e=!1,f=function(){for(var a=0;a<c.length;a++){var b=c[a];clearTimeout(b)}for(var a=0;a<d.length;a++){var e=d[a];document.body.removeChild(e)}},g=function(a,g){var h=a.url,i=a.time;if(!e){var j=setTimeout(function(){var a=document.createElement("script");a.src=h,document.body.appendChild(a),a.onerror=function(){if(!e){f(),e=!0,b.pause();var c=a.src;g(c)}},d.push(a)},i);c.push(j)}},h=function(a){var b=/(http|https):\/\/([^\/]+)/i,c=a.match(b)[2];n(c)},i="//{server}/{path}",k=0;k<l.length;k++){g({url:a.RongUtil.tplEngine(i,{server:l[k],path:k}),time:1e3*k},h)}b.resume(function(){f(),j.socket.fire("StatusChanged",a.ConnectionStatus.NETWORK_UNAVAILABLE)})}})[m.isWSPingJSONP?"element":"get"]();var o=b._ConnectionStatusListener,p="object"==typeof o,q=this;q.socket.on("StatusChanged",function(b){if(a.Bridge&&a.Bridge._client&&a.Bridge._client.channel&&q!==a.Bridge._client.channel)return void(q.connectionStatus=b);if(!p)throw new Error("setConnectStatusListener:Parameter format is incorrect");var c=b==a.ConnectionStatus.NETWORK_UNAVAILABLE,e=!a.RongIMClient._memoryStore.depend.isPolling;if(a.RongIMClient.isFirstConnect&&c&&e&&(b=a.ConnectionStatus.WEBSOCKET_UNAVAILABLE),c){var f=a.RongIMClient._storageProvider,g=f.getItem("servers");g=JSON.parse(g);var h=a.RongIMClient.currentServer;if(h){var i=a.RongUtil.indexOf(g,h);if(!a.RongUtil.isEqual(i,-1)){var j=g.splice(i,1)[0];g.push(j),f.setItem("servers",JSON.stringify(g))}}}q.connectionStatus=b,setTimeout(function(){o.onChanged(b)}),b==a.ConnectionStatus.DISCONNECTED&&d.clearHeartbeat(),b==a.ConnectionStatus.KICKED_OFFLINE_BY_OTHER_CLIENT&&a.RongIMClient.otherDeviceLoginCount++,b==a.ConnectionStatus.CONNECTED&&(a.RongIMClient.isFirstConnect=!1),b==a.ConnectionStatus.WEBSOCKET_UNAVAILABLE&&(q.changeConnectType(),a.RongIMClient.isFirstConnect=!1,a.RongIMClient.connect(d.token,a.RongIMClient._memoryStore.callback))}),this.socket.on("message",d.handler.handleMessage),this.socket.on("disconnect",function(a){j.socket.fire("StatusChanged",a||2)})}return b.prototype.changeConnectType=function(){a.RongIMClient._memoryStore.depend.isPolling=!a.RongIMClient._memoryStore.depend.isPolling,new a.FeatureDectector},b.prototype.writeAndFlush=function(a){this.socket.send(a)},b.prototype.reconnect=function(b){a.MessageIdHandler.clearMessageId(),this.socket=this.socket.reconnect(),b&&(this.self.reconnectObj=b)},b.prototype.disconnect=function(a){this.socket.disconnect(a)},b}();a.Channel=d;var e=function(){function b(){this.socket=null,this._events={}}return b.getInstance=function(){return new b},b.prototype.connect=function(b,c){return this.socket&&(b&&(a.RongIMClient._storageProvider.setItem("rongSDK",this.checkTransport()),this.on("connect",c||new Function)),b&&(this.currentURL=b),this.socket.createTransport(b)),this},b.prototype.createServer=function(){var a=this.getTransport(this.checkTransport());if(null===a)throw new Error("the channel was not supported");return a},b.prototype.getTransport=function(c){return c==b.XHR_POLLING?this.socket=new a.PollingTransportation(this):c==b.WEBSOCKET&&(this.socket=new a.SocketTransportation(this)),this},b.prototype.send=function(a){this.socket&&(this.checkTransport()==b.WEBSOCKET?this.socket.send(a):this.socket.send(this._encode(a)))},b.prototype.onMessage=function(a){this.fire("message",a)},b.prototype.disconnect=function(a){return this.socket.disconnect(a),this.fire("disconnect",a),this},b.prototype.reconnect=function(){if(this.currentURL&&a.RongIMClient._storageProvider.getItem("rongSDK"))return this.connect(this.currentURL,null);throw new Error("reconnect:no have URL")},b.prototype.checkTransport=function(){return a.RongIMClient._memoryStore.depend.isPolling&&(a.Transportations._TransportType=b.XHR_POLLING),a.Transportations._TransportType},b.prototype.fire=function(a,b){if(a in this._events)for(var c=0,d=this._events[a].length;c<d;c++)this._events[a][c](b);return this},b.prototype.on=function(b,c){return"function"==typeof c&&b?(b in this._events?-1==a.MessageUtil.indexOf(this._events,c)&&this._events[b].push(c):this._events[b]=[c],this):this},b.prototype.removeEvent=function(a,b){if(a in this._events)for(var c=0,d=this._events[a].length;c<d;c++)this._events[a][c]==b&&this._events[a].splice(c,1);return this},b.prototype._encode=function(b){var c="?messageid="+b.getMessageId()+"&header="+b.getHeaderFlag()+"&sessionid="+a.RongIMClient._storageProvider.getItem("sId"+a.Navigation.Endpoint.userId);return/(PubAckMessage|QueryConMessage)/.test(b._name)||(c+="&topic="+b.getTopic()+"&targetid="+(b.getTargetId()||"")),{url:c,data:"getData"in b?b.getData():""}},b.XHR_POLLING="xhr-polling",b.WEBSOCKET="websocket",b}();a.Socket=e;var f=function(){function c(b,c){this.timeoutMillis=6e3,this.timeout_=0,this.sdkVer="",this.apiVer=Math.floor(1e6*Math.random()),this.channel=null,this.handler=null,this.userId="",this.reconnectObj={},this.heartbeat=0,this.pullMsgHearbeat=0,this.chatroomId="",this.SyncTimeQueue=[],this.cacheMessageIds=[],this.token=b,this.appId=c,this.SyncTimeQueue.state="complete",this.sdkVer=a.RongIMClient.sdkver}return c.prototype.resumeTimer=function(){var b=this;this.timeout_=setTimeout(function(){b.channel.disconnect(a.ConnectionStatus.NETWORK_UNAVAILABLE)},this.timeoutMillis)},c.prototype.pauseTimer=function(){this.timeout_&&(clearTimeout(this.timeout_),this.timeout_=0)},c.prototype.connect=function(b){this.handler=new h(this),this.handler.setConnectCallback(b);var c=this;this.channel=new d(function(){a.Transportations._TransportType==e.WEBSOCKET&&c.keepLive()},this),this.channel.socket.fire("StatusChanged",a.ConnectionStatus.CONNECTING)},c.prototype.checkSocket=function(b){this.channel.writeAndFlush(new a.PingReqMessage);var c=0,d=setInterval(function(){a.RongIMClient._memoryStore.isFirstPingMsg?c>15&&(clearInterval(d),b.onError()):(clearInterval(d),b.onSuccess()),c++},100)},c.prototype.keepLive=function(){this.heartbeat>0&&clearInterval(this.heartbeat);var b=this;b.heartbeat=setInterval(function(){b.resumeTimer(),b.channel.writeAndFlush(new a.PingReqMessage)},3e4),b.pullMsgHearbeat>0&&clearInterval(b.pullMsgHearbeat),b.pullMsgHearbeat=setInterval(function(){b.syncTime(!0,void 0,void 0,!1)},18e4)},c.prototype.clearHeartbeat=function(){clearInterval(this.heartbeat),this.heartbeat=0,this.pauseTimer(),clearInterval(this.pullMsgHearbeat),this.pullMsgHearbeat=0},c.prototype.publishMessage=function(c,d,e,f,g,h){h=h||{};var i=h.isNoAck,j=!!f,k=a.MessageIdHandler.messageIdPlus(this.channel.reconnect);if(k){var l=new a.PublishMessage(c,d,e);l.setMessageId(k),i?(l.setQos(b.AT_LEAST_ONCE),f.onSuccess(l)):j?(l.setQos(b.AT_LEAST_ONCE),this.handler.putCallback(new a.PublishCallback(f.onSuccess,f.onError),l.getMessageId(),g)):l.setQos(b.AT_MOST_ONCE),this.channel.writeAndFlush(l)}},c.prototype.queryMessage=function(b,d,e,f,g,h){if("userInf"==b&&c.userInfoMapping[e])return void g.onSuccess(c.userInfoMapping[e]);var i=a.MessageIdHandler.messageIdPlus(this.channel.reconnect);if(i){var j=new a.QueryMessage(b,d,e);j.setMessageId(i),j.setQos(f),this.handler.putCallback(new a.QueryCallback(g.onSuccess,g.onError),j.getMessageId(),h),this.channel.writeAndFlush(j)}},c.prototype.invoke=function(c,d,e){var f,h,i,j,k=this,l=this.SyncTimeQueue.shift();if(void 0!=l){this.SyncTimeQueue.state="pending";var m=a.SyncTimeUtil.get(),n=m.sent,o=2===l.type;if(2!=l.type)f=m.received,h=new a.RongIMClient.Protobuf.SyncRequestMsg,h.setIspolling(!1),i="pullMsg",j=this.userId,h.setSendBoxSyncTime(n);else if(j=l.chrmId||k.chatroomId,f=a.RongIMClient._memoryStore.lastReadTime.get(j+g._client.userId+"CST")||0,h=new a.RongIMClient.Protobuf.ChrmPullMsg,h.setCount(0),i="chrmPull",!j)throw new Error("syncTime:Received messages of chatroom but was not init");if(l.pulltime<=f)return this.SyncTimeQueue.state="complete",void this.invoke(c,j,e);c&&"setIsPullSend"in h&&h.setIsPullSend(!0),h.setSyncTime(f),this.queryMessage(i,a.MessageUtil.ArrayForm(h.toArrayBuffer()),j,b.AT_LEAST_ONCE,{onSuccess:function(b){var d=a.MessageUtil.int64ToTimestamp(b.syncTime),h=j,l="chrmPull"==i;if(l)h+=g._client.userId+"CST",a.RongIMClient._memoryStore.lastReadTime.set(h,d);else{var m=a.RongIMClient._storageProvider;d>m.getItem(h)&&m.setItem(h,d)}var p=b.list,q=b.finished;l&&(q=!0),void 0===q&&(q=!0),a.RongIMClient._memoryStore.isPullFinished=q;for(var r=a.RongIMClient._memoryStore.connectAckTime,s=p.length,t=0,u=s;t<s;t++){u-=1;var v=p[t],w=a.MessageUtil.int64ToTimestamp(v.dataTime);if(w>(v.direction==a.MessageDirection.SEND?n:f)||o){var x=w<r;g._client.handler.onReceived(v,void 0,x,u,!1,q)}}if(s<=200&&"pullMsg"==i){var y=a.RongIMClient._dataAccessProvider.Conversation,z=a.RongIMClient._memoryStore.conversationList;y._notify(z)}k.SyncTimeQueue.state="complete",k.invoke(c,j,e)},onError:function(a){k.SyncTimeQueue.state="complete",k.invoke(c,j,e)}},"DownStreamMessages")}},c.prototype.syncTime=function(a,b,c,d){this.SyncTimeQueue.push({type:a,pulltime:b,chrmId:c}),1==this.SyncTimeQueue.length&&"complete"==this.SyncTimeQueue.state&&this.invoke(!a,c,d)},c.prototype.__init=function(b){this.handler=new h(this),this.handler.setConnectCallback(a.RongIMClient._memoryStore.callback),this.channel=new d(b,this)},c.userInfoMapping={},c}();a.Client=f;var g=function(){function e(){}return e.getInstance=function(){return new e},e.prototype.connect=function(b,c,d){if(a.RongIMClient.Protobuf)return e._client=(new a.Navigation).connect(b,c,d),e._client},e.prototype.setListener=function(){d._ConnectionStatusListener={onChanged:function(b){a.RongUtil.forEach(a.RongIMClient.statusListeners,function(c){a.RongUtil.isFunction(c)&&c(b)})}},d._ReceiveMessageListener={onReceived:function(b,c,d){a.RongUtil.forEach(a.RongIMClient.messageListeners,function(e){a.RongUtil.isFunction(e)&&e(b,c,d)})}}},e.prototype.reconnect=function(a){e._client.channel.reconnect(a)},e.prototype.disconnect=function(){e._client.channel.disconnect(2)},e.prototype.queryMsg=function(a,d,f,g,h){"string"!=typeof a&&(a=c[a]),e._client.queryMessage(a,d,f,b.AT_MOST_ONCE,g,h)},e.prototype.pubMsg=function(b,d,f,g,h,i,j){if(j=j||{},"number"==typeof i)i==a.MethodType.CUSTOMER_SERVICE?e._client.publishMessage("pcuMsgP",d,f,g,h):i==a.MethodType.RECALL&&e._client.publishMessage("recallMsg",d,f,g,h);else{var k=j.isStatus,l=a.StatusTopic[b];k&&l?e._client.publishMessage(l,d,f,g,h,{isNoAck:!0}):e._client.publishMessage(c[10][b],d,f,g,h)}},e}();a.Bridge=g;var h=function(){function b(a){if(this.map={},this.connectCallback=null,!d._ReceiveMessageListener)throw new Error("please set onReceiveMessageListener");this._onReceived=d._ReceiveMessageListener.onReceived,this._client=a,this.syncMsgMap=new Object}return b.prototype.putCallback=function(a,b,c){var d={Callback:a,Message:c};d.Callback.resumeTimer(),this.map[b]=d},b.prototype.setConnectCallback=function(b){b&&(this.connectCallback=new a.ConnectAck(b.onSuccess,b.onError,this._client))},b.prototype.handleChrmKVPullMsg=function(b){try{var c="ChrmNotifyMsg",d=a.CallbackMapping.getInstance().mapping(a.RongIMClient.Protobuf[c].decode(b.data),c);if(2===d.type){var e=a.MessageUtil.int64ToTimestamp(d.time);a.ChrmKVHandler.pull(d.chrmId,e)}}catch(f){}},b.prototype.onReceived=function(b,c,d,e,f){var h,i,j,k=!1;if("PublishMessage"!=b._name)h=b,a.RongIMClient._storageProvider.setItem(this._client.userId,a.MessageUtil.int64ToTimestamp(h.dataTime));else{if("s_ntf"==b.getTopic())return h=a.RongIMClient.Protobuf.NotifyMsg.decode(b.getData()),void this._client.syncTime(h.type,a.MessageUtil.int64ToTimestamp(h.time),h.chrmId);if("s_msg"==b.getTopic()){k=!0,h=a.RongIMClient.Protobuf.DownStreamMessage.decode(b.getData());var l=a.MessageUtil.int64ToTimestamp(h.dataTime);a.RongIMClient._storageProvider.setItem(this._client.userId,l),a.RongIMClient._memoryStore.lastReadTime.get(this._client.userId,l)}else{if("s_stat"==b.getTopic())return h=a.RongIMClient.Protobuf.GetUserStatusOutput.decode(b.getData()),h=a.RongInnerTools.convertUserStatus(h),void a.RongIMClient.userStatusObserver.notify({key:h.userId,entity:h});if("s_cmd"===b.getTopic())return void this.handleChrmKVPullMsg(b);if(g._client.sdkVer&&"1.0.0"==g._client.sdkVer)return;h=a.RongIMClient.Protobuf.UpStreamMessage.decode(b.getData());var m=b.getTopic(),n=m.substr(0,2);"pp"==n?h.type=1:"pd"==n?h.type=2:"pg"==n?h.type=3:"ch"==n?h.type=4:"pc"==n&&(h.type=5),h.groupId=b.getTargetId(),h.fromUserId=this._client.userId,h.dataTime=Date.parse((new Date).toString())}if(!h)return}var o=a.RongIMClient._memoryStore.isPullFinished;if(o||d||!k){i=a.MessageUtil.messageParser(h,this._onReceived,d);if(12==i.conversationType)return a.RongIMClient.RTCListener(i),a.RongIMClient.RTCInnerListener(i),void a.RongIMClient.RTCSignalLisener(i);if(b.getTopic&&"recallMsg"==b.getTopic()){var p=i.content;i.conversationType=p.conversationType,i.targetId=p.targetId,i.messageId=null}if(c&&(i.messageUId=c.getMessageUId(),i.sentTime=c.getTimestamp(),a.RongIMClient._storageProvider.setItem(this._client.userId,i.sentTime)),null!==i){if(!(i.conversationType==a.ConversationType.CHATROOM)){var q=a.RongIMClient.MessageParams[i.messageType].msgTag.getMessageTag();q>=0&&a.SyncTimeUtil.set(i);if(i.messageDirection==a.MessageDirection.SEND){
var r=a.RongIMClient._storageProvider,s=a.Bridge._client.userId,t=r.getItem("last_sentTime_"+s)||0;if(i.sentTime<=t&&!f)return}}var q=a.RongIMClient.MessageParams[i.messageType].msgTag.getMessageTag();if(3===q||2===q){if(j=a.RongIMClient._dataAccessProvider.getConversation(i.conversationType,i.targetId,{onSuccess:function(){},onError:function(){}}),j||(j=a.RongIMClient.getInstance().createConversation(i.conversationType,i.targetId,"")),i.messageDirection==a.MessageDirection.RECEIVE&&64==(64&h.status)){var u=a.RongIMClient._storageProvider.getItem("mentioneds_"+g._client.userId+"_"+i.conversationType+"_"+i.targetId),v=i.conversationType+"_"+i.targetId,w={};if(i.content&&i.content.mentionedInfo&&(w[v]={uid:i.messageUId,time:i.sentTime,mentionedInfo:i.content.mentionedInfo},a.RongIMClient._storageProvider.setItem("mentioneds_"+g._client.userId+"_"+i.conversationType+"_"+i.targetId,JSON.stringify(w)),u=JSON.stringify(w)),u){var w=JSON.parse(u);j.mentionedMsg=w[v]}}if(i.messageDirection==a.MessageDirection.RECEIVE&&i.senderUserId!=g._client.userId&&(j.unreadMessageCount=j.unreadMessageCount+1,a.RongUtil.supportLocalStorage())){var x=a.UnreadCountHandler.add(j.conversationType,i.targetId,1,i.sentTime);j.unreadMessageCount=x}var y=(new Date).getTime();j.receivedTime=a.MessageUtil.getCheckedTime(y),j.receivedStatus=i.receivedStatus,j.senderUserId=i.sendUserId,j.notificationStatus=a.ConversationNotificationStatus.DO_NOT_DISTURB,j.latestMessageId=i.messageId,j.latestMessage=i,j.sentTime=i.sentTime,a.RongIMClient._dataAccessProvider.addConversation(j,{onSuccess:function(b){if(!d){var c=a.RongIMClient._dataAccessProvider.Conversation,e=a.RongIMClient._memoryStore.conversationList;c._notify(e)}},onError:function(){}})}if(i.conversationType!=a.ConversationType.CUSTOMER_SERVICE||"ChangeModeResponseMessage"!=i.messageType&&"SuspendMessage"!=i.messageType&&"HandShakeResponseMessage"!=i.messageType&&"TerminateMessage"!=i.messageType&&"CustomerStatusUpdateMessage"!=i.messageType&&"TextMessage"!=i.messageType&&"InformationNotificationMessage"!=i.messageType||a.RongIMClient._memoryStore.custStore.isInit){if(i.conversationType==a.ConversationType.CUSTOMER_SERVICE&&"HandShakeResponseMessage"!=i.messageType){if(!a.RongIMClient._memoryStore.custStore[i.targetId])return;if("TerminateMessage"==i.messageType&&a.RongIMClient._memoryStore.custStore[i.targetId].sid!=i.content.sid)return}if(i.messageType===a.RongIMClient.MessageType.HandShakeResponseMessage){var z=i.content.data;a.RongIMClient._memoryStore.custStore[i.targetId]=z,z.serviceType!=a.CustomerType.ONLY_HUMAN&&z.serviceType!=a.CustomerType.HUMAN_FIRST||"1"==z.notAutoCha&&a.RongIMClient.getInstance().switchToHumanMode(i.targetId,{onSuccess:function(){},onError:function(){}})}var A=new Date,B=A.getMonth()+1,C=A.getFullYear()+"/"+(1==B.toString().length?"0"+B:B)+"/"+A.getDate(),D=new Date(C).getTime()-i.sentTime<0;if(a.RongUtil.supportLocalStorage()&&i.messageType===a.RongIMClient.MessageType.ReadReceiptRequestMessage&&D&&i.messageDirection==a.MessageDirection.SEND){var E=g._client.userId+i.content.messageUId+"SENT";a.RongIMClient._storageProvider.setItem(E,JSON.stringify({count:0,dealtime:i.sentTime,userIds:{}}))}else if(a.RongUtil.supportLocalStorage()&&i.messageType===a.RongIMClient.MessageType.ReadReceiptRequestMessage&&D){var F=g._client.userId+i.conversationType+i.targetId+"RECEIVED",G=JSON.parse(a.RongIMClient._storageProvider.getItem(F));if(G)if(i.senderUserId in G){if(!G[i.senderUserId].uIds||!G[i.senderUserId].uIds||-1!=G[i.senderUserId].uIds.indexOf(i.content.messageUId))return;G[i.senderUserId].uIds.push(i.content.messageUId),G[i.senderUserId].dealtime=i.sentTime,G[i.senderUserId].isResponse=!1,a.RongIMClient._storageProvider.setItem(F,JSON.stringify(G))}else{var H={uIds:[i.content.messageUId],dealtime:i.sentTime,isResponse:!1};G[i.senderUserId]=H,a.RongIMClient._storageProvider.setItem(F,JSON.stringify(G))}else{var I={};I[i.senderUserId]={uIds:[i.content.messageUId],dealtime:i.sentTime,isResponse:!1},a.RongIMClient._storageProvider.setItem(F,JSON.stringify(I))}}if(a.RongUtil.supportLocalStorage()&&i.messageType===a.RongIMClient.MessageType.ReadReceiptResponseMessage&&D){var J,K=i.content,L=K.receiptMessageDic[g._client.userId],E="";if(i.receiptResponse||(i.receiptResponse={}),L){for(var M=[],N=0,O=L.length;N<O;N++)E=g._client.userId+L[N]+"SENT",!(J=JSON.parse(a.RongIMClient._storageProvider.getItem(E)))||i.senderUserId in J.userIds||(M.push(L[N]),J.count+=1,J.userIds[i.senderUserId]=i.sentTime,i.receiptResponse[L[N]]=J.count,a.RongIMClient._storageProvider.setItem(E,JSON.stringify(J)));K.receiptMessageDic[g._client.userId]=M,i.content=K}}var P=this;if(a.RongIMClient._voipProvider&&["AcceptMessage","RingingMessage","HungupMessage","InviteMessage","MediaModifyMessage","MemberModifyMessage"].indexOf(i.messageType)>-1)setTimeout(function(){a.RongIMClient._voipProvider.onReceived(i)});else{var Q=e||0,R=!o;P._onReceived(i,Q,R)}}}}},b.prototype.handleMessage=function(b){if(b)switch(b&&a.RongUtil.isObject(b)&&b.timestamp&&a.MessageUtil.setDeltaTime(b.timestamp),b._name){case"ConnAckMessage":g._client.handler.connectCallback.process(b.getStatus(),b.getUserId(),b.getTimestamp());break;case"PublishMessage":b.getSyncMsg()||0==b.getQos()||g._client.channel.writeAndFlush(new a.PubAckMessage(b.getMessageId())),b.getSyncMsg()&&!a.RongIMClient._memoryStore.depend.isPolling?g._client.handler.syncMsgMap[b.getMessageId()]=b:g._client.handler.onReceived(b);break;case"QueryAckMessage":0!=b.getQos()&&g._client.channel.writeAndFlush(new a.QueryConMessage(b.getMessageId()));var c=g._client.handler.map[b.getMessageId()];c&&(c.Callback.process(b.getStatus(),b.getData(),b.getDate(),c.Message),delete g._client.handler.map[b.getMessageId()]);break;case"PubAckMessage":var d=g._client.handler.map[b.getMessageId()];if(d)d.Callback.process(b.getStatus()||0,b.getMessageUId(),b.getTimestamp(),d.Message,b.getMessageId()),delete g._client.handler.map[b.getMessageId()];else{var e=a.Bridge._client.userId;a.RongIMClient._storageProvider.setItem("last_sentTime_"+e,b.timestamp),g._client.handler.onReceived(g._client.handler.syncMsgMap[b.messageId],b,null,null,!0),delete g._client.handler.syncMsgMap[b.getMessageId()]}break;case"PingRespMessage":a.RongIMClient._memoryStore.isFirstPingMsg?a.RongIMClient._memoryStore.isFirstPingMsg=!1:g._client.pauseTimer();break;case"DisconnectMessage":g._client.channel.disconnect(b.getStatus())}},b}();a.MessageHandler=h}(RongIMLib||(RongIMLib={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},RongIMLib;!function(a){var b=function(){function b(a){this.timeout=null,this.onError=null,a&&"number"==typeof a?this.timeoutMillis=a:(this.timeoutMillis=3e4,this.onError=a)}return b.prototype.resumeTimer=function(){var a=this;this.timeoutMillis>0&&!this.timeout&&(this.timeout=setTimeout(function(){a.readTimeOut(!0)},this.timeoutMillis))},b.prototype.pauseTimer=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},b.prototype.readTimeOut=function(b){b&&this.onError?this.onError(a.ErrorCode.TIMEOUT):this.pauseTimer()},b}();a.MessageCallback=b;var c=function(){function b(){this.publicServiceList=[]}return b.getInstance=function(){return new b},b.prototype.pottingProfile=function(b){var c;this.profile=new a.PublicServiceProfile,c=JSON.parse(b.extra),this.profile.isGlobal=c.isGlobal,this.profile.introduction=c.introduction,this.profile.menu=c.menu,this.profile.hasFollowed=c.follow,this.profile.publicServiceId=b.mpid,this.profile.name=b.name,this.profile.portraitUri=b.portraitUrl,this.profile.conversationType="mc"==b.type?a.ConversationType.APP_PUBLIC_SERVICE:a.ConversationType.PUBLIC_SERVICE,this.publicServiceList.push(this.profile)},b.prototype.mapping=function(b,c){switch(c){case"GetUserInfoOutput":return new a.UserInfo(b.userId,b.userName,b.userPortrait);case"GetQNupTokenOutput":return{deadline:a.MessageUtil.int64ToTimestamp(b.deadline),token:b.token};case"GetQNdownloadUrlOutput":return{downloadUrl:b.downloadUrl};case"CreateDiscussionOutput":return b.id;case"ChannelInfoOutput":var d=new a.Discussion;return d.creatorId=b.adminUserId,d.id=b.channelId,d.memberIdList=b.firstTenUserIds,d.name=b.channelName,d.isOpen=b.openStatus,d;case"GroupHashOutput":return b.result;case"QueryBlackListOutput":return b.userIds;case"SearchMpOutput":case"PullMpOutput":if(b.info){var e=this;Array.forEach(b.info,function(a){setTimeout(function(){e.pottingProfile(a)},100)})}return this.publicServiceList;default:return b}},b}();a.CallbackMapping=c;var d=function(c){function d(a,b){c.call(this,b),this._cb=a,this._timeout=b}return __extends(d,c),d.prototype.process=function(b,c,d,e,f){if(this.readTimeOut(),0==b){e&&(e.setSentStatus=b);if(a.RongIMClient._memoryStore.isPullFinished){var g=a.Bridge._client.userId;a.RongIMClient._storageProvider.setItem("last_sentTime_"+g,d),a.SyncTimeUtil.set({messageDirection:a.MessageDirection.SEND,sentTime:d})}this._cb({messageUId:c,timestamp:d,messageId:f})}else this._timeout(b,{messageUId:c,sentTime:d})},d.prototype.readTimeOut=function(a){b.prototype.readTimeOut.call(this,a)},d}(b);a.PublishCallback=d;var e=function(d){function e(a,b){d.call(this,b),this._cb=a,this._timeout=b}return __extends(e,d),e.prototype.process=function(b,d,e,f){if(this.readTimeOut(),f&&d&&0==b){try{d=c.getInstance().mapping(a.RongIMClient.Protobuf[f].decode(d),f)}catch(g){return void this._timeout(a.ErrorCode.UNKNOWN)}"GetUserInfoOutput"==f&&(a.Client.userInfoMapping[d.userId]=d),this._cb(d)}else b>0?this._timeout(b):this._cb(b)},e.prototype.readTimeOut=function(a){b.prototype.readTimeOut.call(this,a)},e}(b);a.QueryCallback=e;var f=function(c){function d(a,b,d){c.call(this,b),this._client=d,this._cb=a,this._timeout=b}return __extends(d,c),d.prototype.process=function(b,c,d){if(this.readTimeOut(),0==b){this._client.userId=c;var e=this;if(!a.RongIMClient._memoryStore.depend.isPolling&&a.RongIMClient._memoryStore.isFirstPingMsg?a.Bridge._client.checkSocket({onSuccess:function(){a.RongIMClient.isNotPullMsg||e._client.syncTime(void 0,void 0,void 0,!0)},onError:function(){a.RongIMClient._memoryStore.isFirstPingMsg=!1,a.RongIMClient.getInstance().disconnect(),a.RongIMClient.connect(a.RongIMClient._memoryStore.token,a.RongIMClient._memoryStore.callback)}}):a.RongIMClient.isNotPullMsg||e._client.syncTime(void 0,void 0,void 0,!0),a.Bridge._client.channel.socket.fire("StatusChanged",0),this._client.reconnectObj.onSuccess)this._client.reconnectObj.onSuccess(c),delete this._client.reconnectObj.onSuccess;else{var f=this;f._cb(c);var g=a.RongIMClient._memoryStore.depend,h=g.maxConversationCount;g.isNotifyConversationList&&a.RongIMClient._dataAccessProvider.getRemoteConversationList({onSuccess:function(b){a.RongIMClient._dataAccessProvider.Conversation._notify(b)},onError:function(a){console.log("鍐呴儴鑾峰彇鍒楄〃澶辫触: %d",a)}},null,h)}a.RongIMClient._memoryStore.connectAckTime=d,a.MessageUtil.setDeltaTime(d)}else if(6==b){a.RongIMClient.getInstance().disconnect();var f=this,i=f._client,j=i.appId,k=i.token;(new a.Navigation).requestNavi(k,j,function(){i.clearHeartbeat();var b=new a.Client(k,j);a.Bridge._client=b,b.__init(function(){"websocket"==a.Transportations._TransportType&&b.keepLive()})},f._timeout,!1)}else a.Bridge._client.channel.socket.socket._status=b,this._client.reconnectObj.onError?(this._client.reconnectObj.onError(b),delete this._client.reconnectObj.onError):this._timeout(b)},d.prototype.readTimeOut=function(a){b.prototype.readTimeOut.call(this,a)},d}(b);a.ConnectAck=f}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(){}return b.clear=function(){var b=a.RongIMClient._storageProvider;b.removeItem("rc_uid"),b.removeItem("serverIndex"),b.removeItem("rongSDK")},b.prototype.getNaviSuccess=function(c,d){var e=a.RongIMClient._storageProvider;e.setItem("fullnavi",JSON.stringify(c));var f=a.RongUtil.getUrlProtocol(d);a.RongIMClient.setProtocol(f),e.setItem(b.StoreProtocolKey,f);var g=c.server;g&&(g+=",");var h=c.backupServer||"",i="{server}{backupServer}",j=a.RongUtil.tplEngine(i,{server:g,backupServer:h});j=j.split(","),e.setItem("servers",JSON.stringify(j));var k=a.RongIMClient._memoryStore.token,l=a.InnerUtil.getUId(k);e.setItem("rc_uid",l);var m=c.userId;if(e.setItem("current_user",m),e.setItem("navi_time",a.RongUtil.getTimestamp()),c.voipCallInfo){var n=JSON.parse(c.voipCallInfo);a.RongIMClient._memoryStore.voipStategy=n.strategy,e.setItem("voipStrategy",n.strategy)}var o=c.openMp;e.setItem("openMp"+l,o),a.RongIMClient._memoryStore.depend.openMp=o},b.prototype.connect=function(b,c,d){var e=a.RongIMClient._storageProvider.getItem("appId");e&&e!=b&&(a.RongIMClient._storageProvider.clearItem(),a.RongIMClient._storageProvider.setItem("appId",b)),e||a.RongIMClient._storageProvider.setItem("appId",b);var f=new a.Client(c,b);return this.requestNavi(c,b,function(){f.connect(d)},d.onError,!0),f},b.prototype.requestNavi=function(c,d,e,f,g){if(g){var h=md5(c).slice(8,16),i=a.RongIMClient._storageProvider,j=i.getItem("rongSDK"),k=a.Transportations._TransportType==j,l=i.getItem("rc_uid"),m=l==h,n=i.getItem("servers"),o="string"==typeof n,p=a.RongUtil.getTimestamp(),q=Number(i.getItem("navi_time"))||0,r=p-q<a.RongIMClient.NavExpiredTime;if(m&&k&&o&&a.RongUtil.hasValidWsUrl(n)&&r){a.RongIMClient._memoryStore.voipStategy=i.getItem("voipStrategy");var s=i.getItem("openMp"+h);a.RongIMClient._memoryStore.depend.openMp=s;var t=i.getItem(b.StoreProtocolKey);return t&&a.RongIMClient.setProtocol(t),void e()}}b.clear(),a.RongIMClient.invalidWsUrls=[];var u=this,v=a.Channel._ConnectionStatusListener,w=a.RongIMClient._memoryStore.depend,x=w.navigaters,y=w.naviTimeout,z=w.maxNaviRetry,A=w.isNaviJSONP,B=a.RongUtil.isSupportRequestHeaders(),C=!B||A,D=C?u.requestJSONP:u.request,E=new a.Timer({timeout:y}),F=1,G=function(){return F>=z},H=new a.IndexTools({items:x,onwheel:function(){F+=1}}),I=function(){if(G())return void f(a.ConnectionStatus.RESPONSE_NAVI_ERROR);var b=H.get(),g=x[b];g=a.RongUtil.getValidNavi(g),H.add();var h=function(b){E.pause(),v.onChanged(a.ConnectionStatus.RESPONSE_NAVI);var c=b.code;a.RongUtil.isEqual(c,200)&&(u.getNaviSuccess(b,g),e()),a.RongUtil.isEqual(c,401)&&f(a.ConnectionState.TOKEN_INCORRECT),a.RongUtil.isEqual(c,403)&&v.onChanged(a.ConnectionStatus.APPKEY_IS_FAKE)},i=function(b){a.RongUtil.isEqual(b,0)||(E.pause(),v.onChanged(a.ConnectionStatus.RESPONSE_NAVI_ERROR),I())};v.onChanged(a.ConnectionStatus.REQUEST_NAVI);var j=D.call(u,g,d,c,h,i);E.resume(function(){v.onChanged(a.ConnectionStatus.RESPONSE_NAVI_TIMEOUT),j.abort(),I()})};I()},b.prototype.getPath=function(b,c,d,e){var f=a.RongIMClient._memoryStore.depend,g=f.isPolling?"cometnavi":"navi";d=encodeURIComponent(d);var h=a.RongIMClient.sdkver,i=a.RongUtil.getTimestamp();return a.RongUtil.tplEngine("{navi}/{path}.js?appId={appId}&token={token}&callBack={callback}&v={sdkver}&r={random}",{navi:b,path:g,appId:c,token:d,sdkver:h,random:i,callback:e})},b.prototype.request=function(b,c,d,e,f){var g=this.getPath(b,c,d,"getServerEndpoint");return a.RongUtil.request({url:g,success:function(a){a=a.replace("getServerEndpoint(","").replace(");","");var b=a.lastIndexOf(")");b==a.length-1&&(a=a.substr(0,b)),e(JSON.parse(a))},error:function(a,b){401==a||403==a?e(JSON.parse(b)):f(a)}})},b.prototype.requestJSONP=function(b,c,d,e,f){var g="getServerEndpoint";window.getServerEndpoint=function(b){if(200!==b.code)return f(a.ConnectionState.TOKEN_INCORRECT);e(b)};var h=this.getPath(b,c,d,g),i=document.createElement("script");i.src=h,document.body.appendChild(i),i.onerror=function(){f(a.ConnectionState.TOKEN_INCORRECT)}},b.StoreProtocolKey="navprotocol",b.Endpoint=new Object,b}();a.Navigation=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(b){this._name="BaseMessage",this.lengthSize=0,b instanceof a.Header?this._header=b:this._header=new a.Header(b,!1,a.Qos.AT_MOST_ONCE,!1)}return b.prototype.read=function(a,b){this.readMessage(a,b)},b.prototype.write=function(b){var c=new a.BinaryHelper,d=c.convertStream(b);return this._headerCode=this.getHeaderFlag(),d.write(this._headerCode),this.writeMessage(d),d},b.prototype.getHeaderFlag=function(){return this._header.encode()},b.prototype.getLengthSize=function(){return this.lengthSize},b.prototype.toBytes=function(){return this.write([]).getBytesArray()},b.prototype.isRetained=function(){return this._header.retain},b.prototype.setRetained=function(a){this._header.retain=a},b.prototype.setQos=function(b){this._header.qos="[object Object]"==Object.prototype.toString.call(b)?b:a.Qos[b]},b.prototype.setDup=function(a){this._header.dup=a},b.prototype.isDup=function(){return this._header.dup},b.prototype.getType=function(){return this._header.type},b.prototype.getQos=function(){return this._header.qos},b.prototype.messageLength=function(){return 0},b.prototype.writeMessage=function(a){},b.prototype.readMessage=function(a,b){},b.prototype.init=function(a){var b,c,d=this;for(c in a)a.hasOwnProperty(c)&&(b=c.replace(/^\w/,function(a){var b=a.charCodeAt(0);return"set"+(b>=97?String.fromCharCode(-33&b):a)}))in d&&("status"==c?d[b](disconnectStatus[a[c]]?disconnectStatus[a[c]]:a[c]):d[b](a[c]))},b}();a.BaseMessage=b;var c=function(b){function c(c){switch(b.call(this,0==arguments.length||3==arguments.length?a.Type.CONNECT:arguments[0]),this._name="ConnectMessage",this.CONNECT_HEADER_SIZE=12,this.protocolId="RCloud",this.binaryHelper=new a.BinaryHelper,this.protocolVersion=3,arguments.length){case 0:case 1:case 3:if(!arguments[0]||arguments[0].length>64)throw new Error("ConnectMessage:Client Id cannot be null and must be at most 64 characters long: "+arguments[0]);this.clientId=arguments[0],this.cleanSession=arguments[1],this.keepAlive=arguments[2]}}return __extends(c,b),c.prototype.messageLength=function(){var a=this.binaryHelper.toMQttString(this.clientId).length;return a+=this.binaryHelper.toMQttString(this.willTopic).length,a+=this.binaryHelper.toMQttString(this.will).length,a+=this.binaryHelper.toMQttString(this.appId).length,(a+=this.binaryHelper.toMQttString(this.token).length)+this.CONNECT_HEADER_SIZE},c.prototype.readMessage=function(a){this.protocolId=a.readUTF(),this.protocolVersion=a.readByte();var b=a.readByte();if(this.hasAppId=(128&b)>0,this.hasToken=(64&b)>0,this.retainWill=(32&b)>0,this.willQos=b>>3&3,this.hasWill=(4&b)>0,this.cleanSession=(32&b)>0,this.keepAlive=256*a.read()+a.read(),this.clientId=a.readUTF(),this.hasWill&&(this.willTopic=a.readUTF(),this.will=a.readUTF()),this.hasAppId)try{this.appId=a.readUTF()}catch(c){throw new Error(c)}if(this.hasToken)try{this.token=a.readUTF()}catch(c){throw new Error(c)}return a},c.prototype.writeMessage=function(a){var b=this.binaryHelper.convertStream(a);b.writeUTF(this.protocolId),b.write(this.protocolVersion);var c=this.cleanSession?2:0;return c|=this.hasWill?4:0,c|=this.willQos?this.willQos>>3:0,c|=this.retainWill?32:0,c|=this.hasToken?64:0,c|=this.hasAppId?128:0,b.write(c),b.writeChar(this.keepAlive),b.writeUTF(this.clientId),this.hasWill&&(b.writeUTF(this.willTopic),b.writeUTF(this.will)),this.hasAppId&&b.writeUTF(this.appId),this.hasToken&&b.writeUTF(this.token),b},c}(b);a.ConnectMessage=c;var d=function(b){function c(c){b.call(this,0==arguments.length?a.Type.CONNACK:1==arguments.length?arguments[0]instanceof a.Header?arguments[0]:a.Type.CONNACK:null),this._name="ConnAckMessage",this.MESSAGE_LENGTH=2,this.binaryHelper=new a.BinaryHelper;var d=this;switch(arguments.length){case 0:case 1:if(!(arguments[0]instanceof a.Header)&&arguments[0]in a.ConnectionState){if(null==arguments[0])throw new Error("ConnAckMessage:The status of ConnAskMessage can't be null");d.setStatus(arguments[0])}}}return __extends(c,b),c.prototype.messageLength=function(){var a=this.MESSAGE_LENGTH;return this.userId&&(a+=this.binaryHelper.toMQttString(this.userId).length),a},c.prototype.readMessage=function(a,b){a.read();var c=+a.read();if(!(c>=0&&c<=12))throw new Error("Unsupported CONNACK code:"+c);if(this.setStatus(c),b>this.MESSAGE_LENGTH){this.setUserId(a.readUTF());var d=(a.readUTF(),a.readLong());this.setTimestamp(d)}},c.prototype.writeMessage=function(a){var b=this.binaryHelper.convertStream(a);switch(b.write(128),+status){case 0:case 1:case 2:case 5:case 6:b.write(+status);break;case 3:case 4:b.write(3);break;default:throw new Error("Unsupported CONNACK code:"+status)}return this.userId&&b.writeUTF(this.userId),b},c.prototype.setStatus=function(a){this.status=a},c.prototype.setUserId=function(a){this.userId=a},c.prototype.getStatus=function(){return this.status},c.prototype.getUserId=function(){return this.userId},c.prototype.setTimestamp=function(a){this.timestrap=a},c.prototype.getTimestamp=function(){return this.timestrap},c}(b);a.ConnAckMessage=d;var e=function(b){function c(c){b.call(this,c instanceof a.Header?c:a.Type.DISCONNECT),this._name="DisconnectMessage",this.MESSAGE_LENGTH=2,this.binaryHelper=new a.BinaryHelper,c instanceof a.Header||c in a.ConnectionStatus&&(this.status=c)}return __extends(c,b),c.prototype.messageLength=function(){return this.MESSAGE_LENGTH},c.prototype.readMessage=function(a){a.read();var b=+a.read();if(!(b>=0&&b<=5))throw new Error("Unsupported CONNACK code:"+b);this.setStatus(disconnectStatus[b]?disconnectStatus[b]:b)},c.prototype.writeMessage=function(a){var b=this.binaryHelper.convertStream(a);if(b.write(0),!(+status>=1&&+status<=3))throw new Error("Unsupported CONNACK code:"+status);b.write(+status-1)},c.prototype.setStatus=function(a){this.status=a},c.prototype.getStatus=function(){return this.status},c}(b);a.DisconnectMessage=e;var f=function(b){function c(c){b.call(this,c&&c instanceof a.Header?c:a.Type.PINGREQ),this._name="PingReqMessage"}return __extends(c,b),c}(b);a.PingReqMessage=f;var g=function(b){function c(c){b.call(this,c&&c instanceof a.Header?c:a.Type.PINGRESP),this._name="PingRespMessage"}return __extends(c,b),c}(b);a.PingRespMessage=g;var h=function(b){function c(c){b.call(this,c),this._name="RetryableMessage",this.binaryHelper=new a.BinaryHelper}return __extends(c,b),c.prototype.messageLength=function(){return 2},c.prototype.writeMessage=function(a){var b=this.binaryHelper.convertStream(a),c=this.getMessageId(),d=255&c,e=(65280&c)>>8;return b.write(e),b.write(d),b},c.prototype.readMessage=function(a,b){var c=256*a.read()+a.read();this.setMessageId(parseInt(c,10))},c.prototype.setMessageId=function(a){this.messageId=a},c.prototype.getMessageId=function(){return this.messageId},c}(b);a.RetryableMessage=h;var i=function(b){function c(c){b.call(this,c instanceof a.Header?c:a.Type.PUBACK),this.msgLen=2,this.date=0,this.millisecond=0,this.timestamp=0,this.binaryHelper=new a.BinaryHelper,this._name="PubAckMessage",c instanceof a.Header||b.prototype.setMessageId.call(this,c)}return __extends(c,b),c.prototype.messageLength=function(){return this.msgLen},c.prototype.writeMessage=function(a){var b=this.binaryHelper.convertStream(a);h.prototype.writeMessage.call(this,b)},c.prototype.readMessage=function(a,b){h.prototype.readMessage.call(this,a),this.date=a.readInt(),this.status=256*a.read()+a.read(),this.millisecond=256*a.read()+a.read(),this.timestamp=1e3*this.date+this.millisecond,this.messageUId=a.readUTF()},c.prototype.setStatus=function(a){this.status=a},c.prototype.setTimestamp=function(a){this.timestamp=a},c.prototype.setMessageUId=function(a){this.messageUId=a},c.prototype.getStatus=function(){return this.status},c.prototype.getDate=function(){return this.date},c.prototype.getTimestamp=function(){return this.timestamp},c.prototype.getMessageUId=function(){return this.messageUId},c}(h);a.PubAckMessage=i;var j=function(b){function c(c,d,e){b.call(this,1==arguments.length&&c instanceof a.Header?c:3==arguments.length?a.Type.PUBLISH:0),this._name="PublishMessage",this.binaryHelper=new a.BinaryHelper,this.syncMsg=!1,3==arguments.length&&(this.topic=c,this.targetId=e,this.data="string"==typeof d?this.binaryHelper.toMQttString(d):d)}return __extends(c,b),c.prototype.messageLength=function(){var a=10;return a+=this.binaryHelper.toMQttString(this.topic).length,a+=this.binaryHelper.toMQttString(this.targetId).length,a+=this.data.length},c.prototype.writeMessage=function(a){var b=this.binaryHelper.convertStream(a);b.writeUTF(this.topic),b.writeUTF(this.targetId),h.prototype.writeMessage.apply(this,arguments),b.write(this.data)},c.prototype.readMessage=function(a,b){var c=6;this.date=a.readInt(),this.topic=a.readUTF(),c+=this.binaryHelper.toMQttString(this.topic).length,this.targetId=a.readUTF(),c+=this.binaryHelper.toMQttString(this.targetId).length,h.prototype.readMessage.apply(this,arguments),this.data=new Array(b-c),this.data=a.read(this.data)},c.prototype.setTopic=function(a){this.topic=a},c.prototype.setData=function(a){this.data=a},c.prototype.setTargetId=function(a){this.targetId=a},c.prototype.setDate=function(a){this.date=a},c.prototype.setSyncMsg=function(a){this.syncMsg=a},c.prototype.getSyncMsg=function(){return this.syncMsg},c.prototype.getTopic=function(){return this.topic},c.prototype.getData=function(){return this.data},c.prototype.getTargetId=function(){return this.targetId},c.prototype.getDate=function(){return this.date},c}(h);a.PublishMessage=j;var k=function(b){function c(c,d,e){b.call(this,c instanceof a.Header?c:3==arguments.length?a.Type.QUERY:null),this.binaryHelper=new a.BinaryHelper,this._name="QueryMessage",3==arguments.length&&(this.data="string"==typeof d?this.binaryHelper.toMQttString(d):d,this.topic=c,this.targetId=e)}return __extends(c,b),c.prototype.messageLength=function(){var a=0;return a+=this.binaryHelper.toMQttString(this.topic).length,a+=this.binaryHelper.toMQttString(this.targetId).length,a+=2,a+=this.data.length},c.prototype.writeMessage=function(a){var b=this.binaryHelper.convertStream(a);b.writeUTF(this.topic),b.writeUTF(this.targetId),h.prototype.writeMessage.call(this,b),b.write(this.data)},c.prototype.readMessage=function(a,b){var c=0;this.topic=a.readUTF(),this.targetId=a.readUTF(),c+=this.binaryHelper.toMQttString(this.topic).length,c+=this.binaryHelper.toMQttString(this.targetId).length,this.readMessage.apply(this,arguments),c+=2,this.data=new Array(b-c),a.read(this.data)},c.prototype.setTopic=function(a){this.topic=a},c.prototype.setData=function(a){this.data=a},c.prototype.setTargetId=function(a){this.targetId=a},c.prototype.getTopic=function(){return this.topic},c.prototype.getData=function(){return this.data},c.prototype.getTargetId=function(){return this.targetId},c}(h);a.QueryMessage=k;var l=function(b){function c(c){b.call(this,c instanceof a.Header?c:a.Type.QUERYCON),this._name="QueryConMessage",c instanceof a.Header||b.prototype.setMessageId.call(this,c)}return __extends(c,b),c}(h);a.QueryConMessage=l;var m=function(b){function c(c){b.call(this,c),this._name="QueryAckMessage",this.binaryHelper=new a.BinaryHelper}return __extends(c,b),c.prototype.readMessage=function(a,b){h.prototype.readMessage.call(this,a),this.date=a.readInt(),this.setStatus(256*a.read()+a.read()),b>0&&(this.data=new Array(b-8),this.data=a.read(this.data))},c.prototype.getData=function(){return this.data},c.prototype.getStatus=function(){return this.status},c.prototype.getDate=function(){return this.date},c.prototype.setDate=function(a){this.date=a},c.prototype.setStatus=function(a){this.status=a},c.prototype.setData=function(a){this.data=a},c}(h);a.QueryAckMessage=m}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(b){var c=new a.BinaryHelper;this.out=c.convertStream(b)}return b.prototype.writeMessage=function(b){b instanceof a.BaseMessage&&b.write(this.out)},b}();a.MessageOutputStream=b;var c=function(){function b(b,c){if(c)this.flags=b.headerCode;else{var d=(new a.BinaryHelper).convertStream(b);this.flags=d.readByte(),this._in=d}this.header=new a.Header(this.flags),this.isPolling=c,this.In=b}return b.prototype.readMessage=function(){switch(this.header.getType()){case 1:this.msg=new a.ConnectMessage(this.header);break;case 2:this.msg=new a.ConnAckMessage(this.header);break;case 3:this.msg=new a.PublishMessage(this.header),this.msg.setSyncMsg(this.header.getSyncMsg());break;case 4:this.msg=new a.PubAckMessage(this.header);break;case 5:this.msg=new a.QueryMessage(this.header);break;case 6:this.msg=new a.QueryAckMessage(this.header);break;case 7:this.msg=new a.QueryConMessage(this.header);break;case 9:case 11:case 13:this.msg=new a.PingRespMessage(this.header);break;case 8:case 10:case 12:this.msg=new a.PingReqMessage(this.header);break;case 14:this.msg=new a.DisconnectMessage(this.header);break;default:throw new Error("No support for deserializing "+this.header.getType()+" messages")}return this.isPolling?this.msg.init(this.In):this.msg.read(this._in,this.In.length-1),this.msg},b}();a.MessageInputStream=c;var d=function(){function b(b,c,d,e){this.retain=!1,this.qos=a.Qos.AT_LEAST_ONCE,this.dup=!1,this.syncMsg=!1,b&&+b==b&&1==arguments.length?(this.retain=(1&b)>0,this.qos=(6&b)>>1,this.dup=(8&b)>0,this.type=b>>4&15,this.syncMsg=8==(8&b)):(this.type=b,this.retain=c,this.qos=d,this.dup=e)}return b.prototype.getSyncMsg=function(){return this.syncMsg},b.prototype.getType=function(){return this.type},b.prototype.encode=function(){var b=this;switch(this.qos){case a.Qos[0]:b.qos=a.Qos.AT_MOST_ONCE;break;case a.Qos[1]:b.qos=a.Qos.AT_LEAST_ONCE;break;case a.Qos[2]:b.qos=a.Qos.EXACTLY_ONCE;break;case a.Qos[3]:b.qos=a.Qos.DEFAULT}var c=this.type<<4;return c|=this.retain?1:0,c|=this.qos<<1,c|=this.dup?8:0},b.prototype.toString=function(){return"Header [type="+this.type+",retain="+this.retain+",qos="+this.qos+",dup="+this.dup+"]"},b}();a.Header=d;var e=function(){function a(){}return a.prototype.writeUTF=function(a,b){for(var c=[],d=0,e=0,f=a.length;e<f;e++){var g=a.charCodeAt(e);g>=0&&g<=127?(d+=1,c.push(g)):g>=128&&g<=2047?(d+=2,c.push(192|31&g>>6),c.push(128|63&g)):g>=2048&&g<=65535&&(d+=3,c.push(224|15&g>>12),c.push(128|63&g>>6),c.push(128|63&g))}for(var e=0,f=c.length;e<f;e++)c[e]>255&&(c[e]&=255);return b?c:d<=255?[0,d].concat(c):[d>>8,255&d].concat(c)},a.prototype.readUTF=function(a){if("[object String]"==Object.prototype.toString.call(a))return a;for(var b="",c=a,d=0,e=c.length;d<e;d++){c[d]<0&&(c[d]+=256);var f=c[d].toString(2),g=f.match(/^1+?(?=0)/);if(g&&8==f.length){for(var h=g[0].length,i="",j=0;j<h;j++)i+=c[j+d].toString(2).slice(2);b+=String.fromCharCode(parseInt(i,2)),d+=h-1}else b+=String.fromCharCode(c[d])}return b},a.prototype.convertStream=function(a){return a instanceof f?a:new f(a)},a.prototype.toMQttString=function(a){return this.writeUTF(a)},a}();a.BinaryHelper=e;var f=function(){function a(a){this.position=0,this.writen=0,this.poolLen=0,this.binaryHelper=new e,this.pool=a,this.poolLen=a.length}return a.prototype.check=function(){return this.position>=this.pool.length},a.prototype.readInt=function(){if(this.check())return-1;for(var a="",b=0;b<4;b++){var c=this.pool[this.position++].toString(16);1==c.length&&(c="0"+c),a+=c.toString(16)}return parseInt(a,16)},a.prototype.readLong=function(){if(this.check())return-1;for(var a="",b=0;b<8;b++){var c=this.pool[this.position++].toString(16);1==c.length&&(c="0"+c),a+=c}return parseInt(a,16)},a.prototype.readTimestamp=function(){if(this.check())return-1;for(var a="",b=0;b<8;b++)a+=this.pool[this.position++].toString(16);return a=a.substring(2,8),parseInt(a,16)},a.prototype.readUTF=function(){if(this.check())return-1;var a=this.readByte()<<8|this.readByte();return this.binaryHelper.readUTF(this.pool.subarray(this.position,this.position+=a))},a.prototype.readByte=function(){if(this.check())return-1;var a=this.pool[this.position++];return a>255&&(a&=255),a},a.prototype.read=function(a){return a?this.pool.subarray(this.position,this.poolLen):this.readByte()},a.prototype.write=function(a){var b=a;if("[object array]"==Object.prototype.toString.call(b).toLowerCase())try{this.pool=this.pool.concat(b)}catch(c){
[].push.apply(this.pool,b)}else+b==b&&(b>255&&(b&=255),this.pool.push(b),this.writen++);return b},a.prototype.writeChar=function(a){if(+a!=a)throw new Error("writeChar:arguments type is error");this.write(a>>8&255),this.write(255&a),this.writen+=2},a.prototype.writeUTF=function(a){var b=this.binaryHelper.writeUTF(a);[].push.apply(this.pool,b),this.writen+=b.length},a.prototype.toComplements=function(){for(var a=this.pool,b=0;b<this.poolLen;b++)a[b]>128&&(a[b]-=256);return a},a.prototype.getBytesArray=function(a){return a?this.toComplements():this.pool},a}();a.RongIMStream=f}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(a){return this.connected=!1,this.isClose=!1,this.queue=[],this.empty=new Function,this._socket=a,this}return b.prototype.createTransport=function(b,c){if(!b)throw new Error("URL can't be empty");this.url=b;var d=a.RongIMClient._memoryStore.depend,e=d.wsScheme;return b=a.RongUtil.tplEngine("{wsScheme}{url}",{wsScheme:e,url:b}),this.socket=new WebSocket(b),this.socket.binaryType="arraybuffer",this.addEvent(),this.socket},b.prototype.send=function(b){if(!this.connected&&!this.isClose)return void this.queue.push(b);if(this.isClose)return void this._socket.fire("StatusChanged",a.ConnectionStatus.CONNECTION_CLOSED);var c=new a.RongIMStream([]);new a.MessageOutputStream(c).writeMessage(b);var d=c.getBytesArray(!0),e=new Int8Array(d);return this.socket.send(e.buffer),this},b.prototype.onData=function(b){return a.MessageUtil.isArray(b)?this._socket.onMessage(new a.MessageInputStream(b).readMessage()):this._socket.onMessage(new a.MessageInputStream(a.MessageUtil.ArrayFormInput(b)).readMessage()),""},b.prototype.onClose=function(c){var d=this;if(d.isClose=!0,d.socket=this.empty,a.Bridge._client.clearHeartbeat(),1006!=c.code||this._status)d._status=0;else{if((new Date).getTime()-d.connectedTime<=b.MinConnectTime){var e=a.RongUtil.getUrlHost(d.url);a.RongIMClient.invalidWsUrls.push(e)}d._socket.fire("StatusChanged",a.ConnectionStatus.NETWORK_UNAVAILABLE)}},b.prototype.onError=function(b){throw this._socket.fire("StatusChanged",a.ConnectionStatus.WEBSOCKET_ERROR),new Error(b)},b.prototype.addEvent=function(){var a=this;a.socket.onopen=function(){a.connected=!0,a.isClose=!1,a.doQueue(),a._socket.fire("connect"),a.connectedTime=(new Date).getTime()},a.socket.onmessage=function(b){"string"==typeof b.data?a.onData(b.data.split(",")):a.onData(b.data)},a.socket.onerror=function(b){a.onError(b)},a.socket.onclose=function(b){a.onClose(b)}},b.prototype.doQueue=function(){for(var a=this,b=0,c=a.queue.length;b<c;b++)a.send(a.queue[b])},b.prototype.disconnect=function(a){var b=this;b.socket.readyState&&(b.isClose=!0,a&&(b._status=a),b.socket.close())},b.prototype.reconnect=function(){this.disconnect(),this.createTransport(this.url)},b.prototype.close=function(){this.socket.close()},b.MinConnectTime=5e3,b}();a.SocketTransportation=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(a){return this.empty=new Function,this.connected=!1,this.pid=+new Date+Math.random()+"",this.queue=[],this.socket=a,this}return b.prototype.createTransport=function(b,c){if(!b)throw new Error("Url is empty,Please check it!");this.url=b;var d=a.RongIMClient._storageProvider.getItem("sId"+a.Navigation.Endpoint.userId),e=this;return d?(setTimeout(function(){e.onSuccess('{"status":0,"userId":"'+a.Navigation.Endpoint.userId+'","headerCode":32,"messageId":0,"sessionid":"'+d+'"}'),e.connected=!0},500),this):(this.getRequest(b,!0),this)},b.prototype.requestFactory=function(b,c,d){var e=this.XmlHttpRequest();return d&&(e.multipart=!0),e.open(c||"GET",a.RongIMClient._memoryStore.depend.protocol+b),"POST"==c&&"setRequestHeader"in e&&e.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8"),e},b.prototype.getRequest=function(b,c){var d=this;d.xhr=this.requestFactory(b+"&pid="+encodeURIComponent(d.pid),"GET");var e=new a.Timer({timeout:45e3});"onload"in d.xhr?(d.xhr.onload=function(){e.pause(),d.xhr.onload=d.empty,"lost params"==this.responseText?d.onError():d.onSuccess(this.responseText,c)},d.xhr.onerror=function(){e.pause(),d.disconnect()}):d.xhr.onreadystatechange=function(){e.pause(),4==d.xhr.readyState&&(d.xhr.onreadystatechange=d.empty,/^(200|202)$/.test(d.xhr.status)?d.onSuccess(d.xhr.responseText,c):/^(400|403)$/.test(d.xhr.status)?d.onError():d.disconnect())},e.resume(function(){d.onError()}),d.xhr.send()},b.prototype.send=function(b){var c=this,d=c.sendxhr=this.requestFactory(a.Navigation.Endpoint.host+"/websocket"+b.url+"&pid="+encodeURIComponent(c.pid),"POST");"onload"in d?(d.onload=function(){d.onload=c.empty,c.onData(d.responseText)},d.onerror=function(){d.onerror=c.empty}):d.onreadystatechange=function(){4==d.readyState&&(this.onreadystatechange=this.empty,/^(202|200)$/.test(d.status)&&c.onData(d.responseText))},d.send(JSON.stringify(b.data))},b.prototype.onData=function(b,c){if(b&&"lost params"!=b){var d=this,e=JSON.parse(b);return e.userId&&(a.Navigation.Endpoint.userId=e.userId),c&&a.RongIMClient._storageProvider.setItem("sId"+a.Navigation.Endpoint.userId,c),a.MessageUtil.isArray(e)||(e=[e]),Array.forEach(e,function(b){d.socket.fire("message",new a.MessageInputStream(b,!0).readMessage())}),""}},b.prototype.XmlHttpRequest=function(){var a="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;return"undefined"!=typeof XMLHttpRequest&&a?new XMLHttpRequest:"undefined"!=typeof XDomainRequest?new XDomainRequest:new ActiveXObject("Microsoft.XMLHTTP")},b.prototype.onClose=function(){this.xhr&&(this.xhr.onload?this.xhr.onreadystatechange=this.xhr.onload=this.empty:this.xhr.onreadystatechange=this.empty,this.xhr.abort(),this.xhr=null),this.sendxhr&&(this.sendxhr.onload?this.sendxhr.onreadystatechange=this.sendxhr.onload=this.empty:this.sendxhr.onreadystatechange=this.empty,this.sendxhr.abort(),this.sendxhr=null)},b.prototype.disconnect=function(){a.RongIMClient._storageProvider.removeItem("sId"+a.Navigation.Endpoint.userId),a.RongIMClient._storageProvider.removeItem(a.Navigation.Endpoint.userId+"msgId"),this.onClose()},b.prototype.reconnect=function(){this.disconnect(),this.createTransport(this.url)},b.prototype.onSuccess=function(b,c){var d=b.match(/"sessionid":"\S+?(?=")/);if(this.onData(b,d?d[0].slice(13):0),/"headerCode":-32,/.test(b))return a.RongIMClient._storageProvider.removeItem("sId"+a.Navigation.Endpoint.userId),void a.RongIMClient._storageProvider.removeItem(a.Navigation.Endpoint.userId+"msgId");this.getRequest(a.Navigation.Endpoint.host+"/pullmsg.js?sessionid="+a.RongIMClient._storageProvider.getItem("sId"+a.Navigation.Endpoint.userId)+"&timestrap="+encodeURIComponent((new Date).getTime()+Math.random()+"")),this.connected=!0,c&&this.socket.fire("connect")},b.prototype.onError=function(){if(a.RongIMClient._storageProvider.removeItem("sId"+a.Navigation.Endpoint.userId),a.RongIMClient._storageProvider.removeItem(a.Navigation.Endpoint.userId+"msgId"),this.onClose(),this.connected){this.connected=!1;var b=a.ConnectionStatus.NETWORK_UNAVAILABLE;this.socket.fire("disconnect",b)}},b.prototype.close=function(){this.xhr.abort(),this.sendxhr=null},b}();a.PollingTransportation=b}(RongIMLib||(RongIMLib={}));var typeMapping={"RC:TxtMsg":"TextMessage","RC:ImgMsg":"ImageMessage","RC:VcMsg":"VoiceMessage","RC:ImgTextMsg":"RichContentMessage","RC:ReferenceMsg":"ReferenceMessage","RC:FileMsg":"FileMessage","RC:HQVCMsg":"HQVoiceMessage","RC:GIFMsg":"GIFMessage","RC:SightMsg":"SightMessage","RC:LBSMsg":"LocationMessage","RC:InfoNtf":"InformationNotificationMessage","RC:ContactNtf":"ContactNotificationMessage","RC:ProfileNtf":"ProfileNotificationMessage","RC:CmdNtf":"CommandNotificationMessage","RC:DizNtf":"DiscussionNotificationMessage","RC:CmdMsg":"CommandMessage","RC:TypSts":"TypingStatusMessage","RC:CsChaR":"ChangeModeResponseMessage","RC:CsHsR":"HandShakeResponseMessage","RC:CsEnd":"TerminateMessage","RC:CsSp":"SuspendMessage","RC:CsUpdate":"CustomerStatusUpdateMessage","RC:ReadNtf":"ReadReceiptMessage","RC:VCAccept":"AcceptMessage","RC:VCRinging":"RingingMessage","RC:VCSummary":"SummaryMessage","RC:VCHangup":"HungupMessage","RC:VCInvite":"InviteMessage","RC:VCModifyMedia":"MediaModifyMessage","RC:VCModifyMem":"MemberModifyMessage","RC:CsContact":"CustomerContact","RC:PSImgTxtMsg":"PublicServiceRichContentMessage","RC:PSMultiImgTxtMsg":"PublicServiceMultiRichContentMessage","RC:GrpNtf":"GroupNotificationMessage","RC:PSCmd":"PublicServiceCommandMessage","RC:RcCmd":"RecallCommandMessage","RC:SRSMsg":"SyncReadStatusMessage","RC:RRReqMsg":"ReadReceiptRequestMessage","RC:RRRspMsg":"ReadReceiptResponseMessage","RCJrmf:RpMsg":"JrmfRedPacketMessage","RCJrmf:RpOpendMsg":"JrmfRedPacketOpenedMessage","RC:CombineMsg":"RCCombineMessage","RC:chrmKVNotiMsg":"ChrmKVNotificationMessage"},registerMessageTypeMapping={},HistoryMsgType={4:"qryCMsg",2:"qryDMsg",3:"qryGMsg",1:"qryPMsg",6:"qrySMsg",7:"qryPMsg",8:"qryPMsg",5:"qryCMsg"},disconnectStatus={1:6},RongIMLib;!function(a){var b=function(){function b(){}return b.isIncludeNavi=function(b){return-1!==a.RongUtil.indexOf(b,a.RongIMClient.NavMarkInToken)},b.getToken=function(c){if(b.isIncludeNavi(c)){var d=a.RongUtil.indexOf(c,a.RongIMClient.NavMarkInToken);c=c.substring(0,d+1)}return c},b.getNavsByToken=function(c,d){var e=b.isIncludeNavi(c),f=[];if(e){var g=a.RongUtil.indexOf(c,a.RongIMClient.NavMarkInToken),h=c.substring(g+1,c.length),i=h.split(a.RongIMClient.NavSeparatorInToken);a.RongUtil.forEach(i,function(b){if(!a.RongUtil.isEmpty(b)){var c=a.RongUtil.formatProtoclPath({path:b,protocol:d,sub:!0});f.push(c)}})}return f},b}();a.IMHandler=b;var c=function(){function b(){}return b._TransportType=a.Socket.WEBSOCKET,b}();a.Transportations=c;var d=function(){function b(){}return b.$getKey=function(b){var c=a.Bridge._client,d=c.userId,e=1==b.messageDirection?"send":"receive",f=a.RongIMClient._memoryStore.appKey;return a.RongUtil.tplEngine("{appkey}_{userId}_{direction}box",{appkey:f,userId:d,direction:e})},b.set=function(c){var d=b.$getKey(c),e=c.sentTime;a.RongIMClient._storageProvider.setItem(d,e)},b.get=function(){var c=b.$getKey({messageDirection:a.MessageDirection.SEND}),d=b.$getKey({messageDirection:a.MessageDirection.RECEIVE}),e=a.RongIMClient._storageProvider;return{sent:Number(e.getItem(c)||0),received:Number(e.getItem(d)||0)}},b}();a.SyncTimeUtil=d;var e=function(){function b(){}return b.checkStorageSize=function(){return JSON.stringify(localStorage).length<468e4},b.getFirstKey=function(a){var b="";for(var c in a){b=c;break}return b},b.isEmpty=function(a){var b=!0;for(var c in a){b=!1;break}return b},b.ArrayForm=function(a){if("[object ArrayBuffer]"==Object.prototype.toString.call(a)){var b=new Int8Array(a);return[].slice.call(b)}return a},b.ArrayFormInput=function(a){if("[object ArrayBuffer]"==Object.prototype.toString.call(a)){return new Uint8Array(a)}return a},b.indexOf=function(a,b,c){for(var d=a.length,e=c<0?Math.max(0,+c):c||0;e<d;e++)if(a[e]==b)return e;return-1},b.isArray=function(a){return"[object Array]"==Object.prototype.toString.call(a)},b.forEach=function(a,b){return[].forEach?function(a,b){[].forEach.call(a,b)}:function(a,b){for(var c=0;c<a.length;c++)b.call(a,a[c],c,a)}},b.remove=function(a,b){for(var c=0,d=a.length;c<d;c++)if(b(a[c]))return a.splice(c,1)[0];return null},b.int64ToTimestamp=function(a,b){if(void 0===a.low)return a;var c=a.low;c<0&&(c+=4294967296),c=c.toString(16);var d=parseInt(a.high.toString(16)+"00000000".replace(new RegExp("0{"+c.length+"}$"),c),16);return b?new Date(d):d},b.messageParser=function(c,d,e){var f,g,h=new a.Message,i=c.content,j=c.classname,k=!1;try{a.RongIMClient._memoryStore.depend.isPolling?(g=(new a.BinaryHelper).readUTF(i.offset?b.ArrayForm(i.buffer).slice(i.offset,i.limit):i),f=JSON.parse(g)):(g=(new a.BinaryHelper).readUTF(i.offset?b.ArrayFormInput(i.buffer).subarray(i.offset,i.limit):i),f=JSON.parse(g))}catch(r){f=g,k=!0}var l=a;if(j in typeMapping){var m=typeMapping[j];h.content=new l[m](f),h.messageType=typeMapping[j]}else if(j in registerMessageTypeMapping){var m=registerMessageTypeMapping[j],n=new l.RongIMClient.RegisterMessage[m](f);h.content=k?n.decode(f):n,h.messageType=registerMessageTypeMapping[j]}else h.content=new a.UnknownMessage({content:f,objectName:j}),h.messageType="UnknownMessage";var o=b.int64ToTimestamp(c.dataTime);h.sentTime=o>0?o:+new Date,h.senderUserId=c.fromUserId,h.conversationType=c.type,c.fromUserId==a.Bridge._client.userId?h.targetId=c.groupId:h.targetId=/^[234]$/.test(c.type||c.getType())?c.groupId:h.senderUserId;var p=a.Bridge._client.userId;1==c.direction||h.senderUserId===p?(h.messageDirection=a.MessageDirection.SEND,h.senderUserId=a.Bridge._client.userId):h.messageDirection=a.MessageDirection.RECEIVE,h.senderUserId===p&&h.targetId===p&&(h.messageDirection=a.MessageDirection.RECEIVE);var q=(new Date).getTime();return h.messageUId=c.msgId,h.receivedTime=a.MessageUtil.getCheckedTime(q),h.messageId=h.conversationType+"_"+~~(16777215*Math.random()),h.objectName=j,h.receivedStatus=a.ReceivedStatus.READ,2==(2&c.status)&&(h.receivedStatus=a.ReceivedStatus.RETRIEVED),h.offLineMessage=!!e,e||a.RongIMClient._memoryStore.connectAckTime>h.sentTime&&(h.offLineMessage=!0),h},b.detectCMP=function(b){return b.error=b.fail,a.RongUtil.request(b)},b.setDeltaTime=function(b){try{a.RongIMClient._memoryStore.deltaTime=(new Date).getTime()-b}catch(c){}},b.getDeltaTime=function(){return(a.RongIMClient._memoryStore||{}).deltaTime||0},b.getCheckedTime=function(a){return a-b.getDeltaTime()},b.sign={converNum:1,msgNum:1,isMsgStart:!0,isConvStart:!0},b}();a.MessageUtil=e;var f=function(){function b(){}return b.init=function(){this.messageId=+(a.RongIMClient._storageProvider.getItem(a.Navigation.Endpoint.userId+"msgId")||a.RongIMClient._storageProvider.setItem(a.Navigation.Endpoint.userId+"msgId",0)||0)},b.messageIdPlus=function(b){return a.RongIMClient._memoryStore.depend.isPolling&&this.init(),this.messageId>=65535&&(this.messageId=0),this.messageId++,a.RongIMClient._memoryStore.depend.isPolling&&a.RongIMClient._storageProvider.setItem(a.Navigation.Endpoint.userId+"msgId",this.messageId),this.messageId},b.clearMessageId=function(){this.messageId=0,a.RongIMClient._memoryStore.depend.isPolling&&a.RongIMClient._storageProvider.setItem(a.Navigation.Endpoint.userId+"msgId",this.messageId)},b.getMessageId=function(){return a.RongIMClient._memoryStore.depend.isPolling&&this.init(),this.messageId},b.messageId=0,b}();a.MessageIdHandler=f;var g=function(){function b(){this.time=0,this.cache={}}return b.prototype.setTime=function(a){this.time=a},b.prototype.getTime=function(){return this.time},b.prototype.setValue=function(a){var b=a.key,c=a.timestamp;this.cache[b]=this.cache[b]||{},this.cache[b]={value:a.value,userId:a.userId,isDeleted:!1,timestamp:c}},b.prototype.removeValue=function(b){var c=b.key,d=b.timestamp;this.cache[c]=this.cache[c]||{};var e=this.cache[c];this.cache[c]=a.RongUtil.extend(e,{isDeleted:!0,userId:b.userId,timestamp:d})},b.prototype.getValue=function(a){this.cache[a]=this.cache[a]||{};var b=this.cache[a];return b.isDeleted?null:b.value},b.prototype.getAllKV=function(){var b={};return a.RongUtil.forEach(this.cache,function(a,c){a.isDeleted||(b[c]=a.value)}),b},b.prototype.getSetUserId=function(a){return this.cache[a]=this.cache[a]||{},this.cache[a].userId},b.prototype.isKeyExisted=function(b){this.cache[b]=this.cache[b]||{};var c=this.cache[b];return!a.RongUtil.isEmpty(c.value)&&!c.isDeleted},b.prototype.clear=function(){this.cache={}},b}(),h={},i={},j=function(a){var b=h[a];return b||(b=h[a]=new g),b},k=function(b){var c=i[b];return c||(c=i[b]=new a.RongUtil.Prosumer),c},l=function(){function b(){}return b.pull=function(c,d){var e=k(c),f=a.RongIMClient._dataAccessProvider.pullChatroomEntry;e.produce({event:f,chrmId:c,time:d}),e.consume(function(a,c){var d=a.event,e=a.chrmId,f=a.time,g=j(e),h=g.getTime();h<f?d(e,h,{onSuccess:function(a){b.setEntries(e,a),c()},onError:c}):c()})},b.setEntries=function(c,d){var f=d.entries,g=d.bFullUpdate,h=d.syncTime,i=g?b.setFullEntries:b.setIncreEntries,k=j(c);h=e.int64ToTimestamp(h),a.RongUtil.isArray(f)&&a.RongUtil.forEach(f,function(b){var c=b.timestamp;a.RongUtil.isNumber(c)||(b.timestamp=e.int64ToTimestamp(c))}),k.setTime(h),i(c,f)},b.setEntry=function(a,b,c,d){var e=j(a),f=b.timestamp||+new Date;e[p.getChrmEntityByStatus(c).isDelete?"removeValue":"setValue"]({key:b.key,value:b.value,userId:d,timestamp:f})},b.setFullEntries=function(b,c){var d=j(b);d.clear(),a.RongUtil.forEach(c,function(a){a.timestamp=e.int64ToTimestamp(a.timestamp),d.setValue({key:a.key,value:a.value,userId:a.uid,timestamp:a.timestamp})})},b.setIncreEntries=function(b,c){var d=j(b),e=a.RongIMClient.getInstance().getCurrentUserId(),f=function(a,b,c){var f=a.key,g=a.value,h=d.getSetUserId(f)===e,i=!d.isKeyExisted(f);(b||h||i)&&d[c]({key:f,value:g,userId:a.uid,timestamp:a.timestamp})};a.RongUtil.forEach(c,function(a){var b=p.getChrmEntityByStatus(a.status),c=b.isDelete?"removeValue":"setValue";f(a,b.isOverwrite,c)})},b.getEntityValue=function(a,b){return j(a).getValue(b)},b.getAllEntityValue=function(a){return j(a).getAllKV()},b.isKeyValid=function(a){return/^[A-Za-z0-9_=+-]+$/.test(a)},b}();a.ChrmKVHandler=l;var m=1,n=2,o=4,p=function(){function b(){}return b.convertUserStatus=function(b){b=a.RongUtil.rename(b,{subUserId:"userId"});var c=JSON.parse(b.status),d=c.us;return d?(b.status=a.RongUtil.rename(d,{o:"online",p:"platform",s:"status"}),b):b},b.getChrmEntityStatus=function(b,c){var d=0;switch(b.isAutoDelete&&(d|=m),b.isOverwrite&&(d|=n),c){case a.ChatroomEntityOpt.DELETE:d|=o}return d},b.getChrmEntityByStatus=function(b){var c=!!(b&o),d=c?a.ChatroomEntityOpt.DELETE:a.ChatroomEntityOpt.UPDATE;return{isAutoDelete:!!(b&m),isOverwrite:!!(b&n),entityOpt:d,isDelete:c}},b}();a.RongInnerTools=p;var q=function(){function b(){}return b.getKey=function(c,d){var e=a.RongIMClient.getInstance().getCurrentUserId();return a.RongUtil.tplEngine(b.KeyTemp,{selfId:e,type:c,targetId:d})},b.getDetailByKey=function(b){var c={count:0,sentTime:0},d=a.RongIMClient._storageProvider.getItem(b);if(!d)return c;d+="";var e=d.split("_"),f=e.length>1;return c.count=Number(e[0]),f&&(c.sentTime=Number(e[1])),c},b.getDetail=function(a,c){var d=b.getKey(a,c);return b.getDetailByKey(d)},b.set=function(c,d,e,f){var g=b.getKey(c,d),h=f?a.RongUtil.tplEngine(b.ValueTemp,{count:e,sentTime:f}):e;return a.RongIMClient._storageProvider.setItem(g,h),e},b.add=function(a,c,d,e){var f=b.getDetail(a,c),g=f.count,h=f.sentTime;return e&&e>h&&(g+=d,b.set(a,c,g,e)),g},b.get=function(a,c){return b.getDetail(a,c).count},b.getAll=function(c){var d=0,e=(a.RongIMClient.getInstance().getCurrentUserId(),function(c){a.RongUtil.forEach(c,function(a){var c=b.getDetailByKey(a);d+=c.count})});if(c)a.RongUtil.forEach(c,function(c){var d=b.getKey(c,""),f=a.RongIMClient._storageProvider.getItemKeyList(d);e(f)});else{var f=b.getKey("",""),g=a.RongIMClient._storageProvider.getItemKeyList(f);e(g)}return d},b.remove=function(c,d){var e=b.getKey(c,d);a.RongIMClient._storageProvider.removeItem(e)},b.clear=function(){var c=b.getKey("",""),d=a.RongIMClient._storageProvider.getItemKeyList(c);a.RongUtil.forEach(d,function(b){a.RongIMClient._storageProvider.removeItem(b)})},b.KeyTemp="cu{selfId}{type}{targetId}",b.ValueTemp="{count}_{sentTime}",b}();a.UnreadCountHandler=q}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function a(a){throw new Error("This method is abstract, you must implement this method in inherited class.")}return a.obtain=function(){throw new Error("This method is abstract, you must implement this method in inherited class.")},a}();a.MessageContent=b;var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(b);a.NotificationMessage=c;var d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(b);a.StatusMessage=d;var e=function(){function b(){}return b.modelClone=function(a){var b={};for(var c in a)"messageName"!=c&&"encode"!=c&&(b[c]=a[c]);return b},b.modleCreate=function(b,c){var d=function(e){var f=this;for(var g in b)f[b[g]]=e[b[g]];d.prototype.messageName=c,d.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))}};return d},b}();a.ModelUtil=e}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(a){this.messageName="CustomerStatusMessage",this.status=a.status}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.CustomerStatusMessage=b;var c=function(){function b(a){this.messageName="ChangeModeResponseMessage",this.code=a.code,this.data=a.data,this.msg=a.msg}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ChangeModeResponseMessage=c;var d=function(){function b(a){this.messageName="ChangeModeMessage",this.uid=a.uid,this.sid=a.sid,this.pid=a.pid}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ChangeModeMessage=d;var e=function(){function b(a){this.messageName="CustomerStatusUpdateMessage",this.serviceStatus=a.serviceStatus,this.sid=a.sid}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.CustomerStatusUpdateMessage=e;var f=function(){function b(a){this.messageName="HandShakeMessage",a&&(this.requestInfo=a.requestInfo,this.userInfo=a.userInfo)}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.HandShakeMessage=f;var g=function(){function b(a){this.messageName="CustomerContact",this.page=a.page,this.nickName=a.nickName,this.routingInfo=a.routingInfo,this.info=a.info,this.requestInfo=a.requestInfo}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.CustomerContact=g;var h=function(){function b(a){this.messageName="EvaluateMessage",this.uid=a.uid,this.sid=a.sid,this.pid=a.pid,this.source=a.source,this.suggest=a.suggest,this.isresolve=a.isresolve,this.type=a.type}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.EvaluateMessage=h;var i=function(){function b(a){this.messageName="HandShakeResponseMessage",this.msg=a.msg,this.status=a.status,this.data=a.data}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.HandShakeResponseMessage=i;var j=function(){function b(a){this.messageName="SuspendMessage",this.uid=a.uid,this.sid=a.sid,this.pid=a.pid}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.SuspendMessage=j;var k=function(){function b(a){this.messageName="TerminateMessage",this.code=a.code,this.msg=a.msg,this.sid=a.sid}return b.obtain=function(){return null},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.TerminateMessage=k}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function a(a){this.messageName="IsTypingStatusMessage"}return a.prototype.encode=function(){},a.prototype.getMessage=function(){return null},a}();a.IsTypingStatusMessage=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(a){if(this.messageName="InformationNotificationMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> InformationNotificationMessage.");this.message=a.message,this.extra=a.extra,a.user&&(this.user=a.user)}return b.obtain=function(a){return new b({message:a,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.InformationNotificationMessage=b;var c=function(){function b(a){if(this.messageName="CommandMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> CommandMessage.");try{"[object String]"==Object.prototype.toString.call(a.data)?this.data=JSON.parse(a.data):this.data=a.data}catch(b){this.data=a.data}this.name=a.name,this.extra=a.extra}return b.obtain=function(a){return new b({data:a,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.CommandMessage=c;var d=function(){function c(a){if(this.messageName="ContactNotificationMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> ContactNotificationMessage.");this.operation=a.operation,this.targetUserId=a.targetUserId,this.message=a.message,this.extra=a.extra,this.sourceUserId=a.sourceUserId,a.user&&(this.user=a.user)}return c.obtain=function(a,c,d,e){return new b({operation:a,sourceUserId:c,targetUserId:d,message:e})},c.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},c.CONTACT_OPERATION_ACCEPT_RESPONSE="ContactOperationAcceptResponse",c.CONTACT_OPERATION_REJECT_RESPONSE="ContactOperationRejectResponse",c.CONTACT_OPERATION_REQUEST="ContactOperationRequest",c}();a.ContactNotificationMessage=d;var e=function(){function b(a){if(this.messageName="ProfileNotificationMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> ProfileNotificationMessage.");this.operation=a.operation;try{"[object String]"==Object.prototype.toString.call(a.data)?this.data=JSON.parse(a.data):this.data=a.data}catch(b){this.data=a.data}this.extra=a.extra,a.user&&(this.user=a.user)}return b.obtain=function(a,c){return new b({operation:a,data:c})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ProfileNotificationMessage=e;var f=function(){function b(a){if(this.messageName="CommandNotificationMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> ProfileNotificationMessage.");try{"[object String]"==Object.prototype.toString.call(a.data)?this.data=JSON.parse(a.data):this.data=a.data}catch(b){this.data=a.data}this.name=a.name,this.extra=a.extra,a.user&&(this.user=a.user)}return b.obtain=function(a,c){return new b({name:a,data:c,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.CommandNotificationMessage=f;var g=function(){function b(a){if(this.messageName="DiscussionNotificationMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> DiscussionNotificationMessage.");this.extra=a.extra,this.extension=a.extension,this.type=a.type,this.isHasReceived=a.isHasReceived,this.operation=a.operation,this.user=a.user,a.user&&(this.user=a.user)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.DiscussionNotificationMessage=g;var h=function(){function b(a){if(this.messageName="GroupNotificationMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> GroupNotificationMessage.");a.operatorUserId&&(this.operatorUserId=a.operatorUserId),a.operation&&(this.operation=a.operation),a.data&&(this.data=a.data),a.message&&(this.message=a.message),a.extra&&(this.extra=a.extra)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.GroupNotificationMessage=h}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(a){if(this.messageName="TextMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> TextMessage.");this.content=a.content,this.extra=a.extra,a.user&&(this.user=a.user),a.mentionedInfo&&(this.mentionedInfo=a.mentionedInfo),a.burnDuration&&(this.burnDuration=a.burnDuration)}return b.obtain=function(a){return new b({extra:"",content:a})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.TextMessage=b;var c=function(){function b(a){if(this.messageName="TypingStatusMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> TypingStatusMessage.");this.typingContentType=a.typingContentType,this.data=a.data}return b.obtain=function(a,c){return new b({typingContentType:a,data:c})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.TypingStatusMessage=c;var d=function(){function b(a){if(this.messageName="ReadReceiptMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> ReadReceiptMessage.");this.lastMessageSendTime=a.lastMessageSendTime,this.messageUId=a.messageUId,this.type=a.type}return b.obtain=function(a,c,d){return new b({messageUId:a,lastMessageSendTime:c,type:d})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ReadReceiptMessage=d;var e=function(){function b(a){if(this.messageName="VoiceMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> VoiceMessage.");this.content=a.content,this.duration=a.duration,this.extra=a.extra,a.user&&(this.user=a.user),a.mentionedInfo&&(this.mentionedInfo=a.mentionedInfo),a.burnDuration&&(this.burnDuration=a.burnDuration)}return b.obtain=function(a,c){return new b({content:a,duration:c,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.VoiceMessage=e;var f=function(){function b(a){this.messageName="RecallCommandMessage",this.messageUId=a.messageUId,this.conversationType=a.conversationType,this.targetId=a.targetId,this.sentTime=a.sentTime,a.extra&&(this.extra=a.extra),a.user&&(this.user=a.user)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.RecallCommandMessage=f;var g=function(){function b(a){if(this.messageName="ImageMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> ImageMessage.");this.content=a.content,this.imageUri=a.imageUri,a.extra&&(this.extra=a.extra),a.user&&(this.user=a.user),a.mentionedInfo&&(this.mentionedInfo=a.mentionedInfo),a.burnDuration&&(this.burnDuration=a.burnDuration)}return b.obtain=function(a,c){return new b({content:a,imageUri:c,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ImageMessage=g;var h=function(){function b(a){if(this.messageName="LocationMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> LocationMessage.");this.latitude=a.latitude,this.longitude=a.longitude,this.poi=a.poi,this.content=a.content,this.extra=a.extra,a.user&&(this.user=a.user),a.mentionedInfo&&(this.mentionedInfo=a.mentionedInfo)}return b.obtain=function(a,c,d,e){return new b({latitude:a,longitude:c,poi:d,content:e,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.LocationMessage=h;var i=function(){function b(a){if(this.messageName="RichContentMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> RichContentMessage.");this.title=a.title,this.content=a.content,this.imageUri=a.imageUri,this.extra=a.extra,this.url=a.url,a.user&&(this.user=a.user)}return b.obtain=function(a,c,d,e){return new b({title:a,content:c,imageUri:d,url:e,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.RichContentMessage=i;var j=function(){function a(a){this.messageName="JrmfRedPacketMessage",a&&(this.message=a)}return a.prototype.encode=function(){return""},a}();a.JrmfRedPacketMessage=j;var k=function(){function a(a){this.messageName="JrmfRedPacketOpenedMessage",a&&(this.message=a)}return a.prototype.encode=function(){
return""},a}();a.JrmfRedPacketOpenedMessage=k;var l=function(){function a(a){if(this.messageName="UnknownMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> UnknownMessage.");this.message=a}return a.prototype.encode=function(){return""},a}();a.UnknownMessage=l;var m=function(){function b(a){if(this.messageName="PublicServiceCommandMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> PublicServiceCommandMessage.");this.content=a.content,this.extra=a.extra,this.menuItem=a.menuItem,a.user&&(this.user=a.user),a.mentionedInfo&&(this.mentionedInfo=a.mentionedInfo)}return b.obtain=function(a){return new b({content:"",command:"",menuItem:a,extra:""})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.PublicServiceCommandMessage=m;var n=function(){function a(a){this.messageName="PublicServiceMultiRichContentMessage",this.richContentMessages=a}return a.prototype.encode=function(){return null},a}();a.PublicServiceMultiRichContentMessage=n;var o=function(){function b(a){this.messageName="SyncReadStatusMessage",a.lastMessageSendTime&&(this.lastMessageSendTime=a.lastMessageSendTime)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.SyncReadStatusMessage=o;var p=function(){function b(a){this.messageName="ReadReceiptRequestMessage",a.messageUId&&(this.messageUId=a.messageUId)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ReadReceiptRequestMessage=p;var q=function(){function b(a){this.messageName="ReadReceiptResponseMessage",a.receiptMessageDic&&(this.receiptMessageDic=a.receiptMessageDic)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ReadReceiptResponseMessage=q;var r=function(){function b(a){this.messageName="PublicServiceRichContentMessage",this.richContentMessage=a}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.PublicServiceRichContentMessage=r;var s=function(){function b(a){this.messageName="FileMessage",a.name&&(this.name=a.name),a.size&&(this.size=a.size),a.type&&(this.type=a.type),a.fileUrl&&(this.fileUrl=a.fileUrl),a.extra&&(this.extra=a.extra),a.user&&(this.user=a.user)}return b.obtain=function(a){return new b({name:a.name,size:a.size,type:a.type,fileUrl:a.fileUrl})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.FileMessage=s;var t=function(){function b(a){this.messageName="HQVoiceMessage",this.type=a.type||"aac",a.localPath&&(this.localPath=a.localPath),a.remoteUrl&&(this.remoteUrl=a.remoteUrl),a.duration&&(this.duration=a.duration),a.extra&&(this.extra=a.extra),a.user&&(this.user=a.user),a.burnDuration&&(this.burnDuration=a.burnDuration)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.HQVoiceMessage=t;var u=function(){function b(a){this.messageName="AcceptMessage",this.mediaId=a.mediaId,this.callId=a.callId,this.mediaType=a.mediaType,this.mode=a.mode,this.subInfo=a.subInfo}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.AcceptMessage=u;var v=function(){function b(a){this.messageName="RingingMessage",this.callId=a.callId}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.RingingMessage=v;var w=function(){function b(a){this.messageName="SummaryMessage",this.caller=a.caller,this.inviter=a.inviter,this.mediaType=a.mediaType,this.memberIdList=a.memberIdList,this.startTime=a.startTime,this.connectedTime=a.connectedTime,this.duration=a.duration,this.status=a.status}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.SummaryMessage=w;var x=function(){function b(a){this.messageName="HungupMessage",this.callId=a.callId,this.reason=a.reason,this.mode=a.mode,this.subInfo=a.subInfo}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.HungupMessage=x;var y=function(){function b(a){this.messageName="InviteMessage",this.mediaId=a.mediaId,this.callId=a.callId,this.engineType=a.engineType,this.channelInfo=a.channelInfo,this.mediaType=a.mediaType,this.extra=a.extra,this.inviteUserIds=a.inviteUserIds,this.observerUserIds=a.observerUserIds,this.mode=a.mode,this.subInfo=a.subInfo}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.InviteMessage=y;var z=function(){function b(a){this.messageName="MediaModifyMessage",this.callId=a.callId,this.mediaType=a.mediaType,this.mode=a.mode,this.subInfo=a.subInfo}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.MediaModifyMessage=z;var A=function(){function b(a){this.messageName="MemberModifyMessage",this.modifyMemType=a.modifyMemType,this.callId=a.callId,this.caller=a.caller,this.engineType=a.engineType,this.channelInfo=a.channelInfo,this.mediaType=a.mediaType,this.extra=a.extra,this.inviteUserIds=a.inviteUserIds,this.existedMemberStatusList=a.existedMemberStatusList,this.existedUserPofiles=a.existedUserPofiles,this.observerUserIds=a.observerUserIds,this.mode=a.mode,this.subInfo=a.subInfo}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.MemberModifyMessage=A;var B=function(){function b(a){if(this.messageName="RCCombineMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> RCCombineMessage.");this.nameList=a.nameList,this.remoteUrl=a.remoteUrl,a.user&&(this.user=a.user),this.summaryList=a.summaryList}return b.obtain=function(a,c,d){return new b({extra:"",content:a,nameList:c,summaryList:d})},b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.RCCombineMessage=B;var C=function(){function b(a){this.messageName="ChrmKVNotificationMessage",a.key&&(this.key=a.key),a.value&&(this.value=a.value),a.type&&(this.type=a.type),a.extra&&(this.extra=a.extra),a.user&&(this.user=a.user)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ChrmKVNotificationMessage=C;var D=function(){function b(a){if(this.messageName="ReferenceMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> ReferenceMessage.");this.content=a.content,this.referMsgUserId=a.referMsgUserId,this.referMsg=a.referMsg,this.objName=a.objName,a.user&&(this.user=a.user),a.mentionedInfo&&(this.mentionedInfo=a.mentionedInfo)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.ReferenceMessage=D;var E=function(){function b(a){if(this.messageName="GIFMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> ReferenceMessage.");this.gifDataSize=a.gifDataSize,this.localPath=a.localPath,this.remoteUrl=a.remoteUrl,this.width=a.width,this.height=a.height,a.user&&(this.user=a.user),a.mentionedInfo&&(this.mentionedInfo=a.mentionedInfo)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.GIFMessage=E;var F=function(){function b(a){if(this.messageName="SightMessage",0==arguments.length)throw new Error("Can not instantiate with empty parameters, use obtain method instead -> ReferenceMessage.");this.sightUrl=a.sightUrl,this.content=a.content,this.duration=a.duration,this.size=a.size,this.name=a.name,a.user&&(this.user=a.user),a.mentionedInfo&&(this.mentionedInfo=a.mentionedInfo)}return b.prototype.encode=function(){return JSON.stringify(a.ModelUtil.modelClone(this))},b}();a.SightMessage=F}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function a(a,b){this.Id=a,this.Key=b}return a}();a.ChannelInfo=b;var c=function(){function a(a,b,c){this.platform=a,this.online=b,this.status=c}return a}();a.UserStatus=c;var d=function(){function a(a,b,c){}return a}();a.MentionedInfo=d;var e=function(){function a(a,b,c){this.msgId=a,this.msgDataTime=b,this.direct=c}return a}();a.DeleteMessage=e;var f=function(){function a(a,b,c){}return a}();a.CustomServiceConfig=f;var g=function(){function a(a,b,c,d,e,f,g){}return a}();a.CustomServiceSession=g;var h=function(){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){this.conversationTitle=a,this.conversationType=b,this.draft=c,this.isTop=d,this.latestMessage=e,this.latestMessageId=f,this.notificationStatus=g,this.objectName=h,this.receivedStatus=i,this.receivedTime=j,this.senderUserId=k,this.senderUserName=l,this.sentStatus=m,this.sentTime=n,this.targetId=o,this.unreadMessageCount=p,this.senderPortraitUri=q,this.isHidden=r,this.mentionedMsg=s,this.hasUnreadMention=t,this._readTime=u}return b.prototype.setTop=function(){a.RongIMClient._dataAccessProvider.addConversation(this,{onSuccess:function(a){}})},b}();a.Conversation=h;var i=function(){function a(a,b,c,d,e){this.creatorId=a,this.id=b,this.memberIdList=c,this.name=d,this.isOpen=e}return a}();a.Discussion=i;var j=function(){function a(a,b,c){this.id=a,this.name=b,this.portraitUri=c}return a}();a.Group=j;var k=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){this.content=a,this.conversationType=b,this.extra=c,this.objectName=d,this.messageDirection=e,this.messageId=f,this.receivedStatus=g,this.receivedTime=h,this.senderUserId=i,this.sentStatus=j,this.sentTime=k,this.targetId=l,this.messageType=m,this.messageUId=n,this.isLocalMessage=o,this.offLineMessage=p,this.receiptResponse=q}return a}();a.Message=k;var l=function(){function a(a,b){this.isCounted=a,this.isPersited=b}return a.prototype.getMessageTag=function(){return this.isCounted&&this.isPersited?3:this.isCounted?2:this.isPersited?1:this.isCounted||this.isPersited?void 0:0},a.getTagByStatus=function(a){var b={3:{isCounted:!0,isPersited:!0},2:{isCounted:!0,isPersited:!1},1:{isCounted:!0,isPersited:!0},0:{isCounted:!0,isPersited:!0}};return b[a]||b[3]},a}();a.MessageTag=l;var m=function(){function a(a,b,c,d,e){this.id=a,this.name=b,this.type=c,this.sunMenuItems=d,this.url=e}return a}();a.PublicServiceMenuItem=m;var n=function(){function a(a,b,c,d,e,f,g,h){this.conversationType=a,this.introduction=b,this.menu=c,this.name=d,this.portraitUri=e,this.publicServiceId=f,this.hasFollowed=g,this.isGlobal=h}return a}();a.PublicServiceProfile=n;var o=function(){function a(a,b,c){this.id=a,this.name=b,this.portraitUri=c}return a}();a.UserInfo=o;var p=function(){function a(a,b){this.id=a,this.token=b}return a}();a.User=p;var q=function(){function a(a,b,c,d,e){this.id=a,this.user=b,this.mode=c,this.broadcastType=d,this.type=e}return a}();a.Room=q}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(){this.userStatusListener=null,this.Conversation={watcher:new a.Observer,watch:function(b){this.watcher.add(b);var c=a.RongIMClient._memoryStore.conversationList;this.watcher.emit(c)},unwatch:function(a){this.watcher.remove(a)},_notify:function(a){this.watcher.emit(a)}}}return b.prototype.init=function(b,c){new a.FeatureDectector(c.appCallback)},b.prototype.connect=function(b,c,d,e){a.RongIMClient.bridge=a.Bridge.getInstance(),a.RongIMClient._memoryStore.token=b,a.RongIMClient._memoryStore.callback=c,d=d||"",e=e||{};var f=!1,g=!1;if(a.Bridge._client&&a.Bridge._client.channel&&(f=a.Bridge._client.channel.connectionStatus==a.ConnectionStatus.CONNECTING,g=a.Bridge._client.channel.connectionStatus==a.ConnectionStatus.CONNECTED),!g&&!f){if(a.RongIMClient.otherDeviceLoginCount>5)return void c.onError(a.ConnectionStatus.ULTRALIMIT);e.force&&a.RongIMClient._storageProvider.removeItem("servers"),a.RongIMClient.bridge.setListener(),a.RongIMClient.bridge.connect(a.RongIMClient._memoryStore.appKey,b,{onSuccess:function(a){setTimeout(function(){c.onSuccess(a)})},onError:function(b){b!=a.ConnectionState.TOKEN_INCORRECT&&b?setTimeout(function(){c.onError(b)}):setTimeout(function(){c.onTokenIncorrect()})}})}},b.prototype.reconnect=function(b,c){var d=a.RongIMClient._memoryStore,e=d.token;if(!e)throw new Error("reconnect: token is empty.");if(a.Bridge._client&&a.Bridge._client.channel&&a.Bridge._client.channel.connectionStatus!=a.ConnectionStatus.CONNECTED&&a.Bridge._client.channel.connectionStatus!=a.ConnectionStatus.CONNECTING){c=c||{};var f=c.auto?"auto":"custom";({auto:function(){var d=function(b){var c=b.step(),d=b.url,e=function(){a.RongUtil.request({url:d,success:function(){b.done()},error:function(){f()}})},f=function(){var d=c();if("done"==d){var f=a.ConnectionStatus.NETWORK_UNAVAILABLE;return void b.done(f)}setTimeout(e,d)};f()},f=a.RongIMClient._memoryStore.depend.protocol,g=c.url||"cdn.ronghub.com/RongIMLib-2.2.6.min.js",h={protocol:f,path:g};g=a.RongUtil.formatProtoclPath(h);var i=c.rate||[100,1e3,3e3,6e3,1e4,18e3];i.push("done"),d({url:g,step:function(){var a=0;return function(){var b=i[a];return a++,b}},done:function(c){if(c)return void b.onError(c);a.RongIMClient.connect(e,b)}})},custom:function(){a.RongIMClient.connect(e,b)}})[f]()}},b.prototype.logout=function(){a.RongIMClient.bridge.disconnect(),a.RongIMClient.bridge=null},b.prototype.disconnect=function(){a.RongIMClient.bridge.disconnect()},b.prototype.sendReceiptResponse=function(b,c,d){var e=a.Bridge._client.userId+b+c+"RECEIVED",f=this;if(a.RongUtil.supportLocalStorage()){var g=JSON.parse(a.RongIMClient._storageProvider.getItem(e));if(g){var h=[];for(var i in g){var j={};j[i]=g[i].uIds,g[i].isResponse||h.push(j)}if(0==h.length)return void d.onSuccess();var k=setInterval(function(){1==h.length&&clearInterval(k);var i=h.splice(0,1)[0],j=new a.ReadReceiptResponseMessage({receiptMessageDic:i});f.sendMessage(b,c,j,{onSuccess:function(b){var c=a.MessageUtil.getFirstKey(i);g[c].isResponse=!0,a.RongIMClient._storageProvider.setItem(e,JSON.stringify(g)),d.onSuccess(b)},onError:function(a,b){d.onError(a,b)}})},200)}else d.onSuccess()}else d.onSuccess()},b.prototype.sendTypingStatusMessage=function(b,c,d,e){var f=this;d in a.RongIMClient.MessageParams&&f.sendMessage(b,c,a.TypingStatusMessage.obtain(a.RongIMClient.MessageParams[d].objectName,""),{onSuccess:function(){setTimeout(function(){e.onSuccess()})},onError:function(a){setTimeout(function(){e.onError(a,null)})},onBefore:function(){}})},b.prototype.sendRecallMessage=function(b,c){var d=new a.RecallCommandMessage({conversationType:b.conversationType,targetId:b.targetId,sentTime:b.sentTime,messageUId:b.messageUId,extra:b.extra,user:b.user});this.sendMessage(b.conversationType,b.senderUserId,d,c,!1,null,null,2)},b.prototype.sendTextMessage=function(b,c,d,e){var f=a.TextMessage.obtain(d);this.sendMessage(b,c,f,e)},b.prototype.getRemoteHistoryMessages=function(b,c,d,e,f,g){if(e<=1)throw new Error("the count must be greater than 1.");g=g||{};var h=g.order||0,i=function(){return[b,c,"_",h].join("")},j=i();a.RongUtil.isNumber(d)||(d=a.RongIMClient._memoryStore.lastReadTime.get(j));var k=a.RongIMClient._memoryStore,l=k.historyMessageLimit,m=l.get(j)||{},n=m.hasMore;if(!n&&m.time==d&&0==h)return f.onSuccess([],n);var o=new a.RongIMClient.Protobuf.HistoryMsgInput;o.setTargetId(c),o.setTime(d),o.setCount(e),o.setOrder(h);var p=HistoryMsgType[b]||HistoryMsgType[a.ConversationType.PRIVATE];a.RongIMClient.bridge.queryMsg(p,a.MessageUtil.ArrayForm(o.toArrayBuffer()),c,{onSuccess:function(b){var d=a.MessageUtil.int64ToTimestamp(b.syncTime);a.RongIMClient._memoryStore.lastReadTime.set(j,d),l.set(j,{hasMore:!!b.hasMsg,time:d});var e,g=b.list.reverse(),h=null,i=a.SentStatus.READ;if(a.RongUtil.supportLocalStorage())for(var k=0,m=g.length;k<m;k++)h=a.MessageUtil.messageParser(g[k]),e=JSON.parse(a.RongIMClient._storageProvider.getItem(a.Bridge._client.userId+h.messageUId+"SENT")),e&&(h.receiptResponse||(h.receiptResponse={}),h.receiptResponse[h.messageUId]=e.count),h.sentStatus=i,h.targetId=c,g[k]=h;else for(var k=0,m=g.length;k<m;k++){var h=a.MessageUtil.messageParser(g[k]);h.sentStatus=i,g[k]=h}setTimeout(function(){f.onSuccess(g,!!b.hasMsg)})},onError:function(a){setTimeout(function(){f.onError(a)})}},"HistoryMessagesOuput")},b.prototype.hasRemoteUnreadMessages=function(b,c){var d=null;window.RCCallback=function(a){setTimeout(function(){c.onSuccess(!!+a.status)}),d.parentNode.removeChild(d)},d=document.createElement("script"),d.src=a.RongIMClient._memoryStore.depend.api+"/message/exist.js?appKey="+encodeURIComponent(a.RongIMClient._memoryStore.appKey)+"&token="+encodeURIComponent(b)+"&callBack=RCCallback&_="+a.RongUtil.getTimestamp(),document.body.appendChild(d),d.onerror=function(){setTimeout(function(){c.onError(a.ErrorCode.UNKNOWN)}),d.parentNode.removeChild(d)}},b.prototype.getRemoteConversationList=function(b,c,d){var e=new a.RongIMClient.Protobuf.RelationsInput,f=this;e.setType(1),void 0===d?e.setCount(0):e.setCount(d),a.RongIMClient.bridge.queryMsg(26,a.MessageUtil.ArrayForm(e.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(d){if(d.info){d.info=d.info.reverse();for(var e=0,g=d.info.length;e<g;e++)a.RongIMClient.getInstance().pottingConversation(d.info[e])}var h=a.RongIMClient._memoryStore.conversationList;setTimeout(function(){if(c)return b.onSuccess(f.filterConversations(c,h));b.onSuccess(h)})},onError:function(a){b.onError(a)}},"RelationsOutput")},b.prototype.addMemberToDiscussion=function(b,c,d){var e=new a.RongIMClient.Protobuf.ChannelInvitationInput;e.setUsers(c),a.RongIMClient.bridge.queryMsg(0,a.MessageUtil.ArrayForm(e.toArrayBuffer()),b,{onSuccess:function(){setTimeout(function(){d.onSuccess()})},onError:function(a){setTimeout(function(){d.onError(a)})}})},b.prototype.createDiscussion=function(b,c,d){var e=new a.RongIMClient.Protobuf.CreateDiscussionInput,f=this;e.setName(b),a.RongIMClient.bridge.queryMsg(1,a.MessageUtil.ArrayForm(e.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(a){c.length>0&&f.addMemberToDiscussion(a,c,{onSuccess:function(){},onError:function(a){setTimeout(function(){d.onError(a)})}}),setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){d.onError(a)})}},"CreateDiscussionOutput")},b.prototype.getDiscussion=function(b,c){var d=new a.RongIMClient.Protobuf.ChannelInfoInput;d.setNothing(1),a.RongIMClient.bridge.queryMsg(4,a.MessageUtil.ArrayForm(d.toArrayBuffer()),b,{onSuccess:function(a){setTimeout(function(){c.onSuccess(a)})},onError:function(a){setTimeout(function(){c.onError(a)})}},"ChannelInfoOutput")},b.prototype.quitDiscussion=function(b,c){var d=new a.RongIMClient.Protobuf.LeaveChannelInput;d.setNothing(1),a.RongIMClient.bridge.queryMsg(7,a.MessageUtil.ArrayForm(d.toArrayBuffer()),b,{onSuccess:function(){setTimeout(function(){c.onSuccess()})},onError:function(a){setTimeout(function(){c.onError(a)})}})},b.prototype.removeMemberFromDiscussion=function(b,c,d){var e=new a.RongIMClient.Protobuf.ChannelEvictionInput;e.setUser(c),a.RongIMClient.bridge.queryMsg(9,a.MessageUtil.ArrayForm(e.toArrayBuffer()),b,{onSuccess:function(){setTimeout(function(){d.onSuccess()})},onError:function(a){setTimeout(function(){d.onError(a)})}})},b.prototype.setDiscussionInviteStatus=function(b,c,d){var e=new a.RongIMClient.Protobuf.ModifyPermissionInput;e.setOpenStatus(c.valueOf()),a.RongIMClient.bridge.queryMsg(11,a.MessageUtil.ArrayForm(e.toArrayBuffer()),b,{onSuccess:function(a){setTimeout(function(){d.onSuccess()})},onError:function(a){setTimeout(function(){d.onError(a)})}})},b.prototype.setDiscussionName=function(b,c,d){var e=new a.RongIMClient.Protobuf.RenameChannelInput;e.setName(c),a.RongIMClient.bridge.queryMsg(12,a.MessageUtil.ArrayForm(e.toArrayBuffer()),b,{onSuccess:function(){setTimeout(function(){d.onSuccess()})},onError:function(a){d.onError(a)}})},b.prototype.joinChatRoom=function(b,c,d){var e=new a.RongIMClient.Protobuf.ChrmInput;e.setNothing(1),a.Bridge._client.chatroomId=b,a.RongIMClient.bridge.queryMsg(19,a.MessageUtil.ArrayForm(e.toArrayBuffer()),b,{onSuccess:function(){a.RongIMClient.getInstance().getNavi().kvStorage?a.RongIMClient._dataAccessProvider.pullChatroomEntry(b,0,{onSuccess:function(c){a.ChrmKVHandler.setEntries(b,c),setTimeout(function(){d.onSuccess()})},onError:function(a){setTimeout(function(){d.onError(a)})}}):setTimeout(function(){d.onSuccess()});var e=new a.RongIMClient.Protobuf.ChrmPullMsg;0==c&&(c=-1),e.setCount(c),e.setSyncTime(0),a.Bridge._client.queryMessage("chrmPull",a.MessageUtil.ArrayForm(e.toArrayBuffer()),b,1,{onSuccess:function(c){var d=c.list,e=a.MessageUtil.int64ToTimestamp(c.syncTime),f=d[d.length-1];f&&(f=a.MessageUtil.messageParser(f),e=f.sentTime),a.RongIMClient._memoryStore.lastReadTime.set(b+a.Bridge._client.userId+"CST",e);for(var g=a.Bridge._client,h=0,i=d.length;h<i;h++){var j="R"+d[h].msgId;if(!(j in g.cacheMessageIds)){g.cacheMessageIds[j]=!0;var k=a.RongUtil.keys(g.cacheMessageIds);if(k.length>10&&(j=k[0],delete g.cacheMessageIds[j]),a.RongIMClient._memoryStore.filterMessages.length>0)for(var l=0,m=a.RongIMClient._memoryStore.filterMessages.length;l<m;l++)a.RongIMClient.MessageParams[a.RongIMClient._memoryStore.filterMessages[l]].objectName!=d[h].classname&&g.handler.onReceived(d[h]);else g.handler.onReceived(d[h])}}},onError:function(a){setTimeout(function(){d.onError(a)})}},"DownStreamMessages")},onError:function(a){setTimeout(function(){d.onError(a)})}},"ChrmOutput")},b.prototype.getChatRoomInfo=function(b,c,d,e){var f=new a.RongIMClient.Protobuf.QueryChatroomInfoInput;f.setCount(c),f.setOrder(d),a.RongIMClient.bridge.queryMsg("queryChrmI",a.MessageUtil.ArrayForm(f.toArrayBuffer()),b,{onSuccess:function(b){b.userInfos.forEach(function(b){b.time=a.MessageUtil.int64ToTimestamp(b.time)}),setTimeout(function(){e.onSuccess(b)})},onError:function(a){setTimeout(function(){e.onError(a)})}},"QueryChatroomInfoOutput")},b.prototype.quitChatRoom=function(b,c){var d=new a.RongIMClient.Protobuf.ChrmInput;d.setNothing(1),a.RongIMClient.bridge.queryMsg(17,a.MessageUtil.ArrayForm(d.toArrayBuffer()),b,{onSuccess:function(){setTimeout(function(){c.onSuccess()})},onError:function(a){setTimeout(function(){c.onError(a)})}},"ChrmOutput")},b.prototype.setChatroomHisMessageTimestamp=function(b,c){a.RongIMClient._memoryStore.lastReadTime.set("chrhis_"+b,c)},b.prototype.getChatRoomHistoryMessages=function(b,c,d,e){var f=new a.RongIMClient.Protobuf.HistoryMsgInput;f.setTargetId(b);var g=a.RongIMClient._memoryStore.lastReadTime.get("chrhis_"+b)||0;f.setTime(g),f.setCount(c),f.setOrder(d),a.RongIMClient.bridge.queryMsg(34,a.MessageUtil.ArrayForm(f.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(c){a.RongIMClient._memoryStore.lastReadTime.set("chrhis_"+b,a.MessageUtil.int64ToTimestamp(c.syncTime));for(var d=c.list.reverse(),f=0,g=d.length;f<g;f++)d[f]=a.MessageUtil.messageParser(d[f]);setTimeout(function(){e.onSuccess(d,!!c.hasMsg)})},onError:function(a){setTimeout(function(){e.onError(a)})}},"HistoryMsgOuput")},b.prototype.setChatroomEntry=function(b,c,d){var e=a.ChatroomEntityOpt.UPDATE,f=c.key,g=c.value,h=!a.RongUtil.isLengthLimit(f,a.ChatroomEntityLimit.KEY,1)||!a.ChrmKVHandler.isKeyValid(f),i=!a.RongUtil.isLengthLimit(g,a.ChatroomEntityLimit.VALUE,1);h||i?setTimeout(function(){d.onError(a.ErrorCode.BIZ_ERROR_INVALID_PARAMETER)}):this.refreshChatroomEntry(b,c,e,d)},b.prototype.forceSetChatroomEntry=function(a,b,c){b.isOverwrite=!0,this.setChatroomEntry(a,b,c)},b.prototype.removeChatroomEntry=function(b,c,d){var e=a.ChatroomEntityOpt.DELETE,f=c.key;a.RongUtil.isLengthLimit(f,a.ChatroomEntityLimit.KEY,1)&&a.ChrmKVHandler.isKeyValid(f)?this.refreshChatroomEntry(b,c,e,d):setTimeout(function(){d.onError(a.ErrorCode.BIZ_ERROR_INVALID_PARAMETER)})},b.prototype.forceRemoveChatroomEntry=function(a,b,c){b.isOverwrite=!0,this.removeChatroomEntry(a,b,c)},b.prototype.refreshChatroomEntry=function(b,c,d,e){var f,g,h=c.key,i=c.value||"",j=c.notificationExtra;d===a.ChatroomEntityOpt.DELETE?(f=new a.RongIMClient.Protobuf.DeleteChrmKV,g="delKV"):(f=new a.RongIMClient.Protobuf.SetChrmKV,g="setKV");var k=a.RongInnerTools.getChrmEntityStatus(c,d),l=a.RongIMClient.getInstance().getCurrentUserId(),m={key:h,value:i,uid:l};if(k&&(m.status=k),f.setEntry(m),c.isSendNotification){f.setBNotify(!0);var n=new a.RongIMClient.Protobuf.UpStreamMessage,o=new a.ChrmKVNotificationMessage({key:h,value:i,extra:j,type:d});n.setSessionId(a.RongIMClient.MessageParams[o.messageName].msgTag.getMessageTag()),n.setClassname(a.RongIMClient.MessageParams[o.messageName].objectName),n.setContent(o.encode()),f.setNotification(n),f.setType(a.ConversationType.CHATROOM)}a.RongIMClient.bridge.queryMsg(g,a.MessageUtil.ArrayForm(f.toArrayBuffer()),b,{onSuccess:function(d){var f=a.RongIMClient.getInstance().getCurrentUserId();a.ChrmKVHandler.setEntry(b,c,k,f),setTimeout(function(){e.onSuccess(!!d)})},onError:function(a){setTimeout(function(){e.onError(a)})}},"ChrmOutput")},b.prototype.getChatroomEntry=function(b,c,d){var e=a.ChrmKVHandler.getEntityValue(b,c);setTimeout(function(){a.RongUtil.isEmpty(e)?d.onError(a.ErrorCode.CHATROOM_KEY_NOT_EXIST):d.onSuccess(e)})},b.prototype.getAllChatroomEntries=function(b,c){setTimeout(function(){var d=a.ChrmKVHandler.getAllEntityValue(b);c.onSuccess(d)})},b.prototype.pullChatroomEntry=function(b,c,d){var e=new a.RongIMClient.Protobuf.QueryChrmKV;e.setTimestamp(c),a.RongIMClient.bridge.queryMsg("pullKV",a.MessageUtil.ArrayForm(e.toArrayBuffer()),b,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){d.onError(a)})}},"ChrmKVOutput")},b.prototype.setMessageStatus=function(a,b,c,d,e){setTimeout(function(){e.onSuccess(!0)})},b.prototype.addToBlacklist=function(b,c){var d=new a.RongIMClient.Protobuf.Add2BlackListInput;d.setUserId(b),a.RongIMClient.bridge.queryMsg(21,a.MessageUtil.ArrayForm(d.toArrayBuffer()),b,{onSuccess:function(){setTimeout(function(){c.onSuccess()})},onError:function(a){setTimeout(function(){c.onError(a)})}})},b.prototype.getBlacklist=function(b){var c=new a.RongIMClient.Protobuf.QueryBlackListInput;c.setNothing(1),a.RongIMClient.bridge.queryMsg(23,a.MessageUtil.ArrayForm(c.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(a){setTimeout(function(){b.onSuccess(a)})},onError:function(a){setTimeout(function(){b.onError(a)})}},"QueryBlackListOutput")},b.prototype.getBlacklistStatus=function(b,c){var d=new a.RongIMClient.Protobuf.BlackListStatusInput;d.setUserId(b),a.RongIMClient.bridge.queryMsg(24,a.MessageUtil.ArrayForm(d.toArrayBuffer()),b,{onSuccess:function(b){setTimeout(function(){c.onSuccess(a.BlacklistStatus[b])})},onError:function(a){setTimeout(function(){c.onError(a)})}})},b.prototype.removeFromBlacklist=function(b,c){var d=new a.RongIMClient.Protobuf.RemoveFromBlackListInput;d.setUserId(b),a.RongIMClient.bridge.queryMsg(22,a.MessageUtil.ArrayForm(d.toArrayBuffer()),b,{onSuccess:function(){setTimeout(function(){c.onSuccess()})},onError:function(a){setTimeout(function(){c.onError(a)})}})},b.prototype.getFileToken=function(b,c){if(!/(1|2|3|4)/.test(b.toString()))return void setTimeout(function(){c.onError(a.ErrorCode.QNTKN_FILETYPE_ERROR)});var d=new a.RongIMClient.Protobuf.GetQNupTokenInput;d.setType(b),a.RongIMClient.bridge.queryMsg(30,a.MessageUtil.ArrayForm(d.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(a){setTimeout(function(){c.onSuccess(a)})},onError:function(a){setTimeout(function(){c.onError(a)})}},"GetQNupTokenOutput")},b.prototype.getFileUrl=function(b,c,d,e){if(!/(1|2|3|4)/.test(b.toString()))return void setTimeout(function(){e.onError(a.ErrorCode.QNTKN_FILETYPE_ERROR)});var f=new a.RongIMClient.Protobuf.GetQNdownloadUrlInput;f.setType(b),f.setKey(c),d&&f.setFileName(d),a.RongIMClient.bridge.queryMsg(31,a.MessageUtil.ArrayForm(f.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(a){setTimeout(function(){e.onSuccess(a)})},onError:function(a){setTimeout(function(){e.onError(a)})}},"GetQNdownloadUrlOutput")},b.prototype.getPullSetting=function(b){var c=new a.RongIMClient.Protobuf.PullUserSettingInput,d=parseInt(a.RongIMClient.sdkver);c.setVersion(d),a.RongIMClient.bridge.queryMsg("pullUS",a.MessageUtil.ArrayForm(c.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(c){c=c||{},c.version=a.MessageUtil.int64ToTimestamp(c.version),setTimeout(function(){b.onSuccess(c)})},onError:function(a){setTimeout(function(){b.onError(a)})}},"PullUserSettingOutput")},b.prototype.setOfflineMessageDuration=function(b,c){this.getPullSetting({onSuccess:function(d){var e=new a.RongIMClient.Protobuf.GetQNupTokenOutput,f=d.version;e.setDeadline(f),e.setToken(b+""),a.RongIMClient.bridge.queryMsg("setOfflineMsgDur",a.MessageUtil.ArrayForm(e.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(a){setTimeout(function(){c.onSuccess(a)})},onError:function(a){setTimeout(function(){c.onError(a)})}})},onError:c.onError})},b.prototype.sendMessage=function(b,c,d,e,f,g,h,i,j){if(!a.Bridge._client.channel)return void setTimeout(function(){e.onError(a.ErrorCode.RC_NET_UNAVAILABLE,null)});if(!a.Bridge._client.channel.socket.socket.connected)throw setTimeout(function(){e.onError(a.ErrorCode.TIMEOUT,null)}),new Error("connect is timeout! postion:sendMessage");var k=b==a.ConversationType.DISCUSSION||b==a.ConversationType.GROUP,l=new a.RongIMClient.Protobuf.UpStreamMessage;if(f&&k?l.setSessionId(7):l.setSessionId(a.RongIMClient.MessageParams[d.messageName].msgTag.getMessageTag()),g&&l.setPushText(g),h&&l.setAppData(h),k&&d.messageName==a.RongIMClient.MessageType.ReadReceiptResponseMessage){var m=d;if(m.receiptMessageDic){var n=[];for(var o in m.receiptMessageDic)n.push(o);l.setUserId(n)}}k&&d.messageName==a.RongIMClient.MessageType.SyncReadStatusMessage&&l.setUserId(a.Bridge._client.userId),j=j||{};var p=j.userIds;p&&l.setUserId(p);var q=0;(j.isPush||j.isVoipPush)&&(q|=1),j.isFilerWhiteBlacklist&&(q|=2),l.setConfigFlag(q),l.setClassname(a.RongIMClient.MessageParams[d.messageName].objectName);var r=d.encode();if(a.RongUtil.getByteLength(r)>a.RongIMClient.MaxMessageContentBytes)return void setTimeout(function(){e.onError(a.ErrorCode.RC_MSG_CONTENT_EXCEED_LIMIT)});l.setContent(r);var s=l.toArrayBuffer();"[object ArrayBuffer]"==Object.prototype.toString.call(s)&&(s=[].slice.call(new Int8Array(s)));var t=this,u=new a.Message,v=this.getConversation(b,c);3==a.RongIMClient.MessageParams[d.messageName].msgTag.getMessageTag()&&(v||(v=a.RongIMClient.getInstance().createConversation(b,c,"")),v.sentTime=(new Date).getTime(),v.sentStatus=a.SentStatus.SENDING,v.senderUserName="",v.senderUserId=a.Bridge._client.userId,v.notificationStatus=a.ConversationNotificationStatus.DO_NOT_DISTURB,v.latestMessage=u,v.unreadMessageCount=0,a.RongIMClient._dataAccessProvider.addConversation(v,{onSuccess:function(a){}})),a.RongIMClient._memoryStore.converStore=v,u.content=d,u.conversationType=b,u.senderUserId=a.Bridge._client.userId,u.objectName=a.RongIMClient.MessageParams[d.messageName].objectName,u.targetId=c,u.sentTime=(new Date).getTime(),u.messageDirection=a.MessageDirection.SEND,u.sentStatus=a.SentStatus.SENT,u.messageType=d.messageName,a.RongIMClient.bridge.pubMsg(b.valueOf(),s,c,{onSuccess:function(f){if(f&&f.timestamp&&a.RongIMClient._memoryStore.lastReadTime.set("converST_"+a.Bridge._client.userId+b+c,f.timestamp),(b==a.ConversationType.DISCUSSION||b==a.ConversationType.GROUP)&&d.messageName==a.RongIMClient.MessageType.ReadReceiptRequestMessage){var g=u.content,h=a.Bridge._client.userId+g.messageUId+"SENT";a.RongIMClient._storageProvider.setItem(h,JSON.stringify({count:0,dealtime:f.timestamp,userIds:{}}))}if(3==a.RongIMClient.MessageParams[u.messageType].msgTag.getMessageTag()){var i=a.RongIMClient._memoryStore.converStore;i.sentStatus=u.sentStatus,i.latestMessage=u,t.updateConversation(i);a.RongIMClient._dataAccessProvider.Conversation._notify(a.RongIMClient._memoryStore.conversationList),a.RongIMClient._dataAccessProvider.addMessage(b,c,u,{onSuccess:function(b){u=b,u.messageUId=f.messageUId,u.sentTime=f.timestamp,u.sentStatus=a.SentStatus.SENT,u.messageId=f.messageId,
a.RongIMClient._dataAccessProvider.updateMessage(u)},onError:function(){}})}setTimeout(function(){i&&t.updateConversation(i),u.sentTime=f.timestamp,u.messageUId=f.messageUId,e.onSuccess(u)})},onError:function(d,f){u.sentStatus=a.SentStatus.FAILED,f&&(u.messageUId=f.messageUId,u.sentTime=f.sentTime),3==a.RongIMClient.MessageParams[u.messageType].msgTag.getMessageTag()&&(a.RongIMClient._memoryStore.converStore.latestMessage=u),a.RongIMClient._dataAccessProvider.addMessage(b,c,u,{onSuccess:function(b){u.messageId=b.messageId,a.RongIMClient._dataAccessProvider.updateMessage(u)},onError:function(){}}),setTimeout(function(){e.onError(d,u)})}},null,i,j),e.onBefore&&e.onBefore(a.MessageIdHandler.messageId),u.messageId=a.MessageIdHandler.messageId+""},b.prototype.setConnectionStatusListener=function(b){a.RongUtil.isObject(b)&&a.RongUtil.isFunction(b.onChanged)&&a.RongIMClient.statusListeners.push(b.onChanged)},b.prototype.setOnReceiveMessageListener=function(b){a.RongUtil.isObject(b)&&a.RongUtil.isFunction(b.onReceived)&&a.RongIMClient.messageListeners.push(b.onReceived)},b.prototype.registerMessageType=function(b,c,d,e,f){if(!b)throw new Error("messageType can't be empty,postion -> registerMessageType");if(!c)throw new Error("objectName can't be empty,postion -> registerMessageType");if("[object Array]"==Object.prototype.toString.call(e)){var g=a.ModelUtil.modleCreate(e,b);a.RongIMClient.RegisterMessage[b]=g}else{if("[object Function]"!=Object.prototype.toString.call(e)&&"[object Object]"!=Object.prototype.toString.call(e))throw new Error("The index of 3 parameter was wrong type  must be object or function or array-> registerMessageType");if(!e.encode)throw new Error("encode method has not realized or messageName is undefined-> registerMessageType");if(!e.decode)throw new Error("decode method has not realized -> registerMessageType")}registerMessageTypeMapping[c]=b},b.prototype.registerMessageTypes=function(b){var c=[],d=function(a){var b=[];for(var c in a)b.push(c);return b};for(var e in b){var f=b[e],g=f.proto,h=d(g),i=f.flag||3,j=a.MessageTag.getTagByStatus(i);i=new a.MessageTag(j.isCounted,j.isPersited),c.push({type:e,name:f.name,flag:i,protos:h})}for(var k=function(b){var c=b.type,d=b.name,e=b.flag,f=b.protos;a.RongIMClient.registerMessageType(c,d,e,f)},l=0,m=c.length;l<m;l++){var f=c[l];k(f)}},b.prototype.addConversation=function(b,c){for(var d=!0,e=0,f=a.RongIMClient._memoryStore.conversationList.length;e<f;e++)if(a.RongIMClient._memoryStore.conversationList[e].conversationType===b.conversationType&&a.RongIMClient._memoryStore.conversationList[e].targetId===b.targetId){a.RongIMClient._memoryStore.conversationList.unshift(a.RongIMClient._memoryStore.conversationList.splice(e,1)[0]),d=!1;break}d&&a.RongIMClient._memoryStore.conversationList.unshift(b),c&&c.onSuccess(!0)},b.prototype.updateConversation=function(b){for(var c,d=0,e=a.RongIMClient._memoryStore.conversationList.length;d<e;d++){var f=a.RongIMClient._memoryStore.conversationList[d];if(b.conversationType===f.conversationType&&b.targetId===f.targetId){b.conversationTitle&&(f.conversationTitle=b.conversationTitle),b.senderUserName&&(f.senderUserName=b.senderUserName),b.senderPortraitUri&&(f.senderPortraitUri=b.senderPortraitUri),b.latestMessage&&(f.latestMessage=b.latestMessage),b.sentStatus&&(f.sentStatus=b.sentStatus);break}}return c},b.prototype.removeConversation=function(b,c,d){var e=new a.RongIMClient.Protobuf.RelationsInput;e.setType(b),a.RongIMClient.bridge.queryMsg(27,a.MessageUtil.ArrayForm(e.toArrayBuffer()),c,{onSuccess:function(){for(var e=!1,f=a.RongIMClient._memoryStore.conversationList,g=f.length,h=0;h<g;h++)if(f[h].conversationType==b&&c==f[h].targetId){f.splice(h,1),e=!0;break}e&&a.RongIMClient._dataAccessProvider.Conversation._notify(a.RongIMClient._memoryStore.conversationList),d.onSuccess(!0)},onError:function(a){setTimeout(function(){d.onError(a)})}})},b.prototype.getMessage=function(b,c){c.onSuccess(new a.Message)},b.prototype.addMessage=function(a,b,c,d){d&&d.onSuccess(c)},b.prototype.removeMessage=function(b,c,d,e){a.RongIMClient.getInstance().deleteRemoteMessages(b,c,d,e)},b.prototype.removeLocalMessage=function(a,b,c,d){d.onSuccess(!0)},b.prototype.updateMessage=function(a,b){b&&b.onSuccess(a)},b.prototype.deleteRemoteMessages=function(b,c,d,e){if(!a.RongIMClient.Protobuf.DeleteMsgInput)throw new Error("SDK Protobuf version is too low");var f=new a.RongIMClient.Protobuf.DeleteMsgInput,g=[];a.RongUtil.forEach(d,function(a){g.push({msgId:a.messageUId,msgDataTime:a.sentTime,direct:a.messageDirection})}),f.setType(b),f.setConversationId(c),f.setMsgs(g),a.RongIMClient.bridge.queryMsg("delMsg",a.MessageUtil.ArrayForm(f.toArrayBuffer()),c,{onSuccess:function(a){e.onSuccess(a)},onError:function(a){setTimeout(function(){e.onError(a)})}},"DeleteMsgOutput")},b.prototype.clearRemoteHistoryMessages=function(b,c){var d=new a.RongIMClient.Protobuf.CleanHisMsgInput,e=b.conversationType,f={1:"cleanPMsg",2:"cleanDMsg",3:"cleanGMsg",5:"cleanCMsg",6:"cleanSMsg"},g=f[e];if(!g)return void c.onError(a.ErrorCode.CLEAR_HIS_TYPE_ERROR);var h=b.timestamp;if("number"!=typeof h)return void c.onError(a.ErrorCode.CLEAR_HIS_TIME_ERROR);d.setDataTime(h);var i=b.targetId;d.setTargetId(i),a.RongIMClient.bridge.queryMsg(g,a.MessageUtil.ArrayForm(d.toArrayBuffer()),i,{onSuccess:function(a){c.onSuccess(!a)},onError:function(b){1==b&&(b=a.ErrorCode.CLEAR_HIS_ERROR),setTimeout(function(){c.onError(b)})}})},b.prototype.clearHistoryMessages=function(a,b){this.clearRemoteHistoryMessages(a,b)},b.prototype.clearMessages=function(a,b,c){},b.prototype.updateMessages=function(b,c,d,e,f){var g=this;"readStatus"==d&&a.RongIMClient._memoryStore.conversationList.length>0&&g.getConversationList({onSuccess:function(a){Array.forEach(a,function(a){a.conversationType==b&&a.targetId==c&&(a.unreadMessageCount=0)})},onError:function(a){setTimeout(function(){f.onError(a)})}},null),setTimeout(function(){f.onSuccess(!0)})},b.prototype.getConversation=function(b,c,d){for(var e=null,f=0,g=a.RongIMClient._memoryStore.conversationList.length;f<g;f++)if(a.RongIMClient._memoryStore.conversationList[f].conversationType==b&&a.RongIMClient._memoryStore.conversationList[f].targetId==c&&(e=a.RongIMClient._memoryStore.conversationList[f],a.RongUtil.supportLocalStorage())){var h=a.UnreadCountHandler.get(b,c);0==e.unreadMessageCount&&(e.unreadMessageCount=Number(h))}return setTimeout(function(){d&&d.onSuccess(e)}),e},b.prototype.filterConversations=function(b,c){var d=[];return a.RongUtil.forEach(b,function(b){a.RongUtil.forEach(c,function(a){a.conversationType==b&&d.push(a)})}),d},b.prototype.getConversationList=function(b,c,d,e){var f=this,g=a.RongIMClient._memoryStore.isSyncRemoteConverList,h=a.RongIMClient._memoryStore.conversationList,i=h.length>d;if(!g&&i)return void setTimeout(function(){var a=h.slice(0,d);c&&(a=f.filterConversations(c,a)),b.onSuccess(a)});a.RongIMClient.getInstance().getRemoteConversationList({onSuccess:function(c){a.RongUtil.supportLocalStorage()&&Array.forEach(a.RongIMClient._memoryStore.conversationList,function(b){var c=a.UnreadCountHandler.get(b.conversationType,b.targetId);0==b.unreadMessageCount&&(b.unreadMessageCount=Number(c))}),a.RongIMClient._memoryStore.isSyncRemoteConverList=!1,setTimeout(function(){b.onSuccess(c)})},onError:function(a){setTimeout(function(){b.onError(a)})}},c,d,e)},b.prototype.clearCache=function(){var b=a.RongIMClient._memoryStore||{};b.conversationList=[],b.isSyncRemoteConverList=!0},b.prototype.clearConversations=function(b,c){Array.forEach(b,function(b){Array.forEach(a.RongIMClient._memoryStore.conversationList,function(c){b==c.conversationType&&a.RongIMClient.getInstance().removeConversation(c.conversationType,c.targetId,{onSuccess:function(){},onError:function(){}})})}),setTimeout(function(){c.onSuccess(!0)})},b.prototype.setMessageContent=function(a,b,c){},b.prototype.setMessageSearchField=function(a,b,c){},b.prototype.getHistoryMessages=function(b,c,d,e,f,g,h){var i={objectname:g,order:h};a.RongIMClient.getInstance().getRemoteHistoryMessages(b,c,d,e,f,i)},b.prototype.getTotalUnreadCount=function(b,c){var d=a.UnreadCountHandler.getAll(c);b.onSuccess(d)},b.prototype.getConversationUnreadCount=function(b,c){var d=0;Array.forEach(b,function(b){Array.forEach(a.RongIMClient._memoryStore.conversationList,function(a){a.conversationType==b&&(d+=a.unreadMessageCount)})}),setTimeout(function(){c.onSuccess(d)})},b.prototype.setUnreadCount=function(b,c,d,e){e=e||(new Date).getTime(),a.UnreadCountHandler.set(b,c,d,e)},b.prototype.getUnreadCount=function(b,c,d){var e=a.UnreadCountHandler.get(b,c);setTimeout(function(){d.onSuccess(e||0)})},b.prototype.cleanMentioneds=function(b){if(b){b.mentionedMsg=null;var c=b.targetId,d=b.conversationType,e=a.RongIMClient._storageProvider.getItem("mentioneds_"+a.Bridge._client.userId+"_"+d+"_"+c);if(e){var f=JSON.parse(e);delete f[d+"_"+c],a.MessageUtil.isEmpty(f)?a.RongIMClient._storageProvider.removeItem("mentioneds_"+a.Bridge._client.userId+"_"+d+"_"+c):a.RongIMClient._storageProvider.setItem("mentioneds_"+a.Bridge._client.userId+"_"+d+"_"+c,JSON.stringify(f))}}},b.prototype.clearUnreadCountByTimestamp=function(a,b,c,d){setTimeout(function(){d.onSuccess(!0)})},b.prototype.clearUnreadCount=function(b,c,d){var e=this;a.UnreadCountHandler.remove(b,c),this.getConversation(b,c,{onSuccess:function(b){b=b||new a.Conversation;var c=b.unreadMessageCount;b&&(b.unreadMessageCount=0,e.cleanMentioneds(b)),setTimeout(function(){d.onSuccess(!0),c&&a.RongIMClient._dataAccessProvider.Conversation._notify(a.RongIMClient._memoryStore.conversationList)})},onError:function(a){setTimeout(function(){d.onError(a)})}})},b.prototype.clearTotalUnreadCount=function(b){var c=a.RongIMClient._memoryStore.conversationList,d=this,e=!1;if(c)for(var f=0;f<c.length;f++){var g=c[f];g&&(e=!!g.unreadMessageCount||e,g.unreadMessageCount=0,d.cleanMentioneds(g))}a.UnreadCountHandler.clear(),setTimeout(function(){b.onSuccess(!0),e&&a.RongIMClient._dataAccessProvider.Conversation._notify(a.RongIMClient._memoryStore.conversationList)})},b.prototype.setConversationToTop=function(a,b,c,d){var e=this;this.getConversation(a,b,{onSuccess:function(a){a.isTop=c,e.addConversation(a,d),setTimeout(function(){d.onSuccess(!0)})},onError:function(a){setTimeout(function(){d.onError(a)})}})},b.prototype.getConversationNotificationStatus=function(b,c){var d=b.targetId,e=b.conversationType,f=a.RongIMClient._memoryStore.notification,g=function(){return e+"_"+d},h=g(),i=f[h];if("number"==typeof i)return void c.onSuccess(i);var j={1:"qryPPush",3:"qryDPush"},k=j[e];if(!k){return void c.onError(8001)}var l=new a.RongIMClient.Protobuf.BlockPushInput;l.setBlockeeId(d);var m=a.Bridge._client.userId,n=function(a){f[h]=a,setTimeout(function(){c.onSuccess(a)})};a.RongIMClient.bridge.queryMsg(k,a.MessageUtil.ArrayForm(l.toArrayBuffer()),m,{onSuccess:function(a){n(a)},onError:function(a){1==a?n(a):setTimeout(function(){c.onError(a)})}})},b.prototype.setConversationNotificationStatus=function(b,c){var d=b.conversationType,e=b.targetId,f=b.status,g=function(){return d+"_"+f},h={"1_1":"blkPPush","3_1":"blkDPush","1_0":"unblkPPush","3_0":"unblkDPush"},i=g();a.RongIMClient._memoryStore.notification[i]=f;var j=h[i];if(!j){return void setTimeout(function(){c.onError(8001)})}var k=new a.RongIMClient.Protobuf.BlockPushInput;k.setBlockeeId(e);var l=a.Bridge._client.userId;a.RongIMClient.bridge.queryMsg(j,a.MessageUtil.ArrayForm(k.toArrayBuffer()),l,{onSuccess:function(a){setTimeout(function(){c.onSuccess(a)})},onError:function(a){setTimeout(function(){c.onError(a)})}})},b.prototype.getUserStatus=function(b,c){var d=new a.RongIMClient.Protobuf.GetUserStatusInput;b=a.Bridge._client.userId,a.RongIMClient.bridge.queryMsg(35,a.MessageUtil.ArrayForm(d.toArrayBuffer()),b,{onSuccess:function(b){b=a.RongInnerTools.convertUserStatus(b),setTimeout(function(){c.onSuccess(b)})},onError:function(a){setTimeout(function(){c.onError(a)})}},"GetUserStatusOutput")},b.prototype.setUserStatus=function(b,c){var d=new a.RongIMClient.Protobuf.SetUserStatusInput,e=a.Bridge._client.userId;b&&d.setStatus(b),a.RongIMClient.bridge.queryMsg(36,a.MessageUtil.ArrayForm(d.toArrayBuffer()),e,{onSuccess:function(a){setTimeout(function(){c.onSuccess(!0)})},onError:function(a){setTimeout(function(){c.onError(a)})}},"SetUserStatusOutput")},b.prototype.subscribeUserStatus=function(b,c){var d=new a.RongIMClient.Protobuf.SubUserStatusInput,e=a.Bridge._client.userId;d.setUserid(b),a.RongIMClient.bridge.queryMsg(37,a.MessageUtil.ArrayForm(d.toArrayBuffer()),e,{onSuccess:function(a){setTimeout(function(){c&&c.onSuccess(!0)})},onError:function(a){setTimeout(function(){c&&c.onError(a)})}},"SubUserStatusOutput")},b.prototype.setUserStatusListener=function(b,c){a.RongIMClient.userStatusListener=c;var d=b.userIds||[];d.length&&a.RongIMClient._dataAccessProvider.subscribeUserStatus(d)},b.prototype.clearListeners=function(){},b.prototype.setServerInfo=function(a){},b.prototype.getUnreadMentionedMessages=function(a,b){return null},b.prototype.setConversationHidden=function(a,b,c){},b.prototype.setMessageExtra=function(a,b,c){setTimeout(function(){c.onSuccess(!0)})},b.prototype.setMessageReceivedStatus=function(a,b,c){setTimeout(function(){c.onSuccess(!0)})},b.prototype.setMessageSentStatus=function(a,b,c){setTimeout(function(){c.onSuccess(!0)})},b.prototype.getAllConversations=function(a){setTimeout(function(){a.onSuccess([])})},b.prototype.getConversationByContent=function(a,b){setTimeout(function(){b.onSuccess([])})},b.prototype.getMessagesFromConversation=function(a,b,c,d){setTimeout(function(){d.onSuccess([])})},b.prototype.searchConversationByContent=function(a,b,c){setTimeout(function(){b.onSuccess([])})},b.prototype.searchMessageByContent=function(a,b,c,d,e,f,g){setTimeout(function(){g.onSuccess([])})},b.prototype.getDelaTime=function(){return a.RongIMClient._memoryStore.deltaTime},b.prototype.getCurrentConnectionStatus=function(){var b=a.Bridge._client||{},c=b.channel||{},d=a.ConnectionStatus.CONNECTION_CLOSED;return"number"==typeof c.connectionStatus&&(d=c.connectionStatus),d},b.prototype.getAgoraDynamicKey=function(b,c,d){var e=new a.RongIMClient.Protobuf.VoipDynamicInput;e.setEngineType(b),e.setChannelName(c),a.RongIMClient.bridge.queryMsg(32,a.MessageUtil.ArrayForm(e.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(a){setTimeout(function(){d.onSuccess(a)})},onError:function(a){setTimeout(function(){d.onError(a)})}},"VoipDynamicOutput")},b.prototype.setDeviceInfo=function(a){},b.prototype.setEnvironment=function(a){},b.prototype.clearData=function(){return!0},b.prototype.getPublicServiceProfile=function(b,c,d){var e=a.RongIMClient._memoryStore.publicServiceMap.get(b,c);setTimeout(function(){d.onSuccess(e)})},b.prototype.getRemotePublicServiceList=function(b,c){if(a.RongIMClient._memoryStore.depend.openMp){var d=new a.RongIMClient.Protobuf.PullMpInput;c?d.setTime(c):d.setTime(0),d.setMpid(""),a.RongIMClient.bridge.queryMsg(28,a.MessageUtil.ArrayForm(d.toArrayBuffer()),a.Bridge._client.userId,{onSuccess:function(c){a.RongIMClient._memoryStore.publicServiceMap.publicServiceList.length=0,a.RongIMClient._memoryStore.publicServiceMap.publicServiceList=c,setTimeout(function(){b&&b.onSuccess(c)})},onError:function(a){setTimeout(function(){b&&b.onError(a)})}},"PullMpOutput")}},b.prototype.getRTCUserInfoList=function(b,c){var d=new a.RongIMClient.Protobuf.RtcQueryListInput;d.setOrder(2),a.RongIMClient.bridge.queryMsg("rtcUData",a.MessageUtil.ArrayForm(d.toArrayBuffer()),b.id,{onSuccess:function(b){var d={},e=b.list;a.RongUtil.forEach(e,function(b){var c=b.userId,e={};a.RongUtil.forEach(b.userData,function(a){var b=a.key,c=a.value;e[b]=c}),d[c]=e}),c.onSuccess(d)},onError:function(a){c.onError(a)}},"RtcUserListOutput")},b.prototype.getRTCUserList=function(b,c){var d=new a.RongIMClient.Protobuf.RtcQueryListInput;d.setOrder(2),a.RongIMClient.bridge.queryMsg("rtcUList",a.MessageUtil.ArrayForm(d.toArrayBuffer()),b.id,{onSuccess:function(a){c.onSuccess({users:a.list})},onError:function(a){c.onError(a)}},"RtcUserListOutput")},b.prototype.setRTCUserInfo=function(b,c,d){var e=new a.RongIMClient.Protobuf.RtcValueInfo;e.setKey(c.key),e.setValue(c.value),a.RongIMClient.bridge.queryMsg("rtcUPut",a.MessageUtil.ArrayForm(e.toArrayBuffer()),b.id,{onSuccess:function(){d.onSuccess(!0)},onError:function(a){d.onError(a)}})},b.prototype.removeRTCUserInfo=function(b,c,d){var e=new a.RongIMClient.Protobuf.RtcKeyDeleteInput,f=c.keys||[];a.RongUtil.isArray(f)||(f=[f]),e.setKey(f),a.RongIMClient.bridge.queryMsg("rtcUDel",a.MessageUtil.ArrayForm(e.toArrayBuffer()),b.id,{onSuccess:function(){d.onSuccess(!0)},onError:function(a){d.onError(a)}})},b.prototype.getRTCRoomInfo=function(b,c){var d=new a.RongIMClient.Protobuf.RtcQueryListInput;d.setOrder(2),a.RongIMClient.bridge.queryMsg("rtcRInfo",a.MessageUtil.ArrayForm(d.toArrayBuffer()),b.id,{onSuccess:function(b){var d={id:b.roomId,total:b.userCount};a.RongUtil.forEach(b.roomData,function(a){d[a.key]=a.value}),c.onSuccess(d)},onError:function(a){c.onError(a)}},"RtcRoomInfoOutput")},b.prototype.setRTCRoomInfo=function(b,c,d){var e=new a.RongIMClient.Protobuf.RtcValueInfo;e.setKey(c.key),e.setValue(c.value),a.RongIMClient.bridge.queryMsg("rtcRPut",a.MessageUtil.ArrayForm(e.toArrayBuffer()),b.id,{onSuccess:function(){d.onSuccess(!0)},onError:function(a){d.onError(a)}})},b.prototype.removeRTCRoomInfo=function(b,c,d){var e=new a.RongIMClient.Protobuf.RtcKeyDeleteInput,f=c.keys||[];a.RongUtil.isArray(f)||(f=[f]),e.setKey(f),a.RongIMClient.bridge.queryMsg("rtcRDel",a.MessageUtil.ArrayForm(e.toArrayBuffer()),b.id,{onSuccess:function(){d.onSuccess(!0)},onError:function(a){d.onError(a)}})},b.prototype.joinRTCRoom=function(b,c){var d=new a.RongIMClient.Protobuf.RtcInput,e=b.mode||0;d.setRoomType(e),b.broadcastType&&d.setBroadcastType(b.broadcastType),a.RongIMClient.bridge.queryMsg("rtcRJoin_data",a.MessageUtil.ArrayForm(d.toArrayBuffer()),b.id,{onSuccess:function(b){var d={},e=b.list,f=b.token,g=b.sessionId;a.RongUtil.forEach(e,function(b){var c=b.userId,e={};a.RongUtil.forEach(b.userData,function(a){var b=a.key,c=a.value;e[b]=c}),d[c]=e}),c.onSuccess({users:d,token:f,sessionId:g})},onError:function(a){c.onError(a)}},"RtcUserListOutput")},b.prototype.quitRTCRoom=function(b,c){var d=new a.RongIMClient.Protobuf.SetUserStatusInput;a.RongIMClient.bridge.queryMsg("rtcRExit",a.MessageUtil.ArrayForm(d.toArrayBuffer()),b.id,{onSuccess:function(){c.onSuccess(!0)},onError:function(a){c.onError(a)}})},b.prototype.RTCPing=function(b,c){var d=new a.RongIMClient.Protobuf.RtcInput,e=b.mode||0;d.setRoomType(e),b.broadcastType&&d.setBroadcastType(b.broadcastType),a.RongIMClient.bridge.queryMsg("rtcPing",a.MessageUtil.ArrayForm(d.toArrayBuffer()),b.id,c)},b.prototype.setRTCData=function(b,c,d,e,f,g,h){var i=new a.RongIMClient.Protobuf.RtcSetDataInput;i.setInterior(e),i.setTarget(f),i.setKey(c),i.setValue(d),h=h||{};var j=h.name,k=h.content;j&&i.setObjectName(j),k&&(a.RongUtil.isString(k)||(k=JSON.stringify(k)),i.setContent(k)),a.RongIMClient.bridge.queryMsg("rtcSetData",a.MessageUtil.ArrayForm(i.toArrayBuffer()),b,g,"RtcOutput")},b.prototype.getRTCData=function(b,c,d,e,f){var g=new a.RongIMClient.Protobuf.RtcDataInput;g.setInterior(d),g.setTarget(e),g.setKey(c),a.RongIMClient.bridge.queryMsg("rtcQryData",a.MessageUtil.ArrayForm(g.toArrayBuffer()),b,{onSuccess:function(b){var c={},d=b.outInfo;a.RongUtil.forEach(d,function(a){c[a.key]=a.value}),f.onSuccess(c)},onError:f.onError},"RtcQryOutput")},b.prototype.removeRTCData=function(b,c,d,e,f,g){var h=new a.RongIMClient.Protobuf.RtcDataInput;h.setInterior(d),h.setTarget(e),h.setKey(c),g=g||{};var i=g.name,j=g.content;i&&h.setObjectName(i),j&&(a.RongUtil.isString(j)||(j=JSON.stringify(j)),h.setContent(j)),a.RongIMClient.bridge.queryMsg("rtcDelData",a.MessageUtil.ArrayForm(h.toArrayBuffer()),b,f,"RtcOutput")},b.prototype.setRTCUserData=function(b,c,d,e,f,g){this.setRTCData(b,c,d,e,a.RTCAPIType.PERSON,f,g)},b.prototype.getRTCUserData=function(b,c,d,e,f){this.getRTCData(b,c,d,a.RTCAPIType.PERSON,e)},b.prototype.removeRTCUserData=function(b,c,d,e,f){this.removeRTCData(b,c,d,a.RTCAPIType.PERSON,e,f)},b.prototype.setRTCRoomData=function(b,c,d,e,f,g){this.setRTCData(b,c,d,e,a.RTCAPIType.ROOM,f,g)},b.prototype.getRTCRoomData=function(b,c,d,e,f){this.getRTCData(b,c,d,a.RTCAPIType.ROOM,e)},b.prototype.removeRTCRoomData=function(b,c,d,e,f){this.removeRTCData(b,c,d,a.RTCAPIType.ROOM,e,f)},b.prototype.setRTCOutData=function(b,c,d,e,f){var g=new a.RongIMClient.Protobuf.RtcSetOutDataInput;g.setTarget(d),a.RongUtil.isArray(c)||(c=[c]);for(var h=0;h<c.length;h++){var i=c[h];i.key&&(i.key=i.key.toString()),i.value&&(i.value=i.value.toString())}g.setValueInfo(c),f=f||{};var j=f.name,k=f.content;j&&g.setObjectName(j),k&&(a.RongUtil.isString(k)||(k=JSON.stringify(k)),g.setContent(k)),a.RongIMClient.bridge.queryMsg("rtcSetOutData",a.MessageUtil.ArrayForm(g.toArrayBuffer()),b,e,"RtcOutput")},b.prototype.getRTCOutData=function(b,c,d){var e=new a.RongIMClient.Protobuf.RtcQryUserOutDataInput;e.setUserId(c),a.RongIMClient.bridge.queryMsg("rtcQryUserOutData",a.MessageUtil.ArrayForm(e.toArrayBuffer()),b,d,"RtcUserOutDataOutput")},b.prototype.getNavi=function(){var b=a.RongIMClient._storageProvider.getItem("fullnavi")||"{}";return JSON.parse(b)},b.prototype.getRTCToken=function(b,c){var d=new a.RongIMClient.Protobuf.RtcInput,e=b.mode||0;d.setRoomType(e),b.broadcastType&&d.setBroadcastType(b.broadcastType),a.RongIMClient.bridge.queryMsg("rtcToken",a.MessageUtil.ArrayForm(d.toArrayBuffer()),b.id,{onSuccess:function(a){c.onSuccess(a)},onError:function(a){c.onError(a)}},"RtcTokenOutput")},b.prototype.setRTCState=function(b,c,d){var e=new a.RongIMClient.Protobuf.MCFollowInput,f=c.report;e.setId(f),a.RongIMClient.bridge.queryMsg("rtcUserState",a.MessageUtil.ArrayForm(e.toArrayBuffer()),b.id,{onSuccess:function(a){d.onSuccess(a)},onError:function(a){d.onError(a)}},"RtcOutput")},b}();a.ServerDataProvider=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(b){this.Conversation={watcher:new a.Observer,watch:function(a){},unwatch:function(a){},_notify:function(a){}},this.version="2.8.27",this.userId="",this.useConsole=!1,this.appKey="",this.token="",this.connectionStatus=a.ConnectionStatus.DISCONNECTED,this.addon=b}return b.prototype.init=function(a,b){this.appKey=a,this.useConsole&&console.log("init"),b=b||{},b.version=this.version;var c=this.addon.initWithAppkey(a,b.dbPath,b);return c&&(c=JSON.parse(c)),this.addon.registerMessageType("RC:VcMsg",3),this.addon.registerMessageType("RC:ImgTextMsg",3),this.addon.registerMessageType("RC:FileMsg",3),this.addon.registerMessageType("RC:LBSMsg",3),this.addon.registerMessageType("RC:PSImgTxtMsg",3),this.addon.registerMessageType("RC:PSMultiImgTxtMsg",3),this.addon.registerMessageType("RCJrmf:RpMsg",3),this.addon.registerMessageType("RCJrmf:RpOpendMsg",1),this.addon.registerMessageType("RC:GrpNtf",1),this.addon.registerMessageType("RC:DizNtf",0),this.addon.registerMessageType("RC:InfoNtf",0),this.addon.registerMessageType("RC:ContactNtf",0),this.addon.registerMessageType("RC:ProfileNtf",0),this.addon.registerMessageType("RC:CmdNtf",0),this.addon.registerMessageType("RC:CmdMsg",0),this.addon.registerMessageType("RC:TypSts",0),this.addon.registerMessageType("RC:CsChaR",0),this.addon.registerMessageType("RC:CsHsR",0),this.addon.registerMessageType("RC:CsEnd",0),this.addon.registerMessageType("RC:CsSp",0),this.addon.registerMessageType("RC:CsUpdate",0),this.addon.registerMessageType("RC:CsContact",0),this.addon.registerMessageType("RC:ReadNtf",0),this.addon.registerMessageType("RC:VCAccept",0),this.addon.registerMessageType("RC:VCRinging",0),this.addon.registerMessageType("RC:VCSummary",0),this.addon.registerMessageType("RC:VCHangup",0),this.addon.registerMessageType("RC:VCInvite",0),this.addon.registerMessageType("RC:VCModifyMedia",0),this.addon.registerMessageType("RC:VCModifyMem",0),this.addon.registerMessageType("RC:PSCmd",0),this.addon.registerMessageType("RC:RcCmd",0),this.addon.registerMessageType("RC:SRSMsg",0),this.addon.registerMessageType("RC:RRReqMsg",0),this.addon.registerMessageType("RC:RRRspMsg",0),c},b.prototype.connect=function(b,c,d,e){this.useConsole&&console.log("connect"),this.userId=d,this.connectCallback=c,a.Bridge._client={userId:d,token:b},e=e||{};e.openMp,e.openUS;e.type&&this.addon.setEnvironment(!0);var f=this;this.addon.connectWithToken(b,d,function(b){f.userId=b,a.Bridge._client.userId=b})},b.prototype.setServerInfo=function(a){"setServerInfo"in this.addon&&this.addon.setServerInfo(a.navi)},b.prototype.logout=function(){this.useConsole&&console.log("logout"),this.disconnect()},b.prototype.disconnect=function(){this.useConsole&&console.log("disconnect"),this.connectionStatus=a.ConnectionStatus.DISCONNECTED,this.addon.disconnect(!0)},b.prototype.clearListeners=function(){this.addon.setOnReceiveStatusListener(),this.addon.setConnectionStatusListener(),this.addon.setOnReceiveMessageListener()},b.prototype.clearData=function(){return this.useConsole&&console.log("clearData"),this.addon.clearData()},b.prototype.setConnectionStatusListener=function(b){var c=this;c.connectListener=b,this.useConsole&&console.log("setConnectionStatusListener"),c.addon&&c.addon.setConnectionStatusListener(function(d){var e=c.connectionStatus===a.ConnectionStatus.CONNECTED,f=d;switch(d){case 10:f=a.ConnectionStatus.CONNECTING;break;case 31004:return void setTimeout(function(){c.connectCallback.onTokenIncorrect()});case 1:case 8:case 9:case 11:case 12:case 31011:case 3e4:case 30002:case 30010:if(!e)return;f=a.ConnectionStatus.NETWORK_UNAVAILABLE;break;case 0:case 33005:f=a.ConnectionStatus.CONNECTED,setTimeout(function(){c.connectCallback.onSuccess(c.userId)});break;case 6:f=a.ConnectionStatus.KICKED_OFFLINE_BY_OTHER_CLIENT;break;default:f=d}c.connectionStatus=f,setTimeout(function(){b.onChanged(f)})})},b.prototype.setOnReceiveMessageListener=function(b){var c=this;c.messageListener=b,this.useConsole&&console.log("setOnReceiveMessageListener"),c.addon&&c.addon.setOnReceiveMessageListener(function(d,e,f,g){var h=c.buildMessage(d);h.offLineMessage=f,setTimeout(function(){["AcceptMessage","RingingMessage","HungupMessage","InviteMessage","MediaModifyMessage","MemberModifyMessage"].indexOf(h.messageType)>-1?a.RongIMClient._voipProvider&&a.RongIMClient._voipProvider.onReceived(h):12==h.conversationType?(a.RongIMClient.RTCListener(h),a.RongIMClient.RTCInnerListener(h),a.RongIMClient.RTCSignalLisener(h)):b.onReceived(h,e,g)})})},b.prototype.sendTypingStatusMessage=function(b,c,d,e){var f=this;this.useConsole&&console.log("sendTypingStatusMessage"),d in a.RongIMClient.MessageParams&&f.sendMessage(b,c,a.TypingStatusMessage.obtain(a.RongIMClient.MessageParams[d].objectName,""),{onSuccess:function(){setTimeout(function(){e.onSuccess()})},onError:function(a){setTimeout(function(){e.onError(a,null)})},onBefore:function(){}})},b.prototype.setMessageStatus=function(a,b,c,d,e){this.addon.updateMessageReceiptStatus(a,b,c),e.onSuccess(!0)},b.prototype.sendTextMessage=function(b,c,d,e){var f=a.TextMessage.obtain(d);this.useConsole&&console.log("sendTextMessage"),this.sendMessage(b,c,f,e)},b.prototype.getRemoteHistoryMessages=function(b,c,d,e,f,g){try{var h=this;h.useConsole&&console.log("getRemoteHistoryMessages"),h.addon.getRemoteHistoryMessages(b,c,d||0,e,function(b,c){var d=b?JSON.parse(b).list:[],e=[];d.reverse();for(var g=0,i=d.length;g<i;g++){var j=h.buildMessage(d[g].obj);j.sentStatus=a.SentStatus.READ,e[g]=j}f.onSuccess(e,!!c)},function(a){f.onError(a)})}catch(i){f.onError(i)}},b.prototype.getRemoteConversationList=function(a,b,c,d){try{this.useConsole&&console.log("getRemoteConversationList");var e=b||[1,2,3,4,5,6,7,8],f=this.addon.getConversationList(e),g=JSON.parse(f).list,h=[],i=this,j=0;g.reverse(),d="boolean"==typeof d&&d;for(var k=0,l=g.length;k<l;k++){var m=g[k].obj,n=JSON.parse(m);if(""!=n){if(1==n.isHidden&&d)continue;h[j]=i.buildConversation(m),j++}}h.reverse();var o=h.length;c=c||o,o>c&&(h.length=c),a.onSuccess(h)}catch(p){a.onError(p)}},b.prototype.removeConversation=function(b,c,d){try{this.useConsole&&console.log("removeConversation"),this.addon.removeConversation(b,c);for(var e=a.RongIMClient._memoryStore.conversationList,f=e.length,g=0;g<f;g++)if(e[g].conversationType==b&&c==e[g].targetId){e.splice(g,1);break}d.onSuccess(!0)}catch(h){d.onError(h)}},b.prototype.joinChatRoom=function(a,b,c){this.useConsole&&console.log("joinChatRoom"),this.addon.joinChatRoom(a,b,function(){c.onSuccess()},function(a){c.onError(a)})},b.prototype.quitChatRoom=function(a,b){this.useConsole&&console.log("quitChatRoom"),this.addon.quitChatRoom(a,function(){b.onSuccess()},function(a){b.onError(a)})},b.prototype.setChatroomEntry=function(a,b,c){},b.prototype.forceSetChatroomEntry=function(a,b,c){},b.prototype.getChatroomEntry=function(a,b,c){},b.prototype.getAllChatroomEntries=function(a,b){},b.prototype.removeChatroomEntry=function(a,b,c){},b.prototype.forceRemoveChatroomEntry=function(a,b,c){},b.prototype.pullChatroomEntry=function(a,b,c){},b.prototype.addToBlacklist=function(a,b){this.useConsole&&console.log("addToBlacklist"),this.addon.addToBlacklist(a,function(){b.onSuccess()},function(a){b.onError(a)})},b.prototype.getBlacklist=function(a){this.useConsole&&console.log("getBlacklist"),this.addon.getBlacklist(function(b){a.onSuccess(b)},function(b){a.onError(b)})},b.prototype.getBlacklistStatus=function(a,b){this.useConsole&&console.log("getBlacklistStatus"),this.addon.getBlacklistStatus(a,function(a){b.onSuccess(a)},function(a){b.onError(a)})},b.prototype.removeFromBlacklist=function(a,b){this.useConsole&&console.log("removeFromBlacklist"),this.addon.removeFromBlacklist(a,function(){b.onSuccess()},function(a){b.onError(a)})},b.prototype.sendMessage=function(b,c,d,e,f,g,h,i,j){var k=this,l=[];k.useConsole&&console.log("sendMessage"),j=j||{};var m=b==a.ConversationType.DISCUSSION||b==a.ConversationType.GROUP;if(m&&d.messageName==a.RongIMClient.MessageType.ReadReceiptResponseMessage){l=[];var n=d;if(n.receiptMessageDic){var o=[];for(var p in n.receiptMessageDic)o.push(p);l=o}}m&&d.messageName==a.RongIMClient.MessageType.SyncReadStatusMessage&&(l=[],l.push(k.userId));var q=j.userIds;m&&q&&(l=q);var r=k.addon.sendMessage(b,c,a.RongIMClient.MessageParams[d.messageName].objectName,d.encode(),g||"",h||"",function(a){},function(b,c){var d=k.buildMessage(b),f=a.ErrorCode.SENSITIVE_REPLACE;if(c==f)return e.onError(f,d);e.onSuccess(d)},function(a,b){e.onError(b,k.buildMessage(a))},l,f),s=JSON.parse(r);e.onBefore&&e.onBefore(s.messageId),a.MessageIdHandler.messageId=s.messageId},b.prototype.registerMessageType=function(b,c,d,e,f){this.useConsole&&console.log("registerMessageType"),this.addon.registerMessageType(c,d.getMessageTag(),f);var g=a.ModelUtil.modleCreate(e,b);a.RongIMClient.RegisterMessage[b]=g,a.RongIMClient.RegisterMessage[b].messageName=b,registerMessageTypeMapping[c]=b,a.RongIMClient.MessageType[b]=b,a.RongIMClient.MessageParams[b]={objectName:c,msgTag:d},typeMapping[c]=b},b.prototype.registerMessageTypes=function(b){var c=[],d=function(a){var b=[];for(var c in a)b.push(c);return b};for(var e in b){var f=b[e],g=f.proto,h=d(g),i=f.flag||3,j=a.MessageTag.getTagByStatus(i);i=new a.MessageTag(j.isCounted,j.isPersited),c.push({type:e,name:f.name,flag:i,protos:h})}for(var k=function(b){var c=b.type,d=b.name,e=b.flag,f=b.protos;a.RongIMClient.registerMessageType(c,d,e,f)},l=0,m=c.length;l<m;l++){var f=c[l];k(f)}},b.prototype.addMessage=function(b,c,d,e){this.useConsole&&console.log("addMessage");var f=d.direction,g=this.addon.insertMessage(b,c,d.senderUserId,d.objectName,JSON.stringify(d.content),function(){e.onSuccess(h.buildMessage(g))},function(){e.onError(a.ErrorCode.MSG_INSERT_ERROR)},f),h=this},b.prototype.removeMessage=function(a,b,c,d){},b.prototype.deleteRemoteMessages=function(a,b,c,d){},b.prototype.removeLocalMessage=function(a,b,c,d){try{
this.useConsole&&console.log("removeLocalMessage"),this.addon.deleteMessages(c),d.onSuccess(!0)}catch(e){d.onError(e)}},b.prototype.getMessage=function(a,b){try{this.useConsole&&console.log("getMessage");var c=this.buildMessage(this.addon.getMessage(a));b.onSuccess(c)}catch(d){b.onError(d)}},b.prototype.clearMessages=function(a,b,c){try{this.useConsole&&console.log("clearMessages"),this.addon.clearMessages(a,b),c.onSuccess(!0)}catch(d){c.onError(d)}},b.prototype.setUnreadCount=function(a,b,c){},b.prototype.getConversation=function(a,b,c){try{this.useConsole&&console.log("getConversation");var d=this.addon.getConversation(a,b);c.onSuccess(this.buildConversation(d))}catch(e){c.onError(e)}},b.prototype.getConversationList=function(a,b,c,d){this.useConsole&&console.log("getConversationList"),this.getRemoteConversationList(a,b,c,d)},b.prototype.clearCache=function(){var b=a.RongIMClient._memoryStore||{};b.conversationList=[],b.isSyncRemoteConverList},b.prototype.clearConversations=function(a,b){try{this.useConsole&&console.log("clearConversations"),this.addon.clearConversations(),b.onSuccess(!0)}catch(c){b.onError(c)}},b.prototype.setMessageContent=function(a,b,c){b=JSON.stringify(b),this.addon.setMessageContent(a,b,c)},b.prototype.setMessageSearchField=function(a,b,c){this.addon.setMessageSearchField(a,b,c)},b.prototype.getHistoryMessages=function(b,c,d,e,f,g,h){if(this.useConsole&&console.log("getHistoryMessages"),e<=0)return void f.onError(a.ErrorCode.TIMEOUT);g=g||"",h=void 0===h||h;try{var i=this.addon.getHistoryMessages(b,c,d||0,e,g,h),j=i?JSON.parse(i).list:[],k=[],l=this;j.reverse();for(var m=0,n=j.length;m<n;m++){var o=l.buildMessage(j[m].obj);k[m]=o}f.onSuccess(k,n==e)}catch(p){f.onError(p)}},b.prototype.clearRemoteHistoryMessages=function(b,c){var d=b.conversationType,e=b.targetId,f=b.timestamp;return{1:!0,2:!0,3:!0,5:!0,6:!0}[d]?"number"!=typeof f?void c.onError(a.ErrorCode.CLEAR_HIS_TIME_ERROR):void this.addon.clearRemoteHistoryMessages(+d,e,f,function(){c.onSuccess(!0)},function(b){1==b&&(b=a.ErrorCode.CLEAR_HIS_ERROR),c.onError(b)}):void c.onError(a.ErrorCode.CLEAR_HIS_TYPE_ERROR)},b.prototype.clearHistoryMessages=function(b,c){var d=+b.conversationType,e=b.targetId;try{this.addon.clearMessages(d,e);c.onSuccess(!0)}catch(f){console.log(f),c.onError(a.ErrorCode.CLEAR_HIS_ERROR)}},b.prototype.getTotalUnreadCount=function(a,b){try{var c;this.useConsole&&console.log("getTotalUnreadCount"),c=b?this.addon.getTotalUnreadCount(b):this.addon.getTotalUnreadCount(),a.onSuccess(c)}catch(d){a.onError(d)}},b.prototype.getConversationUnreadCount=function(a,b){this.useConsole&&console.log("getConversationUnreadCount"),this.getTotalUnreadCount(b,a)},b.prototype.getUnreadCount=function(a,b,c){try{this.useConsole&&console.log("getUnreadCount");var d=this.addon.getUnreadCount(a,b);c.onSuccess(d)}catch(e){c.onError(e)}},b.prototype.clearUnreadCount=function(a,b,c){try{this.useConsole&&console.log("clearUnreadCount");this.addon.clearUnreadCount(a,b);c.onSuccess(!0)}catch(d){c.onError(d)}},b.prototype.clearTotalUnreadCount=function(a){this.useConsole&&console.log("clearTotalUnreadCount")},b.prototype.clearUnreadCountByTimestamp=function(a,b,c,d){try{this.useConsole&&console.log("clearUnreadCountByTimestamp");this.addon.clearUnreadCountByTimestamp(a,b,c);d.onSuccess(!0)}catch(e){d.onError(e)}},b.prototype.setConversationToTop=function(a,b,c,d){try{this.useConsole&&console.log("setConversationToTop"),this.addon.setConversationToTop(a,b,c),d.onSuccess(!0)}catch(e){d.onError(e)}},b.prototype.setConversationHidden=function(a,b,c){this.addon.setConversationHidden(a,b,c)},b.prototype.setMessageReceivedStatus=function(a,b,c){try{this.useConsole&&console.log("setMessageReceivedStatus"),this.addon.setMessageReceivedStatus(a,b),c.onSuccess(!0)}catch(d){c.onError(d)}},b.prototype.setMessageSentStatus=function(a,b,c){try{this.useConsole&&console.log("setMessageSentStatus"),this.addon.setMessageSentStatus(a,b),c.onSuccess(!0)}catch(d){c.onError(d)}},b.prototype.getFileToken=function(a,b){this.useConsole&&console.log("getFileToken"),this.addon.getUploadToken(a,function(a){b.onSuccess({token:a})},function(a){b.onError(a)})},b.prototype.getFileUrl=function(a,b,c,d){this.useConsole&&console.log("getFileUrl"),this.addon.getDownloadUrl(a,b,c,function(a){d.onSuccess({downloadUrl:a})},function(a){d.onError(a)})},b.prototype.getPullSetting=function(a){this.useConsole&&console.log("getPullSetting")},b.prototype.setOfflineMessageDuration=function(a,b){this.useConsole&&console.log("setOfflineMessageDuration")},b.prototype.searchConversationByContent=function(a,b,c){var d=[];d=void 0===c?[1,2,3,4,5,6,7]:c;try{this.useConsole&&console.log("searchConversationByContent");var e=this.addon.searchConversationByContent(d,a),f=JSON.parse(e).list,g=[],h=this;f.reverse();for(var i=0,j=f.length;i<j;i++)g[i]=h.buildConversation(f[i].obj);b.onSuccess(g)}catch(k){b.onError(k)}},b.prototype.searchMessageByContent=function(a,b,c,d,e,f,g){var h=this;try{this.useConsole&&console.log("searchMessageByContent"),this.addon.searchMessageByContent(a,b,c,d,e,f,function(a,b){var c=a?JSON.parse(a).list:[],d=[];c.reverse();for(var e=0,f=c.length;e<f;e++)d[e]=h.buildMessage(c[e].obj);g.onSuccess(d,b)})}catch(i){g.onError(i)}},b.prototype.getChatRoomInfo=function(a,b,c,d){this.useConsole&&console.log("getChatRoomInfo"),this.addon.getChatroomInfo(a,b,c,function(a,b){var c=a?JSON.parse(a).list:[],e={userInfos:[],userTotalNums:b};if(c.length>0)for(var f=0,g=c.length;f<g;f++)e.userInfos.push(JSON.parse(c[f].obj));d.onSuccess(e)},function(a){d.onError(a)})},b.prototype.setChatroomHisMessageTimestamp=function(a,b){},b.prototype.getChatRoomHistoryMessages=function(a,b,c,d){},b.prototype.getDelaTime=function(){return this.addon.getDeltaTime()},b.prototype.getUserStatus=function(b,c){this.addon.getUserStatus(b,function(b){var d=a.RongInnerTools.convertUserStatus({status:b,userId:""});c.onSuccess(d)},function(a){c.onError(a)})},b.prototype.setUserStatus=function(a,b){this.addon.setUserStatus(a,function(){b.onSuccess(!0)},function(a){b.onError(a)})},b.prototype.subscribeUserStatus=function(a,b){this.addon.subscribeUserStatus(a,function(){b&&b.onSuccess(!0)},function(a){b&&b.onError(a)})},b.prototype.setUserStatusListener=function(b,c){this.addon.setOnReceiveStatusListener(function(b,c){var d=a.RongInnerTools.convertUserStatus({userId:b,status:c});a.RongIMClient.userStatusObserver.notify({key:b,entity:d})});var d=b.userIds||[];d.length&&a.RongIMClient._dataAccessProvider.subscribeUserStatus(d)},b.prototype.getUnreadMentionedMessages=function(a,b){for(var c=this,d=JSON.parse(c.addon.getUnreadMentionedMessages(a,b)).list,e=0,f=d.length;e<f;e++){var g=JSON.parse(d[e].obj);g.content=JSON.parse(g.content),d[e]=g}return d},b.prototype.hasRemoteUnreadMessages=function(a,b){b.onSuccess(!1)},b.prototype.sendRecallMessage=function(a,b){var c=this;c.addon.recallMessage("RC:RcCmd",JSON.stringify(a),a.push||"",function(){a.objectName="RC:RcCmd",b.onSuccess(c.buildMessage(JSON.stringify(a)))},function(a){b.onError(a)})},b.prototype.updateMessage=function(a,b){},b.prototype.updateMessages=function(a,b,c,d,e){},b.prototype.reconnect=function(b){var c=a.Bridge._client.token;this.disconnect(),this.connect(c,b)},b.prototype.sendReceiptResponse=function(a,b,c){},b.prototype.setMessageExtra=function(a,b,c){},b.prototype.addMemberToDiscussion=function(a,b,c){},b.prototype.createDiscussion=function(a,b,c){},b.prototype.getDiscussion=function(a,b){},b.prototype.quitDiscussion=function(a,b){},b.prototype.removeMemberFromDiscussion=function(a,b,c){},b.prototype.setDiscussionInviteStatus=function(a,b,c){},b.prototype.setDiscussionName=function(a,b,c){},b.prototype.setEnvironment=function(a){this.addon.setEnvironment(a)},b.prototype.addConversation=function(a,b){},b.prototype.updateConversation=function(a){return null},b.prototype.getConversationNotificationStatus=function(b,c){var d=b.conversationType,e=b.targetId,f=a.RongIMClient._memoryStore.notification,g=d+"_"+e,h=f[g];if("number"==typeof h)return void c.onSuccess(h);this.addon.getConversationNotificationStatus(d,e,function(a){f[g]=a,c.onSuccess(a)},function(a){c.onError(a)})},b.prototype.setConversationNotificationStatus=function(b,c){var d=b.conversationType,e=b.targetId,f=b.status;a.RongIMClient._memoryStore.notification[d+"_"+e]=f;var g=!!f;this.addon.setConversationNotificationStatus(d,e,g,function(){c.onSuccess(f)},function(a){c.onError(a)})},b.prototype.getCurrentConnectionStatus=function(){return this.addon.getConnectionStatus()},b.prototype.getAgoraDynamicKey=function(a,b,c){this.addon.getVoIPKey(a,b,"",function(a){c.onSuccess(a)},function(a){c.onError(a)})},b.prototype.getPublicServiceProfile=function(b,c,d){var e=a.RongIMClient._memoryStore.publicServiceMap.get(b,c);d.onSuccess(e)},b.prototype.setDeviceInfo=function(a){var b=a.id||"";this.addon.setDeviceId(b)},b.prototype.getRemotePublicServiceList=function(b,c){var d=[],e=this.addon.getAccounts(),f=function(a){var b={hasFollowed:!1,isGlobal:!1,menu:null};if(!a.obj){var c={error:a};throw new Error("鍏紬璐﹀彿鏁版嵁鏍煎紡閿欒: "+JSON.stringify(c))}var d=JSON.parse(a.obj),e={aType:"conversationType",aId:"publicServiceId",aName:"introduction",aUri:"portraitUri",follow:"hasFollowed",isGlobal:"isGlobal"};for(var f in d){var g=d[f];if("aExtra"==f){var h=JSON.parse(g);b.hasFollowed=h.follow,b.isGlobal=h.isGlobal,b.menu=h.menu}var i=e[f];i&&(b[i]=g)}return b};if(e){e=JSON.parse(e);for(var g=e.list,h=0,i=g.length;h<i;h++){var j=g[h];j=f(j),d.push(j)}}d.length>0&&(a.RongIMClient._memoryStore.publicServiceMap.publicServiceList.length=0,a.RongIMClient._memoryStore.publicServiceMap.publicServiceList=d),b.onSuccess(a.RongIMClient._memoryStore.publicServiceMap.publicServiceList)},b.prototype.buildMessage=function(b){var c=new a.Message,d=JSON.parse(b);c.conversationType=d.conversationType,c.targetId=d.targetId,c.messageDirection=d.direction,c.senderUserId=d.senderUserId,d.direction==a.MessageDirection.RECEIVE?c.receivedStatus=d.status:d.direction==a.MessageDirection.SEND&&(c.sentStatus=d.status),c.sentTime=d.sentTime,c.objectName=d.objectName;var e=d.content?JSON.parse(d.content):d.content,f=typeMapping[d.objectName]||registerMessageTypeMapping[d.objectName];return e&&(e.messageName=f),c.content=e,c.messageId=d.messageId,c.messageUId=d.messageUid,c.messageType=f,c},b.prototype.buildConversation=function(b){if(""===b)return null;var c=new a.Conversation,d=JSON.parse(b),e=d.lastestMsg?this.buildMessage(d.lastestMsg):{};c.conversationTitle=d.title,c.conversationType=d.conversationType,c.draft=d.draft,c.isTop=d.isTop,c.isHidden=d.isHidden,e.conversationType=d.conversationType,e.targetId=d.targetId,c.latestMessage=e,c.latestMessageId=e.messageId,c.latestMessage.messageType=typeMapping[e.objectName]||registerMessageTypeMapping[e.objectName],c.objectName=e.objectName,c.receivedStatus=a.ReceivedStatus.READ,c.sentTime=e.sentTime,c.senderUserId=e.senderUserId,c.sentStatus=e.status,c.targetId=d.targetId,c.unreadMessageCount=d.unreadCount,c.hasUnreadMention=d.m_hasUnreadMention;var f=this.getUnreadMentionedMessages(d.conversationType,d.targetId);if(f.length>0){var g=f.pop();c.mentionedMsg={uid:g.messageUid,time:g.sentTime,mentionedInfo:g.content.mentionedInfo,sendUserId:g.senderUserId}}return c},b.prototype.getRTCUserInfoList=function(a,b){this.addon.getRTCUsers(a.id,1,function(a){b.onSuccess(a)},function(a){b.onError(a)})},b.prototype.getRTCRoomInfo=function(a,b){this.addon.getRTCResouce(a.id,2,function(a){b.onSuccess(JSON.parse(a))},function(a){b.onError(a)})},b.prototype.joinRTCRoom=function(b,c){var d=b.id,e=b.type||0;this.addon.joinRTCRoom(d,e,function(b,d){var e=JSON.parse(b),f={},g=e.list;a.RongUtil.forEach(g,function(b){var c=b.id,d={};a.RongUtil.forEach(b.data,function(a){var b=a.key,c=a.value;d[b]=c}),f[c]=d}),c.onSuccess({users:f,token:d})},function(a){c.onError(a)})},b.prototype.quitRTCRoom=function(a,b){this.addon.exitRTCRoom(a.id,function(){b.onSuccess(!0)},function(a){b.onError(a)})},b.prototype.RTCPing=function(a,b){this.addon.sendRTCPing(a.id,function(){b.onSuccess(!0)},function(a){b.onError(a)})},b.prototype.setRTCData=function(b,c,d,e,f,g,h){var i=this,j={room_inner:function(b,c,d,e,f,g,h){i.addon.setRTCInnerData(b,a.RTCAPIType.ROOM,c,d,e,f,g,h)},room_outer:function(b,c,d,e,f,g,h){i.addon.setRTCOuterData(b,a.RTCAPIType.ROOM,c,d,e,f,g,h)},user_inner:function(b,c,d,e,f,g,h){i.addon.setRTCInnerData(b,a.RTCAPIType.PERSON,c,d,e,f,g,h)},user_outer:function(b,c,d,e,f,g,h){i.addon.setRTCOuterData(b,a.RTCAPIType.PERSON,c,d,e,f,g,h)}},k=a.RTCAPIType.PERSON==f?"user":"room",l=e?"inner":"outer",m="{type}_{direction}",n=a.RongUtil.tplEngine(m,{type:k,direction:l}),o=j[n];if(o){h=h||{};var n=h.name;o(b,c,d,n,h.content,function(){g.onSuccess(!0)},function(a){g.onError(a)})}},b.prototype.setRTCRoomData=function(b,c,d,e,f,g){this.setRTCData(b,c,d,e,a.RTCAPIType.ROOM,f,g)},b.prototype.getRTCData=function(b,c,d,e,f){var g=this,h={room_inner:function(b,c,d,e){g.addon.getRTCInnerData(b,a.RTCAPIType.ROOM,c,d,e)},room_outer:function(b,c,d,e){g.addon.getRTCOuterData(b,a.RTCAPIType.ROOM,c,d,e)}},i=a.RTCAPIType.PERSON==e?"user":"room",j=d?"inner":"outer",k="{type}_{direction}",l=a.RongUtil.tplEngine(k,{type:i,direction:j}),m=h[l];m&&m(b,c,function(b){var c=JSON.parse(b),d={},e=c.list;a.RongUtil.forEach(e,function(a){d[a.key]=a.value}),f.onSuccess(d)},function(a){f.onError(a)})},b.prototype.getRTCRoomData=function(b,c,d,e,f){this.getRTCData(b,c,d,a.RTCAPIType.ROOM,e)},b.prototype.removeRTCData=function(b,c,d,e,f,g){var h=this,i={room_inner:function(b,c,d,e,f,g){h.addon.deleteRTCInnerData(b,a.RTCAPIType.ROOM,c,d,e,f,g)},room_outer:function(b,c,d,e,f,g){h.addon.deleteRTCOuterData(b,a.RTCAPIType.ROOM,c,d,e,f,g)},user_inner:function(a,b,c,d,e,f){},user_outer:function(a,b,c,d,e,f){}},j=a.RTCAPIType.PERSON==e?"user":"room",k=d?"inner":"outer",l="{type}_{direction}",m=a.RongUtil.tplEngine(l,{type:j,direction:k}),n=i[m];if(n){g=g||{};var m=g.name||"";n(b,c,m,g.content||"",function(){f.onSuccess(!0)},function(a){f.onError(a)})}},b.prototype.removeRTCRoomData=function(b,c,d,e,f){this.removeRTCData(b,c,d,a.RTCAPIType.ROOM,e)},b.prototype.getNavi=function(){return this.addon.getNav()[this.userId]},b.prototype.setRTCOutData=function(a,b,c,d,e){},b.prototype.getRTCOutData=function(a,b,c){},b.prototype.setRTCUserInfo=function(a,b,c){},b.prototype.removeRTCUserInfo=function(a,b,c){},b.prototype.getRTCUserList=function(a,b){},b.prototype.setRTCRoomInfo=function(a,b,c){},b.prototype.removeRTCRoomInfo=function(a,b,c){},b.prototype.setRTCUserData=function(b,c,d,e,f,g){this.setRTCData(b,c,d,e,a.RTCAPIType.PERSON,f,g)},b.prototype.getRTCUserData=function(a,b,c,d,e){},b.prototype.removeRTCUserData=function(a,b,c,d,e){},b.prototype.getRTCToken=function(a,b){},b.prototype.setRTCState=function(a,b,c){},b}();a.VCDataProvider=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function a(){this._memeoryStore={},this.prefix="rong_"}return a.prototype.setItem=function(a,b){this._memeoryStore[a]=decodeURIComponent(b)},a.prototype.getItem=function(a){return this._memeoryStore[a]},a.prototype.removeItem=function(a){this.getItem(a)&&delete this._memeoryStore[a]},a.prototype.getItemKey=function(a){var b=this,c=null,d=new RegExp(a+"\\w+");for(var e in b._memeoryStore){e.match(d)&&(c=e)}return c},a.prototype.getItemKeyList=function(a){var b=this.prefix,c=this,d=[],e=new RegExp(a+"\\w+");for(var f in c._memeoryStore){f.match(e)&&(f=f.substring(b.length),d.push(f))}return d},a.prototype.clearItem=function(){var a=this;for(var b in a._memeoryStore)delete a._memeoryStore[b]},a.prototype.onOutOfQuota=function(){return 4096},a}();a.MemeoryProvider=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(){this.prefix="rong_",this._host="";var b=new Date,c=b.getMonth()+1,d=b.getFullYear()+"/"+(1==c.toString().length?"0"+c:c)+"/"+b.getDate(),e=new Date(d).getTime();for(var f in localStorage){if(f.lastIndexOf("RECEIVED")>-1){var g=JSON.parse(localStorage.getItem(f));for(var h in g)e-g[h].dealtime>0&&delete g[h];a.RongUtil.isEmpty(g)?localStorage.removeItem(f):localStorage.setItem(f,JSON.stringify(g))}if(f.lastIndexOf("SENT")>-1){e-JSON.parse(localStorage.getItem(f)).dealtime>0&&localStorage.removeItem(f)}}}return b.prototype.setItem=function(a,b){a&&(-1==a.indexOf(this.prefix)&&(a=this.prefix+a),localStorage.setItem(a,b))},b.prototype.getItem=function(a){return a?(-1==a.indexOf(this.prefix)&&(a=this.prefix+a),localStorage.getItem(a||"")):""},b.prototype.getItemKey=function(a){var b="",c=this.prefix+a;for(var d in localStorage)if(0==d.indexOf(c)){b=d;break}return b},b.prototype.getItemKeyList=function(a){var b=[],c=this.prefix,d=c+a;for(var e in localStorage)0==e.indexOf(d)&&(e=e.substring(c.length),b.push(e));return b},b.prototype.removeItem=function(a){a&&(-1==a.indexOf(this.prefix)&&(a=this.prefix+a),localStorage.removeItem(a.toString()))},b.prototype.clearItem=function(){var a=this;for(var b in localStorage)b.indexOf(a.prefix)>-1&&a.removeItem(b)},b.prototype.onOutOfQuota=function(){return JSON.stringify(localStorage).length},b}();a.LocalStorageProvider=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function a(){this.opersistName="RongIMLib",this.keyManager="RongUserDataKeyManager",this._host="",this.prefix="rong_",this.oPersist=document.createElement("div"),this.oPersist.style.display="none",this.oPersist.style.behavior="url('#default#userData')",document.body.appendChild(this.oPersist),this.oPersist.load(this.opersistName)}return a.prototype.setItem=function(a,b){a&&-1==a.indexOf(this.prefix)&&(a=this.prefix+a),this.oPersist.setAttribute(a,b);var c=this.getItem(this.keyManager);c?-1==c.indexOf(a)&&(c+=","+a):c=a,this.oPersist.setAttribute(this.prefix+this.keyManager,c),this.oPersist.save(this.opersistName)},a.prototype.getItem=function(a){return a&&-1==a.indexOf(this.prefix)&&(a=this.prefix+a),a?this.oPersist.getAttribute(a):a},a.prototype.removeItem=function(a){a&&-1==a.indexOf(this.prefix)&&(a=this.prefix+a),this.oPersist.removeAttribute(a),this.oPersist.save(this.opersistName);for(var b=this.getItem(this.keyManager),c=b&&b.split(",")||[],d=0,e=c.length;d<e;d++)c[d]==a&&c.splice(d,1);this.oPersist.setAttribute(this.prefix+this.keyManager,c.join(",")),this.oPersist.save(this.opersistName)},a.prototype.getItemKey=function(a){var b=null,c=this.getItem(this.keyManager),d=c&&c.split(",")||[],e=this.prefix+a;if(d.length)for(var f=0,g=d.length;f<g;f++)if(d[f]&&0==d[f].indexOf(e)){b=d[f];break}return b},a.prototype.getItemKeyList=function(a){var b=[],c=this.getItem(this.keyManager),d=c&&c.split(",")||[],e=this.prefix,f=e+a;if(d.length)for(var g=0,h=d.length;g<h;g++)if(d[g]&&0==d[g].indexOf(f)){var i=d[g];i=i.substring(e.length),b.push(d[g])}return b},a.prototype.clearItem=function(){var a=this.getItem(this.keyManager),b=[],c=this;if(a&&(b=a.split(",")),b.length){for(var d=0,e=b.length;d<e;d++)b[d]&&c.removeItem(b[d]);c.removeItem(c.keyManager)}},a.prototype.onOutOfQuota=function(){return 10485760},a}();a.UserDataProvider=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){var b=function(){function b(b){if(this.script=document.createElement("script"),this.head=document.getElementsByTagName("head")[0],"WebSocket"in window&&"ArrayBuffer"in window&&3===WebSocket.prototype.CLOSED&&!a.RongIMClient._memoryStore.depend.isPolling){if(a.Transportations._TransportType=a.Socket.WEBSOCKET,!a.RongIMClient.Protobuf){var c=a.RongIMClient._memoryStore.depend.protobuf,d=this.script;d.src=c,this.head.appendChild(d),d.onload=d.onreadystatechange=function(){if(!(this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(d.onload=d.onreadystatechange=null,b&&b(),b))){var c=a.RongIMClient._memoryStore.token,e=a.RongIMClient._memoryStore.callback;c&&a.RongIMClient.connect(c,e)}}}}else a.Transportations._TransportType="xhr-polling",a.RongIMClient.Protobuf=Polling}return b}();a.FeatureDectector=b}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(RongIMLib){var FeaturePatcher=function(){function FeaturePatcher(){}return FeaturePatcher.prototype.patchAll=function(){this.patchJSON(),this.patchForEach()},FeaturePatcher.prototype.patchForEach=function(){Array.forEach||(Array.forEach=function(a,b){for(var c=0;c<a.length;c++)b.call(a,a[c],c,a)})},FeaturePatcher.prototype.patchJSON=function(){window.JSON||(window.JSON=function(){function JSON(){}return JSON.parse=function(sJSON){return eval("("+sJSON+")")},JSON.stringify=function(a){return this.str("",{"":a})},JSON.str=function(a,b){var c,d,e,f,g,h=b[a],i=this;switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(a)),typeof h){case"string":return i.quote(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(g=[],"[object Array]"===Object.prototype.toString.apply(h)){for(f=h.length,c=0;c<f;c+=1)g[c]=i.str(c,h)||"null";return e=0===g.length?"[]":"["+g.join(",")+"]"}for(d in h)Object.prototype.hasOwnProperty.call(h,d)&&(e=i.str(d,h))&&g.push(i.quote(d)+":"+e);return e=0===g.length?"{}":"{"+g.join(",")+"}"}},JSON.quote=function(a){var b=this;return b.rx_escapable.lastIndex=0,b.rx_escapable.test(a)?'"'+a.replace(b.rx_escapable,function(a){var c=b.meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'},JSON.rx_escapable=new RegExp('[\\"\\\\"\0--聼颅貈-貏軓釣瘁灥鈥�-鈥廫u2028-鈥仩-鈦痋ufeff锟�-锟縘',"g"),JSON.meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"''":"\\''","\\":"\\\\"},JSON}())},FeaturePatcher}();RongIMLib.FeaturePatcher=FeaturePatcher}(RongIMLib||(RongIMLib={}));var RongIMLib;!function(a){!function(){function a(){}a.prototype.load=function(a,b,c){var d=document.createElement("script");d.async=!0,b&&(d.addEventListener?d.addEventListener("load",function(a){var c=a.target||a.srcElement;b(c.src)},!1):d.readyState&&(d.onreadystatechange=function(a){var c=a.srcElement;b(c.src)})),c&&(d.onerror=function(a){var b=a.target||a.srcElement;c(b.src)}),(document.head||document.getElementsByTagName("head")[0]).appendChild(d),d.src=a}}()}(RongIMLib||(RongIMLib={}));var RongIMLib;return function(a){function b(){var a=[],b=!1;this.produce=function(b){a.push(b)},this.consume=function(c,d){if(!b){b=!0;var e=function(){var f=a.shift();if(i.isUndefined(f))return b=!1,void(d&&d());c(f,e)};e()}},this.isExeuting=function(){return b}}var c=function(){function a(){this.publicServiceList=[]}return a.prototype.get=function(a,b){for(var c=0,d=this.publicServiceList.length;c<d;c++)if(this.publicServiceList[c].conversationType==a&&b==this.publicServiceList[c].publicServiceId)return this.publicServiceList[c]},a.prototype.add=function(a){for(var b=!0,c=this,d=0,e=this.publicServiceList.length;d<e;d++)if(c.publicServiceList[d].conversationType==a.conversationType&&a.publicServiceId==c.publicServiceList[d].publicServiceId){this.publicServiceList.unshift(this.publicServiceList.splice(d,1)[0]),b=!1;break}b&&this.publicServiceList.unshift(a)},a.prototype.replace=function(a){for(var b=this,c=0,d=this.publicServiceList.length;c<d;c++)if(b.publicServiceList[c].conversationType==a.conversationType&&a.publicServiceId==b.publicServiceList[c].publicServiceId){b.publicServiceList.splice(c,1,a);break}},a.prototype.remove=function(a,b){for(var c=this,d=0,e=this.publicServiceList.length;d<e;d++)if(c.publicServiceList[d].conversationType==a&&b==c.publicServiceList[d].publicServiceId){this.publicServiceList.splice(d,1);break}},a}();a.PublicServiceMap=c;var d=function(){function a(){this.conversationList=[]}return a.prototype.get=function(a,b){for(var c=0,d=this.conversationList.length;c<d;c++)if(this.conversationList[c].conversationType==a&&this.conversationList[c].targetId==b)return this.conversationList[c];return null},a.prototype.add=function(a){for(var b=!0,c=0,d=this.conversationList.length;c<d;c++)if(this.conversationList[c].conversationType===a.conversationType&&this.conversationList[c].targetId===a.targetId){this.conversationList.unshift(this.conversationList.splice(c,1)[0]),b=!1;break}b&&this.conversationList.unshift(a)},a.prototype.replace=function(a){for(var b=0,c=this.conversationList.length;b<c;b++)if(this.conversationList[b].conversationType===a.conversationType&&this.conversationList[b].targetId===a.targetId){this.conversationList.splice(b,1,a);break}},a.prototype.remove=function(a){for(var b=0,c=this.conversationList.length;b<c;b++)if(this.conversationList[b].conversationType===a.conversationType&&this.conversationList[b].targetId===a.targetId){this.conversationList.splice(b,1);break}},a}();a.ConversationMap=d;var e=function(){function b(){}return b.getInstance=function(){return b._instance||(b._instance=new b),b._instance},b.prototype.logger=function(b,c,d){a.RongIMClient.logger({code:b,funcName:c,msg:d})},b.prototype.check=function(b,c,d,e){if(a.RongIMClient._dataAccessProvider||d){for(var f=0,g=e.length;f<g;f++)if(!new RegExp(this.getType(e[f])).test(b[f])){var h="绗�"+(f+1)+"涓弬鏁伴敊璇�, 閿欒绫诲瀷锛�"+this.getType(e[f])+" ["+b[f]+"] -> 浣嶇疆:"+c;this.logger("-3",c,h)}}else{var h="璇ュ弬鏁颁笉姝ｇ‘鎴栧皻鏈疄渚嬪寲RongIMClient -> 浣嶇疆:"+c;this.logger("-4",c,h)}},b.prototype.getType=function(a){var b=Object.prototype.toString.call(a).toLowerCase();return b.slice(8,b.length-1)},b.prototype.checkCookieDisable=function(){document.cookie="checkCookie=1";var a=document.cookie.match(new RegExp("(^| )checkCookie=([^;]*)(;|$)")),b=!1;return a||(b=!0),document.cookie="checkCookie=1;expires=Thu, 01-Jan-1970 00:00:01 GMT",b},b}();a.CheckParam=e;var f=function(){function a(a){this.map={},this.keys=[],this.limit=a||10}return a.prototype.set=function(a,b){this.map[a]=b},a.prototype.get=function(a){return this.map[a]||0},a.prototype.remove=function(a){delete this.map[a]},a}();a.LimitableMap=f;var g=function(){function a(){this.cache={}}return a.prototype.set=function(a,b){this.cache[a]=b},a.prototype.get=function(a){return this.cache[a]},a.prototype.remove=function(a){delete this.cache[a]},a}();a.MemoryCache=g;var h=function(){function a(a){var b=this;b.xmlhttp=null,b.options=a;var c="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;"undefined"!=typeof XMLHttpRequest&&c?b.xmlhttp=new XMLHttpRequest:"undefined"!=typeof XDomainRequest?b.xmlhttp=new XDomainRequest:b.xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}return a.prototype.send=function(a){var b=this;b.options.url||(b.options.url="http://upload.qiniu.com/putb64/-1"),b.xmlhttp.onreadystatechange=function(){4==b.xmlhttp.readyState&&(b.options.type?a():a(JSON.parse(b.xmlhttp.responseText.replace(/'/g,'"'))))},b.xmlhttp.open("POST",b.options.url,!0),b.xmlhttp.withCredentials=!1,"setRequestHeader"in b.xmlhttp&&(b.options.type?b.xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8"):(b.xmlhttp.setRequestHeader("Content-type","application/octet-stream"),b.xmlhttp.setRequestHeader("Authorization","UpToken "+b.options.token))),b.xmlhttp.send(b.options.type?"appKey="+b.options.appKey+"&deviceId="+b.options.deviceId+"&timestamp="+b.options.timestamp+"&deviceInfo="+b.options.deviceInfo+"&privateInfo="+JSON.stringify(b.options.privateInfo):b.options.base64)},a}();a.RongAjax=h;var i=function(){function c(){}return c.noop=function(){},c.isEmpty=function(a){var b=!0;return c.isObject(a)&&c.forEach(a,function(){b=!1}),c.isString(a)||c.isArray(a)?0===a.length:c.isNumber(a)?0===a:b},c.isLengthLimit=function(a,b,c){c=c||0;var d=a.length;return d<=b&&d>=c},c.MD5=function(a,b,c){return md5(a,b,c)},c.isObject=function(a){return"[object Object]"==Object.prototype.toString.call(a)},c.isArray=function(a){return"[object Array]"==Object.prototype.toString.call(a)},c.isString=function(a){return"[object String]"==Object.prototype.toString.call(a)},c.isFunction=function(a){return"[object Function]"==Object.prototype.toString.call(a)},c.isUndefined=function(a){return"[object Undefined]"==Object.prototype.toString.call(a)},c.isEqual=function(a,b){return a===b},c.indexOf=function(a,b){for(var c=-1,d=0;d<a.length;d++)if(b===a[d]){c=d;break}return c},c.stringFormat=function(a,b){for(var c=0,d=b.length;c<d;c++){var e=b[c],f=new RegExp("\\{"+c+"\\}","g");a=a.replace(f,e)}return a},c.tplEngine=function(a,b,c){function d(b){return a.replace(c||/{([^}]+)}/g,function(a,c){return"\\"==a.charAt(0)?a.slice(1):void 0!=b[c]?b[c]:"{"+c+"}"})}"[object Array]"!==Object.prototype.toString.call(b)&&(b=[b]);for(var e=[],f=0,g=b.length;f<g;f++)e.push(d(b[f]));return e.join("")},c.forEach=function(a,b){b=b||c.noop;var d=function(){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c,a)},e=function(){for(var c=0,d=a.length;c<d;c++)b(a[c],c)};c.isObject(a)&&d(),c.isArray(a)&&e()},c.extend=function(a,b,d,e){return c.forEach(a,function(a,c){var d=c in b;e&&d&&(b[c]=a),d||(b[c]=a)}),b},c.createXHR=function(){var a={XMLHttpRequest:function(){return new XMLHttpRequest},XDomainRequest:function(){return new XDomainRequest},ActiveXObject:function(){return new ActiveXObject("Microsoft.XMLHTTP")}},b="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,c="function"==typeof XDomainRequest;return a[b?"XMLHttpRequest":c?"XDomainRequest":"ActiveXObject"]()},c.request=function(a){var b=a.url,d=a.success,e=a.error||c.noop,f=a.method||"GET",g=c.createXHR();return"onload"in g?(g.onload=function(){g.onload=c.noop,d(g.responseText)},g.onerror=function(){e(g.status,g.responseText),g.onerror=c.noop}):g.onreadystatechange=function(){if(4==g.readyState){var a=g.status;200==a?d(g.responseText):e(a,g.responseText)}},g.open(f,b,!0),g.send(null),g},c.getLocalProtocol=function(){return"object"!=typeof location||"https:"===location.protocol?"https://":"http://"},c.formatProtoclPath=function(a){var b=a.path,d=a.protocol,e=a.tmpl||"{0}{1}",f=a.sub,g="://",h=b.indexOf(g);(h>-1&&(h+=g.length,b=b.substring(h)),f)&&((h=b.indexOf("/"))>-1&&(b=b.substr(0,h)));return c.stringFormat(e,[d,b])},c.getValidNavi=function(b){var d=a.RongIMClient.HttpProtocol,e="://",f=b.indexOf(e),g=f>-1,h=b;if(!g){h=a.RongIMClient.getProtocol().protocol+b}var i=c.getUrlProtocol(h),j=c.getLocalProtocol();return i===d.http&&"https://"===j&&(h=c.formatProtoclPath({path:h,tmpl:"{0}{1}",protocol:d.https,sub:!0})),h},c.getUrlProtocol=function(a){var b="://",c=a.indexOf(b);return c>-1?a.substring(0,c+b.length):"https://"},c.getUrlHost=function(a){var b=c.indexOf(a,"/");return a.substring(0,b)},c.supportLocalStorage=function(){var a=!1;if("object"==typeof localStorage)try{var b="RC_TMP_KEY",c="RC_TMP_VAL";localStorage.setItem(b,c);localStorage.getItem(b)==c&&(a=!0)}catch(d){console.log("localStorage is disabled.")}return a},c.rename=function(a,b){var d=c.isObject(a);d&&(a=[a]),a=JSON.parse(JSON.stringify(a));var e=function(a,c,d){delete d[c],c=b[c],d[c]=a};return c.forEach(a,function(a){c.forEach(a,function(a,d,f){(d in b?e:c.noop)(a,d,f)})}),d?a[0]:a},c.some=function(a,b){for(var c=!1,d=0,e=a.length;d<e;d++)if(b(a[d])){c=!0;break}return c},c.keys=function(a){var b=[];for(var c in a)b.push(c);return b},c.isNumber=function(a){return"[object Number]"==Object.prototype.toString.call(a)},c.getTimestamp=function(){return(new Date).getTime()},c.isSupportRequestHeaders=function(){var a=navigator.userAgent;if(window.ActiveXObject||"ActiveXObject"in window)return new RegExp("MSIE (\\d+\\.\\d+);").test(a),parseFloat(RegExp.$1)>9;return!0},c.hasValidWsUrl=function(a){try{a=JSON.parse(a)}catch(b){return!1}return c.getValidWsUrlList(a).length>0},c.getValidWsUrlList=function(b){var d=a.RongIMClient.invalidWsUrls,e=[];return c.forEach(b,function(a){-1===c.indexOf(d,a)&&e.push(a)}),e},c.getByteLength=function(a,b){b=b||"utf-8";var c,d=0;if("utf-16"===b)for(var e=0,f=a.length;e<f;e++)c=a.charCodeAt(e),d+=c<=65535?2:4;else for(var e=0,f=a.length;e<f;e++)c=a.charCodeAt(e),d+=c<127?1:c<=2047?2:c<=65535?3:4;return d},c.concat=function(a,b,d){return c.forEach(b,function(b){d&&-1!==c.indexOf(a,b)||a.push(b)}),a},c.Prosumer=b,c}();a.RongUtil=i;var j=function(){function a(){this.watchers={}}
return a.prototype.genUId=function(a){return[a,(new Date).getTime()].join("_")},a.prototype.watch=function(a){var b=this,c=a.key,d=a.multiple;c=i.isArray(c)?c:[c];var e=a.func;i.forEach(c,function(a){a=d?b.genUId(a):a,b.watchers[a]=e})},a.prototype.notify=function(a){var b=this,c=a.key,d=a.entity;for(var e in b.watchers){0==e.indexOf(c)&&b.watchers[e](d)}},a.prototype.remove=function(){},a}();a.RongObserver=j;var k=function(){function a(){this.observers=[]}return a.prototype.add=function(a,b){b&&(this.observers=[a]),i.isFunction(a)&&this.observers.push(a)},a.prototype.emit=function(a){i.forEach(this.observers,function(b){b(a)})},a.prototype.clear=function(){this.observers=[]},a.prototype.checkIndexOutBound=function(a,b){return a>-1&&a<b},a.prototype.removeAt=function(a){this.checkIndexOutBound(a,this.observers.length)&&this.observers.splice(a,1)},a.prototype.remove=function(a){var b=this;if(!a)return void b.clear();if(i.isFunction(a))for(var c=b.observers,d=c.length-1;d>=0;d--)a===c[d]&&b.removeAt(d)},a}();a.Observer=k;var l=function(){function a(a){this.timeout=0,this.timers=[],this.timeout=a.timeout}return a.prototype.resume=function(a){var b=setTimeout(a,this.timeout);this.timers.push(b)},a.prototype.pause=function(){i.forEach(this.timers,function(a){clearTimeout(a)})},a}();a.Timer=l;var m=function(){function a(a){this.items=[],this.index=0,this.onwheel=function(){},this.items=a.items,this.onwheel=a.onwheel}return a.prototype.get=function(){var a=this,b=a.items,c=a.index,d=c>=b.length;return d&&a.onwheel(),d?0:c},a.prototype.add=function(){this.index+=1},a}();a.IndexTools=m;var n=function(){function a(){}return a.getUId=function(a){return md5(a).slice(8,16)},a}();a.InnerUtil=n}(RongIMLib||(RongIMLib={})),RongIMLib});

  </script>
  <script>
    function speed(config, callbacks) {
      RongIMClient._instance = null;
      var appKey = config.appKey;
      var options = {
        navi: config.navi,
        isNotPullMsg: true
      }
      var startConnectTime = 0, endConnectTime = 0;
      var startReceiveTime = 0, endReceiveTime = 0;
      var startSendTime = 0, endSendTime = 0;
      var messageUId = '';

      var sendMessage = function (targetId) {
        startSendTime = Date.now();
        var content = { content: 'test' }
        var msg = new RongIMLib.TextMessage(content);
        var conversationType = RongIMLib.ConversationType.PRIVATE;
        RongIMClient.getInstance().sendMessage(conversationType, targetId, msg, {
          onSuccess: function (message) {
            messageUId = message.messageUId;
            endSendTime = Date.now();
            callbacks.onSent(endSendTime - startSendTime, config);
            startReceiveTime = endSendTime;
          },
          onError: function () { }
        });
      };

      RongIMLib.RongIMClient.init(appKey, null, options);
      RongIMClient.setConnectionStatusListener({
        onChanged: function (status) { }
      });
      var clear = function () {
        RongIMClient.getInstance().logout();
      };
      RongIMClient.setOnReceiveMessageListener({
        onReceived: function (message) {
          if (message.messageUId == messageUId) {
            messageUId = '';
            endReceiveTime = Date.now();
            callbacks.onMessaged(endReceiveTime - startReceiveTime, config);
            clear();
          }
        }
      });

      startConnectTime = Date.now();
      var token = config.token;
      RongIMClient.connect(token, {
        onSuccess: function (userId) {
          endConnectTime = Date.now();
          callbacks.onConnected(endConnectTime - startConnectTime, config);
          sendMessage(userId)
        }
      });
    }
    function go(config, callbacks) {
      var connectTimer = setTimeout(function () {
        var isTimeout = true;
        callbacks.onConnected(0, config, isTimeout);
      }, 5000);
      var sendTimer = setTimeout(function () {
        var isTimeout = true;
        callbacks.onSent(0, config, isTimeout);
      }, 5050);
      var messageTimer = setTimeout(function () {
        var isTimeout = true;
        callbacks.onMessaged(0, config, isTimeout);
        callbacks.onCompleted();
      }, 5100);

      speed(config, {
        onConnected: function (time) {
          clearTimeout(connectTimer);
          callbacks.onConnected(time, config);
        },
        onSent: function (time) {
          clearTimeout(sendTimer);
          callbacks.onSent(time, config);
        },
        onMessaged: function (time) {
          clearTimeout(messageTimer);
          callbacks.onMessaged(time, config);
          callbacks.onCompleted(config);
        }
      });
    }

    var rcSpeed = new Vue({
      el: '#app',
      data: {
        sources: [{
          name: '请求耗时测试（ 北京数据中心 ）',
          appKey: '8luwapkvucoil',
          navi: 'nav.cn.ronghub.com',
          token: 'fYbNHUe9nftpe3yII6ts1m20V27XsDF2Dx+bgnMVAZiaam4r9aZv9eUaPaNR4Lmpip3KnMufnWAak2QeM9L6Rw9TIq6kcYNI',
          speeds:
            [
              { name: '连接服务', time: 0, width: 0, type: 'connect', isTimeout: false },
              { name: '发送消息', time: 0, width: 0, type: 'send', isTimeout: false },
              { name: '接收消息', time: 0, width: 0, type: 'message', isTimeout: false },
            ]
        }, {
          name: '请求耗时测试（ 新加坡数据中心 ）',
          appKey: '8w7jv4qb8340y',
          navi: 'navsg01.cn.ronghub.com',
          token: '45qN8Ek+1necsOSo1vzsbJncmJmI9o6M7yQp+DkBv+Cx2kiQvLIDMovVFPgvIwkSo4NewoE3rK8X5Eyjh2sW3y59eo8tHVSM',
          speeds:
            [
              { name: '连接服务', time: 0, width: 0, type: 'connect', isTimeout: false },
              { name: '发送消息', time: 0, width: 0, type: 'send', isTimeout: false },
              { name: '接收消息', time: 0, width: 0, type: 'message', isTimeout: false },
            ]
        }]
      },
      mounted: function () {
        start(this);
      }
    });

    function getSpeed(context, appKey, type) {
      var sources = context.sources;
      for (var i = 0; i < sources.length; i++) {
        var source = sources[i];
        if (source.appKey == appKey) {
          var speeds = source.speeds;
          for (var j = 0; j < speeds.length; j++) {
            var speed = speeds[j];
            if (speed.type == type) {
              return speed;
            }
          }
        }
      }
    }
    function getWidth(time, max) {
      return time / max * 0.7 * 100;
    }
    function getMax(list) {
      return list.sort(function (a, b) {
        return b.time - a.time
      })[0];
    }
    function update(context, list) {
      var max = getMax(list);
      var maxTime = max.time + 1000;

      for (var i = 0; i < list.length; i++) {
        var item = list[i];
        var config = item.config;
        var time = item.time;
        var type = item.type;
        var isTimeout = item.isTimeout;

        var speed = getSpeed(context, config.appKey, type);
        var width = getWidth(time, maxTime);

        speed.time = (time / 1000).toFixed(2);
        speed.width = width;
        speed.isTimeout = isTimeout;

      }

    }
    function start(context) {
      var sources = context.sources;
      var index = 0;
      var source = sources[0];
      var list = [];
      var callbacks = {
        onConnected: function (time, config, isTimeout) {
          list.push({ config: config, time: time, type: 'connect', isTimeout: isTimeout })
        },
        onSent: function (time, config, isTimeout) {
          list.push({ config: config, time: time, type: 'send', isTimeout: isTimeout })
        },
        onMessaged: function (time, config, isTimeout) {
          list.push({ config: config, time: time, type: 'message', isTimeout: isTimeout })
        },
        onCompleted: function (config, timeout) {
          update(context, list);
          list = [];
          index += 1;
          if (index >= sources.length) {
            return console.log('测速完成');
          }
          setTimeout(function () {
            go(sources[index], callbacks);
          }, 200)
        }
      };
      go(source, callbacks);
    }
  </script>
</body>

</html>