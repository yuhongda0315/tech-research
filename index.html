<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Video</title>
</head>
<body>
	
	<input type="file" id="file">
	<video autoplay id="video" controls height="200"></video>
	<hr>
	<img id = "image" width="400">
	<script>
		var node = document.getElementById('file');
		var video = document.getElementById('video');
		var image = document.getElementById('image');

		video.onloadedmetadata = function(){
		}
		node.onchange = function(){
			var url = URL.createObjectURL(node.files[0]);
			video.src = url;
			getImage(url).then((data) => {
				image.src=data;
			})
		}

		function getImage(url) {
			return new Promise(function (resolve, reject) {
		 	  var dataURL = '';
				video.setAttribute('src', url);
				video.setAttribute('width', 400);
				video.setAttribute('height', 240);
				video.addEventListener('loadeddata', function () {
						var canvas = document.createElement("canvas");
						canvas.width = video.width;;
						canvas.height = video.height;
						canvas.getContext("2d").drawImage(video, 0, 0, width, height);
						dataURL = canvas.toDataURL('image/jpeg');
						resolve(dataURL);
				});
			})
    }
	</script>
</body>
</html>